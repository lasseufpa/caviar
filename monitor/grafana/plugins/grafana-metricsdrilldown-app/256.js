/*! For license information please see 256.js.LICENSE.txt */
(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[256],{3098:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(9851),a=r(2646),i=r(7623);function s(e,t,r,s="="){if(!t||!r)throw new Error("Need label to add to query.");const l=function(e){const t=n.K3.parse(e),r=[];return t.iterate({enter:({to:t,from:a,type:s})=>{if(s.id===n.Fb){const n=(0,i.u)(e.substring(a,t));return r.push({query:n.query,from:a,to:t}),!1}}}),r}(e);if(!l.length)return e;const u=function(e,t,r){const n=t===1/0?"+Inf":t.toString();return{label:e,op:r,value:n}}(t,r,s);return function(e,t,r){const n=new a.l;let i="",s=0;for(let a=0;a<t.length;a++){const l=t[a],u=a===t.length-1,c=e.substring(s,l.from),d=u?e.substring(l.to):"";o(l.query.labels,r)||l.query.labels.push(r);i+=c+n.renderQuery(l.query)+d,s=l.to}return i}(e,l,u)}function o(e,t){return e.find((e=>e.label===t.label&&e.value===t.value))}},4944:(e,t,r)=>{"use strict";r.d(t,{_N:()=>C,ur:()=>L,bS:()=>k});var n=r(2540),a=r(6089),i=r(5959);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}var c=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function d(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||c(n)&&c(a)))return!1;var n,a;return!0}const h=function(e,t){var r;void 0===t&&(t=d);var n,a=[],i=!1;return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return i&&r===this&&t(s,a)||(n=e.apply(this,s),i=!0,r=this,a=s),n}};var p="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function f(e){cancelAnimationFrame(e.id)}function m(e,t){var r=p();var n={id:requestAnimationFrame((function a(){p()-r>=t?e.call(null):n.id=requestAnimationFrame(a)}))};return n}var g=-1;function v(e){if(void 0===e&&(e=!1),-1===g||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),g=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return g}var b=null;function y(e){if(void 0===e&&(e=!1),null===b||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),a=n.style;return a.width="100px",a.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?b="positive-descending":(t.scrollLeft=1,b=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),b}return b}var O=function(e,t){return e};function w(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,a=e.getItemSize,l=e.getOffsetForIndexAndAlignment,c=e.getStartIndexForOffset,d=e.getStopIndexForStartIndex,p=e.initInstanceProps,g=e.shouldResetStyleCacheOnItemSizeChange,b=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=p(n.props,o(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:o(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=h((function(e,t,r,a){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:a})})),n._callOnScroll=void 0,n._callOnScroll=h((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,i=n.props,s=i.direction,o=i.itemSize,l=i.layout,u=n._getItemStyleCache(g&&o,g&&l,g&&s);if(u.hasOwnProperty(e))t=u[e];else{var c=r(n.props,e,n._instanceProps),d=a(n.props,e,n._instanceProps),h="horizontal"===s||"horizontal"===l,p="rtl"===s,f=h?c:0;u[e]=t={position:"absolute",left:p?void 0:f,right:p?f:void 0,top:h?0:c,height:h?"100%":d,width:h?d:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=h((function(e,t,r){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,a=t.scrollLeft,i=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===a)return null;var t=n.props.direction,s=a;if("rtl"===t)switch(y()){case"negative":s=-a;break;case"positive-descending":s=i-r-a}return s=Math.max(0,Math.min(s,i-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<s?"forward":"backward",scrollOffset:s,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,a=t.scrollHeight,i=t.scrollTop;n.setState((function(e){if(e.scrollOffset===i)return null;var t=Math.max(0,Math.min(i,a-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&f(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=m(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}u(t,e),t.getDerivedStateFromProps=function(e,t){return x(e,t),b(e),null};var w=t.prototype;return w.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},w.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,n=r.itemCount,a=r.layout,i=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var s=0;if(this._outerRef){var o=this._outerRef;s="vertical"===a?o.scrollWidth>o.clientWidth?v():0:o.scrollHeight>o.clientHeight?v():0}this.scrollTo(l(this.props,e,t,i,this._instanceProps,s))},w.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var a=this._outerRef;"horizontal"===t||"horizontal"===n?a.scrollLeft=r:a.scrollTop=r}this._callPropsCallbacks()},w.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,a=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(y()){case"negative":i.scrollLeft=-a;break;case"positive-ascending":i.scrollLeft=a;break;default:var s=i.clientWidth,o=i.scrollWidth;i.scrollLeft=o-s-a}else i.scrollLeft=a;else i.scrollTop=a}this._callPropsCallbacks()},w.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&f(this._resetIsScrollingTimeoutId)},w.render=function(){var e=this.props,t=e.children,r=e.className,a=e.direction,o=e.height,l=e.innerRef,u=e.innerElementType,c=e.innerTagName,d=e.itemCount,h=e.itemData,p=e.itemKey,f=void 0===p?O:p,m=e.layout,g=e.outerElementType,v=e.outerTagName,b=e.style,y=e.useIsScrolling,w=e.width,x=this.state.isScrolling,S="horizontal"===a||"horizontal"===m,_=S?this._onScrollHorizontal:this._onScrollVertical,$=this._getRangeToRender(),E=$[0],P=$[1],R=[];if(d>0)for(var T=E;T<=P;T++)R.push((0,i.createElement)(t,{data:h,key:f(T,h),index:T,isScrolling:y?x:void 0,style:this._getItemStyle(T)}));var C=n(this.props,this._instanceProps);return(0,i.createElement)(g||v||"div",{className:r,onScroll:_,ref:this._outerRefSetter,style:s({position:"relative",height:o,width:w,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},b)},(0,i.createElement)(u||c||"div",{children:R,ref:l,style:{height:S?"100%":C,pointerEvents:x?"none":void 0,width:S?C:"100%"}}))},w._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],a=e[3];this._callOnItemsRendered(t,r,n,a)}if("function"==typeof this.props.onScroll){var i=this.state,s=i.scrollDirection,o=i.scrollOffset,l=i.scrollUpdateWasRequested;this._callOnScroll(s,o,l)}},w._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,a=n.isScrolling,i=n.scrollDirection,s=n.scrollOffset;if(0===t)return[0,0,0,0];var o=c(this.props,s,this._instanceProps),l=d(this.props,o,s,this._instanceProps),u=a&&"backward"!==i?1:Math.max(1,r),h=a&&"forward"!==i?1:Math.max(1,r);return[Math.max(0,o-u),Math.max(0,Math.min(t-1,l+h)),o,l]},t}(i.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var x=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},S=w({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n,a,i){var s=e.direction,o=e.height,l=e.itemCount,u=e.itemSize,c=e.layout,d=e.width,h="horizontal"===s||"horizontal"===c?d:o,p=Math.max(0,l*u-h),f=Math.min(p,t*u),m=Math.max(0,t*u-h+u+i);switch("smart"===r&&(r=n>=m-h&&n<=f+h?"auto":"center"),r){case"start":return f;case"end":return m;case"center":var g=Math.round(m+(f-m)/2);return g<Math.ceil(h/2)?0:g>p+Math.floor(h/2)?p:g;default:return n>=m&&n<=f?n:n<m?m:f}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,a=e.height,i=e.itemCount,s=e.itemSize,o=e.layout,l=e.width,u=t*s,c="horizontal"===n||"horizontal"===o?l:a,d=Math.ceil((c+r-u)/s);return Math.max(0,Math.min(i-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});var _=r(2007),$=r(7139),E=r(2872),P=r(9625);const R="{}",T="__name__",C="40000",k="none";function D(e){let t="";const r=[];for(const n of e)if((n.name===T||n.selected)&&n.values&&n.values.length>0){const e=n.values.filter((e=>e.selected)).map((e=>e.name));e.length>1?r.push(`${(0,E.Nc)(n.name)}=~"${e.map($.Cs).join("|")}"`):1===e.length&&(n.name===T?t=e[0]:r.push(`${(0,E.Nc)(n.name)}="${(0,$.Qn)(e[0])}"`))}const n=[];return""===t||(0,E.Rq)(t)?n.push(t,"{"):(n.push("{",`"${t}"`),r.length>0&&n.push(",")),n.push(r.join(","),"}"),n.join("")}const I=(0,_.stylesFactory)((e=>({wrapper:(0,a.css)({backgroundColor:e.colors.background.secondary,padding:e.spacing(1),width:"100%"}),list:(0,a.css)({marginTop:e.spacing(1),display:"flex",flexWrap:"wrap",maxHeight:"200px",overflow:"auto",alignContent:"flex-start"}),section:(0,a.css)({"& + &":{margin:`${e.spacing(2)} 0`},position:"relative"}),selector:(0,a.css)({fontFamily:e.typography.fontFamilyMonospace,marginBottom:e.spacing(1)}),status:(0,a.css)({padding:e.spacing(.5),color:e.colors.text.secondary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",position:"absolute",width:"50%",right:0,textAlign:"right",opacity:0,[e.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 100ms linear"}}),statusShowing:(0,a.css)({opacity:1}),error:(0,a.css)({color:e.colors.error.main}),valueList:(0,a.css)({marginRight:e.spacing(1),resize:"horizontal"}),valueListWrapper:(0,a.css)({borderLeft:`1px solid ${e.colors.border.medium}`,margin:`${e.spacing(1)} 0`,padding:`${e.spacing(1)} 0 ${e.spacing(1)} ${e.spacing(1)}`}),valueListArea:(0,a.css)({display:"flex",flexWrap:"wrap",marginTop:e.spacing(1)}),valueTitle:(0,a.css)({marginLeft:`-${e.spacing(.5)}`,marginBottom:e.spacing(1)}),validationStatus:(0,a.css)({padding:e.spacing(.5),marginBottom:e.spacing(1),color:e.colors.text.maxContrast,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"})})));class A extends i.Component{constructor(){super(...arguments),this.valueListsRef=i.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=e=>{this.setState({labelSearchTerm:e.target.value})},this.onChangeMetricSearch=e=>{this.setState({metricSearchTerm:e.target.value})},this.onChangeSeriesLimit=e=>{this.setState({seriesLimit:e.target.value.trim()})},this.onChangeValueSearch=e=>{this.setState({valueSearchTerm:e.target.value})},this.onClickRunQuery=()=>{const e=D(this.state.labels);this.props.onChange(e)},this.onClickRunRateQuery=()=>{const e=`rate(${D(this.state.labels)}[$__rate_interval])`;this.props.onChange(e)},this.onClickClear=()=>{this.setState((e=>({labels:e.labels.map((e=>({...e,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0}))),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""}))),this.props.deleteLastUsedLabels(),this.fetchValues(T,R)},this.onClickLabel=(e,t,r)=>{const n=this.state.labels.find((t=>t.name===e));if(!n)return;const a=!n.selected;let i={selected:a};if(n.values&&!a){const e=n.values.map((e=>({...e,selected:!1})));i={...i,facets:0,values:e}}this.setState({labelSearchTerm:""}),this.updateLabelState(e,i,"",(()=>this.doFacettingForLabel(e)))},this.onClickValue=(e,t,r)=>{const n=this.state.labels.find((t=>t.name===e));if(!n||!n.values)return;this.setState({labelSearchTerm:""});const a=n.values.map((e=>({...e,selected:e.name===t?!e.selected:e.selected})));this.updateLabelState(e,{values:a},"",(()=>this.doFacetting(e)))},this.onClickMetric=(e,t,r)=>{const n=this.state.labels.find((t=>t.name===e));if(!n||!n.values)return;this.setState({metricSearchTerm:""});const a=n.values.map((e=>({...e,selected:e.name===t||e.selected?!e.selected:e.selected}))),i=a.some((e=>e.selected));this.updateLabelState(e,{selected:i,values:a},"",(()=>this.doFacetting(e)))},this.onClickValidate=()=>{const e=D(this.state.labels);this.validateSelector(e)},this.doFacetting=e=>{const t=D(this.state.labels);if(t===R){const e=this.state.labels.map((e=>({...e,facets:0,values:void 0,hidden:!1})));this.setState({labels:e},(()=>{this.state.labels.forEach((e=>(e.selected||e.name===T)&&this.fetchValues(e.name,t)))}))}else this.fetchSeries(t,e)}}updateLabelState(e,t,r="",n){this.setState((n=>{const a=n.labels.map((r=>r.name===e?{...r,...t}:r)),i=r?"":n.error;return{labels:a,status:r,error:i,validationStatus:""}}),n)}componentDidMount(){const{languageProvider:e,lastUsedLabels:t}=this.props;if(e){const r=t;e.start(this.props.timeRange).then((()=>{let t=e.getLabelKeys();this.fetchValues(T,R);const n=t.map(((e,t,n)=>({name:e,selected:r.includes(e),loading:!1})));this.setState({labels:n},(()=>{this.state.labels.forEach((e=>{e.selected&&this.fetchValues(e.name,R)}))}))}))}}doFacettingForLabel(e){const t=this.state.labels.find((t=>t.name===e));if(!t)return;const r=this.state.labels.filter((e=>e.selected)).map((e=>e.name));this.props.storeLastUsedLabels(r),t.selected?t.values||this.fetchValues(e,D(this.state.labels)):this.doFacetting()}async fetchValues(e,t){const{languageProvider:r}=this.props;this.updateLabelState(e,{loading:!0},`Fetching values for ${e}`);try{let n=await r.getLabelValues(e);if(t!==D(this.state.labels))return void this.updateLabelState(e,{loading:!1});const a=[],{metricsMetadata:i}=r;for(const t of n){const r={name:t};if(e===T&&i){const e=i[t];e&&(r.details=`(${e.type}) ${e.help}`)}a.push(r)}this.updateLabelState(e,{values:a,loading:!1})}catch(e){console.error(e)}}async fetchSeries(e,t){const{languageProvider:r}=this.props;t&&this.updateLabelState(t,{loading:!0},`Facetting labels for ${e}`);try{const n=await r.fetchSeriesLabels(e,!0,this.state.seriesLimit);if(e!==D(this.state.labels))return void(t&&this.updateLabelState(t,{loading:!1}));if(0===Object.keys(n).length)return void this.setState({error:`Empty results, no matching label for ${e}`});const a=function(e,t,r){return e.map((e=>{var n;const a=t[e.name];if(a){let t;if(e.name===r&&e.values)t=e.values;else{const r=new Set((null==(n=e.values)?void 0:n.filter((e=>e.selected)).map((e=>e.name)))||[]);t=a.map((e=>({name:e,selected:r.has(e)})))}return{...e,loading:!1,values:t,hidden:!a,facets:t.length}}return{...e,loading:!1,hidden:!a,values:void 0,facets:0}}))}(this.state.labels,n,t);this.setState({labels:a,error:""}),t&&this.updateLabelState(t,{loading:!1})}catch(e){console.error(e)}}async validateSelector(e){const{languageProvider:t}=this.props;this.setState({validationStatus:`Validating selector ${e}`,error:""});const r=await t.fetchSeries(e);this.setState({validationStatus:`Selector is valid (${r.length} series found)`})}render(){var e,t,r;const{theme:i}=this.props,{labels:s,labelSearchTerm:o,metricSearchTerm:l,status:u,error:c,validationStatus:d,valueSearchTerm:h}=this.state,p=I(i);if(0===s.length)return(0,n.jsx)("div",{className:p.wrapper,children:(0,n.jsx)(_.LoadingPlaceholder,{text:"Loading labels..."})});let f=s.find((e=>e.name===T));f&&l&&(f={...f,values:null==(e=f.values)?void 0:e.filter((e=>e.selected||e.name.includes(l)))});let m=s.filter((e=>!e.hidden&&e.name!==T));o&&(m=m.filter((e=>e.selected||e.name.includes(o))));let g=m.filter((e=>e.selected&&e.values));h&&(g=g.map((e=>{var t;return{...e,values:null==(t=e.values)?void 0:t.filter((e=>e.selected||e.name.includes(h)))}})));const v=D(this.state.labels),b=v===R,y=(null==(t=null==f?void 0:f.values)?void 0:t.length)||0;return(0,n.jsxs)("div",{className:p.wrapper,children:[(0,n.jsxs)(_.Stack,{gap:3,children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:p.section,children:[(0,n.jsx)(_.Label,{description:"Once a metric is selected only possible labels are shown. Labels are limited by the series limit below.",children:"1. Select a metric"}),(0,n.jsx)("div",{children:(0,n.jsx)(_.Input,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:l,"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.selectMetric})}),(0,n.jsx)(_.Label,{description:"Set to 'none' to remove limit and show all labels for a selected metric. Removing the limit may cause performance issues.",children:"Series limit"}),(0,n.jsx)("div",{children:(0,n.jsx)(_.Input,{onChange:this.onChangeSeriesLimit,"aria-label":"Limit results from series endpoint",value:null!=(r=this.state.seriesLimit)?r:C,"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.seriesLimit})}),(0,n.jsx)("div",{role:"list",className:p.valueListWrapper,"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.metricList,children:(0,n.jsx)(S,{height:Math.min(450,25*y),itemCount:y,itemSize:25,itemKey:e=>f.values[e].name,width:300,className:p.valueList,children:({index:e,style:t})=>{var r;const a=null==(r=null==f?void 0:f.values)?void 0:r[e];return a?(0,n.jsx)("div",{style:t,children:(0,n.jsx)(_.BrowserLabel,{name:f.name,value:null==a?void 0:a.name,title:a.details,active:null==a?void 0:a.selected,onClick:this.onClickMetric,searchTerm:l})}):null}})})]})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:p.section,children:[(0,n.jsx)(_.Label,{description:"Once label values are selected, only possible label combinations are shown.",children:"2. Select labels to search in"}),(0,n.jsx)("div",{children:(0,n.jsx)(_.Input,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:o,"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelNamesFilter})}),(0,n.jsx)("div",{className:p.list,style:{height:120},children:m.map((e=>(0,n.jsx)(_.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets,onClick:this.onClickLabel,searchTerm:o},e.name)))})]}),(0,n.jsxs)("div",{className:p.section,children:[(0,n.jsx)(_.Label,{description:"Use the search field to find values across selected labels.",children:"3. Select (multiple) values for your labels"}),(0,n.jsx)("div",{children:(0,n.jsx)(_.Input,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:h,"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelValuesFilter})}),(0,n.jsx)("div",{className:p.valueListArea,ref:this.valueListsRef,children:g.map((e=>{var t,r,a;return(0,n.jsxs)("div",{role:"list","aria-label":`Values for ${e.name}`,className:p.valueListWrapper,children:[(0,n.jsx)("div",{className:p.valueTitle,children:(0,n.jsx)(_.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets||(null==(t=e.values)?void 0:t.length),onClick:this.onClickLabel})}),(0,n.jsx)(S,{height:Math.min(200,25*((null==(r=e.values)?void 0:r.length)||0)),itemCount:(null==(a=e.values)?void 0:a.length)||0,itemSize:28,itemKey:t=>e.values[t].name,width:200,className:p.valueList,children:({index:t,style:r})=>{var a;const i=null==(a=e.values)?void 0:a[t];return i?(0,n.jsx)("div",{style:r,children:(0,n.jsx)(_.BrowserLabel,{name:e.name,value:null==i?void 0:i.name,active:null==i?void 0:i.selected,onClick:this.onClickValue,searchTerm:h})}):null}})]},e.name)}))})]})]})]}),(0,n.jsxs)("div",{className:p.section,children:[(0,n.jsx)(_.Label,{children:"4. Resulting selector"}),(0,n.jsx)("div",{"aria-label":"selector",className:p.selector,children:v}),d&&(0,n.jsx)("div",{className:p.validationStatus,children:d}),(0,n.jsxs)(_.Stack,{children:[(0,n.jsx)(_.Button,{"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useQuery,"aria-label":"Use selector for query button",disabled:b,onClick:this.onClickRunQuery,children:"Use query"}),(0,n.jsx)(_.Button,{"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useAsRateQuery,"aria-label":"Use selector as metrics button",variant:"secondary",disabled:b,onClick:this.onClickRunRateQuery,children:"Use as rate query"}),(0,n.jsx)(_.Button,{"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.validateSelector,"aria-label":"Validate submit button",variant:"secondary",disabled:b,onClick:this.onClickValidate,children:"Validate selector"}),(0,n.jsx)(_.Button,{"data-testid":P.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.clear,"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear,children:"Clear"}),(0,n.jsx)("div",{className:(0,a.cx)(p.status,(u||c)&&p.statusShowing),children:(0,n.jsx)("span",{className:c?p.error:"",children:c||u})})]})]})]})}}const L=(0,_.withTheme2)(A)},9625:(e,t,r)=>{"use strict";r.d(t,{Tp:()=>d});var n=r(7814);function a(e,t="latest"){return i(e,t.replace(/\-.*/,""))}function i(e,t){const r={};for(const[n,a]of Object.entries(e))s(a)?r[n]=i(a,t):(l(a,n),r[n]=o(a,t));return r}function s(e){if("object"==typeof e){const[t]=Object.keys(e);return!(0,n.valid)(t)}return!1}function o(e,t){let r,a=Object.keys(e).sort(n.compare);if("latest"===t)return e[a[a.length-1]];for(const e of a)(0,n.gte)(t,e)&&(r=e);return r||(r=a[a.length-1]),e[r]}function l(e,t){if(!Object.keys(e).every((e=>(0,n.valid)(e))))throw new Error(`Invalid semver version: '${t}'`)}const u="8.5.0",c={RadioButton:{container:{"10.2.3":"data-testid radio-button"}},Breadcrumbs:{breadcrumb:{"9.4.0":e=>`data-testid ${e} breadcrumb`}},TimePicker:{openButton:{[u]:"data-testid TimePicker Open Button"},overlayContent:{"10.2.3":"data-testid TimePicker Overlay Content"},fromField:{"10.2.3":"data-testid Time Range from field",[u]:"Time Range from field"},toField:{"10.2.3":"data-testid Time Range to field",[u]:"Time Range to field"},applyTimeRange:{[u]:"data-testid TimePicker submit button"},copyTimeRange:{"10.4.0":"data-testid TimePicker copy button"},pasteTimeRange:{"10.4.0":"data-testid TimePicker paste button"},calendar:{label:{"10.2.3":"data-testid Time Range calendar",[u]:"Time Range calendar"},openButton:{"10.2.3":"data-testid Open time range calendar",[u]:"Open time range calendar"},closeButton:{"10.2.3":"data-testid Close time range Calendar",[u]:"Close time range Calendar"}},absoluteTimeRangeTitle:{[u]:"data-testid-absolute-time-range-narrow"}},DataSourcePermissions:{form:{"9.5.0":()=>'form[name="addPermission"]'},roleType:{"9.5.0":"Role to add new permission to"},rolePicker:{"9.5.0":"Built-in role picker"},permissionLevel:{"9.5.0":"Permission Level"}},DateTimePicker:{input:{"10.2.3":"data-testid date-time-input"}},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:{[u]:"Test Data Query scenario select container"},scenarioSelect:{[u]:"Test Data Query scenario select"},max:{[u]:"TestData max"},min:{[u]:"TestData min"},noise:{[u]:"TestData noise"},seriesCount:{[u]:"TestData series count"},spread:{[u]:"TestData spread"},startValue:{[u]:"TestData start value"},drop:{[u]:"TestData drop values"}}},DataSourceHttpSettings:{urlInput:{"10.4.0":"data-testid Datasource HTTP settings url",[u]:"Datasource HTTP settings url"}},Jaeger:{traceIDInput:{[u]:"Trace ID"}},Prometheus:{configPage:{connectionSettings:{[u]:"Data source connection URL"},manageAlerts:{"10.4.0":"prometheus-alerts-manager"},scrapeInterval:{"10.4.0":"data-testid scrape interval"},queryTimeout:{"10.4.0":"data-testid query timeout"},defaultEditor:{"10.4.0":"data-testid default editor"},disableMetricLookup:{"10.4.0":"disable-metric-lookup"},prometheusType:{"10.4.0":"data-testid prometheus type"},prometheusVersion:{"10.4.0":"data-testid prometheus version"},cacheLevel:{"10.4.0":"data-testid cache level"},incrementalQuerying:{"10.4.0":"prometheus-incremental-querying"},queryOverlapWindow:{"10.4.0":"data-testid query overlap window"},disableRecordingRules:{"10.4.0":"disable-recording-rules"},customQueryParameters:{"10.4.0":"data-testid custom query parameters"},httpMethod:{"10.4.0":"data-testid http method"},exemplarsAddButton:{"10.3.0":"data-testid Add exemplar config button",[u]:"Add exemplar config button"},internalLinkSwitch:{"10.3.0":"data-testid Internal link switch",[u]:"Internal link switch"},codeModeMetricNamesSuggestionLimit:{"11.1.0":"data-testid code mode metric names suggestion limit"}},queryEditor:{explain:{"10.4.0":"data-testid prometheus explain switch wrapper"},editorToggle:{"10.4.0":"data-testid QueryEditorModeToggle"},options:{"10.4.0":"data-testid prometheus options"},legend:{"10.4.0":"data-testid prometheus legend wrapper"},format:{"10.4.0":"data-testid prometheus format"},step:{"10.4.0":"prometheus-step"},type:{"10.4.0":"data-testid prometheus type"},exemplars:{"10.4.0":"prometheus-exemplars"},builder:{metricSelect:{"10.4.0":"data-testid metric select"},hints:{"10.4.0":"data-testid prometheus hints"},metricsExplorer:{"10.4.0":"data-testid metrics explorer"},queryAdvisor:{"10.4.0":"data-testid query advisor"}},code:{queryField:{"10.4.0":"data-testid prometheus query field"},metricsCountInfo:{"11.1.0":"data-testid metrics count disclaimer"},metricsBrowser:{openButton:{"10.4.0":"data-testid open metrics browser"},selectMetric:{"10.4.0":"data-testid select a metric"},seriesLimit:{"10.3.1":"data-testid series limit"},metricList:{"10.4.0":"data-testid metric list"},labelNamesFilter:{"10.4.0":"data-testid label names filter"},labelValuesFilter:{"10.4.0":"data-testid label values filter"},useQuery:{"10.4.0":"data-testid use query"},useAsRateQuery:{"10.4.0":"data-testid use as rate query"},validateSelector:{"10.4.0":"data-testid validate selector"},clear:{"10.4.0":"data-testid clear"}}}},exemplarMarker:{"10.3.0":"data-testid Exemplar marker",[u]:"Exemplar marker"},variableQueryEditor:{queryType:{"10.4.0":"data-testid query type"},labelnames:{metricRegex:{"10.4.0":"data-testid label names metric regex"}},labelValues:{labelSelect:{"10.4.0":"data-testid label values label select"}},metricNames:{metricRegex:{"10.4.0":"data-testid metric names metric regex"}},varQueryResult:{"10.4.0":"data-testid variable query result"},seriesQuery:{"10.4.0":"data-testid prometheus series query"},classicQuery:{"10.4.0":"data-testid prometheus classic query"}},annotations:{minStep:{"10.4.0":"prometheus-annotation-min-step"},title:{"10.4.0":"data-testid prometheus annotation title"},tags:{"10.4.0":"data-testid prometheus annotation tags"},text:{"10.4.0":"data-testid prometheus annotation text"},seriesValueAsTimestamp:{"10.4.0":"data-testid prometheus annotation series value as timestamp"}}}},Menu:{MenuComponent:{[u]:e=>`${e} menu`},MenuGroup:{[u]:e=>`${e} menu group`},MenuItem:{[u]:e=>`${e} menu item`},SubMenu:{container:{"10.3.0":"data-testid SubMenu container",[u]:"SubMenu container"},icon:{"10.3.0":"data-testid SubMenu icon",[u]:"SubMenu icon"}}},Panels:{Panel:{title:{[u]:e=>`data-testid Panel header ${e}`},content:{"11.1.0":"data-testid panel content"},headerItems:{"10.2.0":e=>`data-testid Panel header item ${e}`},menuItems:{"9.5.0":e=>`data-testid Panel menu item ${e}`},menu:{"9.5.0":e=>`data-testid Panel menu ${e}`},containerByTitle:{[u]:e=>`${e} panel`},headerCornerInfo:{[u]:e=>`Panel header ${e}`},status:{"10.2.0":e=>`data-testid Panel status ${e}`,[u]:e=>"Panel status"},loadingBar:{"10.0.0":()=>"Panel loading bar"},HoverWidget:{container:{"10.1.0":"data-testid hover-header-container",[u]:"hover-header-container"},dragIcon:{"10.0.0":"data-testid drag-icon"}},PanelDataErrorMessage:{"10.4.0":"data-testid Panel data error message"}},Visualization:{Graph:{container:{"9.5.0":"Graph container"},VisualizationTab:{legendSection:{[u]:"Legend section"}},Legend:{legendItemAlias:{[u]:e=>`gpl alias ${e}`},showLegendSwitch:{[u]:"gpl show legend"}},xAxis:{labels:{[u]:()=>"div.flot-x-axis > div.flot-tick-label"}}},BarGauge:{valueV2:{[u]:"data-testid Bar gauge value"}},PieChart:{svgSlice:{"10.3.0":"data testid Pie Chart Slice"}},Text:{container:{[u]:()=>".markdown-html"}},Table:{header:{[u]:"table header"},footer:{[u]:"table-footer"},body:{"10.2.0":"data-testid table body"}}}},VizLegend:{seriesName:{"10.3.0":e=>`data-testid VizLegend series ${e}`}},Drawer:{General:{title:{[u]:e=>`Drawer title ${e}`},expand:{[u]:"Drawer expand"},contract:{[u]:"Drawer contract"},close:{"10.3.0":"data-testid Drawer close",[u]:"Drawer close"},rcContentWrapper:{"9.4.0":()=>".rc-drawer-content-wrapper"},subtitle:{"10.4.0":"data-testid drawer subtitle"}},DashboardSaveDrawer:{saveButton:{"11.1.0":"data-testid Save dashboard drawer button"},saveAsButton:{"11.1.0":"data-testid Save as dashboard drawer button"},saveAsTitleInput:{"11.1.0":"Save dashboard title field"}}},PanelEditor:{General:{content:{"11.1.0":"data-testid Panel editor content","8.0.0":"Panel editor content"}},OptionsPane:{content:{"11.1.0":"data-testid Panel editor option pane content",[u]:"Panel editor option pane content"},select:{[u]:"Panel editor option pane select"},fieldLabel:{[u]:e=>`${e} field property editor`},fieldInput:{"11.0.0":e=>`data-testid Panel editor option pane field input ${e}`}},DataPane:{content:{"11.1.0":"data-testid Panel editor data pane content",[u]:"Panel editor data pane content"}},applyButton:{"9.2.0":"data-testid Apply changes and go back to dashboard","9.1.0":"Apply changes and go back to dashboard","8.0.0":"panel editor apply"},toggleVizPicker:{"10.0.0":"data-testid toggle-viz-picker","8.0.0":"toggle-viz-picker"},toggleVizOptions:{"10.1.0":"data-testid toggle-viz-options",[u]:"toggle-viz-options"},toggleTableView:{"11.1.0":"data-testid toggle-table-view",[u]:"toggle-table-view"},showZoomField:{"10.2.0":"Map controls Show zoom control field property editor"},showAttributionField:{"10.2.0":"Map controls Show attribution field property editor"},showScaleField:{"10.2.0":"Map controls Show scale field property editor"},showMeasureField:{"10.2.0":"Map controls Show measure tools field property editor"},showDebugField:{"10.2.0":"Map controls Show debug field property editor"},measureButton:{"9.2.0":"show measure tools"}},PanelInspector:{Data:{content:{[u]:"Panel inspector Data content"}},Stats:{content:{[u]:"Panel inspector Stats content"}},Json:{content:{"11.1.0":"data-testid Panel inspector Json content",[u]:"Panel inspector Json content"}},Query:{content:{[u]:"Panel inspector Query content"},refreshButton:{[u]:"Panel inspector Query refresh button"},jsonObjectKeys:{[u]:()=>".json-formatter-key"}}},Tab:{title:{"11.2.0":e=>`data-testid Tab ${e}`},active:{[u]:()=>'[class*="-activeTabStyle"]'}},RefreshPicker:{runButtonV2:{[u]:"data-testid RefreshPicker run button"},intervalButtonV2:{[u]:"data-testid RefreshPicker interval button"}},QueryTab:{content:{[u]:"Query editor tab content"},queryInspectorButton:{[u]:"Query inspector button"},queryHistoryButton:{"10.2.0":"data-testid query-history-button",[u]:"query-history-button"},addQuery:{"10.2.0":"data-testid query-tab-add-query",[u]:"Query editor add query button"},queryGroupTopSection:{"11.2.0":"data-testid query group top section"},addExpression:{"11.2.0":"data-testid query-tab-add-expression"}},QueryHistory:{queryText:{"9.0.0":"Query text"}},QueryEditorRows:{rows:{[u]:"Query editor row"}},QueryEditorRow:{actionButton:{"10.4.0":e=>`data-testid ${e}`},title:{[u]:e=>`Query editor row title ${e}`},container:{[u]:e=>`Query editor row ${e}`}},AlertTab:{content:{"10.2.3":"data-testid Alert editor tab content",[u]:"Alert editor tab content"}},AlertRules:{groupToggle:{"11.0.0":"data-testid group-collapse-toggle"},toggle:{"11.0.0":"data-testid collapse-toggle"},expandedContent:{"11.0.0":"data-testid expanded-content"},previewButton:{"11.1.0":"data-testid alert-rule preview-button"},ruleNameField:{"11.1.0":"data-testid alert-rule name-field"},newFolderButton:{"11.1.0":"data-testid alert-rule new-folder-button"},newFolderNameField:{"11.1.0":"data-testid alert-rule name-folder-name-field"},newFolderNameCreateButton:{"11.1.0":"data-testid alert-rule name-folder-name-create-button"},newEvaluationGroupButton:{"11.1.0":"data-testid alert-rule new-evaluation-group-button"},newEvaluationGroupName:{"11.1.0":"data-testid alert-rule new-evaluation-group-name"},newEvaluationGroupInterval:{"11.1.0":"data-testid alert-rule new-evaluation-group-interval"},newEvaluationGroupCreate:{"11.1.0":"data-testid alert-rule new-evaluation-group-create-button"},step:{"11.5.0":e=>`data-testid alert-rule step-${e}`},stepAdvancedModeSwitch:{"11.5.0":e=>`data-testid advanced-mode-switch step-${e}`}},Alert:{alertV2:{[u]:e=>`data-testid Alert ${e}`}},TransformTab:{content:{"10.1.0":"data-testid Transform editor tab content",[u]:"Transform editor tab content"},newTransform:{"10.1.0":e=>`data-testid New transform ${e}`},transformationEditor:{"10.1.0":e=>`data-testid Transformation editor ${e}`},transformationEditorDebugger:{"10.1.0":e=>`data-testid Transformation editor debugger ${e}`}},Transforms:{card:{"10.1.0":e=>`data-testid New transform ${e}`},disableTransformationButton:{"10.4.0":"data-testid Disable transformation button"},Reduce:{modeLabel:{"10.2.3":"data-testid Transform mode label",[u]:"Transform mode label"},calculationsLabel:{"10.2.3":"data-testid Transform calculations label",[u]:"Transform calculations label"}},SpatialOperations:{actionLabel:{"9.1.2":"root Action field property editor"},locationLabel:{"10.2.0":"root Location Mode field property editor"},location:{autoOption:{"9.1.2":"Auto location option"},coords:{option:{"9.1.2":"Coords location option"},latitudeFieldLabel:{"9.1.2":"root Latitude field field property editor"},longitudeFieldLabel:{"9.1.2":"root Longitude field field property editor"}},geohash:{option:{"9.1.2":"Geohash location option"},geohashFieldLabel:{"9.1.2":"root Geohash field field property editor"}},lookup:{option:{"9.1.2":"Lookup location option"},lookupFieldLabel:{"9.1.2":"root Lookup field field property editor"},gazetteerFieldLabel:{"9.1.2":"root Gazetteer field property editor"}}}},searchInput:{"10.2.3":"data-testid search transformations",[u]:"search transformations"},noTransformationsMessage:{"10.2.3":"data-testid no transformations message"},addTransformationButton:{"10.1.0":"data-testid add transformation button",[u]:"add transformation button"},removeAllTransformationsButton:{"10.4.0":"data-testid remove all transformations button"}},NavBar:{Configuration:{button:{"9.5.0":"Configuration"}},Toggle:{button:{"10.2.3":"data-testid Toggle menu",[u]:"Toggle menu"}},Reporting:{button:{"9.5.0":"Reporting"}}},NavMenu:{Menu:{"10.2.3":"data-testid navigation mega-menu"},item:{"9.5.0":"data-testid Nav menu item"}},NavToolbar:{container:{"9.4.0":"data-testid Nav toolbar"},commandPaletteTrigger:{"11.5.0":"data-testid Command palette trigger"},shareDashboard:{"11.1.0":"data-testid Share dashboard"},markAsFavorite:{"11.1.0":"data-testid Mark as favorite"},editDashboard:{editButton:{"11.1.0":"data-testid Edit dashboard button"},saveButton:{"11.1.0":"data-testid Save dashboard button"},exitButton:{"11.1.0":"data-testid Exit edit mode button"},settingsButton:{"11.1.0":"data-testid Dashboard settings"},addRowButton:{"11.1.0":"data-testid Add row button"},addLibraryPanelButton:{"11.1.0":"data-testid Add a panel from the panel library button"},addVisualizationButton:{"11.1.0":"data-testid Add new visualization menu item"},pastePanelButton:{"11.1.0":"data-testid Paste panel button"},discardChangesButton:{"11.1.0":"data-testid Discard changes button"},discardLibraryPanelButton:{"11.1.0":"data-testid Discard library panel button"},unlinkLibraryPanelButton:{"11.1.0":"data-testid Unlink library panel button"},saveLibraryPanelButton:{"11.1.0":"data-testid Save library panel button"},backToDashboardButton:{"11.1.0":"data-testid Back to dashboard button"}}},PageToolbar:{container:{[u]:()=>".page-toolbar"},item:{[u]:e=>`${e}`},itemButton:{"9.5.0":e=>`data-testid ${e}`}},QueryEditorToolbarItem:{button:{[u]:e=>`QueryEditor toolbar item button ${e}`}},BackButton:{backArrow:{"10.3.0":"data-testid Go Back",[u]:"Go Back"}},OptionsGroup:{group:{"11.1.0":e=>e?`data-testid Options group ${e}`:"data-testid Options group",[u]:e=>e?`Options group ${e}`:"Options group"},toggle:{"11.1.0":e=>e?`data-testid Options group ${e} toggle`:"data-testid Options group toggle",[u]:e=>e?`Options group ${e} toggle`:"Options group toggle"}},PluginVisualization:{item:{[u]:e=>`Plugin visualization item ${e}`},current:{[u]:()=>'[class*="-currentVisualizationItem"]'}},Select:{menu:{"11.5.0":"data-testid Select menu",[u]:"Select options menu"},option:{"11.1.0":"data-testid Select option",[u]:"Select option"},toggleAllOptions:{"11.3.0":"data-testid toggle all options"},input:{[u]:()=>'input[id*="time-options-input"]'},singleValue:{[u]:()=>'div[class*="-singleValue"]'}},FieldConfigEditor:{content:{[u]:"Field config editor content"}},OverridesConfigEditor:{content:{[u]:"Field overrides editor content"}},FolderPicker:{containerV2:{[u]:"data-testid Folder picker select container"},input:{"10.4.0":"data-testid folder-picker-input"}},ReadonlyFolderPicker:{container:{[u]:"data-testid Readonly folder picker select container"}},DataSourcePicker:{container:{"10.0.0":"data-testid Data source picker select container","8.0.0":"Data source picker select container"},inputV2:{"10.1.0":"data-testid Select a data source",[u]:"Select a data source"},dataSourceList:{"10.4.0":"data-testid Data source list dropdown"},advancedModal:{dataSourceList:{"10.4.0":"data-testid Data source list"},builtInDataSourceList:{"10.4.0":"data-testid Built in data source list"}}},TimeZonePicker:{containerV2:{[u]:"data-testid Time zone picker select container"},changeTimeSettingsButton:{"11.0.0":"data-testid Time zone picker Change time settings button"}},WeekStartPicker:{containerV2:{[u]:"data-testid Choose starting day of the week"},placeholder:{[u]:"Choose starting day of the week"}},TraceViewer:{spanBar:{"9.0.0":"data-testid SpanBar--wrapper"}},QueryField:{container:{"10.3.0":"data-testid Query field",[u]:"Query field"}},QueryBuilder:{queryPatterns:{"10.3.0":"data-testid Query patterns",[u]:"Query patterns"},labelSelect:{"10.3.0":"data-testid Select label",[u]:"Select label"},inputSelect:{"11.1.0":"data-testid Select label-input"},valueSelect:{"10.3.0":"data-testid Select value",[u]:"Select value"},matchOperatorSelect:{"10.3.0":"data-testid Select match operator",[u]:"Select match operator"}},ValuePicker:{button:{"10.3.0":e=>`data-testid Value picker button ${e}`},select:{"10.3.0":e=>`data-testid Value picker select ${e}`}},Search:{sectionV2:{[u]:"data-testid Search section"},itemsV2:{[u]:"data-testid Search items"},cards:{[u]:"data-testid Search cards"},collapseFolder:{[u]:e=>`data-testid Collapse folder ${e}`},expandFolder:{[u]:e=>`data-testid Expand folder ${e}`},dashboardItem:{[u]:e=>`data-testid Dashboard search item ${e}`},dashboardCard:{[u]:e=>`data-testid Search card ${e}`},folderHeader:{"9.3.0":e=>`data-testid Folder header ${e}`},folderContent:{"9.3.0":e=>`data-testid Folder content ${e}`},dashboardItems:{[u]:"data-testid Dashboard search item"}},DashboardLinks:{container:{[u]:"data-testid Dashboard link container"},dropDown:{[u]:"data-testid Dashboard link dropdown"},link:{[u]:"data-testid Dashboard link"}},LoadingIndicator:{icon:{"10.4.0":"data-testid Loading indicator",[u]:"Loading indicator"}},CallToActionCard:{buttonV2:{[u]:e=>`data-testid Call to action button ${e}`}},DataLinksContextMenu:{singleLink:{"10.3.0":"data-testid Data link",[u]:"Data link"}},CodeEditor:{container:{"10.2.3":"data-testid Code editor container",[u]:"Code editor container"}},ReactMonacoEditor:{editorLazy:{"11.1.0":"data-testid ReactMonacoEditor editorLazy"}},DashboardImportPage:{textarea:{[u]:"data-testid-import-dashboard-textarea"},submit:{[u]:"data-testid-load-dashboard"}},ImportDashboardForm:{name:{[u]:"data-testid-import-dashboard-title"},submit:{[u]:"data-testid-import-dashboard-submit"}},PanelAlertTabContent:{content:{"10.2.3":"data-testid Unified alert editor tab content",[u]:"Unified alert editor tab content"}},VisualizationPreview:{card:{[u]:e=>`data-testid suggestion-${e}`}},ColorSwatch:{name:{[u]:"data-testid-colorswatch"}},DashboardRow:{title:{[u]:e=>`data-testid dashboard-row-title-${e}`}},UserProfile:{profileSaveButton:{[u]:"data-testid-user-profile-save"},preferencesSaveButton:{[u]:"data-testid-shared-prefs-save"},orgsTable:{[u]:"data-testid-user-orgs-table"},sessionsTable:{[u]:"data-testid-user-sessions-table"},extensionPointTabs:{"10.2.3":"data-testid-extension-point-tabs"},extensionPointTab:{"10.2.3":e=>`data-testid-extension-point-tab-${e}`}},FileUpload:{inputField:{"9.0.0":"data-testid-file-upload-input-field"},fileNameSpan:{"9.0.0":"data-testid-file-upload-file-name"}},DebugOverlay:{wrapper:{"9.2.0":"debug-overlay"}},OrgRolePicker:{input:{"9.5.0":"Role"}},AnalyticsToolbarButton:{button:{"9.5.0":"Dashboard insights"}},Variables:{variableOption:{"9.5.0":"data-testid variable-option"},variableLinkWrapper:{"11.1.1":"data-testid variable-link-wrapper"}},Annotations:{annotationsTypeInput:{"11.1.0":"data-testid annotations-type-input",[u]:"annotations-type-input"},annotationsChoosePanelInput:{"11.1.0":"data-testid choose-panels-input",[u]:"choose-panels-input"},editor:{testButton:{"11.0.0":"data-testid annotations-test-button"},resultContainer:{"11.0.0":"data-testid annotations-query-result-container"}}},Tooltip:{container:{"10.2.0":"data-testid tooltip"}},ReturnToPrevious:{buttonGroup:{"11.0.0":"data-testid dismissable button group"},backButton:{"11.0.0":"data-testid back"},dismissButton:{"11.0.0":"data-testid dismiss"}},SQLQueryEditor:{selectColumn:{"11.0.0":"data-testid select-column"},selectColumnInput:{"11.0.0":"data-testid select-column-input"},selectFunctionParameter:{"11.0.0":e=>`data-testid select-function-parameter-${e}`},selectAggregation:{"11.0.0":"data-testid select-aggregation"},selectAggregationInput:{"11.0.0":"data-testid select-aggregation-input"},selectAlias:{"11.0.0":"data-testid select-alias"},selectAliasInput:{"11.0.0":"data-testid select-alias-input"},selectInputParameter:{"11.0.0":"data-testid select-input-parameter"},filterConjunction:{"11.0.0":"data-testid filter-conjunction"},filterField:{"11.0.0":"data-testid filter-field"},filterOperator:{"11.0.0":"data-testid filter-operator"},headerTableSelector:{"11.0.0":"data-testid header-table-selector"},headerFilterSwitch:{"11.0.0":"data-testid header-filter-switch"},headerGroupSwitch:{"11.0.0":"data-testid header-group-switch"},headerOrderSwitch:{"11.0.0":"data-testid header-order-switch"},headerPreviewSwitch:{"11.0.0":"data-testid header-preview-switch"}},EntityNotFound:{container:{"11.2.0":"data-testid entity-not-found"}},Portal:{container:{"11.5.0":"data-testid portal-container"}}},d={pages:a({Alerting:{AddAlertRule:{url:{"10.1.0":"/alerting/new/alerting",[u]:"/alerting/new"}},EditAlertRule:{url:{[u]:e=>`alerting/${e}/edit`}}},Login:{url:{[u]:"/login"},username:{"10.2.3":"data-testid Username input field",[u]:"Username input field"},password:{"10.2.3":"data-testid Password input field",[u]:"Password input field"},submit:{"10.2.3":"data-testid Login button",[u]:"Login button"},skip:{"10.2.3":"data-testid Skip change password button"}},PasswordlessLogin:{url:{[u]:"/login/passwordless/authenticate"},email:{"10.2.3":"data-testid Email input field",[u]:"Email input field"},submit:{"10.2.3":"data-testid PasswordlessLogin button",[u]:"PasswordlessLogin button"}},Home:{url:{[u]:"/"}},DataSource:{name:{"10.3.0":"data-testid Data source settings page name input field",[u]:"Data source settings page name input field"},delete:{[u]:"Data source settings page Delete button"},readOnly:{"10.3.0":"data-testid Data source settings page read only message",[u]:"Data source settings page read only message"},saveAndTest:{"10.0.0":"data-testid Data source settings page Save and Test button",[u]:"Data source settings page Save and Test button"},alert:{"10.3.0":"data-testid Data source settings page Alert",[u]:"Data source settings page Alert"}},DataSources:{url:{[u]:"/datasources"},dataSources:{[u]:e=>`Data source list item ${e}`}},EditDataSource:{url:{"9.5.0":e=>`/datasources/edit/${e}`},settings:{"9.5.0":"Datasource settings page basic settings"}},AddDataSource:{url:{[u]:"/datasources/new"},dataSourcePluginsV2:{"9.3.1":e=>`Add new data source ${e}`,[u]:e=>`Data source plugin item ${e}`}},ConfirmModal:{delete:{"10.0.0":"data-testid Confirm Modal Danger Button",[u]:"Confirm Modal Danger Button"}},AddDashboard:{url:{[u]:"/dashboard/new"},itemButton:{"9.5.0":e=>`data-testid ${e}`},addNewPanel:{"11.1.0":"data-testid Add new panel","8.0.0":"Add new panel",[u]:"Add new panel"},itemButtonAddViz:{[u]:"Add new visualization menu item"},addNewRow:{"11.1.0":"data-testid Add new row",[u]:"Add new row"},addNewPanelLibrary:{"11.1.0":"data-testid Add new panel from panel library",[u]:"Add new panel from panel library"},Settings:{Annotations:{List:{url:{[u]:"/dashboard/new?orgId=1&editview=annotations"}},Edit:{url:{[u]:e=>`/dashboard/new?editview=annotations&editIndex=${e}`}}},Variables:{List:{url:{"11.3.0":"/dashboard/new?orgId=1&editview=variables",[u]:"/dashboard/new?orgId=1&editview=templating"}},Edit:{url:{"11.3.0":e=>`/dashboard/new?orgId=1&editview=variables&editIndex=${e}`,[u]:e=>`/dashboard/new?orgId=1&editview=templating&editIndex=${e}`}}}}},Dashboard:{url:{[u]:e=>`/d/${e}`},DashNav:{nav:{[u]:"Dashboard navigation"},navV2:{[u]:"data-testid Dashboard navigation"},publicDashboardTag:{"9.1.0":"data-testid public dashboard tag"},shareButton:{"10.4.0":"data-testid share-button"},scrollContainer:{"11.1.0":"data-testid Dashboard canvas scroll container"},newShareButton:{container:{"11.1.0":"data-testid new share button"},shareLink:{"11.1.0":"data-testid new share link-button"},arrowMenu:{"11.1.0":"data-testid new share button arrow menu"},menu:{container:{"11.1.0":"data-testid new share button menu"},shareInternally:{"11.1.0":"data-testid new share button share internally"},shareExternally:{"11.1.1":"data-testid new share button share externally"},shareSnapshot:{"11.2.0":"data-testid new share button share snapshot"},inviteUser:{"11.5.0":"data-testid new share button invite user"}}},NewExportButton:{container:{"11.2.0":"data-testid new export button"},arrowMenu:{"11.2.0":"data-testid new export button arrow menu"},Menu:{container:{"11.2.0":"data-testid new export button menu"},exportAsJson:{"11.2.0":"data-testid new export button export as json"}}},playlistControls:{prev:{"11.0.0":"data-testid playlist previous dashboard button"},stop:{"11.0.0":"data-testid playlist stop dashboard button"},next:{"11.0.0":"data-testid playlist next dashboard button"}}},Controls:{"11.1.0":"data-testid dashboard controls"},SubMenu:{submenu:{[u]:"Dashboard submenu"},submenuItem:{[u]:"data-testid template variable"},submenuItemLabels:{[u]:e=>`data-testid Dashboard template variables submenu Label ${e}`},submenuItemValueDropDownValueLinkTexts:{[u]:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`},submenuItemValueDropDownDropDown:{[u]:"Variable options"},submenuItemValueDropDownOptionTexts:{[u]:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Annotations:{annotationsWrapper:{"10.0.0":"data-testid annotation-wrapper"},annotationLabel:{"10.0.0":e=>`data-testid Dashboard annotations submenu Label ${e}`},annotationToggle:{"10.0.0":e=>`data-testid Dashboard annotations submenu Toggle ${e}`}}},Settings:{Actions:{close:{"9.5.0":"data-testid dashboard-settings-close"}},General:{deleteDashBoard:{"11.1.0":"data-testid Dashboard settings page delete dashboard button"},sectionItems:{[u]:e=>`Dashboard settings section item ${e}`},saveDashBoard:{[u]:"Dashboard settings aside actions Save button"},saveAsDashBoard:{[u]:"Dashboard settings aside actions Save As button"},title:{"11.2.0":"General"}},Annotations:{Edit:{urlParams:{[u]:e=>`editview=annotations&editIndex=${e}`}},List:{url:{[u]:e=>`/d/${e}?editview=annotations`},addAnnotationCTAV2:{[u]:"data-testid Call to action button Add annotation query"},annotations:{"10.4.0":"data-testid list-annotations"}},Settings:{name:{"11.1.0":"data-testid Annotations settings name input",[u]:"Annotations settings name input"}},NewAnnotation:{panelFilterSelect:{"10.0.0":"data-testid annotations-panel-filter"},showInLabel:{"11.1.0":"data-testid show-in-label"},previewInDashboard:{"10.0.0":"data-testid annotations-preview"},delete:{"10.4.0":"data-testid annotations-delete"},apply:{"10.4.0":"data-testid annotations-apply"},enable:{"10.4.0":"data-testid annotation-enable"},hide:{"10.4.0":"data-testid annotation-hide"}}},Variables:{List:{url:{"11.3.0":e=>`/d/${e}?editview=variables`,[u]:e=>`/d/${e}?editview=templating`},addVariableCTAV2:{[u]:"data-testid Call to action button Add variable"},newButton:{[u]:"Variable editor New variable button"},table:{[u]:"Variable editor Table"},tableRowNameFields:{[u]:e=>`Variable editor Table Name field ${e}`},tableRowDefinitionFields:{"10.1.0":e=>`Variable editor Table Definition field ${e}`},tableRowArrowUpButtons:{[u]:e=>`Variable editor Table ArrowUp button ${e}`},tableRowArrowDownButtons:{[u]:e=>`Variable editor Table ArrowDown button ${e}`},tableRowDuplicateButtons:{[u]:e=>`Variable editor Table Duplicate button ${e}`},tableRowRemoveButtons:{[u]:e=>`Variable editor Table Remove button ${e}`}},Edit:{urlParams:{"11.3.0":e=>`editview=variables&editIndex=${e}`,[u]:e=>`editview=templating&editIndex=${e}`},General:{headerLink:{[u]:"Variable editor Header link"},modeLabelNew:{[u]:"Variable editor Header mode New"},modeLabelEdit:{[u]:"Variable editor Header mode Edit"},generalNameInput:{[u]:"Variable editor Form Name field"},generalNameInputV2:{[u]:"data-testid Variable editor Form Name field"},generalTypeSelect:{[u]:"Variable editor Form Type select"},generalTypeSelectV2:{[u]:"data-testid Variable editor Form Type select"},generalLabelInput:{[u]:"Variable editor Form Label field"},generalLabelInputV2:{[u]:"data-testid Variable editor Form Label field"},generalHideSelect:{[u]:"Variable editor Form Hide select"},generalHideSelectV2:{[u]:"data-testid Variable editor Form Hide select"},selectionOptionsAllowCustomValueSwitch:{[u]:"data-testid Variable editor Form Allow Custom Value switch"},selectionOptionsMultiSwitch:{"10.4.0":"data-testid Variable editor Form Multi switch",[u]:"Variable editor Form Multi switch"},selectionOptionsIncludeAllSwitch:{"10.4.0":"data-testid Variable editor Form IncludeAll switch",[u]:"Variable editor Form IncludeAll switch"},selectionOptionsCustomAllInput:{"10.4.0":"data-testid Variable editor Form IncludeAll field",[u]:"Variable editor Form IncludeAll field"},previewOfValuesOption:{"10.4.0":"data-testid Variable editor Preview of Values option",[u]:"Variable editor Preview of Values option"},submitButton:{"10.4.0":"data-testid Variable editor Run Query button",[u]:"Variable editor Submit button"},applyButton:{"9.3.0":"data-testid Variable editor Apply button"}},QueryVariable:{queryOptionsDataSourceSelect:{"10.4.0":"data-testid Select a data source","10.0.0":"data-testid Data source picker select container",[u]:"Data source picker select container"},queryOptionsRefreshSelect:{[u]:"Variable editor Form Query Refresh select"},queryOptionsRefreshSelectV2:{[u]:"data-testid Variable editor Form Query Refresh select"},queryOptionsRegExInput:{[u]:"Variable editor Form Query RegEx field"},queryOptionsRegExInputV2:{[u]:"data-testid Variable editor Form Query RegEx field"},queryOptionsSortSelect:{[u]:"Variable editor Form Query Sort select"},queryOptionsSortSelectV2:{[u]:"data-testid Variable editor Form Query Sort select"},queryOptionsQueryInput:{"10.4.0":"data-testid Variable editor Form Default Variable Query Editor textarea"},valueGroupsTagsEnabledSwitch:{[u]:"Variable editor Form Query UseTags switch"},valueGroupsTagsTagsQueryInput:{[u]:"Variable editor Form Query TagsQuery field"},valueGroupsTagsTagsValuesQueryInput:{[u]:"Variable editor Form Query TagsValuesQuery field"}},ConstantVariable:{constantOptionsQueryInput:{[u]:"Variable editor Form Constant Query field"},constantOptionsQueryInputV2:{[u]:"data-testid Variable editor Form Constant Query field"}},DatasourceVariable:{datasourceSelect:{[u]:"data-testid datasource variable datasource type"}},TextBoxVariable:{textBoxOptionsQueryInput:{[u]:"Variable editor Form TextBox Query field"},textBoxOptionsQueryInputV2:{[u]:"data-testid Variable editor Form TextBox Query field"}},CustomVariable:{customValueInput:{[u]:"data-testid custom-variable-input"}},IntervalVariable:{intervalsValueInput:{[u]:"data-testid interval variable intervals input"},autoEnabledCheckbox:{"10.4.0":"data-testid interval variable auto value checkbox"},stepCountIntervalSelect:{"10.4.0":"data-testid interval variable step count input"},minIntervalInput:{"10.4.0":"data-testid interval variable mininum interval input"}},GroupByVariable:{dataSourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid group by variable info text"},modeToggle:{"10.4.0":"data-testid group by variable mode toggle"}},AdHocFiltersVariable:{datasourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid ad-hoc filters variable info text"},modeToggle:{"11.0.0":"data-testid ad-hoc filters variable mode toggle"}}}}},Annotations:{marker:{"10.0.0":"data-testid annotation-marker"}},Rows:{Repeated:{ConfigSection:{warningMessage:{"10.2.0":"data-testid Repeated rows warning message"}}}}},Dashboards:{url:{[u]:"/dashboards"},dashboards:{"10.2.0":e=>`Dashboard search item ${e}`}},SaveDashboardAsModal:{newName:{"10.2.0":"Save dashboard title field"},save:{"10.2.0":"Save dashboard button"}},SaveDashboardModal:{save:{"10.2.0":"Dashboard settings Save Dashboard Modal Save button"},saveVariables:{"10.2.0":"Dashboard settings Save Dashboard Modal Save variables checkbox"},saveTimerange:{"10.2.0":"Dashboard settings Save Dashboard Modal Save timerange checkbox"},saveRefresh:{"11.1.0":"Dashboard settings Save Dashboard Modal Save refresh checkbox"}},SharePanelModal:{linkToRenderedImage:{[u]:"Link to rendered image"}},ShareDashboardModal:{PublicDashboard:{WillBePublicCheckbox:{"9.1.0":"data-testid public dashboard will be public checkbox"},LimitedDSCheckbox:{"9.1.0":"data-testid public dashboard limited datasources checkbox"},CostIncreaseCheckbox:{"9.1.0":"data-testid public dashboard cost may increase checkbox"},PauseSwitch:{"9.5.0":"data-testid public dashboard pause switch"},EnableAnnotationsSwitch:{"9.3.0":"data-testid public dashboard on off switch for annotations"},CreateButton:{"9.5.0":"data-testid public dashboard create button"},DeleteButton:{"9.3.0":"data-testid public dashboard delete button"},CopyUrlInput:{"9.1.0":"data-testid public dashboard copy url input"},CopyUrlButton:{"9.1.0":"data-testid public dashboard copy url button"},SettingsDropdown:{"10.1.0":"data-testid public dashboard settings dropdown"},TemplateVariablesWarningAlert:{"9.1.0":"data-testid public dashboard disabled template variables alert"},UnsupportedDataSourcesWarningAlert:{"9.5.0":"data-testid public dashboard unsupported data sources alert"},NoUpsertPermissionsWarningAlert:{"9.5.0":"data-testid public dashboard no upsert permissions alert"},EnableTimeRangeSwitch:{"9.4.0":"data-testid public dashboard on off switch for time range"},EmailSharingConfiguration:{Container:{"9.5.0":"data-testid email sharing config container"},ShareType:{"9.5.0":"data-testid public dashboard share type"},EmailSharingInput:{"9.5.0":"data-testid public dashboard email sharing input"},EmailSharingInviteButton:{"9.5.0":"data-testid public dashboard email sharing invite button"},EmailSharingList:{"9.5.0":"data-testid public dashboard email sharing list"},DeleteEmail:{"9.5.0":"data-testid public dashboard delete email button"},ReshareLink:{"9.5.0":"data-testid public dashboard reshare link button"}}},SnapshotScene:{url:{"11.1.0":e=>`/dashboard/snapshot/${e}`},PublishSnapshot:{"11.1.0":"data-testid publish snapshot button"},CopyUrlButton:{"11.1.0":"data-testid snapshot copy url button"},CopyUrlInput:{"11.1.0":"data-testid snapshot copy url input"}}},ShareDashboardDrawer:{ShareInternally:{container:{"11.3.0":"data-testid share internally drawer container"},lockTimeRangeSwitch:{"11.3.0":"data-testid share internally lock time range switch"},shortenUrlSwitch:{"11.3.0":"data-testid share internally shorten url switch"},copyUrlButton:{"11.3.0":"data-testid share internally copy url button"},SharePanel:{preview:{"11.5.0":"data-testid share panel internally image generation preview"},widthInput:{"11.5.0":"data-testid share panel internally width input"},heightInput:{"11.5.0":"data-testid share panel internally height input"},scaleFactorInput:{"11.5.0":"data-testid share panel internally scale factor input"},generateImageButton:{"11.5.0":"data-testid share panel internally generate image button"},downloadImageButton:{"11.5.0":"data-testid share panel internally download image button"}}},ShareExternally:{container:{"11.3.0":"data-testid share externally drawer container"},publicAlert:{"11.3.0":"data-testid public share alert"},emailSharingAlert:{"11.3.0":"data-testid email share alert"},shareTypeSelect:{"11.3.0":"data-testid share externally share type select"},Creation:{PublicShare:{createButton:{"11.3.0":"data-testid public share dashboard create button"},cancelButton:{"11.3.0":"data-testid public share dashboard cancel button"}},EmailShare:{createButton:{"11.3.0":"data-testid email share dashboard create button"},cancelButton:{"11.3.0":"data-testid email share dashboard cancel button"}},willBePublicCheckbox:{"11.3.0":"data-testid share dashboard will be public checkbox"}},Configuration:{enableTimeRangeSwitch:{"11.3.0":"data-testid share externally enable time range switch"},enableAnnotationsSwitch:{"11.3.0":"data-testid share externally enable annotations switch"},copyUrlButton:{"11.3.0":"data-testid share externally copy url button"},revokeAccessButton:{"11.3.0":"data-testid share externally revoke access button"},toggleAccessButton:{"11.3.0":"data-testid share externally pause or resume access button"}}},ShareSnapshot:{url:{"11.3.0":e=>`/dashboard/snapshot/${e}`},container:{"11.3.0":"data-testid share snapshot drawer container"},publishSnapshot:{"11.3.0":"data-testid share snapshot publish button"},copyUrlButton:{"11.3.0":"data-testid share snapshot copy url button"}}},ExportDashboardDrawer:{ExportAsJson:{container:{"11.3.0":"data-testid export as json drawer container"},codeEditor:{"11.3.0":"data-testid export as json code editor"},exportExternallyToggle:{"11.3.0":"data-testid export as json externally switch"},saveToFileButton:{"11.3.0":"data-testid export as json save to file button"},copyToClipboardButton:{"11.3.0":"data-testid export as json copy to clipboard button"},cancelButton:{"11.3.0":"data-testid export as json cancel button"}}},PublicDashboard:{page:{"9.5.0":"public-dashboard-page"},NotAvailable:{container:{"9.5.0":"public-dashboard-not-available"},title:{"9.5.0":"public-dashboard-title"},pausedDescription:{"9.5.0":"public-dashboard-paused-description"}},footer:{"11.0.0":"public-dashboard-footer"}},PublicDashboardScene:{loadingPage:{"11.0.0":"public-dashboard-scene-loading-page"},page:{"11.0.0":"public-dashboard-scene-page"},controls:{"11.0.0":"public-dashboard-controls"}},RequestViewAccess:{form:{"9.5.0":"request-view-access-form"},recipientInput:{"9.5.0":"request-view-access-recipient-input"},submitButton:{"9.5.0":"request-view-access-submit-button"}},PublicDashboardConfirmAccess:{submitButton:{"10.2.0":"data-testid confirm-access-submit-button"}},Explore:{url:{[u]:"/explore"},General:{container:{[u]:"data-testid Explore"},graph:{[u]:"Explore Graph"},table:{[u]:"Explore Table"},scrollView:{"9.0.0":"data-testid explorer scroll view"}},QueryHistory:{container:{"11.1.0":"data-testid QueryHistory"}}},SoloPanel:{url:{[u]:e=>`/d-solo/${e}`}},PluginsList:{page:{[u]:"Plugins list page"},list:{[u]:"Plugins list"},listItem:{[u]:"Plugins list item"},signatureErrorNotice:{"10.3.0":"data-testid Unsigned plugins notice",[u]:"Unsigned plugins notice"}},PluginPage:{page:{[u]:"Plugin page"},signatureInfo:{"10.3.0":"data-testid Plugin signature info",[u]:"Plugin signature info"},disabledInfo:{"10.3.0":"data-testid Plugin disabled info",[u]:"Plugin disabled info"}},PlaylistForm:{name:{[u]:"Playlist name"},interval:{[u]:"Playlist interval"},itemDelete:{"10.2.0":"data-testid playlist-form-delete-item"}},BrowseDashboards:{table:{body:{"10.2.0":"data-testid browse-dashboards-table"},row:{"10.2.0":e=>`data-testid browse dashboards row ${e}`},checkbox:{"10.0.0":e=>`data-testid ${e} checkbox`}},NewFolderForm:{form:{"10.2.0":"data-testid new folder form"},nameInput:{"10.2.0":"data-testid new-folder-name-input"},createButton:{"10.2.0":"data-testid new-folder-create-button"}}},Search:{url:{"9.3.0":"/?search=openn"},FolderView:{url:{"9.3.0":"/?search=open&layout=folders"}}},PublicDashboards:{ListItem:{linkButton:{"9.3.0":"public-dashboard-link-button"},configButton:{"9.3.0":"public-dashboard-configuration-button"},trashcanButton:{"9.3.0":"public-dashboard-remove-button"},pauseSwitch:{"10.1.0":"data-testid public dashboard pause switch"}}},UserListPage:{tabs:{allUsers:{"10.0.0":"data-testid all-users-tab"},orgUsers:{"10.0.0":"data-testid org-users-tab"},anonUserDevices:{"10.2.3":"data-testid anon-user-devices-tab"},publicDashboardsUsers:{"10.0.0":"data-testid public-dashboards-users-tab"},users:{"10.0.0":"data-testid users-tab"}},org:{url:{"10.2.0":"/admin/users","9.5.0":"/org/users"}},admin:{url:{"9.5.0":"/admin/users"}},publicDashboards:{container:{"11.1.0":"data-testid public-dashboards-users-list"}},UserListAdminPage:{container:{"10.0.0":"data-testid user-list-admin-page"}},UsersListPage:{container:{"10.0.0":"data-testid users-list-page"}},UserAnonListPage:{container:{"10.4.0":"data-testid user-anon-list-page"}},UsersListPublicDashboardsPage:{container:{"10.0.0":"data-testid users-list-public-dashboards-page"},DashboardsListModal:{listItem:{"10.0.0":e=>`data-testid dashboards-list-item-${e}`}}}},ProfilePage:{url:{"10.2.0":"/profile"}},Plugin:{url:{[u]:e=>`/plugins/${e}`}}}),components:a(c)}},2949:(e,t,r)=>{"use strict";r.d(t,{AU:()=>b,Ay:()=>O,OP:()=>f,pK:()=>v,xB:()=>g});var n=r(3241),a=r(8146),i=r.n(a),s=r(7781),o=r(4944),l=r(7139),u=r(8952),c=r(7623),d=r(9526),h=r(2872);const p=["job","instance"],f=1e4,m=e=>({headers:{"X-Grafana-Cache":`private, max-age=${e}`}});function g(e,t){if(!t[e])return;const{type:r,help:n}=t[e];return`${r.toUpperCase()}: ${n}`}function v(e,t){if(t[e])return t[e].help}function b(e,t){if(t[e])return t[e].type}const y=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/;class O extends s.LanguageProvider{constructor(e,t){super(),this.labelKeys=[],this.request=async(e,t,r={},n)=>{try{return(await this.datasource.metadataRequest(e,r,n)).data.data}catch(e){(function(e){return"object"==typeof e&&null!==e&&"cancelled"in e&&!0===e.cancelled})(e)||console.error(e)}return t},this.start=async e=>(this.timeRange=null!=e?e:(0,s.getDefaultTimeRange)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,l.Rg)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async e=>{const t=this.datasource.getAdjustedInterval(this.timeRange),r=this.datasource.interpolateString(e),n=`/api/v1/label/${(0,h.$H)(w(r))}/values`,a=await this.request(n,[],t,this.getDefaultCacheHeaders());return null!=a?a:[]},this.fetchLabels=async(e,t)=>{e&&(this.timeRange=e);let r="/api/v1/labels";const n=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const a=new URLSearchParams({...n});null==t||t.forEach((e=>{const t=(0,c.u)(e.expr);if(""!==t.query.metric){const e=!(0,h.Rq)(t.query.metric);a.append("match[]",e?`{"${t.query.metric}"}`:t.query.metric),t.query.binaryQueries&&t.query.binaryQueries.forEach((t=>{a.append("match[]",e?`{"${t.query.metric}"}`:t.query.metric)}))}})),"GET"===this.datasource.httpMethod&&(r+=`?${a.toString()}`);const i=await this.request(r,[],a,this.getDefaultCacheHeaders());return Array.isArray(i)&&(this.labelKeys=i.slice().sort()),[]},this.getSeriesValues=async(e,t)=>{var r;if(!this.datasource.hasLabelsMatchAPISupport()){return null!=(r=(await this.getSeries(t))[w(e)])?r:[]}return await this.fetchSeriesValuesWithMatch(e,t)},this.fetchSeriesValuesWithMatch=async(e,t,r,n=this.timeRange)=>{const a=e?this.datasource.interpolateString(e):null,i=t?this.datasource.interpolateString(t):null,s={...this.datasource.getAdjustedInterval(n),...i&&{"match[]":i}};let o={...this.getDefaultCacheHeaders(),...r&&{requestId:r}};Object.keys(o).length||(o=void 0);const l=(0,h.$H)(w(null!=a?a:"")),u=await this.request(`/api/v1/label/${l}/values`,[],s,o);return null!=u?u:[]},this.getSeriesLabels=async(e,t)=>{let r,n;this.datasource.hasLabelsMatchAPISupport()?(t.push({name:"__name__",value:"",op:"!="}),n=await this.fetchSeriesLabelsMatch(e),r=Object.keys(n)):(n=await this.getSeries(e),r=Object.keys(n));const a=new Set(t.map((e=>e.name)));return r.filter((e=>!a.has(e)))},this.fetchLabelsWithMatch=async(e,t)=>this.datasource.hasLabelsMatchAPISupport()?this.fetchSeriesLabelsMatch(e,t):this.fetchSeriesLabels(e,t,o.bS),this.fetchSeriesLabels=async(e,t,r)=>{const n=this.datasource.interpolateString(e);let a={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":n};"none"!==r&&(a={...a,limit:null!=r?r:o._N});const i=await this.request("/api/v1/series",[],a,this.getDefaultCacheHeaders()),{values:s}=(0,l.P7)(i,t);return s},this.fetchSeriesLabelsMatch=async(e,t)=>{const r=this.datasource.interpolateString(e),n={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":r};return(await this.request("/api/v1/labels",[],n,this.getDefaultCacheHeaders())).reduce(((e,t)=>({...e,[t]:""})),{})},this.fetchSeries=async e=>{const t={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":e};return await this.request("/api/v1/series",{},t,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,n.once)((async()=>{const e=await Promise.all(p.map((e=>this.fetchLabelValues(e))));return p.reduce(((t,r,n)=>({...t,[r]:e[n]})),{})})),this.fetchSuggestions=async(e,t,r,n,a,i,o)=>{var l;e&&(this.timeRange=e);const u=this.datasource.getAdjustedInterval(this.timeRange),c=await this.request("/suggestions",[],{labelName:a,queries:null==t?void 0:t.map((e=>this.datasource.interpolateString(e.expr,{...this.datasource.getIntervalVars(),...this.datasource.getRangeScopedVars(this.timeRange)}))),scopes:null==r?void 0:r.reduce(((e,t)=>(e.push(...t.spec.filters),e)),[]),adhocFilters:null==n?void 0:n.map((e=>({key:e.key,operator:s.scopeFilterOperatorMap[e.operator],value:e.value,values:e.values}))),limit:i,...u},{...o&&{requestId:o},headers:{...null==(l=this.getDefaultCacheHeaders())?void 0:l.headers,"Content-Type":"application/json"},method:"POST"});return null!=c?c:[]},this.datasource=e,this.histogramMetrics=[],this.timeRange=(0,s.getDefaultTimeRange)(),this.metrics=[],Object.assign(this,t)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==d.fD.None)return m(60*this.datasource.getCacheDurationInMinutes())}cleanText(e){return e.split(y).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return u.n6}async loadMetricsMetadata(){const e=m(86400*this.datasource.getDaysToCacheMetadata());this.metricsMetadata=(0,l.DX)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...e}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(e){return(0,l.pt)(e)}exportToAbstractQuery(e){const t=e.expr;if(!t||0===t.length)return{refId:e.refId,labelMatchers:[]};const r=i().tokenize(t,u.n6),n=(0,l.VH)(r),a=function(e,t){let r="";for(const e of t)if("string"==typeof e){r=e;break}return r}(0,r);return a&&a.length>0&&n.push({name:"__name__",operator:s.AbstractLabelOperator.Equal,value:a}),{refId:e.refId,labelMatchers:n}}async getSeries(e,t){if(this.datasource.lookupsDisabled)return{};try{return"{}"===e?await this.fetchDefaultSeries():await this.fetchSeriesLabels(e,t,o.bS)}catch(e){return console.error(e),{}}}async getLabelValues(e){return await this.fetchLabelValues(e)}}function w(e){var t;const r=e.match(/^"(.*)"$/);return null!=(t=null==r?void 0:r[1])?t:e}},7139:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>y,DX:()=>f,P7:()=>d,P_:()=>p,Qn:()=>b,Rg:()=>c,VH:()=>$,Xd:()=>E,eN:()=>m,ky:()=>T,mv:()=>R,pt:()=>S,u3:()=>P});var n=r(3241),a=r(8146),i=r(7781),s=r(3098),o=r(2949),l=r(470),u=r(9526);const c=e=>{const t=new Set,r=new RegExp("_bucket($|:)");for(let n=0;n<e.length;n++){const a=e[n];r.test(a)&&t.add(a)}return[...t]};function d(e,t=!1){const r={};e.forEach((e=>{const{__name__:n,...a}=e;t&&(r.__name__=r.__name__||new Set,r.__name__.has(n)||r.__name__.add(n)),Object.keys(a).forEach((e=>{r[e]||(r[e]=new Set),r[e].has(a[e])||r[e].add(a[e])}))}));const n={};return g(Object.keys(r)).forEach((e=>{n[e]=g(Array.from(r[e]))})),{values:n,keys:Object.keys(n)}}const h=/\b(\w+)(!?=~?)("[^"\n]*?")(,)?(\s*)?/g;function p(e,t){const r=Object.keys(t).reduce(((e,t)=>{let r=[],n=[],a=[];return e.filter(Boolean).forEach(((e,i)=>{e.match(new RegExp(`(\\s|\\(|^)(${t})(\\s|$|\\(|\\[|\\{)`,"ig"))&&(r=e.split(t),2===r.length?(a.push(i),n.push(...[r[0],t,r[1]].filter(Boolean))):r.length>2&&(a.push(i),r=r.map((e=>""===e?t:e)),n.push(...r)))})),a.forEach((t=>e[t]="")),(e=e.filter(Boolean)).push(...n),e}),[e]);let n=!1;return r.map(((e,a)=>{if(n)return n=!1,"";if(t[e]){const{expandedQuery:i,identifierValue:o,identifier:l}=t[e];if(a+1!==r.length&&r[a+1].match(h)){n=!0;const e=new RegExp(`(,)?(\\s)?(${l}=\\"${o}\\")(,)?(\\s)?`,"g");return function(e,t){var r;const n=e.match(t);if(!n)return e;const a=null!=(r=n.index)?r:0,i=e.slice(0,a+1),o=e.slice(a+1),l=[];o.replace(h,((e,t,r,n,a,i)=>(l.push({key:t,operator:r,value:n,comma:a,space:i}),"")));let u=i;l.filter(Boolean).forEach((e=>{const t=e.value.slice(1,-1);u=(0,s.t)(u,e.key,t,e.operator)}));let c=l.reduce(((e,t)=>{var r,n;return e+=`${t.key}${t.operator}${t.value}${null!=(r=t.comma)?r:""}${null!=(n=t.space)?n:""}`}),"");c="{"+c+"}";const d=o.replace(c,"");return u+d}(i+r[a+1].replace(e,""),/(\)\{|\}\{|\]\{)/)}return i}return e})).filter(Boolean).join("")}function f(e){if(!e)return e;const t={},r={};for(const n in e){const a=e[n][0];t[n]=a,"histogram"===a.type&&(r[`${n}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${a.help})`},r[`${n}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${a.help})`},r[`${n}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${a.help})`}),"summary"===a.type&&(r[`${n}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${a.help})`},r[`${n}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${a.help})`})}const n={ALERTS:{type:"gauge",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."}};return{...t,...r,...n}}function m(e){return t=e/1e3,Math.floor(t/60);var t}function g(e){return e.slice(0,o.OP)}const v=/[*+?()|\\.\[\]{}^$]/g;function b(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function y(e){return b(e.replace(v,"\\$&"))}const O={"=":i.AbstractLabelOperator.Equal,"!=":i.AbstractLabelOperator.NotEqual,"=~":i.AbstractLabelOperator.EqualRegEx,"!~":i.AbstractLabelOperator.NotEqualRegEx},w=(0,n.invert)(O);function x(e){const t=e.labelMatchers.map((e=>{const t=w[e.operator];return t?`${e.name}${t}"${e.value}"`:""})).filter((e=>""!==e)).join(", ");return t?`{${t}}`:""}function S(e){return{refId:e.refId,expr:x(e),range:!0}}function _(e){return"string"==typeof e.content?e.content:""}function $(e){const t=[];for(const r of e)if(r instanceof a.Token&&"context-labels"===r.type){let e="",n="",i="";const s=Array.isArray(r.content)?r.content:[r.content];for(let r of s)if("string"==typeof r){let e;e=r,"="!==e&&"!="!==e&&"=~"!==e&&"!~"!==e||(i=e)}else if(r instanceof a.Token)switch(r.type){case"label-key":e=_(r);break;case"label-value":n=_(r),n=n.substring(1,n.length-1);const a=O[i];a&&t.push({name:e,operator:a,value:n})}}return t}function E(e,t){if(e===u.fD.None)return{start:R(t.from,!1).toString(),end:R(t.to,!0).toString()};const r=R(t.from,!1),n=(0,i.incrRoundDn)(r,60*P(e)),a=60*function(e,t=1){return Math.ceil(e/60)-Math.ceil(e/60)%t}(R(t.to,!0),P(e));if(n===a){const t=a+60*P(e);return{start:n.toString(),end:t.toString()}}return{start:n.toString(),end:a.toString()}}function P(e){switch(e){case u.fD.Medium:return 10;case u.fD.High:return 60;default:return 1}}function R(e,t){return"string"==typeof e&&(e=i.dateMath.parse(e,t)),Math.ceil(e.valueOf()/1e3)}function T(e,t){return void 0===t&&(t=l.o6),e.length=Math.min(e.length,t),e}},8952:(e,t,r)=>{"use strict";r.d(t,{AW:()=>n,n6:()=>a});const n=[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate φ-quantile (0 ≤ φ ≤ 1) over dimensions"},{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"},{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"double_exponential_smoothing",label:"double_exponential_smoothing",detail:"double_exponential_smoothing(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(φ float, b instant-vector)",documentation:"Calculates the φ-quantile (0 ≤ φ ≤ 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Renamed as double_exponential_smoothing in prometheus v3.x. For prometheus versions equal and greater than v3.0 please use double_exponential_smoothing. \n\nProduces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The φ-quantile (0 ≤ φ ≤ 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."},{insertText:"histogram_avg",label:"histogram_avg",detail:"histogram_avg(v instant-vector)",documentation:"Returns the arithmetic average of observed values stored in a native histogram. Samples that are not native histograms are ignored and do not show up in the returned vector."},{insertText:"histogram_count",label:"histogram_count",detail:"histogram_count(v instant-vector)",documentation:"Returns the count of observations stored in a native histogram."},{insertText:"histogram_sum",label:"histogram_sum",detail:"histogram_sum(v instant-vector)",documentation:"Returns the sum of observations stored in a native histogram."},{insertText:"histogram_fraction",label:"histogram_fraction",detail:"histogram_fraction(lower scalar, upper scalar, v instant-vector)",documentation:"Returns the estimated fraction of observations between the provided lower and upper values."},{insertText:"histogram_stddev",label:"histogram_stddev",detail:"histogram_stddev(v instant-vector)",documentation:"Returns the estimated standard deviation of observations in a native histogram, based on the geometric mean of the buckets where the observations lie."},{insertText:"histogram_stdvar",label:"histogram_stdvar",detail:"histogram_stdvar(v instant-vector)",documentation:"Returns the estimated standard variance of observations in a native histogram."}];n.map((e=>e.label));const a={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${n.map((e=>e.label)).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${["by","group_left","group_right","ignoring","on","offset","without"].join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},2646:(e,t,r)=>{"use strict";r.d(t,{l:()=>Be,z:()=>Xe});var n=r(8952),a=r(9101),i=r(5412),s=r(516),o=r(4746);function l(e){var t,r,n,i,s,l;return{...e,id:e.id,name:null!=(t=e.name)?t:(0,a.DQ)(e.id),params:null!=(r=e.params)?r:[],defaultParams:null!=(n=e.defaultParams)?n:[],category:null!=(i=e.category)?i:o.Ag.Functions,renderer:null!=(s=e.renderer)?s:e.params?a.kf:a.jY,addOperationHandler:null!=(l=e.addOperationHandler)?l:a.iZ}}function u(e,t=!1){return{id:e,name:(0,a.DQ)(e),params:[(0,a.z2)(t)],defaultParams:[t?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:d,addOperationHandler:h,changeTypeHandler:c}}function c(e,t){return("$__rate_interval"===e.params[0]&&"$__rate_interval"!==t.defaultParams[0]||"$__interval"===e.params[0]&&"$__interval"!==t.defaultParams[0])&&(e.params=t.defaultParams),e}function d(e,t,r){var n,a;let i=null!=(a=(null!=(n=e.params)?n:[])[0])?a:"5m";return`${t.id}(${r}[${i}])`}function h(e,t,r){const n={id:e.id,params:e.defaultParams};if(t.operations.length>0){if(r.getOperationDef(t.operations[0].id).addOperationHandler===h)return{...t,operations:[n,...t.operations.slice(1)]}}return{...t,operations:[n,...t.operations]}}function p(e,t){var r;return{...t,binaryQueries:[...null!=(r=t.binaryQueries)?r:[],{operator:"/",query:t}]}}function f(e,t,r){var n,a;const i=null!=(n=e.params[0])?n:"",s=`"${null!=(a=e.params[1])?a:""}"`;return`${e.id}(${r}, "${i}", ${s}, "${e.params.slice(2).join(s)}")`}function m(e,t){var r;let n=null!=(r=null==t?void 0:t.documentation)?r:"no docs";return"string"!=typeof e.params[1]&&(n+=" 🚨🚨🚨 The `separator` must be a string."),n}function g(e,t){const r={id:e.id,params:e.defaultParams};return{...t,operations:[...t.operations,r]}}function v(e){return{id:e,name:(0,a.DQ)(e),params:[(0,a.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:b,addOperationHandler:h}}function b(e,t,r){var n,a;let i=null!=(a=(null!=(n=e.params)?n:[])[0])?a:"$__interval";return`${t.id}(${r}[${i}])`}var y=r(7781),O=r(8531);r(3241),r(5774),r(1269),r(7708),r(1693),r(5096),r(4370),r(3887);r(8435),r(3098);var w=r(2540),x=(r(2407),r(2007)),S=r(6089),_=r(5959),$=r(7139),E=r(4944);var P=r(9851),R={id:"promql",extensions:[".promql"],aliases:["Prometheus","prometheus","prom","Prom","promql","Promql","promQL","PromQL"],mimetypes:[],loader:function(){return r.e(871).then(r.bind(r,2871))}};const T=function(e){var t=(0,_.useRef)(e);return t.current=e,t},C={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let k;const D=new Uint8Array(16);const I=[];for(let e=0;e<256;++e)I.push((e+256).toString(16).slice(1));function A(e,t=0){return(I[e[t+0]]+I[e[t+1]]+I[e[t+2]]+I[e[t+3]]+"-"+I[e[t+4]]+I[e[t+5]]+"-"+I[e[t+6]]+I[e[t+7]]+"-"+I[e[t+8]]+I[e[t+9]]+"-"+I[e[t+10]]+I[e[t+11]]+I[e[t+12]]+I[e[t+13]]+I[e[t+14]]+I[e[t+15]]).toLowerCase()}const L=function(e,t,r){if(C.randomUUID&&!t&&!e)return C.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!k){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k=crypto.getRandomValues.bind(crypto)}return k(D)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return A(n)};function N(){const e=new Map;return e.set("expandSuggestionDocs",(!0).toString()),{onDidChangeValue:e=>{},onDidChangeTarget:e=>{},onWillSaveState:e=>{},get:(t,r,n)=>{var a;return null!=(a=e.get(t))?a:n},getBoolean:(t,r,n)=>{const a=e.get(t);return void 0!==a?"true"===a:n},getNumber:(t,r,n)=>{const a=e.get(t);return void 0!==a?parseInt(a,10):n},store:(t,r,n,a)=>{null==r?e.delete(t):e.set(t,r.toString())},remove:(t,r)=>{e.delete(t)},keys:(t,r)=>Array.from(e.keys()),logStorage:()=>{},migrate:()=>Promise.resolve(void 0),isNew:e=>!0,flush:e=>Promise.resolve(void 0)}}let M=null;var j=r(7993),Q=r(2872);class V extends Error{constructor(e){super("should never happen")}}const z={multiInsert:new j.A({intraMode:0}),singleError:new j.A({intraMode:1})};function F(e){let t=e.getAllMetricNames();if(O.config.featureToggles.prometheusCodeModeMetricNamesSearch&&t.length>e.metricNamesSuggestionLimit){const{monacoSettings:r}=e;r.enableAutocompleteSuggestionsUpdate(),t=r.inputInRange?function({metricNames:e,inputText:t,limit:r}){if(!(null==t?void 0:t.trim()))return e.slice(0,r);const n=z.multiInsert.split(t).length>4?z.multiInsert.filter(e,t):z.singleError.filter(e,t);return n?n.slice(0,r).map((t=>e[t])):[]}({metricNames:t,inputText:r.inputInRange,limit:e.metricNamesSuggestionLimit}):t.slice(0,e.metricNamesSuggestionLimit)}return e.metricNamesToMetrics(t).map((e=>({type:"METRIC_NAME",label:e.name,detail:`${e.name} : ${e.type}`,documentation:e.help,...e.isUtf8?{insertText:`{"${e.name}"\${1:}}`,insertTextRules:4}:{insertText:e.name}})))}const B=n.AW.map((e=>{var t;return{type:"FUNCTION",label:e.label,insertText:null!=(t=e.insertText)?t:"",detail:e.detail,documentation:e.documentation}}));async function X(e){const t=F(e);return[...B,...t]}const q=["$__interval","$__range","$__rate_interval","1m","5m","10m","30m","1h","1d"].map((e=>({type:"DURATION",label:e,insertText:e})));function U(e,t){const r=[...t];void 0!==e&&r.push({name:"__name__",value:e,op:"="});return`{${r.map((e=>`${e.name}${e.op}"${(0,$.Qn)(e.value)}"`)).join(",")}}`}async function W(e,t,r,n,a){const i=await async function(e,t,r){if(void 0===e&&0===t.length)return Promise.resolve(r.getAllLabelNames());{const n=U(e,t);return await r.getSeriesLabels(n,t)}}(e,n,a);return i.map((e=>({type:"LABEL_NAME",label:e,...!(0,Q.Rq)(e)?{insertText:`"${e}"${t}`,insertTextRules:4}:{insertText:`${e}${t}`},triggerOnInsert:r})))}async function H(e,t,r,n,a){const i=await async function(e,t,r,n){if(void 0===e&&0===r.length)return n.getLabelValues(t);{const a=U(e,r);return await n.getSeriesValues(t,a)}}(e,t,n,a);return i.map((e=>({type:"LABEL_VALUE",label:e,insertText:G(e,r)})))}function G(e,t){const r=O.config.featureToggles.prometheusSpecialCharsInLabelValues?ze(e):e;return t?r:`"${r}"`}function Y(e,t){switch(e.type){case"IN_DURATION":return Promise.resolve(q);case"IN_FUNCTION":case"AT_ROOT":return X(t);case"EMPTY":{const e=F(t),r=function(e){return e.getHistory().slice(0,10).map((e=>({type:"HISTORY",label:e,insertText:e})))}(t);return Promise.resolve([...r,...B,...e])}case"IN_LABEL_SELECTOR_NO_LABEL_NAME":return async function(e,t,r){return W(e,"=",!0,t,r)}(e.metricName,e.otherLabels,t);case"IN_GROUPING":return async function(e,t,r){return W(e,"",!1,t,r)}(e.metricName,e.otherLabels,t);case"IN_LABEL_SELECTOR_WITH_LABEL_NAME":return H(e.metricName,e.labelName,e.betweenQuotes,e.otherLabels,t);default:throw new V(e)}}function Z(e,t){switch(t){case"parent":return e.parent;case"firstChild":return e.firstChild;case"lastChild":return e.lastChild;case"nextSibling":return e.nextSibling;default:throw new V(t)}}function K(e,t){let r=e;for(const[e,n]of t){if(r=Z(r,e),null===r)return null;if(r.type.id!==n)return null}return r}function J(e,t,r){const n=r?e.from+1:e.from,a=r?e.to-1:e.to;return t.slice(n,a)}function ee(e,t){return e.every(((e,r)=>e===t[r]))}const te=[{path:[P.ww,P.Fb],fun:function(e,t,r){let n=K(e,[["firstChild",P.Yq]]);if(null!==n){if(!t.slice(n.to,r).includes(","))return null}if(n=K(e,[["firstChild",P.c6]]),null!==n){if(!t.slice(n.to,r).includes(","))return null}const a=ae(e,t),i=ue(e,t);return{type:"IN_LABEL_SELECTOR_NO_LABEL_NAME",otherLabels:a,betweenQuotes:!1,...i?{metricName:i}:{}}}},{path:[P.LW,P.c6,P.ww,P.Fb],fun:function(e,t,r){var n;const a=ae(e,t),i=(null==(n=e.parent)?void 0:n.parent)?ue(e.parent.parent,t):null;return{type:"IN_LABEL_SELECTOR_NO_LABEL_NAME",otherLabels:a,betweenQuotes:!0,...i?{metricName:i}:{}}}},{path:[P.ab],fun:le},{path:[P.Dh],fun:function(e,t,r){return{type:"IN_FUNCTION"}}},{path:[P.LW,P.Yq],fun:se},{path:[P.LW,P.d2],fun:oe},{path:[0,P.df,P.ab],fun:le},{path:[0,P.Yq],fun:se},{path:[0,P.d2],fun:oe},{path:[0,P.TG,P.l4],fun:function(e,t,r){return{type:"IN_DURATION"}}},{path:[P.x$],fun:function(e,t,r){var n,a;const i=K(e,[["parent",P.hI],["parent",P.Fn]]);if(null===i)return null;const s=i.getChild(P.Dh);if(null===s)return null;const o=null!=(n=ie(s,P.gw))?n:ie(s,P.LW);if(!o)return null;if(o.type.id===P.LW&&(null==(a=o.parent)?void 0:a.type.id)!==P.c6)return null;return{type:"IN_GROUPING",metricName:J(o,t,o.type.id===P.LW),otherLabels:[]}}}],re=new Map([[P.Hl,"="],[P.Ed,"=~"],[P.l3,"!="],[P.$i,"!~"]]);function ne(e,t){var r;if(!new Set([P.Yq,P.d2]).has(e.type.id))return null;const n=null!=(r=K(e,[["firstChild",P.IC]]))?r:K(e,[["firstChild",P.c6]]);if(null===n)return null;const a=K(n,[["nextSibling",P.Lf]]);if(null===a)return null;const i=function(e){var t;const r=e.firstChild;return null===r?null:null!=(t=re.get(r.type.id))?t:null}(a);if(null===i)return null;const s=K(e,[["lastChild",P.LW]]);if(null===s)return null;const o=J(n,t),l=function(e){const t=e.slice(1,e.length-1);if(e.startsWith('"')&&e.endsWith('"'))return t.replace(/\\"/,'"');if(e.startsWith("'")&&e.endsWith("'"))return t.replace(/\\'/,"'");if(e.startsWith("`")&&e.endsWith("`"))return t;throw new Error("FIXME: invalid string literal")}(J(s,t));return{name:o,value:l,op:i}}function ae(e,t){if(e.type.id!==P.ww)return[];return[P.Yq,P.d2].reduce(((r,n)=>(e.getChildren(n).forEach((e=>{const n=ne(e,t);null!=n&&r.push(n)})),r)),[])}function ie(e,t){if(e.type.id===t)return e;const r=function(e){let t=e.firstChild;const r=[];for(;null!==t;)r.push(t),t=t.nextSibling;return r}(e);for(const e of r){const r=ie(e,t);if(null!==r)return r}return null}function se(e,t,r){const n=!e.type.isError,a=K(e,[["parent",P.Yq]]);if(null===a)return null;const i=K(a,[["firstChild",P.IC]]);if(null===i)return null;const s=J(i,t),o=K(a,[["parent",P.ww]]);if(null===o)return null;const l=ae(o,t).filter((e=>e.name!==s)),u=ue(o,t);return{type:"IN_LABEL_SELECTOR_WITH_LABEL_NAME",labelName:s,betweenQuotes:n,otherLabels:l,...u?{metricName:u}:{}}}function oe(e,t,r){const n=!e.type.isError,a=K(e,[["parent",P.d2]]);if(null===a)return null;const i=K(a,[["firstChild",P.c6]]);if(null===i)return null;const s=J(i,t),o=K(a,[["parent",P.ww]]);if(null===o)return null;const l=ae(o,t).filter((e=>e.name!==s)),u=ue(a.parent,t);return{type:"IN_LABEL_SELECTOR_WITH_LABEL_NAME",labelName:s,betweenQuotes:n,otherLabels:l,...u?{metricName:u}:{}}}function le(e,t,r){return{type:"AT_ROOT"}}function ue(e,t){const r=K(e,[["parent",P.Fb],["firstChild",P.gw]]);if(r)return J(r,t);const n=K(e,[["parent",P.Fb],["firstChild",P.ww],["firstChild",P.c6],["firstChild",P.LW]]);return n?J(n,t,!0):null}function ce(e,t){switch(e){case"DURATION":return t.languages.CompletionItemKind.Unit;case"FUNCTION":return t.languages.CompletionItemKind.Variable;case"HISTORY":return t.languages.CompletionItemKind.Snippet;case"LABEL_NAME":return t.languages.CompletionItemKind.Enum;case"LABEL_VALUE":return t.languages.CompletionItemKind.EnumMember;case"METRIC_NAME":return t.languages.CompletionItemKind.Constructor;default:throw new V(e)}}function de(e,t){return{triggerCharacters:["{",",","[","(","=","~"," ",'"'],provideCompletionItems:(r,n)=>{var a;const i=r.getWordAtPosition(n),s=null!=i?e.Range.lift({startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn}):e.Range.fromPositions(n),o={column:n.column,lineNumber:n.lineNumber};if(t.monacoSettings.setInputInRange(r.getValueInRange(s)),window.getSelection){const e=null==(a=window.getSelection())?void 0:a.toString();e&&e.length>0&&(o.column=o.column-e.length)}const l=r.getOffsetAt(o),u=function(e,t){if(""===e)return{type:"EMPTY"};const r=P.K3.parse(e),n=function(e,t){const r=e.cursorAt(t);for(;;){if(r.from===t&&r.to===t){const{node:e}=r;if(e.type.isError)return e}if(!r.next())break}return null}(r,t),a=null!=n?n.cursor():r.cursorAt(t),i=a.node,s=[a.type.id];for(;a.parent();)s.push(a.type.id);for(let r of te)if(ee(r.path,s))return r.fun(i,e,t);return null}(r.getValue(),l);return(null!=u?Y(u,t):Promise.resolve([])).then((r=>{const n=r.length.toString().length;return{suggestions:r.map(((t,r)=>({kind:ce(t.type,e),label:t.label,insertText:t.insertText,insertTextRules:t.insertTextRules,detail:t.detail,documentation:t.documentation,sortText:r.toString().padStart(n,"0"),range:s,command:t.triggerOnInsert?{id:"editor.action.triggerSuggest",title:""}:void 0}))),incomplete:t.monacoSettings.suggestionsIncomplete}}))}}}const he="codeModeSuggestionsIncomplete";class pe{constructor(e){this.languageProvider=e.languageProvider,this.historyProvider=e.historyProvider,this.inputInRange="",this.metricNamesSuggestionLimit=this.languageProvider.datasource.metricNamesAutocompleteSuggestionLimit,this.suggestionsIncomplete=!1,this.getSeriesLabels=this.languageProvider.getSeriesLabels.bind(this.languageProvider),this.getSeriesValues=this.languageProvider.getSeriesValues.bind(this.languageProvider),this.getAllLabelNames=this.languageProvider.getLabelKeys.bind(this.languageProvider),this.getLabelValues=this.languageProvider.getLabelValues.bind(this.languageProvider)}getHistory(){return this.historyProvider.map((e=>e.query.expr)).filter(Boolean)}getAllMetricNames(){return this.languageProvider.metrics}metricNamesToMetrics(e){const{metricsMetadata:t}=this.languageProvider;return e.map((e=>{var r,n;const a=null==t?void 0:t[e];return{name:e,help:null!=(r=null==a?void 0:a.help)?r:"",type:null!=(n=null==a?void 0:a.type)?n:"",isUtf8:!(0,Q.Rq)(e)}}))}enableAutocompleteSuggestionsUpdate(){this.suggestionsIncomplete=!0,dispatchEvent(new CustomEvent(he,{detail:{limit:this.metricNamesSuggestionLimit,datasourceUid:this.languageProvider.datasource.uid}}))}setInputInRange(e){this.inputInRange=e}get monacoSettings(){return{enableAutocompleteSuggestionsUpdate:this.enableAutocompleteSuggestionsUpdate.bind(this),inputInRange:this.inputInRange,setInputInRange:this.setInputInRange.bind(this),suggestionsIncomplete:this.suggestionsIncomplete}}}function fe(e,t){const r=[];return t.parse(e).iterate({enter:t=>{if(0===t.type.id){const n=t.node;r.push({node:n,text:e.substring(n.from,n.to)})}}}),r}function me(e){return null!==e}const ge={__interval:{text:"1s",value:"1s"},__rate_interval:{text:"1s",value:"1s"},__auto:{text:"1s",value:"1s"},__interval_ms:{text:"1000",value:1e3},__range_ms:{text:"1000",value:1e3},__range_s:{text:"1",value:1},__range:{text:"1s",value:"1s"}},ve={wordPattern:/(-?\d*\.\d\w*)|([^`~!#%^&*()\-=+\[{\]}\\|;:'",.<>\/?\s]+)/g,comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{}},be=["sum","min","max","avg","group","stddev","stdvar","count","count_values","bottomk","topk","quantile"],ye=[];for(let e=0,t=be;e<t.length;e++){let r=t[e];ye.push(r+"_over_time")}const Oe=["on","ignoring","group_right","group_left","by","without"],we="("+Oe.reduce((function(e,t){return e+"|"+t}))+")",xe={ignoreCase:!1,defaultToken:"",tokenPostfix:".promql",keywords:be.concat(["abs","absent","ceil","changes","clamp_max","clamp_min","day_of_month","day_of_week","days_in_month","delta","deriv","double_exponential_smoothing","exp","floor","histogram_quantile","histogram_avg","histogram_count","histogram_sum","histogram_fraction","histogram_stddev","histogram_stdvar","holt_winters","hour","idelta","increase","irate","label_join","label_replace","ln","log2","log10","minute","month","predict_linear","rate","resets","round","scalar","sort","sort_desc","sqrt","time","timestamp","vector","year"]).concat(ye).concat(Oe).concat(["offset"]),operators:["+","-","*","/","%","^","==","!=",">","<",">=","<=","and","or","unless"],vectorMatching:we,symbols:/[=><!~?:&|+\-*\/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,integersuffix:/(ll|LL|u|U|l|L)?(ll|LL|u|U|l|L)?/,floatsuffix:/[fFlL]?/,tokenizer:{root:[[/@vectorMatching\s*(?=\()/,"type","@clauses"],[/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,"tag"],[/(^#.*$)/,"comment"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":"type","@default":"identifier"}}],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/\d+[smhdwy]/,"number"],[/\d*\d+[eE]([\-+]?\d+)?(@floatsuffix)/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?(@floatsuffix)/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F](@integersuffix)/,"number.hex"],[/0[0-7']*[0-7](@integersuffix)/,"number.octal"],[/0[bB][0-1']*[0-1](@integersuffix)/,"number.binary"],[/\d[\d']*\d(@integersuffix)/,"number"],[/\d(@integersuffix)/,"number"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],clauses:[[/[^(,)]/,"tag"],[/\)/,"identifier","@pop"]],whitespace:[[/[ \t\r\n]+/,"white"]]}};var Se=r(9625);const _e={codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0,alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,suggest:{showWords:!1},suggestFontSize:12,wordWrap:"on"},$e=R.id;let Ee=!1;const Pe=e=>{const t=L(),n=(0,_.useRef)((null===M&&(M={storageService:N()}),M)),a=(0,_.useRef)(null),{languageProvider:i,history:s,onBlur:o,onRunQuery:l,initialValue:u,placeholder:c,datasource:d}=e,h=T(i),p=T(s),f=T(l),m=T(o),g=(0,_.useRef)(null),v=((e,t)=>({container:(0,S.css)({borderRadius:e.shape.radius.default,border:`1px solid ${e.components.input.borderColor}`,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",height:"100%",overflow:"hidden"}),placeholder:(0,S.css)({"::after":{content:`'${t}'`,fontFamily:e.typography.fontFamilyMonospace,opacity:.6}})}))((0,x.useTheme2)(),c);return(0,_.useEffect)((()=>()=>{var e;null==(e=g.current)||e.call(g)}),[]),(0,w.jsx)("div",{"data-testid":Se.Tp.components.QueryField.container,className:v.container,ref:a,children:(0,w.jsx)(x.ReactMonacoEditor,{saveViewState:!0,overrideServices:n.current,options:_e,language:"promql",value:u,beforeMount:e=>{!function(e){if(!1===Ee){Ee=!0;const{aliases:t,extensions:r,mimetypes:n}=R;e.languages.register({id:$e,aliases:t,extensions:r,mimetypes:n}),e.languages.setMonarchTokensProvider($e,xe),e.languages.setLanguageConfiguration($e,ve)}}(e)},onMount:(e,n)=>{const i=e.createContextKey("isEditorFocused"+t,!1);e.onDidBlurEditorWidget((()=>{i.set(!1),m.current(e.getValue())})),e.onDidFocusEditorText((()=>{i.set(!0)}));const s=new pe({historyProvider:p.current,languageProvider:h.current}),o=de(n,s),l={...o,provideCompletionItems:(t,r,n,a)=>{var i;return(null==(i=e.getModel())?void 0:i.id)!==t.id?{suggestions:[]}:o.provideCompletionItems(t,r,n,a)}},{dispose:u}=n.languages.registerCompletionItemProvider($e,l);g.current=u;const b=()=>{const t=a.current;if(null!==t){const r=e.getContentHeight();t.style.height=`${r+2}px`,t.style.width="100%";const n=t.clientWidth;e.layout({width:n,height:r})}};if(e.onDidContentSizeChange(b),b(),e.addCommand(n.KeyMod.Shift|n.KeyCode.Enter,(()=>{f.current(e.getValue())}),"isEditorFocused"+t),n.editor.addKeybindingRule({keybinding:n.KeyMod.CtrlCmd|n.KeyCode.KeyF,command:null}),e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KeyK,(function(){r.g.dispatchEvent(new KeyboardEvent("keydown",{key:"k",metaKey:!0}))})),c){const t=[{range:new n.Range(1,1,1,1),options:{className:v.placeholder,isWholeLine:!0}}];let r=[];const a=()=>{const n=e.getModel();if(!n)return;const a=0===n.getValueLength()?t:[];r=n.deltaDecorations(r,a)};a(),e.onDidChangeModelContent(a),e.onDidChangeModelContent((t=>{const r=e.getModel();if(!r)return;const a=r.getValue(),i=function(e,t,r,n){if(!e)return!1;const a=fe(t,n);if(!a.length)return!1;let i=a;if(e!==t){const t=fe(e,n);i=a.flatMap((e=>t.filter((t=>e.text===t.text))||e))}return i.map((t=>function(e,t,r){if(1===t.length){const t=r.node.from===r.node.to,n=t&&r.node.parent?r.node.parent:r.node,a=t?e.substring(n.from,n.to):r.text;return{startLineNumber:1,startColumn:n.from+1,endLineNumber:1,endColumn:n.to+1,error:a}}let n=0,a=0;for(let e=0;e<t.length;e++){if(a=n+t[e].length,!(r.node.from>a))return{startLineNumber:e+1,startColumn:r.node.from-n+1,endLineNumber:e+1,endColumn:r.node.to-n+1,error:r.text};n+=t[e].length+1}return null}(e,r,t))).filter(me)}(a,d.interpolateString(a,ge),r.getLinesContent(),P.K3)||[],s=i.map((({error:e,...t})=>({message:(e?`Error parsing "${e}"`:"Parse error")+". The query appears to be incorrect and could fail to be executed.",severity:n.MarkerSeverity.Error,...t})));n.editor.setModelMarkers(r,"owner",s)}))}}})})},Re=e=>(0,w.jsx)(_.Suspense,{fallback:null,children:(0,w.jsx)(Pe,{...e})}),Te=e=>{const t=(0,_.useRef)(null),{onRunQuery:r,onChange:n,...a}=e;return(0,w.jsx)(Re,{onRunQuery:e=>{t.current=e,n(e),r()},onBlur:e=>{n(e)},...a})};class Ce extends _.PureComponent{constructor(e){super(e),this.refreshHint=()=>{const{datasource:e,query:t,data:r}=this.props,n=e.getInitHints(),a=n.length>0?n[0]:null;if(!r||0===r.series.length)return void this.setState({hint:a});const i=(0,y.isDataFrame)(r.series[0])?r.series.map(y.toLegacyResponseData):r.series,s=e.getQueryHints(t,i);let o=s.length>0?s[0]:null;this.setState({hint:null!=o?o:a})},this.refreshMetrics=async()=>{const{range:e,datasource:{languageProvider:t}}=this.props;this.languageProviderInitializationPromise=(e=>{let t=!1;return{promise:new Promise(((r,n)=>{const a={isCanceled:!0};e.then((e=>t?n(a):r(e))),e.catch((e=>n(t?a:e)))})),cancel(){t=!0}}})(t.start(e));try{const e=await this.languageProviderInitializationPromise.promise;await Promise.all(e),this.onUpdateLanguage()}catch(e){if("object"!=typeof(r=e)||null===r||!("isCanceled"in r)||!e.isCanceled)throw e}var r},this.onChangeLabelBrowser=e=>{this.onChangeQuery(e,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(e,t)=>{const{query:r,onChange:n,onRunQuery:a}=this.props;if(n){n({...r,expr:e}),t&&a&&a()}},this.onClickChooserButton=()=>{var e,t;this.setState((e=>({labelBrowserVisible:!e.labelBrowserVisible}))),(0,O.reportInteraction)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:null!=(t=null==(e=this.props)?void 0:e.app)?t:""})},this.onClickHintFix=()=>{var e;const{datasource:t,query:r,onChange:n,onRunQuery:a}=this.props,{hint:i}=this.state;(null==(e=null==i?void 0:i.fix)?void 0:e.action)&&n(t.modifyQuery(r,i.fix.action)),a()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:e}}=this.props,{metrics:t}=e;t&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(e){const{data:t,datasource:{languageProvider:r},range:n}=this.props;r!==e.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const a=this.rangeChangedToRefresh(n,e.range);(r!==e.datasource.languageProvider||a)&&this.refreshMetrics(),t&&e.data&&e.data.series!==t.series&&this.refreshHint()}rangeChangedToRefresh(e,t){if(e&&t){const r=(0,$.eN)(e.from.valueOf())===(0,$.eN)(t.from.valueOf()),n=(0,$.eN)(e.to.valueOf())===(0,$.eN)(t.to.valueOf());return!(r&&n)}return!1}render(){const{datasource:e,datasource:{languageProvider:t},query:r,ExtraFieldElement:n,history:a=[],theme:i}=this.props,{labelBrowserVisible:s,syntaxLoaded:o,hint:l}=this.state,u=t.metrics.length>0,c=function(e,t,r){return e?"(Disabled)":t?r?"Metrics browser":"(No metrics found)":"Loading metrics..."}(e.lookupsDisabled,o,u),d=!(o&&u);return(0,w.jsx)(y.LocalStorageValueProvider,{storageKey:"grafana.datasources.prometheus.browser.labels",defaultValue:[],children:(o,u,h)=>{var p;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"],children:[(0,w.jsxs)("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:d,type:"button","data-testid":Se.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.openButton,children:[c,(0,w.jsx)(x.Icon,{name:s?"angle-down":"angle-right"})]}),(0,w.jsx)("div",{className:"flex-grow-1 min-width-15",children:(0,w.jsx)(Te,{languageProvider:t,history:a,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:null!=(p=r.expr)?p:"",placeholder:"Enter a PromQL query…",datasource:e})})]}),s&&(0,w.jsx)("div",{className:"gf-form",children:(0,w.jsx)(E.ur,{languageProvider:t,onChange:this.onChangeLabelBrowser,lastUsedLabels:o||[],storeLastUsedLabels:u,deleteLastUsedLabels:h,timeRange:this.props.range})}),n,l?(0,w.jsx)("div",{className:(0,S.css)({flexBasis:"100%"}),children:(0,w.jsxs)("div",{className:"text-warning",children:[l.label," ",l.fix?(0,w.jsx)("button",{type:"button",className:(0,S.cx)((0,x.clearButtonStyles)(i),"text-link","muted"),onClick:this.onClickHintFix,children:l.fix.label}):null]})}):null]})}})}}(0,x.withTheme2)(Ce);var ke=r(7623);function De({title:e,stepNumber:t,markdown:r,children:n}){const a=(0,x.useStyles2)(Ie);return(0,w.jsxs)("div",{className:a.box,children:[void 0!==t&&(0,w.jsx)("div",{className:a.stepNumber,children:t}),(0,w.jsxs)("div",{className:a.boxInner,children:[e&&(0,w.jsx)("div",{className:a.header,children:(0,w.jsx)("span",{children:e})}),(0,w.jsxs)("div",{className:a.body,children:[r&&(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,y.renderMarkdown)(r)}}),n]})]})]})}const Ie=e=>({box:(0,S.css)({background:e.colors.background.secondary,padding:e.spacing(1),borderRadius:e.shape.radius.default,position:"relative"}),boxInner:(0,S.css)({marginLeft:e.spacing(4)}),stepNumber:(0,S.css)({fontWeight:e.typography.fontWeightMedium,background:e.colors.secondary.main,width:"20px",height:"20px",borderRadius:e.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:e.typography.bodySmall.fontSize}),header:(0,S.css)({paddingBottom:e.spacing(.5),display:"flex",alignItems:"center",fontFamily:e.typography.fontFamilyMonospace}),body:(0,S.css)({color:e.colors.text.secondary,"p:last-child":{margin:0},a:{color:e.colors.text.link,textDecoration:"underline"}})});var Ae=r(8146),Le=r.n(Ae);function Ne({query:e,lang:t,className:r}){const n=(0,x.useTheme2)(),a=Me(n),i=Le().highlight(e,t.grammar,t.name);return(0,w.jsx)("div",{className:(0,S.cx)(a.editorField,"prism-syntax-highlight",r),"aria-label":"selector",dangerouslySetInnerHTML:{__html:i}})}const Me=e=>({editorField:(0,S.css)({fontFamily:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize})});function je({query:e,queryModeller:t,stepNumber:r,lang:n,onMouseEnter:a,onMouseLeave:i}){return(0,w.jsx)(w.Fragment,{children:e.operations.map(((e,s)=>{var o;const l=t.getOperationDef(e.id);if(!l)return`Operation ${e.id} not found`;const u=l.renderer(e,l,"<expr>"),c=l.explainHandler?l.explainHandler(e,l):null!=(o=l.documentation)?o:"no docs";return(0,w.jsx)("div",{onMouseEnter:()=>null==a?void 0:a(e,s),onMouseLeave:()=>null==i?void 0:i(e,s),children:(0,w.jsx)(De,{stepNumber:s+r,title:(0,w.jsx)(Ne,{query:u,lang:n}),markdown:c})},s)}))})}const Qe=(0,_.memo)((({query:e})=>{const t=(0,ke.u)(e||"").query,r={grammar:n.n6,name:"promql"};return(0,w.jsxs)(x.Stack,{gap:.5,direction:"column",children:[(0,w.jsx)(De,{stepNumber:1,title:(0,w.jsx)(Ne,{query:`${Xe.renderQuery(t)}`,lang:r}),children:"Fetch all series matching metric name and label filters."}),(0,w.jsx)(je,{stepNumber:2,queryModeller:Xe,query:t,lang:r})]})}));Qe.displayName="PromQueryBuilderExplained";r(2949);var Ve=r(9526);r(2039),r(1910);r(4429),r(2001);r(470);Ve.B4.LabelNames,Ve.B4.LabelValues,Ve.B4.MetricNames,Ve.B4.VarQueryResult,Ve.B4.SeriesQuery,Ve.B4.ClassicQuery;y.CustomVariableSupport;O.DataSourceWithBackend;function ze(e){return"string"!=typeof e?e:O.config.featureToggles.prometheusSpecialCharsInLabelValues?/^\w+(=|!=|=~|!~)".*"$/.test(e)?e:e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'):e.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'")}class Fe{constructor(e){this.categories=[],this.operationsRegistry=new y.Registry(e)}setOperationCategories(e){this.categories=e}getOperationsForCategory(e){return this.operationsRegistry.list().filter((t=>t.category===e&&!t.hideFromList))}getAlternativeOperations(e){return this.operationsRegistry.list().filter((t=>t.alternativesKey&&t.alternativesKey===e))}getCategories(){return this.categories}getOperationDef(e){return this.operationsRegistry.getIfExists(e)}renderOperations(e,t){for(const r of t){const t=this.operationsRegistry.getIfExists(r.id);if(!t)throw new Error(`Could not find operation ${r.id} in the registry`);e=t.renderer(r,t,e)}return e}renderBinaryQueries(e,t){if(t)for(const r of t)e=`${this.renderBinaryQuery(e,r)}`;return e}renderBinaryQuery(e,t){let r=e+` ${t.operator} `;return t.vectorMatches&&(r+=`${t.vectorMatchesType}(${t.vectorMatches}) `),r+this.renderQuery(t.query,!0)}renderLabels(e){if(0===e.length)return"";let t="{";for(const r of e){"{"!==t&&(t+=", ");let e=r.value;const n="=~"===r.op||"!~"===r.op;O.config.featureToggles.prometheusSpecialCharsInLabelValues&&!n&&(e=ze(e)),t+=`${(0,Q.Nc)(r.label)}${r.op}"${e}"`}return t+"}"}renderQuery(e,t){var r,n;let a="";const i=this.renderLabels(e.labels);return a=e.metric?(0,Q.Rq)(e.metric)?`${e.metric}${i}`:`{"${e.metric}"${i.length>0?`, ${i.substring(1)}`:"}"}`:i,a=this.renderOperations(a,e.operations),!t&&this.hasBinaryOp(e)&&Boolean(null==(r=e.binaryQueries)?void 0:r.length)&&(a=`(${a})`),a=this.renderBinaryQueries(a,e.binaryQueries),t&&(this.hasBinaryOp(e)||Boolean(null==(n=e.binaryQueries)?void 0:n.length))&&(a=`(${a})`),a}hasBinaryOp(e){return void 0!==e.operations.find((e=>{const t=this.getOperationDef(e.id);return(null==t?void 0:t.category)===o.Ag.BinaryOps}))}}class Be extends Fe{constructor(){super((()=>{const e=[{id:o.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.Ag.Functions,renderer:a.jY,addOperationHandler:a.iZ},l({id:o.jN.HistogramAvg}),l({id:o.jN.HistogramCount}),l({id:o.jN.HistogramSum}),{id:o.jN.HistogramFraction,name:"Histogram fraction",params:[{name:"Lower scalar",type:"number"},{name:"Upper scalar",type:"number"}],defaultParams:[0,.2],category:o.Ag.Functions,renderer:a.jY,addOperationHandler:a.iZ},l({id:o.jN.HistogramStddev}),l({id:o.jN.HistogramStdvar}),{id:o.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:a.kf,addOperationHandler:a.iZ},{id:o.jN.Ln,name:"Ln",params:[],defaultParams:[],category:o.Ag.Functions,renderer:a.jY,addOperationHandler:a.iZ},u(o.jN.Changes),u(o.jN.Rate,!0),u(o.jN.Irate),u(o.jN.Increase,!0),u(o.jN.Idelta),u(o.jN.Delta),l({id:o.jN.DoubleExponentialSmoothing,params:[(0,a.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:a.nU,addOperationHandler:h,changeTypeHandler:c}),l({id:o.jN.HoltWinters,params:[(0,a.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:a.nU,addOperationHandler:h,changeTypeHandler:c}),l({id:o.jN.PredictLinear,params:[(0,a.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:a.nU,addOperationHandler:h,changeTypeHandler:c}),l({id:o.jN.QuantileOverTime,params:[(0,a.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:a.Kl,addOperationHandler:h,changeTypeHandler:c}),...i.Iu,{id:o.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.Ag.BinaryOps,renderer:(e,t,r)=>r,addOperationHandler:p},l({id:o.jN.Abs}),l({id:o.jN.Absent}),l({id:o.jN.Acos,category:o.Ag.Trigonometric}),l({id:o.jN.Acosh,category:o.Ag.Trigonometric}),l({id:o.jN.Asin,category:o.Ag.Trigonometric}),l({id:o.jN.Asinh,category:o.Ag.Trigonometric}),l({id:o.jN.Atan,category:o.Ag.Trigonometric}),l({id:o.jN.Atanh,category:o.Ag.Trigonometric}),l({id:o.jN.Ceil}),l({id:o.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),l({id:o.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.Cos,category:o.Ag.Trigonometric}),l({id:o.jN.Cosh,category:o.Ag.Trigonometric}),l({id:o.jN.DayOfMonth,category:o.Ag.Time}),l({id:o.jN.DayOfWeek,category:o.Ag.Time}),l({id:o.jN.DayOfYear,category:o.Ag.Time}),l({id:o.jN.DaysInMonth,category:o.Ag.Time}),l({id:o.jN.Deg}),u(o.jN.Deriv),l({id:o.jN.Exp}),l({id:o.jN.Floor}),l({id:o.jN.Hour}),l({id:o.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:f,explainHandler:m,addOperationHandler:g}),l({id:o.jN.Log10}),l({id:o.jN.Log2}),l({id:o.jN.Minute}),l({id:o.jN.Month}),l({id:o.jN.Pi,renderer:e=>`${e.id}()`}),l({id:o.jN.Rad}),u(o.jN.Resets),l({id:o.jN.Round,category:o.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),l({id:o.jN.Scalar}),l({id:o.jN.Sgn}),l({id:o.jN.Sin,category:o.Ag.Trigonometric}),l({id:o.jN.Sinh,category:o.Ag.Trigonometric}),l({id:o.jN.Sort}),l({id:o.jN.SortDesc}),l({id:o.jN.Sqrt}),l({id:o.jN.Stddev}),l({id:o.jN.Tan,category:o.Ag.Trigonometric}),l({id:o.jN.Tanh,category:o.Ag.Trigonometric}),l({id:o.jN.Time,renderer:e=>`${e.id}()`}),l({id:o.jN.Timestamp}),l({id:o.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:e=>`${e.id}(${e.params[0]})`}),l({id:o.jN.Year}),...(0,a.G3)(o.jN.Sum),...(0,a.G3)(o.jN.Avg),...(0,a.G3)(o.jN.Min),...(0,a.G3)(o.jN.Max),...(0,a.G3)(o.jN.Count),...(0,a.G3)(o.jN.Group),...(0,a.jC)(o.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.jC)(o.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.jC)(o.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),...(0,a.jC)(o.jN.Quantile,{params:[{name:"Value",type:"number"}],defaultParams:[1]}),v(o.jN.SumOverTime),v(o.jN.AvgOverTime),v(o.jN.MinOverTime),v(o.jN.MaxOverTime),v(o.jN.CountOverTime),v(o.jN.LastOverTime),v(o.jN.PresentOverTime),v(o.jN.AbsentOverTime),v(o.jN.StddevOverTime)];for(const t of e){const e=n.AW.find((e=>e.insertText===t.id));e&&(t.documentation=e.documentation)}return e})),this.setOperationCategories([o.Ag.Aggregations,o.Ag.RangeFunctions,o.Ag.Functions,o.Ag.BinaryOps,o.Ag.Trigonometric,o.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const Xe=new Be},5412:(e,t,r)=>{"use strict";r.d(t,{AE:()=>s,Iu:()=>o});var n=r(9101),a=r(4746);const i=[{id:a.jN.Addition,name:"Add scalar",sign:"+"},{id:a.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:a.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:a.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:a.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:a.jN.Exponent,name:"Exponent",sign:"^"},{id:a.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:a.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:a.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:a.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:a.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:a.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=i.reduce(((e,t)=>(e[t.sign]={id:t.id,comparison:t.comparison},e)),{}),o=i.map((e=>{const t=[{name:"Value",type:"number"}];let r=[2];return e.comparison&&(t.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),r=[2,!1]),{id:e.id,name:e.name,params:t,defaultParams:r,alternativesKey:"binary scalar operations",category:a.Ag.BinaryOps,renderer:(i=e.sign,function(e,t,r){let n=e.params[0],a="";return 2===e.params.length&&(a=e.params[1]?" bool":""),`${r} ${i}${a} ${n}`}),addOperationHandler:n.iZ};var i}))},516:(e,t,r)=>{"use strict";r.d(t,{r:()=>u});var n=r(2540),a=r(5959),i=r(7781),s=r(2007),o=r(2646),l=r(9101);function u({onChange:e,index:t,operationId:r,value:u,query:c,datasource:d}){const[h,p]=(0,a.useState)({});return(0,n.jsx)(s.Select,{inputId:(0,l.OS)(r,t),autoFocus:""===u||void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{p({isLoading:!0});const e=await async function(e,t){let r=e.labels;"prometheus"===t.type&&(r=[{label:"__name__",op:"=",value:e.metric},...e.labels]);const n=o.z.renderLabels(r),a=await t.languageProvider.fetchLabelsWithMatch(n);return Object.keys(a).map((e=>({label:e,value:e})))}(c,d);p({options:e,isLoading:void 0})},isLoading:h.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:h.options,value:(0,i.toOption)(u),onChange:r=>e(t,r.value)})}},470:(e,t,r)=>{"use strict";r.d(t,{dm:()=>O,o6:()=>y});var n=r(2540),a=r(6089),i=r(2039),s=r.n(i),o=r(5959),l=r(2341),u=r.n(l),c=r(7781),d=r(2407),h=r(2007),p=r(7139),f=r(1910),m=r(4429),g=r(2001),v=r(9625);const b=" ",y=1e3;function O({datasource:e,query:t,onChange:r,onGetMetrics:a,labelsFilters:i,metricLookupDisabled:l,onBlur:O,variableEditor:S}){var _;const $=(0,h.useStyles2)(w),[E,P]=(0,o.useState)({}),R=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],T=(0,o.useCallback)(((e,t)=>{var r;const n=null!=(r=e.label)?r:e.value;if(!n)return!1;if(!n.toLowerCase)return!0;return t.split(b).reduce(((e,t)=>{const r=n.toLowerCase().includes(t.toLowerCase());return e&&(r||"Metrics explorer"===n)}),!0)}),[]),C=(0,o.useCallback)(((e,t)=>{var r;return e.__isNew__?e.label:(0,n.jsx)(u(),{searchWords:t.inputValue.split(b),textToHighlight:null!=(r=e.label)?r:"",highlightClassName:$.highlight})}),[$.highlight]),k=t=>{const r=e.metricFindQuery(((e,t)=>{const r=(0,f.b4)(e);return x(r,t)})(t,i));return r.then((e=>{const t=e.length;(0,p.ky)(e),t>e.length?P({...E,resultsTruncated:!0}):P({...E,resultsTruncated:!1});const r=e.map((e=>({label:e.text,value:e.text})));return[...R,...r]}))},D=()=>Promise.resolve([]),I=s()((e=>k(e)),e.getDebounceTimeInMilliseconds()),A=e=>{const t=e.data;if("BrowseMetrics"===t.value){const r=e.isFocused?$.focus:"";return(0,n.jsx)("div",{...e.innerProps,ref:e.innerRef,className:`${$.customOptionWidth} metric-encyclopedia-open`,"data-testid":v.Tp.components.Select.option,onKeyDown:e=>{"Enter"===e.code&&P({...E,metricsModalOpen:!0})},children:(0,n.jsxs)("div",{className:`${$.customOption} ${r} metric-encyclopedia-open`,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"metric-encyclopedia-open",children:t.label}),(0,n.jsx)("div",{className:`${$.customOptionDesc} metric-encyclopedia-open`,children:t.description})]}),(0,n.jsxs)(h.Button,{fill:"text",size:"sm",variant:"secondary",onClick:()=>P({...E,metricsModalOpen:!0}),className:"metric-encyclopedia-open",children:["Open",(0,n.jsx)(h.Icon,{name:"arrow-right"})]})]})})}return(0,h.SelectMenuOptions)(e)},L=({children:e,maxHeight:t,innerRef:r,innerProps:a})=>{const i=(0,h.useTheme2)(),s=(0,h.getSelectStyles)(i),l=!o.isValidElement(e)&&E.resultsTruncated;return(0,n.jsxs)("div",{...a,className:`${s.menu} ${$.customMenuContainer}`,style:{maxHeight:Math.round(.9*t)},"aria-label":"Select options menu",children:[(0,n.jsx)(h.ScrollContainer,{ref:r,showScrollIndicators:!0,children:e}),l&&(0,n.jsx)("div",{className:$.customMenuFooter,children:(0,n.jsx)("div",{children:"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics."})})]})},N=()=>{var e;return(0,n.jsx)(h.AsyncSelect,{"data-testid":v.Tp.components.DataSource.Prometheus.queryEditor.builder.metricSelect,isClearable:Boolean(S),inputId:"prometheus-metric-select",className:$.select,value:t.metric?(0,c.toOption)(t.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:C,filterOption:T,minMenuHeight:250,onOpenMenu:async()=>{if(l)return;P({isLoading:!0});const e=await a(),t=e.map((e=>e.value)),r=e.length;e.length>y&&(0,p.ky)(e),P({metrics:[...R,...e],isLoading:void 0,initialMetrics:t,resultsTruncated:r>e.length})},loadOptions:l?D:I,isLoading:E.isLoading,defaultOptions:null!=(e=E.metrics)?e:Array.from(new Array(25),(()=>({value:""}))),onChange:e=>{const n=null==e?void 0:e.value;n?"BrowseMetrics"===n?((0,g.E5)("grafana_prometheus_metric_encyclopedia_open",null,"",t),P({...E,metricsModalOpen:!0})):r({...t,metric:n}):r({...t,metric:""})},components:{Option:A,MenuList:L},onBlur:O})};return(0,n.jsxs)(n.Fragment,{children:[!e.lookupsDisabled&&E.metricsModalOpen&&(0,n.jsx)(m.Ly,{datasource:e,isOpen:E.metricsModalOpen,onClose:()=>P({...E,metricsModalOpen:!1}),query:t,onChange:r,initialMetrics:null!=(_=E.initialMetrics)?_:[]}),S?(0,n.jsx)(h.InlineFieldRow,{children:(0,n.jsx)(h.InlineField,{label:"Metric",labelWidth:20,tooltip:(0,n.jsx)("div",{children:"Optional: returns a list of label values for the label name in the specified metric."}),children:N()})}):(0,n.jsx)(d.Bx,{children:(0,n.jsx)(d.c$,{label:"Metric",children:N()})})]})}const w=e=>({select:(0,a.css)({minWidth:"125px"}),highlight:(0,a.css)({label:"select__match-highlight",background:"inherit",padding:"inherit",color:e.colors.warning.contrastText,backgroundColor:e.colors.warning.main}),customOption:(0,a.css)({padding:"8px",display:"flex",justifyContent:"space-between",cursor:"pointer",":hover":{backgroundColor:e.colors.emphasize(e.colors.background.primary,.1)}}),customOptionlabel:(0,a.css)({color:e.colors.text.primary}),customOptionDesc:(0,a.css)({color:e.colors.text.secondary,fontSize:e.typography.size.xs,opacity:"50%"}),focus:(0,a.css)({backgroundColor:e.colors.emphasize(e.colors.background.primary,.1)}),customOptionWidth:(0,a.css)({minWidth:"400px"}),customMenuFooter:(0,a.css)({flex:0,display:"flex",justifyContent:"space-between",padding:e.spacing(1.5),borderTop:`1px solid ${e.colors.border.weak}`,color:e.colors.text.secondary}),customMenuContainer:(0,a.css)({display:"flex",flexDirection:"column",background:e.colors.background.primary,boxShadow:e.shadows.z3})}),x=(e,t)=>{const r=t?S(t):[];return`label_values({__name__=~".*${e}"${r?r.join(""):""}},__name__)`},S=e=>e.map((e=>`,${e.label}="${e.value}"`))},4429:(e,t,r)=>{"use strict";r.d(t,{Ly:()=>Ee,hD:()=>Pe,VL:()=>Be});var n=r(2540),a=r(6089),i=r(7694),s=Symbol.for("immer-nothing"),o=Symbol.for("immer-draftable"),l=Symbol.for("immer-state");function u(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var c=Object.getPrototypeOf;function d(e){return!!e&&!!e[l]}function h(e){return!!e&&(f(e)||Array.isArray(e)||!!e[o]||!!e.constructor?.[o]||y(e)||O(e))}var p=Object.prototype.constructor.toString();function f(e){if(!e||"object"!=typeof e)return!1;const t=c(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===p}function m(e,t){0===g(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function g(e){const t=e[l];return t?t.type_:Array.isArray(e)?1:y(e)?2:O(e)?3:0}function v(e,t){return 2===g(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b(e,t,r){const n=g(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function y(e){return e instanceof Map}function O(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function x(e,t){if(y(e))return new Map(e);if(O(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=f(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[l];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(c(e),t)}{const t=c(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function S(e,t=!1){return $(e)||d(e)||!h(e)||(g(e)>1&&(e.set=e.add=e.clear=e.delete=_),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>S(t,!0)))),e}function _(){u(2)}function $(e){return Object.isFrozen(e)}var E,P={};function R(e){const t=P[e];return t||u(0),t}function T(){return E}function C(e,t){t&&(R("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function k(e){D(e),e.drafts_.forEach(A),e.drafts_=null}function D(e){e===E&&(E=e.parent_)}function I(e){return E={drafts_:[],parent_:E,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A(e){const t=e[l];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function L(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[l].modified_&&(k(t),u(4)),h(e)&&(e=N(t,e),t.parent_||j(t,e)),t.patches_&&R("Patches").generateReplacementPatches_(r[l].base_,e,t.patches_,t.inversePatches_)):e=N(t,r,[]),k(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==s?e:void 0}function N(e,t,r){if($(t))return t;const n=t[l];if(!n)return m(t,((a,i)=>M(e,n,t,a,i,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return j(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,i=!1;3===n.type_&&(a=new Set(t),t.clear(),i=!0),m(a,((a,s)=>M(e,n,t,a,s,r,i))),j(e,t,!1),r&&e.patches_&&R("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function M(e,t,r,n,a,i,s){if(d(a)){const s=N(e,a,i&&t&&3!==t.type_&&!v(t.assigned_,n)?i.concat(n):void 0);if(b(r,n,s),!d(s))return;e.canAutoFreeze_=!1}else s&&r.add(a);if(h(a)&&!$(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;N(e,a),t&&t.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||j(e,a)}}function j(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S(t,r)}var Q={get(e,t){if(t===l)return e;const r=w(e);if(!v(r,t))return function(e,t,r){const n=F(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!h(n)?n:n===z(e.base_,t)?(X(e),e.copy_[t]=q(n,e)):n},has:(e,t)=>t in w(e),ownKeys:e=>Reflect.ownKeys(w(e)),set(e,t,r){const n=F(w(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=z(w(e),t),s=n?.[l];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(i=n)?0!==a||1/a==1/i:a!=a&&i!=i)&&(void 0!==r||v(e.base_,t)))return!0;X(e),B(e)}var a,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==z(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,X(e),B(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=w(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){u(11)},getPrototypeOf:e=>c(e.base_),setPrototypeOf(){u(12)}},V={};function z(e,t){const r=e[l];return(r?w(r):e)[t]}function F(e,t){if(!(t in e))return;let r=c(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=c(r)}}function B(e){e.modified_||(e.modified_=!0,e.parent_&&B(e.parent_))}function X(e){e.copy_||(e.copy_=x(e.base_,e.scope_.immer_.useStrictShallowCopy_))}m(Q,((e,t)=>{V[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),V.deleteProperty=function(e,t){return V.set.call(this,e,t,void 0)},V.set=function(e,t,r){return Q.set.call(this,e[0],t,r,e[0])};function q(e,t){const r=y(e)?R("MapSet").proxyMap_(e,t):O(e)?R("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:T(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Q;r&&(a=[n],i=V);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}(e,t);return(t?t.scope_:T()).drafts_.push(r),r}function U(e){if(!h(e)||$(e))return e;const t=e[l];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=x(e,t.scope_.immer_.useStrictShallowCopy_)}else r=x(e,!0);return m(r,((e,t)=>{b(r,e,U(t))})),t&&(t.finalized_=!1),r}var W=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&u(6),void 0!==r&&"function"!=typeof r&&u(7),h(e)){const a=I(this),i=q(e,void 0);let s=!0;try{n=t(i),s=!1}finally{s?k(a):D(a)}return C(a,r),L(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===s&&(n=void 0),this.autoFreeze_&&S(n,!0),r){const t=[],a=[];R("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}u(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h(e)||u(8),d(e)&&(e=function(e){d(e)||u(10);return U(e)}(e));const t=I(this),r=q(e,void 0);return r[l].isManual_=!0,D(t),r}finishDraft(e,t){const r=e&&e[l];r&&r.isManual_||u(9);const{scope_:n}=r;return C(n,t),L(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=R("Patches").applyPatches_;return d(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},H=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseStrictShallowCopy.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function G(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(se(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>(0,i.isAction)(t)&&t.type===e,r}Symbol.species;function Y(e){return h(e)?H(e,(()=>{})):e}function Z(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function K(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(se(28));if(n in t)throw new Error(se(29));return t[n]=r,a},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var J=Symbol.for("rtk-slice-createasyncthunk");function ee(e,t){return`${e}/${t}`}function te({creators:e}={}){const t=e?.asyncThunk?.[J];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(se(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(se(12));if(r in s.sliceCaseReducersByType)throw new Error(se(13));return s.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(s.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"==typeof e.extraReducers?K(e.extraReducers):[e.extraReducers],a={...t,...s.sliceCaseReducersByType};return function(e,t){let r,[n,a,i]=K(t);if("function"==typeof e)r=()=>Y(e());else{const t=Y(e);r=()=>t}function s(e=r(),t){let s=[n[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===s.filter((e=>!!e)).length&&(s=[i]),s.reduce(((e,r)=>{if(r){if(d(e)){const n=r(e,t);return void 0===n?e:n}if(h(e))return H(e,(e=>r(e,t)));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e}),e)}return s.getInitialState=r,s}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}i.forEach((n=>{const i=a[n],s={reducerName:n,type:ee(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function({type:e,reducerName:t,createNotation:r},n,a){let i,s;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(se(17));i=n.reducer,s=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,s?G(e,s):G(e))}(s,i,o):function({type:e,reducerName:t},r,n,a){if(!a)throw new Error(se(18));const{payloadCreator:i,fulfilled:s,pending:o,rejected:l,settled:u,options:c}=r,d=a(e,i,c);n.exposeAction(t,d),s&&n.addCase(d.fulfilled,s);o&&n.addCase(d.pending,o);l&&n.addCase(d.rejected,l);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(t,{fulfilled:s||ae,pending:o||ae,rejected:l||ae,settled:u||ae})}(s,i,o,t)}));const u=e=>e,c=new Map;let p;function f(e,t){return p||(p=l()),p(e,t)}function m(){return p||(p=l()),p.getInitialState()}function g(t,r=!1){function n(e){let n=e[t];return void 0===n&&r&&(n=m()),n}function a(t=u){const n=Z(c,r,(()=>new WeakMap));return Z(n,t,(()=>{const n={};for(const[a,i]of Object.entries(e.selectors??{}))n[a]=re(i,t,m,r);return n}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const v={name:r,reducer:f,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:m,...g(n),injectInto(e,{reducerPath:t,...r}={}){const a=t??n;return e.inject({reducerPath:a,reducer:f},r),{...v,...g(a,!0)}}};return v}}function re(e,t,r,n){function a(a,...i){let s=t(a);return void 0===s&&n&&(s=r()),e(s,...i)}return a.unwrapped=e,a}var ne=te();function ae(){}var{assign:ie}=Object;Symbol.for("rtk-state-proxy-original");function se(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oe=r(2039),le=r.n(oe),ue=r(5959),ce=r(2007),de=r(2001);function he(e){const{state:t,onChangeFullMetaSearch:r,onChangeIncludeNullMetadata:i,onChangeDisableTextWrap:s,onChangeUseBackend:o}=e,l=function(e){return{settingsIcon:(0,a.css)({color:e.colors.text.secondary}),selectItem:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",padding:"4px 0"}),selectItemLabel:(0,a.css)({margin:`0 0 0 ${e.spacing(1)}`,alignSelf:"center",color:e.colors.text.secondary,fontSize:"12px"})}}((0,ce.useTheme2)());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:l.selectItem,children:[(0,n.jsx)(ce.Switch,{"data-testid":Pe.searchWithMetadata,value:t.fullMetaSearch,disabled:t.useBackend||!t.hasMetadata,onChange:()=>r()}),(0,n.jsx)("div",{className:l.selectItemLabel,children:de.Ft.metadataSearchSwitch})]}),(0,n.jsxs)("div",{className:l.selectItem,children:[(0,n.jsx)(ce.Switch,{value:t.includeNullMetadata,disabled:!t.hasMetadata,onChange:()=>i()}),(0,n.jsx)("div",{className:l.selectItemLabel,children:de.Ft.includeNullMetadata})]}),(0,n.jsxs)("div",{className:l.selectItem,children:[(0,n.jsx)(ce.Switch,{value:t.disableTextWrap,onChange:()=>s()}),(0,n.jsx)("div",{className:l.selectItemLabel,children:"Disable text wrap"})]}),(0,n.jsxs)("div",{className:l.selectItem,children:[(0,n.jsx)(ce.Switch,{"data-testid":Pe.setUseBackend,value:t.useBackend,onChange:()=>o()}),(0,n.jsxs)("div",{className:l.selectItemLabel,children:[de.Ft.setUseBackend," "]}),(0,n.jsx)(ce.Tooltip,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end",children:(0,n.jsx)(ce.Icon,{name:"info-circle",size:"xs",className:l.settingsIcon})})]})]})}function pe({feedbackUrl:e}){const t=(0,ce.useStyles2)(fe);return(0,n.jsx)(ce.Stack,{children:(0,n.jsxs)("a",{href:e,className:t.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener",children:[(0,n.jsx)(ce.Icon,{name:"comment-alt-message"})," Give feedback"]})})}function fe(e){return{link:(0,a.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,":hover":{color:e.colors.text.link},margin:"-25px 0 30px 0"})}}var me=r(2341),ge=r.n(me);r(2407),r(8531);function ve(e){const{metrics:t,onChange:r,onClose:a,query:i,state:s,disableTextWrap:o}=e,l=(0,ce.useTheme2)(),u=be(l,o);function c(e){var t,r,a,i;return s.fullMetaSearch&&e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{children:h(null!=(t=e.type)?t:"")}),(0,n.jsx)("td",{children:(0,n.jsx)(ge(),{textToHighlight:null!=(r=e.description)?r:"",searchWords:s.metaHaystackMatches,autoEscape:!0,highlightClassName:u.matchHighLight})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{children:h(null!=(a=e.type)?a:"")}),(0,n.jsx)("td",{children:null!=(i=e.description)?i:""})]})}function d(e,t,r){return(0,n.jsxs)(n.Fragment,{children:[e,(0,n.jsx)("span",{className:u.tooltipSpace,children:(0,n.jsx)(ce.Tooltip,{content:(0,n.jsxs)(n.Fragment,{children:["When creating a ",t,", Prometheus exposes multiple series with the type counter."," ",(a=r,(0,n.jsx)("a",{href:a||"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/",target:"_blank",rel:"noopener noreferrer",children:"Visit docs for more details here."}))]}),placement:"bottom-start",interactive:!0,children:(0,n.jsx)(ce.Icon,{name:"info-circle",size:"xs"})})})]});var a}function h(e){return e?e.includes("(summary)")?d(e,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):e.includes("(histogram)")?d(e,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):e:""}return(0,n.jsxs)("table",{className:u.table,children:[(0,n.jsx)("thead",{className:u.stickyHeader,children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:`${u.nameWidth} ${u.tableHeaderPadding}`,children:"Name"}),s.hasMetadata&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("th",{className:`${u.typeWidth} ${u.tableHeaderPadding}`,children:"Type"}),(0,n.jsx)("th",{className:`${u.descriptionWidth} ${u.tableHeaderPadding}`,children:"Description"})]}),(0,n.jsx)("th",{className:u.selectButtonWidth,children:" "})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)(n.Fragment,{children:[t.length>0&&t.map(((e,t)=>{var o,l,d;return(0,n.jsxs)("tr",{className:u.row,children:[(0,n.jsx)("td",{className:u.nameOverflow,children:(0,n.jsx)(ge(),{textToHighlight:null!=(l=null==e?void 0:e.value)?l:"",searchWords:(d=s,d.useBackend?[d.fuzzySearchQuery]:d.fullMetaSearch?d.metaHaystackMatches:d.nameHaystackMatches),autoEscape:!0,highlightClassName:u.matchHighLight})}),s.hasMetadata&&c(e),(0,n.jsx)("td",{children:(0,n.jsx)(ce.Button,{size:"md",variant:"secondary",onClick:()=>function(e){e.value&&(r({...i,metric:e.value}),(0,de.E5)("grafana_prom_metric_encycopedia_tracking",s,e.value),a())}(e),className:u.centerButton,children:"Select"})})]},null!=(o=null==e?void 0:e.value)?o:t)})),0===t.length&&!s.isLoading&&function(){let e;return s.fuzzySearchQuery||(e="There are no metrics found in the data source."),i.labels.length>0&&(e="There are no metrics found. Try to expand your label filters."),(s.fuzzySearchQuery||s.selectedTypes.length>0)&&(e="There are no metrics found. Try to expand your search and filters."),(0,n.jsx)("tr",{className:u.noResults,children:(0,n.jsx)("td",{colSpan:3,children:e})})}()]})})]})}const be=(e,t)=>({table:(0,a.css)({tableLayout:t?void 0:"fixed",borderRadius:e.shape.radius.default,width:"100%",whiteSpace:t?"nowrap":"normal",td:{padding:e.spacing(1)},"td,th":{minWidth:e.spacing(3),borderBottom:`1px solid ${e.colors.border.weak}`}}),row:(0,a.css)({label:"row",borderBottom:`1px solid ${e.colors.border.weak}`,"&:last-child":{borderBottom:0}}),tableHeaderPadding:(0,a.css)({padding:"8px"}),matchHighLight:(0,a.css)({background:"inherit",color:e.components.textHighlight.text,backgroundColor:e.components.textHighlight.background}),nameWidth:(0,a.css)({width:t?void 0:"37.5%"}),nameOverflow:(0,a.css)({overflowWrap:t?void 0:"anywhere"}),typeWidth:(0,a.css)({width:t?void 0:"15%"}),descriptionWidth:(0,a.css)({width:t?void 0:"35%"}),selectButtonWidth:(0,a.css)({width:t?void 0:"12.5%"}),stickyHeader:(0,a.css)({position:"sticky",top:0,backgroundColor:e.colors.background.primary}),noResults:(0,a.css)({textAlign:"center",color:e.colors.text.secondary}),tooltipSpace:(0,a.css)({marginLeft:"4px"}),centerButton:(0,a.css)({display:"block",margin:"auto",border:"none"})}),ye=1e3;function Oe(e){var t,r,n,a;return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:100,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:null!=(t=null==e?void 0:e.fullMetaSearch)&&t,includeNullMetadata:null==(r=null==e?void 0:e.includeNullMetadata)||r,selectedTypes:[],useBackend:null!=(n=null==e?void 0:e.useBackend)&&n,disableTextWrap:null!=(a=null==e?void 0:e.disableTextWrap)&&a,showAdditionalSettings:!1}}var we=r(7993),xe=r(3241);const Se=new we.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});const _e=(0,xe.debounce)((function(e,t,r){const[n,a,i]=Se.search(e,t,0,1e5);let s=[],o=new Set;if(n&&i){const t=(e,t)=>{t&&o.add(e)};for(let r=0;r<i.length;r++){let n=i[r];we.A.highlight(e[a.idx[n]],a.ranges[n],t),s.push(e[a.idx[n]])}r([s,[...o]])}else t||r([[],[]])}),300);var $e=r(9625);const Ee=e=>{var t;const{datasource:r,isOpen:i,onClose:s,onChange:o,query:l,initialMetrics:u}=e,[c,d]=(0,ue.useReducer)(Re.reducer,Oe(l)),h=(e=>({modal:(0,a.css)({width:"85vw",[e.breakpoints.down("md")]:{width:"100%"},[e.breakpoints.up("xl")]:{width:"60%"}}),inputWrapper:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),inputItemFirst:(0,a.css)({flexBasis:"40%",paddingRight:"16px",[e.breakpoints.down("md")]:{paddingRight:"0px",paddingBottom:"16px"}}),inputItem:(0,a.css)({flexGrow:1,flexBasis:"20%",[e.breakpoints.down("md")]:{minWidth:"100%"}}),selectWrapper:(0,a.css)({marginBottom:e.spacing(1)}),resultsAmount:(0,a.css)({color:e.colors.text.secondary,fontSize:"0.85rem",padding:"0 0 4px 0"}),resultsData:(0,a.css)({margin:`4px 0 ${e.spacing(2)} 0`}),resultsDataCount:(0,a.css)({margin:0}),resultsDataFiltered:(0,a.css)({color:e.colors.text.secondary,textAlign:"center",border:"solid 1px rgba(204, 204, 220, 0.25)",padding:"7px"}),resultsDataFilteredText:(0,a.css)({display:"inline",verticalAlign:"text-top"}),results:(0,a.css)({height:"calc(80vh - 310px)",overflowY:"scroll"}),resultsFooter:(0,a.css)({marginTop:"24px",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",position:"sticky"}),currentlySelected:(0,a.css)({color:"grey",opacity:"75%",fontSize:"0.75rem"}),loadingSpinner:(0,a.css)({visibility:"hidden"}),visible:(0,a.css)({visibility:"visible"}),settingsBtn:(0,a.css)({float:"right"}),noBorder:(0,a.css)({border:"none"}),resultsPerPageLabel:(0,a.css)({color:e.colors.text.secondary,opacity:"75%",paddingTop:"5px",fontSize:"0.85rem",marginRight:"8px"}),resultsPerPageWrapper:(0,a.css)({display:"flex"})}))((0,ce.useTheme2)(),c.disableTextWrap),p=(0,ue.useCallback)((async()=>{d(Te(!0));const e="function"==typeof u?await u():u,t=await(0,de.E1)(r,l,e);d(Ce({isLoading:!1,hasMetadata:t.hasMetadata,metrics:t.metrics,metaHaystackDictionary:t.metaHaystackDictionary,nameHaystackDictionary:t.nameHaystackDictionary,totalMetricCount:t.metrics.length,filteredMetricCount:t.metrics.length}))}),[l,r,u]);(0,ue.useEffect)((()=>{p()}),[p]);const f=de.uq.map((e=>({value:e.value,label:e.value,description:e.description}))),m=(0,ue.useMemo)((()=>le()((async e=>{d(Te(!0));const t=await(0,de.qn)(e,l.labels,r);d(ke({metrics:t,filteredMetricCount:t.length,isLoading:!1}))}),r.getDebounceTimeInMilliseconds())),[r,l]);function g(e){d(Le(e))}function v(e){d(Ne(e))}function b(e,t){c.useBackend&&""===e?p():c.useBackend?m(e):t?_e(Object.keys(c.metaHaystackDictionary),e,v):_e(Object.keys(c.nameHaystackDictionary),e,g)}const y=(0,n.jsx)(he,{state:c,onChangeFullMetaSearch:()=>{const e=!c.fullMetaSearch;d(Me(e)),o({...l,fullMetaSearch:e}),b(c.fuzzySearchQuery,e)},onChangeIncludeNullMetadata:()=>{d(je(!c.includeNullMetadata)),o({...l,includeNullMetadata:!c.includeNullMetadata})},onChangeDisableTextWrap:()=>{d(ze()),o({...l,disableTextWrap:!c.disableTextWrap}),(0,de.E5)("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",c,"")},onChangeUseBackend:()=>{const e=!c.useBackend;d(Ve(e)),o({...l,useBackend:e}),!1===e?p():""!==c.fuzzySearchQuery&&m(c.fuzzySearchQuery)}});return(0,n.jsxs)(ce.Modal,{"data-testid":Pe.metricModal,isOpen:i,title:"Metrics explorer",onDismiss:s,"aria-label":"Browse metrics",className:h.modal,children:[(0,n.jsx)(pe,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),(0,n.jsxs)("div",{className:h.inputWrapper,"data-testid":$e.Tp.components.DataSource.Prometheus.queryEditor.builder.metricsExplorer,children:[(0,n.jsx)("div",{className:(0,a.cx)(h.inputItem,h.inputItemFirst),children:(0,n.jsx)(ce.Input,{autoFocus:!0,"data-testid":Pe.searchMetric,placeholder:de.Ft.browse,value:c.fuzzySearchQuery,onInput:e=>{var t;const r=null!=(t=e.currentTarget.value)?t:"";d(Ae(r)),b(r,c.fullMetaSearch)}})}),c.hasMetadata&&(0,n.jsx)("div",{className:h.inputItem,children:(0,n.jsx)(ce.MultiSelect,{"data-testid":Pe.selectType,inputId:"my-select",options:f,value:c.selectedTypes,placeholder:de.Ft.type,onChange:e=>d(Qe(e))})}),(0,n.jsx)("div",{children:(0,n.jsx)(ce.Spinner,{className:`${h.loadingSpinner} ${c.isLoading?h.visible:""}`})}),(0,n.jsx)("div",{className:h.inputItem,children:(0,n.jsx)(ce.Toggletip,{"aria-label":"Additional settings",content:y,placement:"bottom-end",closeButton:!1,children:(0,n.jsxs)(ce.ButtonGroup,{className:h.settingsBtn,children:[(0,n.jsx)(ce.Button,{variant:"secondary",size:"md",onClick:()=>d(Fe()),"data-testid":Pe.showAdditionalSettings,className:h.noBorder,children:"Additional Settings"}),(0,n.jsx)(ce.Button,{className:h.noBorder,variant:"secondary",icon:c.showAdditionalSettings?"angle-up":"angle-down"})]})})})]}),(0,n.jsxs)("div",{className:h.resultsData,children:[l.metric&&(0,n.jsxs)("i",{className:h.currentlySelected,children:["Currently selected: ",l.metric]}),l.labels.length>0&&(0,n.jsxs)("div",{className:h.resultsDataFiltered,children:[(0,n.jsx)(ce.Icon,{name:"info-circle",size:"sm"}),(0,n.jsx)("div",{className:h.resultsDataFilteredText,children:" These metrics have been pre-filtered by labels chosen in the label filters."})]})]}),(0,n.jsx)("div",{className:h.results,children:c.metrics&&(0,n.jsx)(ve,{metrics:(0,de.PV)(c,d),onChange:o,onClose:s,query:l,state:c,disableTextWrap:c.disableTextWrap})}),(0,n.jsxs)("div",{className:h.resultsFooter,children:[(0,n.jsxs)("div",{className:h.resultsAmount,children:["Showing ",c.filteredMetricCount," of ",c.totalMetricCount," results"]}),(0,n.jsx)(ce.Pagination,{currentPage:null!=(t=c.pageNum)?t:1,numberOfPages:(0,de.EP)(c).length,onNavigate:e=>{d(Ie(null!=e?e:1))}}),(0,n.jsxs)("div",{className:h.resultsPerPageWrapper,children:[(0,n.jsx)("p",{className:h.resultsPerPageLabel,children:"# Results per page "}),(0,n.jsx)(ce.Input,{"data-testid":Pe.resultsPerPage,value:(0,de.fh)(c.resultsPerPage,100,ye),placeholder:"results per page",width:10,title:"The maximum results per page is "+ye,type:"number",onInput:e=>{const t=+e.currentTarget.value;isNaN(t)||t>=ye||d(De(t))}})]})]})]})},Pe={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Re=ne({name:"metrics-modal-state",initialState:Oe(),reducers:{filterMetricsBackend:(e,t)=>{e.metrics=t.payload.metrics,e.filteredMetricCount=t.payload.filteredMetricCount,e.isLoading=t.payload.isLoading},buildMetrics:(e,t)=>{e.isLoading=t.payload.isLoading,e.metrics=t.payload.metrics,e.hasMetadata=t.payload.hasMetadata,e.metaHaystackDictionary=t.payload.metaHaystackDictionary,e.nameHaystackDictionary=t.payload.nameHaystackDictionary,e.totalMetricCount=t.payload.totalMetricCount,e.filteredMetricCount=t.payload.filteredMetricCount},setIsLoading:(e,t)=>{e.isLoading=t.payload},setFilteredMetricCount:(e,t)=>{e.filteredMetricCount=t.payload},setResultsPerPage:(e,t)=>{e.resultsPerPage=t.payload},setPageNum:(e,t)=>{e.pageNum=t.payload},setFuzzySearchQuery:(e,t)=>{e.fuzzySearchQuery=t.payload,e.pageNum=1},setNameHaystack:(e,t)=>{e.nameHaystackOrder=t.payload[0],e.nameHaystackMatches=t.payload[1]},setMetaHaystack:(e,t)=>{e.metaHaystackOrder=t.payload[0],e.metaHaystackMatches=t.payload[1]},setFullMetaSearch:(e,t)=>{e.fullMetaSearch=t.payload,e.pageNum=1},setIncludeNullMetadata:(e,t)=>{e.includeNullMetadata=t.payload,e.pageNum=1},setSelectedTypes:(e,t)=>{e.selectedTypes=t.payload,e.pageNum=1},setUseBackend:(e,t)=>{e.useBackend=t.payload,e.fullMetaSearch=!1,e.pageNum=1},setDisableTextWrap:e=>{e.disableTextWrap=!e.disableTextWrap},showAdditionalSettings:e=>{e.showAdditionalSettings=!e.showAdditionalSettings}}}),{setIsLoading:Te,buildMetrics:Ce,filterMetricsBackend:ke,setResultsPerPage:De,setPageNum:Ie,setFuzzySearchQuery:Ae,setNameHaystack:Le,setMetaHaystack:Ne,setFullMetaSearch:Me,setIncludeNullMetadata:je,setSelectedTypes:Qe,setUseBackend:Ve,setDisableTextWrap:ze,showAdditionalSettings:Fe,setFilteredMetricCount:Be}=Re.actions},2001:(e,t,r)=>{"use strict";r.d(t,{E1:()=>o,E5:()=>f,EP:()=>d,Ft:()=>g,PV:()=>u,fh:()=>h,qn:()=>p,uq:()=>m});var n=r(8531),a=r(2949),i=r(1910),s=r(4429);async function o(e,t,r){var n,a;let i=!0;const s=e.languageProvider.metricsMetadata;s&&0===Object.keys(s).length&&(i=!1);let o,u={},c={};return o=null==r?void 0:r.map((t=>{const r=l(t,e),n=`${t}¦${r.description}`;return u[t]=r,c[n]=r,r})),{isLoading:!1,hasMetadata:i,metrics:null!=o?o:[],metaHaystackDictionary:c,nameHaystackDictionary:u,totalMetricCount:null!=(n=null==o?void 0:o.length)?n:0,filteredMetricCount:null!=(a=null==o?void 0:o.length)?a:0}}function l(e,t){let r=(0,a.AU)(e,t.languageProvider.metricsMetadata);const n=(0,a.pK)(e,t.languageProvider.metricsMetadata);["histogram","summary"].forEach((e=>{(null==n?void 0:n.toLowerCase().includes(e))&&r!==e&&(r+=` (${e})`)}));const i=e.match(/^\w+_bucket$|^\w+_bucket{.*}$/);"histogram"!==r||i||(r="native histogram");return{value:e,type:r,description:n}}function u(e,t){const r=c(e);return e.isLoading||e.filteredMetricCount===r.length||t((0,s.VL)(r.length)),function(e,t,r){const n=0===r?1:r,a=1===t?0:(t-1)*n,i=a+n;return e.slice(a,i)}(r,e.pageNum,e.resultsPerPage)}function c(e){let t=e.metrics;return e.fuzzySearchQuery&&!e.useBackend&&(t=e.fullMetaSearch?e.metaHaystackOrder.map((t=>e.metaHaystackDictionary[t])):e.nameHaystackOrder.map((t=>e.nameHaystackDictionary[t]))),e.selectedTypes.length>0&&(t=t.filter(((t,r)=>e.selectedTypes.some((e=>t.type&&e.value?t.type.includes(e.value):!t.type&&"no type"===e.value))))),e.includeNullMetadata||(t=t.filter((e=>void 0!==e.type&&void 0!==e.description))),t}function d(e){if(!e.metrics.length)return[];const t=0===e.resultsPerPage?1:e.resultsPerPage,r=Math.floor(c(e).length/t)+1;return[...Array(r).keys()].map((e=>e+1))}const h=(e,t,r)=>e<1?1:e>r?r:null!=e?e:t;async function p(e,t,r){const n=(0,i.b4)(e),a=t.map((e=>`,${e.label}="${e.value}"`)),s=`label_values({__name__=~".*${n}"${t?a.join():""}},__name__)`,o=r.metricFindQuery(s);return await o.then((e=>e.map((e=>l(e.text,r)))))}function f(e,t,r,a){switch(e){case"grafana_prom_metric_encycopedia_tracking":(0,n.reportInteraction)(e,{metric:r,hasMetadata:null==t?void 0:t.hasMetadata,totalMetricCount:null==t?void 0:t.totalMetricCount,fuzzySearchQuery:null==t?void 0:t.fuzzySearchQuery,fullMetaSearch:null==t?void 0:t.fullMetaSearch,selectedTypes:null==t?void 0:t.selectedTypes,useRegexSearch:null==t?void 0:t.useBackend,includeResultsWithoutMetadata:null==t?void 0:t.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,n.reportInteraction)(e,{disableTextWrap:null==t?void 0:t.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,n.reportInteraction)(e,{query:a})}}const m=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"native histogram",description:"Native histograms are different from classic Prometheus histograms in a number of ways: Native histogram bucket boundaries are calculated by a formula that depends on the scale (resolution) of the native histogram, and are not user defined."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],g={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"}},9101:(e,t,r)=>{"use strict";r.d(t,{DQ:()=>m,G3:()=>b,Kl:()=>h,OS:()=>g,iZ:()=>f,jC:()=>y,jY:()=>l,kf:()=>u,nU:()=>d,z2:()=>v});var n=r(3241),a=r(6643),i=r.n(a),s=r(516),o=r(4746);function l(e,t,r){const n=p(e,t),a=e.id+"(";return r&&n.push(r),a+n.join(", ")+")"}function u(e,t,r){const n=p(e,t),a=e.id+"(";return r&&n.unshift(r),a+n.join(", ")+")"}function c(e,t,r,n){var a,i;if(t.params.length<2)throw`Cannot render a function with params of length [${t.params.length}]`;let s=null!=(i=(null!=(a=e.params)?a:[])[0])?i:"5m";const o=p({...e,params:e.params.slice(1)},{...t,params:t.params.slice(1),defaultParams:t.defaultParams.slice(1)}),l=e.id+"(";return r&&(n?o.push(`${r}[${s}]`):o.unshift(`${r}[${s}]`)),l+o.join(", ")+")"}function d(e,t,r){return c(e,t,r,!1)}function h(e,t,r){return c(e,t,r,!0)}function p(e,t,r){var n;return(null!=(n=e.params)?n:[]).map(((e,r)=>{const n=t.params[r];return"string"===(null==n?void 0:n.type)?`"${e}"`:e}))}function f(e,t){const r={id:e.id,params:e.defaultParams};return{...t,operations:[...t.operations,r]}}function m(e){return(0,n.capitalize)(e.replace(/_/g," "))}function g(e,t){return`operations.${e}.param.${t}`}function v(e=!1){const t=[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}];e&&t.unshift({label:"$__rate_interval",value:"$__rate_interval"});return{name:"Range",type:"string",options:t}}function b(e,t={}){var r,n;return[{id:e,name:m(e),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:o.Ag.Aggregations,renderer:l,paramChangedHandler:(n=`__${e}_by`,function(e,t,r){return t.params.length===r.params.length?{...t,id:n}:t}),explainHandler:w(e,""),addOperationHandler:f,...t},{id:`__${e}_by`,name:`${m(e)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:[""],alternativesKey:"aggregations by",category:o.Ag.Aggregations,renderer:(r=e,function(e,t,n){return`${r} by(${e.params.join(", ")}) (${n})`}),paramChangedHandler:S(e),explainHandler:w(e,"by"),addOperationHandler:f,hideFromList:!0,...t},{id:`__${e}_without`,name:`${m(e)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:[""],alternativesKey:"aggregations by",category:o.Ag.Aggregations,renderer:O(e),paramChangedHandler:S(e),explainHandler:w(e,"without"),addOperationHandler:f,hideFromList:!0,...t}]}function y(e,t,r={}){const n=b(e,r);return n[0].params.unshift(...t.params),n[1].params.unshift(...t.params),n[2].params.unshift(...t.params),n[0].defaultParams=t.defaultParams,n[1].defaultParams=[...t.defaultParams,""],n[2].defaultParams=[...t.defaultParams,""],n[1].renderer=x(e),n[2].renderer=x(e),n}function O(e){return function(t,r,n){return`${e} without(${t.params.join(", ")}) (${n})`}}function w(e,t){return function(r){const n=r.params.map((e=>`\`${e}\``)).join(" and "),a=i()("label",r.params.length);switch(t){case"by":return`Calculates ${e} over dimensions while preserving ${a} ${n}.`;case"without":return`Calculates ${e} over the dimensions ${n}. All other labels are preserved.`;default:return`Calculates ${e} over the dimensions.`}}}function x(e){return function(t,r,n){const a=r.params.findIndex((e=>e.restParam)),i=t.params.slice(0,a),s=t.params.slice(a);return`${e} by(${s.join(", ")}) (${i.map(((e,t)=>"string"===r.params[t].type?`"${e}"`:e)).join(", ")}, ${n})`}}function S(e){return function(t,r,n){return r.params.length<n.params.length?{...r,id:e}:r}}},7623:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(9851),a=r(5412),i=r(1910);function s(e){const t=(0,i.qk)(e),r=n.K3.parse(t).topNode,a={query:{metric:"",labels:[],operations:[]},errors:[]};try{o(t,r,a)}catch(e){console.error(e),e instanceof Error&&a.errors.push({text:e.message})}return function(e){if(0===e.labels.length&&0===e.operations.length&&!e.metric)return!0;return!1}(a.query)&&(a.errors=[]),function(e){const t={query:{metric:"",labels:[],operations:[]},errors:[]};e=e.replace(/\$__interval/g,"1s"),e=e.replace(/\$__interval_ms/g,"1000"),e=e.replace(/\$__rate_interval/g,"1s"),e=e.replace(/\$__range_ms/g,"1000"),e=e.replace(/\$__range_s/g,"1"),e=e.replace(/\$__range/g,"1s");const r=n.K3.parse(e),a=r.topNode;try{o(e,a,t)}catch(e){return!1}return 0===t.errors.length}(e)&&(a.errors=[]),a}function o(e,t,r){const s=r.query;switch(t.type.id){case n.gw:s.metric=(0,i.AA)(e,t);break;case n.c6:if(""===s.metric){const r=t.getChild(n.LW),a=(0,i.AA)(e,r);s.metric=a.slice(1,-1)}break;case n.d2:{const a=l(e,t,n.c6);a.label=a.label.slice(1,-1),s.labels.push(a);const o=t.getChild(i.Ql);o&&r.errors.push((0,i.xz)(e,o));break}case n.Yq:{s.labels.push(l(e,t,n.IC));const a=t.getChild(i.Ql);a&&r.errors.push((0,i.xz)(e,a));break}case n.R6:!function(e,t,r){const a=r.query,s=t.getChild(n.m3),o=(0,i.AA)(e,s),l=t.getChild(n.Dh),d=[];let h="";if(u.includes(o)||o.endsWith("_over_time")){let r=(0,i.AA)(e,t).match(/\[(.+)\]/);(null==r?void 0:r[1])&&(h=r[1],d.push(r[1]))}const p={id:o,params:d};if(a.operations.unshift(p),l){if((0,i.AA)(e,l)==="(["+h+"])")return;c(e,l,r,p)}}(e,t,r);break;case n.Fn:!function(e,t,r){const a=r.query,s=t.getChild(n.xb);let o=(0,i.AA)(e,s);const l=t.getChild(n.hI),u=[];if(l){l.getChild("By")&&o&&(o=`__${o}_by`);l.getChild(n.xB)&&(o=`__${o}_without`),u.push(...(0,i.R1)(e,l,n.IC),...(0,i.R1)(e,l,n.c6))}const d=t.getChild(n.Dh),h={id:o,params:[]};a.operations.unshift(h),c(e,d,r,h),h.params.push(...u)}(e,t,r);break;case n.df:!function(e,t,r){var s;const l=r.query,u=t.firstChild,c=(0,i.AA)(e,u.nextSibling),d=function(e,t){if(!t)return;if(t.getChild("Bool"))return{isBool:!0,isMatcher:!1};{let r="";const a=t.getChild(n.x$);return a&&(r=(0,i.R1)(e,a,n.IC).join(", ")),{isMatcher:!0,isBool:!1,matches:r,matchType:t.getChild(n.On)?"on":"ignoring"}}}(e,null!=(s=t.getChild(n.eM))?s:t.getChild(n.Ue)),h=t.lastChild,p=a.AE[c],f=u.type.id===n.j_,m=h.type.id===n.j_,g=h.type.id===n.df;f||o(e,u,r);if(m)l.operations.push((0,i.rq)(p,e,h,!!(null==d?void 0:d.isBool)));else if(g){const t=(0,i.z9)(h);(null==t?void 0:t.type.id)===n.j_&&l.operations.push((0,i.rq)(p,e,t,!!(null==d?void 0:d.isBool))),o(e,h,r)}else{l.binaryQueries=l.binaryQueries||[];const t={operator:c,query:{metric:"",labels:[],operations:[]}};(null==d?void 0:d.isMatcher)&&(t.vectorMatchesType=d.matchType,t.vectorMatches=d.matches),l.binaryQueries.push(t),o(e,h,{query:t.query,errors:r.errors})}}(e,t,r);break;case i.Ql:if(function(e){var t,r;return(null==(r=null==(t=e.prevSibling)?void 0:t.firstChild)?void 0:r.type.id)===n.Fb}(t))break;r.errors.push((0,i.xz)(e,t));break;default:{t.type.id===n.ek&&r.errors.push((0,i.xz)(e,t));let a=t.firstChild;for(;a;)o(e,a,r),a=a.nextSibling}}}function l(e,t,r){return{label:(0,i.AA)(e,t.getChild(r)),op:(0,i.AA)(e,t.getChild(n.Lf)),value:(0,i.AA)(e,t.getChild(n.LW)).replace(/^["'`]|["'`]$/g,"")}}const u=["changes","rate","irate","increase","delta"];function c(e,t,r,a){if(t)switch(t.type.id){case n.Dh:{let i=t.firstChild;for(;i;){let t;t=i.type.id===n.df?i:i.getChild(n.df),t&&r.errors.push({text:"Query parsing is ambiguous.",from:t.from,to:t.to}),c(e,i,r,a),i=i.nextSibling}break}case n.j_:a.params.push(parseFloat((0,i.AA)(e,t)));break;case n.LW:a.params.push((0,i.AA)(e,t).replace(/"/g,""));break;default:o(e,t,r)}}},1910:(e,t,r)=>{"use strict";r.d(t,{AA:()=>u,Ql:()=>n,R1:()=>d,b4:()=>h,qk:()=>o,rq:()=>c,xz:()=>i,z9:()=>a});const n=0;function a(e){return e.firstChild?a(e.firstChild):e}function i(e,t){var r;return{text:u(e,t),from:t.from,to:t.to,parentType:null==(r=t.parent)?void 0:r.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(e){return e.replace(s,((e,t,r,n,a,i,s)=>{const o=n||s;let l=t,u="0";return r&&(l=r,u="1"),a&&(l=a,u="2"),`__V_${u}__`+l+"__V__"+(o?"__F__"+o+"__F__":"")}))}const l=[(e,t)=>`$${e}`,(e,t)=>`[[${e}${t?`:${t}`:""}]]`,(e,t)=>`\${${e}${t?`:${t}`:""}}`];function u(e,t){return t?function(e){return e.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,((e,t,r,n)=>l[parseInt(t,10)](r,n)))}(e.substring(t.from,t.to)):""}function c(e,t,r,n){const a=[parseFloat(u(t,r))];return e.comparison&&a.push(n),{id:e.id,params:a}}function d(e,t,r){if(t.type.id===r)return[u(e,t)];const n=[];let a=0,i=t.childAfter(a);for(;i;)n.push(...d(e,i,r)),a=i.to,i=t.childAfter(a);return n}const h=e=>e.split(" ").map((e=>`${e}.*`)).join("")},4746:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>n,jN:()=>a,n5:()=>i});var n=(e=>(e.Aggregations="Aggregations",e.RangeFunctions="Range functions",e.Functions="Functions",e.BinaryOps="Binary operations",e.Trigonometric="Trigonometric",e.Time="Time Functions",e))(n||{}),a=(e=>(e.Abs="abs",e.Absent="absent",e.AbsentOverTime="absent_over_time",e.Acos="acos",e.Acosh="acosh",e.Asin="asin",e.Asinh="asinh",e.Atan="atan",e.Atanh="atanh",e.Avg="avg",e.AvgOverTime="avg_over_time",e.BottomK="bottomk",e.Ceil="ceil",e.Changes="changes",e.Clamp="clamp",e.ClampMax="clamp_max",e.ClampMin="clamp_min",e.Cos="cos",e.Cosh="cosh",e.Count="count",e.CountOverTime="count_over_time",e.CountScalar="count_scalar",e.CountValues="count_values",e.DayOfMonth="day_of_month",e.DayOfWeek="day_of_week",e.DayOfYear="day_of_year",e.DaysInMonth="days_in_month",e.Deg="deg",e.Delta="delta",e.Deriv="deriv",e.DoubleExponentialSmoothing="double_exponential_smoothing",e.DropCommonLabels="drop_common_labels",e.Exp="exp",e.Floor="floor",e.Group="group",e.HistogramQuantile="histogram_quantile",e.HistogramAvg="histogram_avg",e.HistogramCount="histogram_count",e.HistogramSum="histogram_sum",e.HistogramFraction="histogram_fraction",e.HistogramStddev="histogram_stddev",e.HistogramStdvar="histogram_stdvar",e.HoltWinters="holt_winters",e.Hour="hour",e.Idelta="idelta",e.Increase="increase",e.Irate="irate",e.LabelJoin="label_join",e.LabelReplace="label_replace",e.Last="last",e.LastOverTime="last_over_time",e.Ln="ln",e.Log10="log10",e.Log2="log2",e.Max="max",e.MaxOverTime="max_over_time",e.Min="min",e.MinOverTime="min_over_time",e.Minute="minute",e.Month="month",e.Pi="pi",e.PredictLinear="predict_linear",e.Present="present",e.PresentOverTime="present_over_time",e.Quantile="quantile",e.QuantileOverTime="quantile_over_time",e.Rad="rad",e.Rate="rate",e.Resets="resets",e.Round="round",e.Scalar="scalar",e.Sgn="sgn",e.Sin="sin",e.Sinh="sinh",e.Sort="sort",e.SortDesc="sort_desc",e.Sqrt="sqrt",e.Stddev="stddev",e.StddevOverTime="stddev_over_time",e.Sum="sum",e.SumOverTime="sum_over_time",e.Tan="tan",e.Tanh="tanh",e.Time="time",e.Timestamp="timestamp",e.TopK="topk",e.Vector="vector",e.Year="year",e.Addition="__addition",e.Subtraction="__subtraction",e.MultiplyBy="__multiply_by",e.DivideBy="__divide_by",e.Modulo="__modulo",e.Exponent="__exponent",e.NestedQuery="__nested_query",e.EqualTo="__equal_to",e.NotEqualTo="__not_equal_to",e.GreaterThan="__greater_than",e.LessThan="__less_than",e.GreaterOrEqual="__greater_or_equal",e.LessOrEqual="__less_or_equal",e))(a||{}),i=(e=>(e.Rate="rate",e.Histogram="histogram",e.Binary="binary",e))(i||{})},9526:(e,t,r)=>{"use strict";r.d(t,{B4:()=>i,N1:()=>a,fD:()=>n});var n=(e=>(e.Low="Low",e.Medium="Medium",e.High="High",e.None="None",e))(n||{}),a=(e=>(e.Cortex="Cortex",e.Mimir="Mimir",e.Prometheus="Prometheus",e.Thanos="Thanos",e))(a||{}),i=(e=>(e[e.LabelNames=0]="LabelNames",e[e.LabelValues=1]="LabelValues",e[e.MetricNames=2]="MetricNames",e[e.VarQueryResult=3]="VarQueryResult",e[e.SeriesQuery=4]="SeriesQuery",e[e.ClassicQuery=5]="ClassicQuery",e))(i||{})},2872:(e,t,r)=>{"use strict";r.d(t,{$H:()=>a,Nc:()=>n,Rq:()=>i,p0:()=>l});const n=e=>{if(""===e)return e;return i(e)?e:`"${e}"`},a=e=>{if(i(e))return e;let t="U__";for(let r=0;r<e.length;r++){const n=e[r],a=e.codePointAt(r);"_"===n?t+="__":void 0!==a&&s(n,r)?t+=n:void 0!==a&&o(a)?(t+="_",t+=a.toString(16),t+="_"):t+="_FFFD_",void 0!==a&&a>65535&&r++}return t},i=e=>{if(0===e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!s(r,t))return!1}return!0},s=(e,t)=>{const r=e.codePointAt(0);return void 0!==r&&(r>=97&&r<=122||r>=65&&r<=90||95===r||58===r||r>=48&&r<=57&&t>0)},o=e=>e>=0&&e<=1114111,l=e=>{const t=[],r=/(=~|!=|!~|=)/;let a="",i="",s=!1,o="";const l=()=>{const e=o.match(r);if(e){const r=e[0];[a,i]=o.split(r),t.push(`${n(a.trim())}${r}"${i.slice(1,-1)}"`)}};for(const t of e)'"'===t&&"\\"!==o[o.length-1]?(s=!s,o+=t):","!==t||s?o+=t:(l(),o="");return o&&l(),t.join(",")}},6361:(e,t,r)=>{const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(9882),{safeRe:s,t:o}=r(141),l=r(9792),u=r(3733),c=r(8705),d=r(4336)},4336:(e,t,r)=>{const n=/\s+/g;class a{constructor(e,t){if(t=s(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,C(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],h),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],p),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>O(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options)));n&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,b=s.map((e=>new o(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(k(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(2365)),s=r(9882),o=r(6361),l=r(3733),u=r(8705),{safeRe:c,t:d,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=r(141),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(1123),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},O=(e,t)=>(l("comp",e,t),e=_(e,t),l("caret",e),e=x(e,t),l("tildes",e),e=E(e,t),l("xrange",e),e=R(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let s;return l("tilde",e,t,r,n,a,i),w(r)?s="":w(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:w(a)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),s=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",s),s}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,s)=>{let o;return l("caret",e,t,r,a,i,s),w(r)?o="":w(a)?o=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(i)?o="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===r?"0"===a?`>=${r}.${a}.${i}-${s} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${s} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${s} <${+r+1}.0.0-0`):(l("no pr"),o="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",o),o}))},E=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>P(e,t))).join(" ")),P=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,s,o)=>{l("xRange",e,r,n,a,i,s,o);const u=w(a),c=u||w(i),d=c||w(s),h=d;return"="===n&&h&&(n=""),o=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(c&&(i=0),s=0,">"===n?(n=">=",c?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(o="-0"),r=`${n+a}.${i}.${s}${o}`):c?r=`>=${a}.0.0${o} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${o} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},R=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),T=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),C=e=>(t,r,n,a,i,s,o,l,u,c,d,h)=>`${r=w(n)?"":w(a)?`>=${n}.0.0${e?"-0":""}`:w(i)?`>=${n}.${a}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(d)?`<${u}.${+c+1}.0-0`:h?`<=${u}.${c}.${d}-${h}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),k=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},8705:(e,t,r)=>{const n=r(3733),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(1123),{safeRe:s,t:o}=r(141),l=r(9882),{compareIdentifiers:u}=r(5186);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[o.LOOSE]:s[o.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?s[o.PRERELEASELOOSE]:s[o.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},2629:(e,t,r)=>{const n=r(7775);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},9792:(e,t,r)=>{const n=r(5236),a=r(3184),i=r(2829),s=r(1342),o=r(9258),l=r(1955);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return s(e,r,u);case"<":return o(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},6227:(e,t,r)=>{const n=r(8705),a=r(7775),{safeRe:i,t:s}=r(141);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===r)return null;const o=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${o}.${l}.${u}${c}${d}`,t)}},3958:(e,t,r)=>{const n=r(8705);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},5624:(e,t,r)=>{const n=r(4247);e.exports=(e,t)=>n(e,t,!0)},4247:(e,t,r)=>{const n=r(8705);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},5721:(e,t,r)=>{const n=r(7775);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const s=i>0,o=s?r:a,l=s?a:r,u=!!o.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},5236:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>0===n(e,t,r)},2829:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>n(e,t,r)>0},1342:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>n(e,t,r)>=0},2704:(e,t,r)=>{const n=r(8705);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},9258:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>n(e,t,r)<0},1955:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>n(e,t,r)<=0},7201:(e,t,r)=>{const n=r(8705);e.exports=(e,t)=>new n(e,t).major},5061:(e,t,r)=>{const n=r(8705);e.exports=(e,t)=>new n(e,t).minor},3184:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>0!==n(e,t,r)},7775:(e,t,r)=>{const n=r(8705);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},3918:(e,t,r)=>{const n=r(8705);e.exports=(e,t)=>new n(e,t).patch},520:(e,t,r)=>{const n=r(7775);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},4359:(e,t,r)=>{const n=r(4247);e.exports=(e,t,r)=>n(t,e,r)},6838:(e,t,r)=>{const n=r(3958);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},6841:(e,t,r)=>{const n=r(4336);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},9654:(e,t,r)=>{const n=r(3958);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},9670:(e,t,r)=>{const n=r(7775);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},7814:(e,t,r)=>{const n=r(141),a=r(1123),i=r(8705),s=r(5186),o=r(7775),l=r(9670),u=r(2629),c=r(2704),d=r(5721),h=r(7201),p=r(5061),f=r(3918),m=r(520),g=r(4247),v=r(4359),b=r(5624),y=r(3958),O=r(9654),w=r(6838),x=r(2829),S=r(9258),_=r(5236),$=r(3184),E=r(1342),P=r(1955),R=r(9792),T=r(6227),C=r(6361),k=r(4336),D=r(6841),I=r(6064),A=r(3483),L=r(849),N=r(4396),M=r(3639),j=r(1330),Q=r(9262),V=r(3523),z=r(8339),F=r(9786),B=r(891);e.exports={parse:o,valid:l,clean:u,inc:c,diff:d,major:h,minor:p,patch:f,prerelease:m,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:O,rsort:w,gt:x,lt:S,eq:_,neq:$,gte:E,lte:P,cmp:R,coerce:T,Comparator:C,Range:k,satisfies:D,toComparators:I,maxSatisfying:A,minSatisfying:L,minVersion:N,validRange:M,outside:j,gtr:Q,ltr:V,intersects:z,simplifyRange:F,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},1123:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},3733:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},5186:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2365:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},9882:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},141:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(1123),s=r(3733),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[h,a]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=d++;s(e,a,t),c[e]=a,u[a]=t,o[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),f("FULL",`^${u[c.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),f("LOOSE",`^${u[c.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),f("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?`+`(?:${u[c.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",u[c.COERCE],!0),f("COERCERTLFULL",u[c.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},8435:(e,t,r)=>{e.exports=r(7814)},9262:(e,t,r)=>{const n=r(1330);e.exports=(e,t,r)=>n(e,t,">",r)},8339:(e,t,r)=>{const n=r(4336);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},3523:(e,t,r)=>{const n=r(1330);e.exports=(e,t,r)=>n(e,t,"<",r)},3483:(e,t,r)=>{const n=r(8705),a=r(4336);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},849:(e,t,r)=>{const n=r(8705),a=r(4336);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},4396:(e,t,r)=>{const n=r(8705),a=r(4336),i=r(2829);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let s=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!i(r,s)||(r=s)}return r&&e.test(r)?r:null}},1330:(e,t,r)=>{const n=r(8705),a=r(6361),{ANY:i}=a,s=r(4336),o=r(6841),l=r(2829),u=r(9258),c=r(1955),d=r(1342);e.exports=(e,t,r,h)=>{let p,f,m,g,v;switch(e=new n(e,h),t=new s(t,h),r){case">":p=l,f=c,m=u,g=">",v=">=";break;case"<":p=u,f=d,m=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,o=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,h)?s=e:m(e.semver,o.semver,h)&&(o=e)})),s.operator===g||s.operator===v)return!1;if((!o.operator||o.operator===g)&&f(e,o.semver))return!1;if(o.operator===v&&m(e,o.semver))return!1}return!0}},9786:(e,t,r)=>{const n=r(6841),a=r(4247);e.exports=(e,t,r)=>{const i=[];let s=null,o=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(o=e,s||(s=e)):(o&&i.push([s,o]),o=null,s=null)}s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},891:(e,t,r)=>{const n=r(4336),a=r(6361),{ANY:i}=a,s=r(6841),o=r(4247),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,p,f,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=h(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(p=o(a.semver,c.semver,r),p>0)return null;if(0===p&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!s(e,String(a),r))return null;if(c&&!s(e,String(c),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!s(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=h(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==p)return!1}return!(a&&g&&!c&&0!==p)&&(!(c&&v&&!a&&0!==p)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},6064:(e,t,r)=>{const n=r(4336);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},3639:(e,t,r)=>{const n=r(4336);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},6680:(e,t,r)=>{"use strict";r.d(t,{H9:()=>Hi,x0:()=>xs,yP:()=>fl,mI:()=>ml,P1:()=>Al,No:()=>vc,n8:()=>Pe,d0:()=>gc,fS:()=>Vs,UU:()=>L,xK:()=>$u,gF:()=>_u,N0:()=>Ou,Zv:()=>B,vA:()=>xu,G1:()=>wu,Bs:()=>T,bZ:()=>S,So:()=>q,dt:()=>as,dM:()=>Iu,WM:()=>du,KE:()=>iu,JZ:()=>Z,Pj:()=>dl,oh:()=>ne,$L:()=>Il,Sh:()=>Ss,K8:()=>sl,Eb:()=>$o,Lw:()=>Nl,Gg:()=>n,pN:()=>jl,pY:()=>M,jh:()=>Ws,Go:()=>bc});var n={};r.r(n),r.d(n,{K2:()=>to});var a=r(1159),i=r(7781),s=r(8531);function o(e,t,r){const n={...t};if(r)for(const e of Object.keys(n))r.includes(e)||delete n[e];return i.urlUtil.renderUrl(i.locationUtil.assureBaseUrl(e),n)}function l(e){const t=(0,a.useParams)(),r=(0,a.useLocation)();return{params:t,isExact:null!==(0,a.matchPath)({path:e,caseSensitive:!1,end:!0},r.pathname),path:r.pathname,url:r.pathname}}const u=new Map;var c=r(5959),d=r.t(c,2),h=r.n(c),p=r(1269);const f={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let m;const g=new Uint8Array(16);function v(){if(!m&&(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(g)}const b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));function y(e,t=0){return b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]}const O=function(e,t,r){if(f.randomUUID&&!t&&!e)return f.randomUUID();const n=(e=e||{}).random||(e.rng||v)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return y(n)};const w=h().memo((function({model:e,...t}){var r;const n=null!=(r=e.constructor.Component)?r:x,[a,i]=(0,c.useState)(0);return(0,c.useEffect)((()=>{const t=e.activate();return i((e=>e+1)),t}),[e]),e.isActive||e.renderBeforeActivation?h().createElement(n,{...t,model:e}):null}));function x(e){return null}class S extends i.BusEventWithPayload{}S.type="scene-object-state-change";class _ extends i.BusEventWithPayload{}_.type="scene-object-user-action";var $,E=e=>{throw TypeError(e)},P=(e,t,r)=>t.has(e)||E("Cannot "+r);class R{constructor(e){var t,r,n;t=this,(r=$).has(t)?E("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,n),((e,t,r)=>{P(e,t,"write to private field"),t.set(e,r)})(this,$,e)}resolve(){return P(e=this,t=$,"read from private field"),r?r.call(e):t.get(e);var e,t,r}}$=new WeakMap;class T{constructor(e){this._isActive=!1,this._activationHandlers=[],this._deactivationHandlers=new Map,this._subs=new p.Subscription,this._refCount=0,this._renderBeforeActivation=!1,e.key||(e.key=O()),this._events=new i.EventBusSrv,this._state=Object.freeze(e),this._setParent(this._state)}get state(){return this._state}get isActive(){return this._isActive}get renderBeforeActivation(){return this._renderBeforeActivation}get parent(){return this._parent}get variableDependency(){return this._variableDependency}get urlSync(){return this._urlSync}get Component(){return w}_setParent(e){k(e,(e=>{e._parent&&e._parent!==this&&console.warn("SceneObject already has a parent set that is different from the new parent. You cannot share the same SceneObject instance in multiple scenes or in multiple different places of the same scene graph. Use SceneObject.clone() to duplicate a SceneObject or store a state key reference and use sceneGraph.findObject to locate it.",e,this),e._parent=this}))}clearParent(){this._parent=void 0}subscribeToState(e){return this._events.subscribe(S,(t=>{t.payload.changedObject===this&&e(t.payload.newState,t.payload.prevState)}))}subscribeToEvent(e,t){return this._events.subscribe(e,t)}setState(e){const t=this._state,r={...this._state,...e};this._state=Object.freeze(r),this._setParent(e),this._handleActivationOfChangedStateProps(t,r),this.publishEvent(new S({prevState:t,newState:r,partialUpdate:e,changedObject:this}),!0)}_handleActivationOfChangedStateProps(e,t){this.isActive&&(e.$behaviors!==t.$behaviors&&this._handleChangedBehaviors(e.$behaviors,t.$behaviors),e.$data!==t.$data&&this._handleChangedStateActivation(e.$data,t.$data),e.$variables!==t.$variables&&this._handleChangedStateActivation(e.$variables,t.$variables),e.$timeRange!==t.$timeRange&&this._handleChangedStateActivation(e.$timeRange,t.$timeRange))}_handleChangedStateActivation(e,t){if(e){const t=this._deactivationHandlers.get(e);t&&(t(),this._deactivationHandlers.delete(e))}t&&this._deactivationHandlers.set(t,t.activate())}_handleChangedBehaviors(e,t){if(e)for(const r of e)if(!t||!t.includes(r)){const e=this._deactivationHandlers.get(r);e&&(e(),this._deactivationHandlers.delete(r))}if(t)for(const r of t)e&&e.includes(r)||this._activateBehavior(r)}publishEvent(e,t){this._events.publish(e),t&&this.parent&&this.parent.publishEvent(e,t)}getRoot(){return this._parent?this._parent.getRoot():this}_internalActivate(){this._isActive=!0;const{$data:e,$variables:t,$timeRange:r,$behaviors:n}=this.state;if(this._activationHandlers.forEach((e=>{const t=e();t&&this._deactivationHandlers.set(t,t)})),r&&!r.isActive&&this._deactivationHandlers.set(r,r.activate()),t&&!t.isActive&&this._deactivationHandlers.set(t,t.activate()),e&&!e.isActive&&this._deactivationHandlers.set(e,e.activate()),n)for(const e of n)this._activateBehavior(e)}_activateBehavior(e){if(e instanceof T)this._deactivationHandlers.set(e,e.activate());else if("function"==typeof e){const t=e(this);t&&this._deactivationHandlers.set(e,t)}}activate(){this.isActive||this._internalActivate(),this._refCount++;let e=!1;return()=>{if(this._refCount--,e){throw new Error("SceneObject cancelation handler returned by activate() called a second time")}e=!0,0===this._refCount&&this._internalDeactivate()}}_internalDeactivate(){this._isActive=!1;for(let e of this._deactivationHandlers.values())e();this._deactivationHandlers.clear(),this._events.removeAllListeners(),this._subs.unsubscribe(),this._subs=new p.Subscription}useState(){return C(this)}forceRender(){this.setState({})}clone(e){return function(e,t){const r=I(e.state,t);return new e.constructor(r)}(this,e)}addActivationHandler(e){this._activationHandlers.push(e)}forEachChild(e){k(this.state,e)}getRef(){return this._ref||(this._ref=new R(this)),this._ref}toJSON(){return{type:Object.getPrototypeOf(this).constructor.name,isActive:this.isActive,state:this.state}}}function C(e,t){var r;const[n,a]=(0,c.useState)(e.state),i=e.state,s=null!=(r=null==t?void 0:t.shouldActivateOrKeepAlive)&&r;return(0,c.useEffect)((()=>{let t;s&&(t=e.activate());const r=e.subscribeToState((e=>{a(e)}));return e.state!==i&&a(e.state),()=>{r.unsubscribe(),t&&t()}}),[e,s]),e.state}function k(e,t){for(const r of Object.values(e))if(r instanceof T&&t(r),Array.isArray(r))for(const e of r)e instanceof T&&t(e)}var D=r(3241);function I(e,t){const r={...e};Object.assign(r,t);for(const e in r){if(t&&void 0!==t[e])continue;const n=r[e];if(n instanceof R)console.warn("Cloning object with SceneObjectRef");else if(n instanceof T)r[e]=n.clone();else if(Array.isArray(n)){const t=[];for(const e of n)e instanceof T?t.push(e.clone()):"object"==typeof e?t.push((0,D.cloneDeep)(e)):t.push(e);r[e]=t}else r[e]="object"==typeof n?(0,D.cloneDeep)(n):n}return r}function A(e,t){let r,n=e;for(;n&&!r;)r=t(n),n=n.parent;return r}class L extends i.DataSourceApi{constructor(e,t){super({name:"RuntimeDataSource-"+e,uid:t,type:e,id:1,readOnly:!0,jsonData:{},access:"direct",meta:{id:e,name:"RuntimeDataSource-"+e,type:i.PluginType.datasource,info:{author:{name:""},description:"",links:[],logos:{large:"",small:""},screenshots:[],updated:"",version:""},module:"",baseUrl:""}})}testDatasource(){return Promise.resolve({})}}const N=new Map;function M({dataSource:e}){if(N.has(e.uid))throw new Error(`A runtime data source with uid ${e.uid} has already been registered`);N.set(e.uid,e)}function j(e,t){const r=t.state.$variables;if(!r)return t.parent?j(e,t.parent):null;const n=r.getByName(e);return n||(t.parent?j(e,t.parent):null)}function Q(e,t,...r){let n=!1;"undefined"!=typeof window&&(n="true"===localStorage.getItem("grafana.debug.scenes"))}new WeakMap,new WeakMap,new WeakMap,new WeakMap;function V(e){let t=e;for(;t;){if(t.state.$behaviors)for(const e of t.state.$behaviors)if("isQueryController"in e)return e;t=t.parent}}new WeakMap,new WeakMap;var z=r(1625);z.ob.Auto;var F=(e=>(e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error",e))(F||{});class B extends T{constructor(e){super({data:X,...e})}getResultsStream(){const e={origin:this,data:this.state.data};return(0,p.of)(e)}}const X={state:F.Done,series:[],timeRange:(0,i.getDefaultTimeRange)()};class q{constructor(e,t){this._sceneObject=e,this._nextChangeShouldAddHistoryStep=!1,this._keys=t.keys}getKeys(){return"function"==typeof this._keys?this._keys():this._keys}getUrlState(){return this._sceneObject.getUrlState()}updateFromUrl(e){this._sceneObject.updateFromUrl(e)}shouldCreateHistoryStep(e){return this._nextChangeShouldAddHistoryStep}performBrowserHistoryAction(e){this._nextChangeShouldAddHistoryStep=!0,e(),this._nextChangeShouldAddHistoryStep=!1}}const U=/^\d+[yYmMsSwWhHdD]$/;function W(e){if("string"!=typeof e)return null;if(-1!==e.indexOf("now"))return e;if(U.test(e))return e;if(8===e.length){const t=(0,i.toUtc)(e,"YYYYMMDD");if(t.isValid())return t.toISOString()}else if(15===e.length){const t=(0,i.toUtc)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t.toISOString()}else if(19===e.length){const t=(0,i.toUtc)(e,"YYYY-MM-DD HH:mm:ss");if(t.isValid())return t.toISOString()}else if(24===e.length){return(0,i.toUtc)(e).toISOString()}const t=parseInt(e,10);return isNaN(t)?null:(0,i.toUtc)(t).toISOString()}function H(e,t,r,n,a,s){const o=a&&"now"===t,l=Date.now();s&&function(e){e!==G&&(G=e,(0,i.setWeekStart)(e))}(s);const u=(e,t)=>i.dateMath.toDateTime?i.dateMath.toDateTime(e,t):i.dateMath.parse(e,t.roundUp,t.timezone,t.fiscalYearStartMonth);return{to:u(o?"now-"+a:t,{roundUp:!0,timezone:r,fiscalYearStartMonth:n,now:l}),from:u(e,{roundUp:!1,timezone:r,fiscalYearStartMonth:n,now:l}),raw:{from:e,to:t}}}let G;function Y(e,t,r){if((0,i.isDateTime)(e))return e.isValid();if(i.dateMath.isMathString(e))return i.dateMath.isValid(e);return(0,i.dateTimeParse)(e,{roundUp:t,timeZone:r}).isValid()}class Z extends T{constructor(e={}){var t;const r=e.from&&Y(e.from)?e.from:"now-6h",n=e.to&&Y(e.to)?e.to:"now",a=K(e.timeZone);super({from:r,to:n,timeZone:a,value:H(r,n,a||(0,i.getTimeZone)(),e.fiscalYearStartMonth,e.UNSAFE_nowDelay,e.weekStart),refreshOnActivate:null!=(t=e.refreshOnActivate)?t:{percent:10},...e}),this._urlSync=new q(this,{keys:["from","to","timezone","time","time.window"]}),this.onTimeRangeChange=e=>{const t={};if("string"==typeof e.raw.from?t.from=e.raw.from:t.from=e.raw.from.toISOString(),"string"==typeof e.raw.to?t.to=e.raw.to:t.to=e.raw.to.toISOString(),t.value=H(t.from,t.to,this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart),t.from!==this.state.from||t.to!==this.state.to){const e=V(this);null==e||e.startProfile("SceneTimeRange"),this._urlSync.performBrowserHistoryAction((()=>{this.setState(t)}))}},this.onTimeZoneChange=e=>{this._urlSync.performBrowserHistoryAction((()=>{var t;this.setState({timeZone:null!=(t=K(e))?t:z.vp})}))},this.onRefresh=()=>{this.refreshRange(0),this.publishEvent(new s.RefreshEvent,!0)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){if(!this.state.timeZone){const e=this.getTimeZoneSource();e!==this&&this._subs.add(e.subscribeToState(((e,t)=>{void 0!==e.timeZone&&e.timeZone!==t.timeZone&&this.refreshRange(0)})))}return i.rangeUtil.isRelativeTimeRange(this.state.value.raw)&&this.refreshIfStale(),()=>{this.state.weekStart&&(0,i.setWeekStart)(s.config.bootData.user.weekStart)}}refreshIfStale(){var e,t,r,n;let a;void 0!==(null==(t=null==(e=this.state)?void 0:e.refreshOnActivate)?void 0:t.percent)&&(a=this.calculatePercentOfInterval(this.state.refreshOnActivate.percent)),void 0!==(null==(n=null==(r=this.state)?void 0:r.refreshOnActivate)?void 0:n.afterMs)&&(a=Math.min(this.state.refreshOnActivate.afterMs,null!=a?a:1/0)),void 0!==a&&this.refreshRange(a)}getTimeZoneSource(){if(!this.parent||!this.parent.parent)return this;const e=A(this.parent.parent,(e=>{if(e.state.$timeRange&&e.state.$timeRange.state.timeZone)return e.state.$timeRange}));return e||this}refreshRange(e){var t;const r=H(this.state.from,this.state.to,null!=(t=this.state.timeZone)?t:(0,i.getTimeZone)(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart);r.to.diff(this.state.value.to,"milliseconds")>=e&&this.setState({value:r})}calculatePercentOfInterval(e){const t=this.state.value.to.diff(this.state.value.from,"milliseconds");return Math.ceil(t/e)}getTimeZone(){if(this.state.timeZone&&K(this.state.timeZone))return this.state.timeZone;const e=this.getTimeZoneSource();return e!==this&&K(e.state.timeZone)?e.state.timeZone:(0,i.getTimeZone)()}getUrlState(){const e=s.locationService.getSearchObject(),t={from:this.state.from,to:this.state.to,timezone:this.getTimeZone()};return e.time&&e["time.window"]&&(t.time=null,t["time.window"]=null),t}updateFromUrl(e){var t,r,n;const a={};let s=W(e.from),o=W(e.to);if(e.time&&e["time.window"]){const t=function(e,t){const r=isNaN(Date.parse(e))?parseInt(e,10):Date.parse(e);let n;n=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):i.rangeUtil.intervalToMs(t);return{from:(0,i.toUtc)(r-n/2).toISOString(),to:(0,i.toUtc)(r+n/2).toISOString()}}(Array.isArray(e.time)?e.time[0]:e.time,Array.isArray(e["time.window"])?e["time.window"][0]:e["time.window"]);t.from&&Y(t.from)&&(s=t.from),t.to&&Y(t.to)&&(o=t.to)}if(s&&Y(s)&&(a.from=s),o&&Y(o)&&(a.to=o),"string"==typeof e.timezone&&(a.timeZone=""!==e.timezone?e.timezone:void 0),0!==Object.keys(a).length)return a.value=H(null!=(t=a.from)?t:this.state.from,null!=(r=a.to)?r:this.state.to,null!=(n=a.timeZone)?n:this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay,this.state.weekStart),this.setState(a)}}function K(e){if(void 0!==e&&""!==e)return e===z.vp||(0,i.getZone)(e)?e:void Q()}const J=new B,ee=new Z;const te=new class extends T{constructor(){super({variables:[]})}getByName(e){}isVariableLoadingOrWaitingToUpdate(e){return!1}};function re(e){var t;return null!=(t=A(e,(e=>e.state.$timeRange)))?t:ee}class ne extends i.BusEventWithPayload{}function ae(e){return"object"==typeof e&&"formatter"in e}ne.type="scene-variable-changed-value";let ie,se={};function oe(e){const t=se[e];return t||(se[e]=(0,D.property)(e))}class le{constructor(e,t){this.state={name:e,value:t,type:"scopedvar"}}getValue(e){let{value:t}=this.state,r=t.value;return r=e?oe(e)(t.value):t.value,"string"===r||"number"===r||"boolean"===r?r:String(r)}getValueText(){const{value:e}=this.state;return null!=e.text?String(e.text):String(e)}}const ue=new i.Registry((()=>{const e=[{id:z.$m.Lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>{if("string"==typeof e)return ce(e);if(Array.isArray(e)){if(0===e.length)return"__empty__";return"("+(0,D.map)(e,(e=>'"'+ce(e)+'"')).join(" OR ")+")"}return ce(`${e}`)}},{id:z.$m.Raw,name:"raw",description:"Keep value as is",formatter:e=>String(e)},{id:z.$m.Regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:e=>{if("string"==typeof e)return(0,i.escapeRegex)(e);if(Array.isArray(e)){const t=e.map((e=>"string"==typeof e?(0,i.escapeRegex)(e):(0,i.escapeRegex)(String(e))));return 1===t.length?t[0]:"("+t.join("|")+")"}return(0,i.escapeRegex)(`${e}`)}},{id:z.$m.Pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>"string"==typeof e?e:Array.isArray(e)?e.join("|"):`${e}`},{id:z.$m.Distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t,r)=>"string"==typeof e?e:Array.isArray(e)?(e=(0,D.map)(e,((e,t)=>0!==t?r.state.name+"="+e:e)),e.join(",")):`${e}`},{id:z.$m.CSV,name:"Csv",description:"Comma-separated values",formatter:e=>"string"==typeof e?e:(0,D.isArray)(e)?e.join(","):String(e)},{id:z.$m.HTML,name:"HTML",description:"HTML escaping of values",formatter:e=>"string"==typeof e?i.textUtil.escapeHtml(e):(0,D.isArray)(e)?i.textUtil.escapeHtml(e.join(", ")):i.textUtil.escapeHtml(String(e))},{id:z.$m.JSON,name:"JSON",description:"JSON stringify value",formatter:e=>"string"==typeof e?e:JSON.stringify(e)},{id:z.$m.PercentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>(0,D.isArray)(e)?de("{"+e.join(",")+"}"):de(e)},{id:z.$m.SingleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{const t=new RegExp("'","g");if((0,D.isArray)(e))return(0,D.map)(e,(e=>`'${(0,D.replace)(e,t,"\\'")}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,D.replace)(r,t,"\\'")}'`}},{id:z.$m.DoubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{const t=new RegExp('"',"g");if((0,D.isArray)(e))return(0,D.map)(e,(e=>`"${(0,D.replace)(e,t,'\\"')}"`)).join(",");let r="string"==typeof e?e:String(e);return`"${(0,D.replace)(r,t,'\\"')}"`}},{id:z.$m.SQLString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:ge},{id:z.$m.Date,name:"Date",description:"Format date in different ways",formatter:(e,t)=>{var r;let n=NaN;if("number"==typeof e?n=e:"string"==typeof e&&(n=parseInt(e,10)),isNaN(n))return"NaN";const a=null!=(r=t[0])?r:"iso";switch(a){case"ms":return String(e);case"seconds":return`${Math.round(n/1e3)}`;case"iso":return(0,i.dateTime)(n).toISOString();default:return(t||[]).length>1?(0,i.dateTime)(n).format(t.join(":")):(0,i.dateTime)(n).format(a)}}},{id:z.$m.Glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>(0,D.isArray)(e)&&e.length>1?"{"+e.join(",")+"}":String(e)},{id:z.$m.Text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t,r)=>r.getValueText?r.getValueText():String(e)},{id:z.$m.QueryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t,r)=>{if(r.urlSync){const e=r.urlSync.getUrlState();return i.urlUtil.toUrlParams(e)}return Array.isArray(e)?e.map((e=>fe(r.state.name,e))).join("&"):fe(r.state.name,e)}},{id:z.$m.UriEncode,name:"Percent encode as URI",description:"Useful for URL escaping values, taking into URI syntax characters",formatter:e=>(0,D.isArray)(e)?he("{"+e.join(",")+"}"):he(e)}];return e}));function ce(e){return!1===isNaN(+e)?e:e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function de(e){return"object"==typeof e&&(e=String(e)),pe(encodeURIComponent(e))}const he=e=>pe(encodeURI(String(e))),pe=e=>e.replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()));function fe(e,t){return`var-${e}=${de(t)}`}const me={"'":"''",'"':'\\"'};function ge(e){const t=new RegExp("'|\"","g");if((0,D.isArray)(e))return(0,D.map)(e,(e=>`'${(0,D.replace)(e,t,(e=>{var t;return null!=(t=me[e])?t:""}))}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,D.replace)(r,t,(e=>{var t;return null!=(t=me[e])?t:""}))}'`}const ve="All",be="$__all",ye="$__auto",Oe=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,we="__searchFilter";class xe{constructor(e){this._value=e}formatter(){return this._value}}class Se{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=re(this._sceneObject);return"__from"===this.state.name?e.state.value.from.valueOf():e.state.value.to.valueOf()}getValueText(){const e=re(this._sceneObject);return"__from"===this.state.name?(0,i.dateTimeFormat)(e.state.value.from,{timeZone:e.getTimeZone()}):(0,i.dateTimeFormat)(e.state.value.to,{timeZone:e.getTimeZone()})}}class _e{constructor(e,t,r){this.state={name:e,type:"time_macro",match:r},this._sceneObject=t}getValue(){var e;const t=Fs(this._sceneObject);if(t){const r=null==(e=t.state.data)?void 0:e.request;return r?"__interval_ms"===this.state.name?r.intervalMs:r.interval:this.state.match}return this.state.match}}function $e(e,t){e.setState(t)}function Ee(){return s.useLocationService?(0,s.useLocationService)():s.locationService}class Pe extends T{constructor(){super(...arguments),this._urlSync=new Re(this)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,p.map)((e=>(this.updateValueGivenNewOptions(e),{}))))}onCancel(){this.setStateHelper({loading:!1});const e=this.parent;null==e||e.cancel(this)}updateValueGivenNewOptions(e){const{value:t,text:r,options:n}=this.state,a=this.getStateUpdateGivenNewOptions(e,t,r);this.interceptStateUpdateAfterValidation(a),this.setStateHelper(a),(a.value!==t||a.text!==r||this.hasAllValue()&&!(0,D.isEqual)(e,n))&&this.publishEvent(new ne(this),!0)}getStateUpdateGivenNewOptions(e,t,r){const n={options:e,loading:!1,value:t,text:r};if(0===e.length)return this.state.defaultToAll||this.state.includeAll?(n.value=be,n.text=ve):this.state.isMulti?(n.value=[],n.text=[]):(n.value="",n.text=""),n;if(this.hasAllValue())return this.state.includeAll?n.text=ve:(n.value=e[0].value,n.text=e[0].label,this.state.isMulti&&(n.value=[n.value],n.text=[n.text])),n;if(this.state.isMulti){const a=(Array.isArray(t)?t:[t]).filter((t=>e.find((e=>e.value===t)))),i=a.map((t=>e.find((e=>e.value===t)).label));if(0===a.length){const t=this.getDefaultMultiState(e);n.value=t.value,n.text=t.text}else(0,D.isEqual)(a,t)||(n.value=a),(0,D.isEqual)(i,r)||(n.text=i);return n}let a=function(e,t,r){let n;for(const a of r){if(a.value===e)return a;a.label===t&&(n=a)}return n}(t,r,e);if(a)n.text=a.label,n.value=a.value;else{const t=this.getDefaultSingleState(e);n.value=t.value,n.text=t.text}return n}interceptStateUpdateAfterValidation(e){const t=e.value===be&&this.state.text===ve;this.skipNextValidation&&e.value!==this.state.value&&e.text!==this.state.text&&!t&&(e.value=this.state.value,e.text=this.state.text),this.skipNextValidation=!1}getValue(){return this.hasAllValue()?this.state.allValue?new Te(this.state.allValue,this):this.state.options.map((e=>e.value)):this.state.value}getValueText(){return this.hasAllValue()?ve:Array.isArray(this.state.text)?this.state.text.join(" + "):String(this.state.text)}hasAllValue(){const e=this.state.value;return e===be||Array.isArray(e)&&e[0]===be}getDefaultMultiState(e){return this.state.defaultToAll?{value:[be],text:[ve]}:e.length>0?{value:[e[0].value],text:[e[0].label]}:{value:[],text:[]}}getDefaultSingleState(e){return this.state.defaultToAll?{value:be,text:ve}:e.length>0?{value:e[0].value,text:e[0].label}:{value:"",text:""}}changeValueTo(e,t,r=!1){var n,a;if(e===this.state.value&&t===this.state.text)return;if(t||(t=Array.isArray(e)?e.map((e=>this.findLabelTextForValue(e))):this.findLabelTextForValue(e)),Array.isArray(e)){if(0===e.length){const r=this.getDefaultMultiState(this.state.options);e=r.value,t=r.text}e[e.length-1]===be?(e=[be],t=[ve]):e[0]===be&&e.length>1&&(e.shift(),Array.isArray(t)&&t.shift())}if((0,D.isEqual)(e,this.state.value)&&(0,D.isEqual)(t,this.state.text))return;const i=()=>this.setStateHelper({value:e,text:t,loading:!1});r?null==(a=(n=this._urlSync).performBrowserHistoryAction)||a.call(n,i):i(),this.publishEvent(new ne(this),!0)}findLabelTextForValue(e){if(e===be)return ve;const t=this.state.options.find((t=>t.value===e));if(t)return t.label;const r=this.state.options.find((t=>t.label===e));return r?r.label:e}setStateHelper(e){$e(this,e)}getOptionsForSelect(e=!0){let t=this.state.options;if(this.state.includeAll&&(t=[{value:be,label:ve},...t]),e&&!Array.isArray(this.state.value)){t.find((e=>e.value===this.state.value))||(t=[{value:this.state.value,label:String(this.state.text)},...t])}return t}refreshOptions(){this.getValueOptions({}).subscribe((e=>{this.updateValueGivenNewOptions(e)}))}}class Re{constructor(e){this._sceneObject=e,this._nextChangeShouldAddHistoryStep=!1}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){if(this._sceneObject.state.skipUrlSync)return{};let e=null,t=this._sceneObject.state.value;return e=Array.isArray(t)?t.map(String):this._sceneObject.state.isMulti?[String(t)]:String(t),{[this.getKey()]:e}}updateFromUrl(e){let t=e[this.getKey()];null!=t&&(this._sceneObject.state.includeAll&&(t=function(e){if((0,D.isArray)(e)&&e[0]===ve)return[be];if(e===ve)return be;return e}(t)),this._sceneObject.state.allValue&&this._sceneObject.state.allValue===t&&(t=be),this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0),this._sceneObject.changeValueTo(t))}performBrowserHistoryAction(e){this._nextChangeShouldAddHistoryStep=!0,e(),this._nextChangeShouldAddHistoryStep=!1}shouldCreateHistoryStep(e){return this._nextChangeShouldAddHistoryStep}}class Te{constructor(e,t){this._value=e,this._variable=t}formatter(e){return e===z.$m.Text?ve:e===z.$m.PercentEncode?ue.get(z.$m.PercentEncode).formatter(this._value,[],this._variable):e===z.$m.QueryParam?ue.get(z.$m.QueryParam).formatter(ve,[],this._variable):this._value}}function Ce(e,t={}){if(e.state.$variables)for(const r of e.state.$variables.state.variables)r.state.skipUrlSync||t[r.state.name]||(t[r.state.name]=r);return e.parent&&Ce(e.parent,t),t}const ke=(0,i.getDisplayProcessor)();class De{constructor(e){this._urlQueryParams=e}formatter(e){if(!e)return this._urlQueryParams;const t=e.split(":");if("exclude"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams);for(const r of t[1].split(","))e.delete(r);return`?${e}`}if("include"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams),r=t[1].split(",");for(const t of e.keys())r.includes(t)||e.delete(t);return`?${e}`}return this._urlQueryParams}}const Ie=new Map([[i.DataLinkBuiltInVars.includeVars,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){const e=Ce(this._sceneObject),t=ue.get(z.$m.QueryParam),r=[];for(const n of Object.keys(e)){const a=e[n];if(a instanceof Pe&&a.hasAllValue()&&!a.state.allValue){r.push(t.formatter(be,[],a));continue}const i=a.getValue();i&&(ae(i)?r.push(i.formatter(z.$m.QueryParam)):r.push(t.formatter(i,[],a)))}return new xe(r.join("&"))}getValueText(){return""}}],[i.DataLinkBuiltInVars.keepTime,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){var e;const t=null==(e=re(this._sceneObject).urlSync)?void 0:e.getUrlState();return"browser"===(null==t?void 0:t.timezone)&&(t.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone),new xe(i.urlUtil.toUrlParams(t))}getValueText(){return""}}],["__value",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__value"}}getValue(e){var t,r;const n=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!n)return this._match;const{frame:a,rowIndex:s,field:o,calculatedValue:l}=n.value;if(l)switch(e){case"numeric":case"raw":return l.numeric;case"time":return"";default:return(0,i.formattedValueToString)(l)}if(null==s)return this._match;if("time"===e){const e=a.fields.find((e=>e.type===i.FieldType.time));return e?e.values.get(s):void 0}if(!o)return this._match;const u=o.values.get(s);if("raw"===e)return u;const c=(null!=(r=o.display)?r:ke)(u);return"numeric"===e?c.numeric:(0,i.formattedValueToString)(c)}getValueText(){return""}}],["__data",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__data"}}getValue(e){var t,r;const n=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!n||!e)return this._match;const{frame:a,rowIndex:s}=n.value;if(void 0===s||void 0===e)return this._match;const o={name:a.name,refId:a.refId,fields:(0,i.getFieldDisplayValuesProxy)({frame:a,rowIndex:s})};return null!=(r=oe(e)(o))?r:""}getValueText(){return""}}],["__series",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__series"}}getValue(e){var t;const r=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!r||!e)return this._match;if("name"!==e)return this._match;const{frame:n,frameIndex:a}=r.value;return(0,i.getFrameDisplayName)(n,a)}getValueText(){return""}}],["__field",class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__field"}}getValue(e){var t,r;const n=null==(t=this._scopedVars)?void 0:t.__dataContext;if(!n||!e)return this._match;if(void 0===e||""===e)return this._match;const{frame:a,field:s,data:o}=n.value,l=function(e,t,r){return new Proxy({},{get:(n,a)=>"name"===a?e.name:"displayName"===a?(0,i.getFieldDisplayName)(e,t,r):"labels"===a||"formattedLabels"===a?e.labels?{...e.labels,__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,i.formatLabels)(e.labels,"",!0)}:"":void 0})}(s,a,o);return null!=(r=oe(e)(l))?r:""}getValueText(){return""}}],["__url",class{constructor(e,t){this.state={name:e,type:"url_macro"}}getValue(e){var t;const r=s.locationService.getLocation(),n=null!=(t=s.config.appSubUrl)?t:"";switch(null!=e?e:""){case"params":return new De(r.search);case"path":return n+r.pathname;default:return n+r.pathname+r.search}}getValueText(){return""}}],["__from",Se],["__to",Se],["__timezone",class{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=re(this._sceneObject).getTimeZone();return"browser"===e?Intl.DateTimeFormat().resolvedOptions().timeZone:e}getValueText(){return this.getValue()}}],["__user",class{constructor(e,t){this.state={name:e,type:"user_macro"}}getValue(e){const t=s.config.bootData.user;switch(e){case"login":return t.login;case"email":return t.email;default:return String(t.id)}}getValueText(){return""}}],["__org",class{constructor(e,t){this.state={name:e,type:"org_macro"}}getValue(e){const t=s.config.bootData.user;return"name"===e?t.orgName:String(t.orgId)}getValueText(){return""}}],["__interval",_e],["__interval_ms",_e]]);function Ae(e,t,r,n,a){return t&&"string"==typeof t?(Oe.lastIndex=0,t.replace(Oe,((t,i,s,o,l,u,c)=>{const d=i||s||l,h=o||c||n,p=function(e,t,r,n){if(r&&r.hasOwnProperty(e)){const t=r[e];if(t)return function(e,t){return ie?(ie.state.name=e,ie.state.value=t):ie=new le(e,t),ie}(e,t)}const a=j(e,n);if(a)return a;const i=Ie.get(e);if(i)return new i(e,n,t,r);return null}(d,t,r,e);if(!p)return a&&a.push({match:t,variableName:d,fieldPath:u,format:h,value:t,found:!1}),t;const f=function(e,t,r,n){if(null==r)return"";if(ae(r))return Ae(e,r.formatter(n));Array.isArray(r)||"object"!=typeof r||(r=`${r}`);if("function"==typeof n)return n(r,{name:t.state.name,type:t.state.type,multi:t.state.isMulti,includeAll:t.state.includeAll});let a=[];n?(a=n.split(":"),a.length>1?(n=a[0],a=a.slice(1)):a=[]):n=z.$m.Glob;let i=ue.getIfExists(n);i||(console.error(`Variable format ${n} not found. Using glob format as fallback.`),i=ue.get(z.$m.Glob));return i.formatter(r,a,t)}(e,p,p.getValue(u),h);return a&&a.push({match:t,variableName:d,fieldPath:u,format:h,value:f,found:f!==t}),f}))):null!=t?t:""}function Le(e){return void 0!==e.useState}function Ne(e){return"enrichDataRequest"in e}function Me(e){return"isDataLayer"in e}function je(e){return t=>{const r=Ws.getQueryController(e.origin);return r?new p.Observable((n=>{e.cancel||(e.cancel=()=>n.complete()),r.queryStarted(e);let a=!1;const i=t.subscribe({next:t=>{a||t.state===F.Loading||(a=!0,r.queryCompleted(e)),n.next(t)},error:e=>n.error(e),complete:()=>{n.complete()}});return()=>{i.unsubscribe(),a||r.queryCompleted(e)}})):t}}function Qe(e){return new p.Observable((t=>{t.next({state:F.Loading});(0,p.from)(e).pipe((0,p.map)((()=>({state:F.Done}))),(0,p.catchError)((()=>(t.next({state:F.Error}),[])))).subscribe({next:e=>t.next(e),complete:()=>t.complete()})}))}async function Ve(e,t){if(null==e?void 0:e.uid){const t=N.get(e.uid);if(t)return t}if(e&&e.query)return e;const r=(0,s.getDataSourceSrv)().get(e,t);if(t.__sceneObject&&t.__sceneObject.value.valueOf()){const e=Ws.getQueryController(t.__sceneObject.value.valueOf());e&&e.state.enableProfiling&&Qe(r).pipe(je({type:"plugin",origin:t.__sceneObject.value.valueOf()})).subscribe((()=>{}))}return await r}class ze{constructor(){this._values=new Map}recordCurrentDependencyValuesForSceneObject(e){if(this.clearValues(),e.variableDependency)for(const t of e.variableDependency.getNames()){const r=Ws.lookupVariable(t,e);r&&this._values.set(r.state.name,r.getValue())}}cloneAndRecordCurrentValuesForSceneObject(e){const t=new ze;return t.recordCurrentDependencyValuesForSceneObject(e),t}clearValues(){this._values.clear()}hasValues(){return!!this._values}recordCurrentValue(e){this._values.set(e.state.name,e.getValue())}hasRecordedValue(e){return this._values.has(e.state.name)}hasValueChanged(e){if(this._values.has(e.state.name)){if(!os(this._values.get(e.state.name),e.getValue()))return!0}return!1}hasDependenciesChanged(e){if(!this._values)return!1;if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const r=Ws.lookupVariable(t,e);if(!r)continue;const n=r.state.name;if(r&&this._values.has(n)){if(!os(this._values.get(n),r.getValue()))return!0}}return!1}}function Fe(e){return"object"==typeof e&&"getExtraQueries"in e}const Be=(e,t)=>(0,p.of)(t),Xe=0;function qe(e){const t=e.getRoot();return Ne(t)?t.enrichDataRequest(e):null}let Ue,We=new Set;const He=new Set;var Ge=r(2007),Ye=r(8449);function Ze(e,t="latest"){return Ke(e,t.replace(/\-.*/,""))}function Ke(e,t){const r={};for(const[n,a]of Object.entries(e))Je(a)?r[n]=Ke(a,t):(tt(a,n),r[n]=et(a,t));return r}function Je(e){if("object"==typeof e){const[t]=Object.keys(e);return!(0,Ye.valid)(t)}return!1}function et(e,t){let r,n=Object.keys(e).sort(Ye.compare);if("latest"===t)return e[n[n.length-1]];for(const e of n)(0,Ye.gte)(t,e)&&(r=e);return r||(r=n[n.length-1]),e[r]}function tt(e,t){if(!Object.keys(e).every((e=>(0,Ye.valid)(e))))throw new Error(`Invalid semver version: '${t}'`)}const rt="8.5.0",nt={RadioButton:{container:{"10.2.3":"data-testid radio-button"}},Breadcrumbs:{breadcrumb:{"9.4.0":e=>`data-testid ${e} breadcrumb`}},TimePicker:{openButton:{[rt]:"data-testid TimePicker Open Button"},overlayContent:{"10.2.3":"data-testid TimePicker Overlay Content"},fromField:{"10.2.3":"data-testid Time Range from field",[rt]:"Time Range from field"},toField:{"10.2.3":"data-testid Time Range to field",[rt]:"Time Range to field"},applyTimeRange:{[rt]:"data-testid TimePicker submit button"},copyTimeRange:{"10.4.0":"data-testid TimePicker copy button"},pasteTimeRange:{"10.4.0":"data-testid TimePicker paste button"},calendar:{label:{"10.2.3":"data-testid Time Range calendar",[rt]:"Time Range calendar"},openButton:{"10.2.3":"data-testid Open time range calendar",[rt]:"Open time range calendar"},closeButton:{"10.2.3":"data-testid Close time range Calendar",[rt]:"Close time range Calendar"}},absoluteTimeRangeTitle:{[rt]:"data-testid-absolute-time-range-narrow"}},DataSourcePermissions:{form:{"9.5.0":()=>'form[name="addPermission"]'},roleType:{"9.5.0":"Role to add new permission to"},rolePicker:{"9.5.0":"Built-in role picker"},permissionLevel:{"9.5.0":"Permission Level"}},DateTimePicker:{input:{"10.2.3":"data-testid date-time-input"}},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:{[rt]:"Test Data Query scenario select container"},scenarioSelect:{[rt]:"Test Data Query scenario select"},max:{[rt]:"TestData max"},min:{[rt]:"TestData min"},noise:{[rt]:"TestData noise"},seriesCount:{[rt]:"TestData series count"},spread:{[rt]:"TestData spread"},startValue:{[rt]:"TestData start value"},drop:{[rt]:"TestData drop values"}}},DataSourceHttpSettings:{urlInput:{"10.4.0":"data-testid Datasource HTTP settings url",[rt]:"Datasource HTTP settings url"}},Jaeger:{traceIDInput:{[rt]:"Trace ID"}},Prometheus:{configPage:{connectionSettings:{[rt]:"Data source connection URL"},manageAlerts:{"10.4.0":"prometheus-alerts-manager"},scrapeInterval:{"10.4.0":"data-testid scrape interval"},queryTimeout:{"10.4.0":"data-testid query timeout"},defaultEditor:{"10.4.0":"data-testid default editor"},disableMetricLookup:{"10.4.0":"disable-metric-lookup"},prometheusType:{"10.4.0":"data-testid prometheus type"},prometheusVersion:{"10.4.0":"data-testid prometheus version"},cacheLevel:{"10.4.0":"data-testid cache level"},incrementalQuerying:{"10.4.0":"prometheus-incremental-querying"},queryOverlapWindow:{"10.4.0":"data-testid query overlap window"},disableRecordingRules:{"10.4.0":"disable-recording-rules"},customQueryParameters:{"10.4.0":"data-testid custom query parameters"},httpMethod:{"10.4.0":"data-testid http method"},exemplarsAddButton:{"10.3.0":"data-testid Add exemplar config button",[rt]:"Add exemplar config button"},internalLinkSwitch:{"10.3.0":"data-testid Internal link switch",[rt]:"Internal link switch"},codeModeMetricNamesSuggestionLimit:{"11.1.0":"data-testid code mode metric names suggestion limit"}},queryEditor:{explain:{"10.4.0":"data-testid prometheus explain switch wrapper"},editorToggle:{"10.4.0":"data-testid QueryEditorModeToggle"},options:{"10.4.0":"data-testid prometheus options"},legend:{"10.4.0":"data-testid prometheus legend wrapper"},format:{"10.4.0":"data-testid prometheus format"},step:{"10.4.0":"prometheus-step"},type:{"10.4.0":"data-testid prometheus type"},exemplars:{"10.4.0":"prometheus-exemplars"},builder:{metricSelect:{"10.4.0":"data-testid metric select"},hints:{"10.4.0":"data-testid prometheus hints"},metricsExplorer:{"10.4.0":"data-testid metrics explorer"},queryAdvisor:{"10.4.0":"data-testid query advisor"}},code:{queryField:{"10.4.0":"data-testid prometheus query field"},metricsCountInfo:{"11.1.0":"data-testid metrics count disclaimer"},metricsBrowser:{openButton:{"10.4.0":"data-testid open metrics browser"},selectMetric:{"10.4.0":"data-testid select a metric"},seriesLimit:{"10.3.1":"data-testid series limit"},metricList:{"10.4.0":"data-testid metric list"},labelNamesFilter:{"10.4.0":"data-testid label names filter"},labelValuesFilter:{"10.4.0":"data-testid label values filter"},useQuery:{"10.4.0":"data-testid use query"},useAsRateQuery:{"10.4.0":"data-testid use as rate query"},validateSelector:{"10.4.0":"data-testid validate selector"},clear:{"10.4.0":"data-testid clear"}}}},exemplarMarker:{"10.3.0":"data-testid Exemplar marker",[rt]:"Exemplar marker"},variableQueryEditor:{queryType:{"10.4.0":"data-testid query type"},labelnames:{metricRegex:{"10.4.0":"data-testid label names metric regex"}},labelValues:{labelSelect:{"10.4.0":"data-testid label values label select"}},metricNames:{metricRegex:{"10.4.0":"data-testid metric names metric regex"}},varQueryResult:{"10.4.0":"data-testid variable query result"},seriesQuery:{"10.4.0":"data-testid prometheus series query"},classicQuery:{"10.4.0":"data-testid prometheus classic query"}},annotations:{minStep:{"10.4.0":"prometheus-annotation-min-step"},title:{"10.4.0":"data-testid prometheus annotation title"},tags:{"10.4.0":"data-testid prometheus annotation tags"},text:{"10.4.0":"data-testid prometheus annotation text"},seriesValueAsTimestamp:{"10.4.0":"data-testid prometheus annotation series value as timestamp"}}}},Menu:{MenuComponent:{[rt]:e=>`${e} menu`},MenuGroup:{[rt]:e=>`${e} menu group`},MenuItem:{[rt]:e=>`${e} menu item`},SubMenu:{container:{"10.3.0":"data-testid SubMenu container",[rt]:"SubMenu container"},icon:{"10.3.0":"data-testid SubMenu icon",[rt]:"SubMenu icon"}}},Panels:{Panel:{title:{[rt]:e=>`data-testid Panel header ${e}`},content:{"11.1.0":"data-testid panel content"},headerItems:{"10.2.0":e=>`data-testid Panel header item ${e}`},menuItems:{"9.5.0":e=>`data-testid Panel menu item ${e}`},menu:{"9.5.0":e=>`data-testid Panel menu ${e}`},containerByTitle:{[rt]:e=>`${e} panel`},headerCornerInfo:{[rt]:e=>`Panel header ${e}`},status:{"10.2.0":e=>`data-testid Panel status ${e}`,[rt]:e=>"Panel status"},loadingBar:{"10.0.0":()=>"Panel loading bar"},HoverWidget:{container:{"10.1.0":"data-testid hover-header-container",[rt]:"hover-header-container"},dragIcon:{"10.0.0":"data-testid drag-icon"}},PanelDataErrorMessage:{"10.4.0":"data-testid Panel data error message"}},Visualization:{Graph:{container:{"9.5.0":"Graph container"},VisualizationTab:{legendSection:{[rt]:"Legend section"}},Legend:{legendItemAlias:{[rt]:e=>`gpl alias ${e}`},showLegendSwitch:{[rt]:"gpl show legend"}},xAxis:{labels:{[rt]:()=>"div.flot-x-axis > div.flot-tick-label"}}},BarGauge:{valueV2:{[rt]:"data-testid Bar gauge value"}},PieChart:{svgSlice:{"10.3.0":"data testid Pie Chart Slice"}},Text:{container:{[rt]:()=>".markdown-html"}},Table:{header:{[rt]:"table header"},footer:{[rt]:"table-footer"},body:{"10.2.0":"data-testid table body"}}}},VizLegend:{seriesName:{"10.3.0":e=>`data-testid VizLegend series ${e}`}},Drawer:{General:{title:{[rt]:e=>`Drawer title ${e}`},expand:{[rt]:"Drawer expand"},contract:{[rt]:"Drawer contract"},close:{"10.3.0":"data-testid Drawer close",[rt]:"Drawer close"},rcContentWrapper:{"9.4.0":()=>".rc-drawer-content-wrapper"},subtitle:{"10.4.0":"data-testid drawer subtitle"}},DashboardSaveDrawer:{saveButton:{"11.1.0":"data-testid Save dashboard drawer button"},saveAsButton:{"11.1.0":"data-testid Save as dashboard drawer button"},saveAsTitleInput:{"11.1.0":"Save dashboard title field"}}},PanelEditor:{General:{content:{"11.1.0":"data-testid Panel editor content","8.0.0":"Panel editor content"}},OptionsPane:{content:{"11.1.0":"data-testid Panel editor option pane content",[rt]:"Panel editor option pane content"},select:{[rt]:"Panel editor option pane select"},fieldLabel:{[rt]:e=>`${e} field property editor`},fieldInput:{"11.0.0":e=>`data-testid Panel editor option pane field input ${e}`}},DataPane:{content:{"11.1.0":"data-testid Panel editor data pane content",[rt]:"Panel editor data pane content"}},applyButton:{"9.2.0":"data-testid Apply changes and go back to dashboard","9.1.0":"Apply changes and go back to dashboard","8.0.0":"panel editor apply"},toggleVizPicker:{"10.0.0":"data-testid toggle-viz-picker","8.0.0":"toggle-viz-picker"},toggleVizOptions:{"10.1.0":"data-testid toggle-viz-options",[rt]:"toggle-viz-options"},toggleTableView:{"11.1.0":"data-testid toggle-table-view",[rt]:"toggle-table-view"},showZoomField:{"10.2.0":"Map controls Show zoom control field property editor"},showAttributionField:{"10.2.0":"Map controls Show attribution field property editor"},showScaleField:{"10.2.0":"Map controls Show scale field property editor"},showMeasureField:{"10.2.0":"Map controls Show measure tools field property editor"},showDebugField:{"10.2.0":"Map controls Show debug field property editor"},measureButton:{"9.2.0":"show measure tools"}},PanelInspector:{Data:{content:{[rt]:"Panel inspector Data content"}},Stats:{content:{[rt]:"Panel inspector Stats content"}},Json:{content:{"11.1.0":"data-testid Panel inspector Json content",[rt]:"Panel inspector Json content"}},Query:{content:{[rt]:"Panel inspector Query content"},refreshButton:{[rt]:"Panel inspector Query refresh button"},jsonObjectKeys:{[rt]:()=>".json-formatter-key"}}},Tab:{title:{"11.2.0":e=>`data-testid Tab ${e}`},active:{[rt]:()=>'[class*="-activeTabStyle"]'}},RefreshPicker:{runButtonV2:{[rt]:"data-testid RefreshPicker run button"},intervalButtonV2:{[rt]:"data-testid RefreshPicker interval button"}},QueryTab:{content:{[rt]:"Query editor tab content"},queryInspectorButton:{[rt]:"Query inspector button"},queryHistoryButton:{"10.2.0":"data-testid query-history-button",[rt]:"query-history-button"},addQuery:{"10.2.0":"data-testid query-tab-add-query",[rt]:"Query editor add query button"},queryGroupTopSection:{"11.2.0":"data-testid query group top section"},addExpression:{"11.2.0":"data-testid query-tab-add-expression"}},QueryHistory:{queryText:{"9.0.0":"Query text"}},QueryEditorRows:{rows:{[rt]:"Query editor row"}},QueryEditorRow:{actionButton:{"10.4.0":e=>`data-testid ${e}`},title:{[rt]:e=>`Query editor row title ${e}`},container:{[rt]:e=>`Query editor row ${e}`}},AlertTab:{content:{"10.2.3":"data-testid Alert editor tab content",[rt]:"Alert editor tab content"}},AlertRules:{groupToggle:{"11.0.0":"data-testid group-collapse-toggle"},toggle:{"11.0.0":"data-testid collapse-toggle"},expandedContent:{"11.0.0":"data-testid expanded-content"},previewButton:{"11.1.0":"data-testid alert-rule preview-button"},ruleNameField:{"11.1.0":"data-testid alert-rule name-field"},newFolderButton:{"11.1.0":"data-testid alert-rule new-folder-button"},newFolderNameField:{"11.1.0":"data-testid alert-rule name-folder-name-field"},newFolderNameCreateButton:{"11.1.0":"data-testid alert-rule name-folder-name-create-button"},newEvaluationGroupButton:{"11.1.0":"data-testid alert-rule new-evaluation-group-button"},newEvaluationGroupName:{"11.1.0":"data-testid alert-rule new-evaluation-group-name"},newEvaluationGroupInterval:{"11.1.0":"data-testid alert-rule new-evaluation-group-interval"},newEvaluationGroupCreate:{"11.1.0":"data-testid alert-rule new-evaluation-group-create-button"},step:{"11.5.0":e=>`data-testid alert-rule step-${e}`},stepAdvancedModeSwitch:{"11.5.0":e=>`data-testid advanced-mode-switch step-${e}`}},Alert:{alertV2:{[rt]:e=>`data-testid Alert ${e}`}},TransformTab:{content:{"10.1.0":"data-testid Transform editor tab content",[rt]:"Transform editor tab content"},newTransform:{"10.1.0":e=>`data-testid New transform ${e}`},transformationEditor:{"10.1.0":e=>`data-testid Transformation editor ${e}`},transformationEditorDebugger:{"10.1.0":e=>`data-testid Transformation editor debugger ${e}`}},Transforms:{card:{"10.1.0":e=>`data-testid New transform ${e}`},disableTransformationButton:{"10.4.0":"data-testid Disable transformation button"},Reduce:{modeLabel:{"10.2.3":"data-testid Transform mode label",[rt]:"Transform mode label"},calculationsLabel:{"10.2.3":"data-testid Transform calculations label",[rt]:"Transform calculations label"}},SpatialOperations:{actionLabel:{"9.1.2":"root Action field property editor"},locationLabel:{"10.2.0":"root Location Mode field property editor"},location:{autoOption:{"9.1.2":"Auto location option"},coords:{option:{"9.1.2":"Coords location option"},latitudeFieldLabel:{"9.1.2":"root Latitude field field property editor"},longitudeFieldLabel:{"9.1.2":"root Longitude field field property editor"}},geohash:{option:{"9.1.2":"Geohash location option"},geohashFieldLabel:{"9.1.2":"root Geohash field field property editor"}},lookup:{option:{"9.1.2":"Lookup location option"},lookupFieldLabel:{"9.1.2":"root Lookup field field property editor"},gazetteerFieldLabel:{"9.1.2":"root Gazetteer field property editor"}}}},searchInput:{"10.2.3":"data-testid search transformations",[rt]:"search transformations"},noTransformationsMessage:{"10.2.3":"data-testid no transformations message"},addTransformationButton:{"10.1.0":"data-testid add transformation button",[rt]:"add transformation button"},removeAllTransformationsButton:{"10.4.0":"data-testid remove all transformations button"}},NavBar:{Configuration:{button:{"9.5.0":"Configuration"}},Toggle:{button:{"10.2.3":"data-testid Toggle menu",[rt]:"Toggle menu"}},Reporting:{button:{"9.5.0":"Reporting"}}},NavMenu:{Menu:{"10.2.3":"data-testid navigation mega-menu"},item:{"9.5.0":"data-testid Nav menu item"}},NavToolbar:{container:{"9.4.0":"data-testid Nav toolbar"},commandPaletteTrigger:{"11.5.0":"data-testid Command palette trigger"},shareDashboard:{"11.1.0":"data-testid Share dashboard"},markAsFavorite:{"11.1.0":"data-testid Mark as favorite"},editDashboard:{editButton:{"11.1.0":"data-testid Edit dashboard button"},saveButton:{"11.1.0":"data-testid Save dashboard button"},exitButton:{"11.1.0":"data-testid Exit edit mode button"},settingsButton:{"11.1.0":"data-testid Dashboard settings"},addRowButton:{"11.1.0":"data-testid Add row button"},addLibraryPanelButton:{"11.1.0":"data-testid Add a panel from the panel library button"},addVisualizationButton:{"11.1.0":"data-testid Add new visualization menu item"},pastePanelButton:{"11.1.0":"data-testid Paste panel button"},discardChangesButton:{"11.1.0":"data-testid Discard changes button"},discardLibraryPanelButton:{"11.1.0":"data-testid Discard library panel button"},unlinkLibraryPanelButton:{"11.1.0":"data-testid Unlink library panel button"},saveLibraryPanelButton:{"11.1.0":"data-testid Save library panel button"},backToDashboardButton:{"11.1.0":"data-testid Back to dashboard button"}}},PageToolbar:{container:{[rt]:()=>".page-toolbar"},item:{[rt]:e=>`${e}`},itemButton:{"9.5.0":e=>`data-testid ${e}`}},QueryEditorToolbarItem:{button:{[rt]:e=>`QueryEditor toolbar item button ${e}`}},BackButton:{backArrow:{"10.3.0":"data-testid Go Back",[rt]:"Go Back"}},OptionsGroup:{group:{"11.1.0":e=>e?`data-testid Options group ${e}`:"data-testid Options group",[rt]:e=>e?`Options group ${e}`:"Options group"},toggle:{"11.1.0":e=>e?`data-testid Options group ${e} toggle`:"data-testid Options group toggle",[rt]:e=>e?`Options group ${e} toggle`:"Options group toggle"}},PluginVisualization:{item:{[rt]:e=>`Plugin visualization item ${e}`},current:{[rt]:()=>'[class*="-currentVisualizationItem"]'}},Select:{menu:{"11.5.0":"data-testid Select menu",[rt]:"Select options menu"},option:{"11.1.0":"data-testid Select option",[rt]:"Select option"},toggleAllOptions:{"11.3.0":"data-testid toggle all options"},input:{[rt]:()=>'input[id*="time-options-input"]'},singleValue:{[rt]:()=>'div[class*="-singleValue"]'}},FieldConfigEditor:{content:{[rt]:"Field config editor content"}},OverridesConfigEditor:{content:{[rt]:"Field overrides editor content"}},FolderPicker:{containerV2:{[rt]:"data-testid Folder picker select container"},input:{"10.4.0":"data-testid folder-picker-input"}},ReadonlyFolderPicker:{container:{[rt]:"data-testid Readonly folder picker select container"}},DataSourcePicker:{container:{"10.0.0":"data-testid Data source picker select container","8.0.0":"Data source picker select container"},inputV2:{"10.1.0":"data-testid Select a data source",[rt]:"Select a data source"},dataSourceList:{"10.4.0":"data-testid Data source list dropdown"},advancedModal:{dataSourceList:{"10.4.0":"data-testid Data source list"},builtInDataSourceList:{"10.4.0":"data-testid Built in data source list"}}},TimeZonePicker:{containerV2:{[rt]:"data-testid Time zone picker select container"},changeTimeSettingsButton:{"11.0.0":"data-testid Time zone picker Change time settings button"}},WeekStartPicker:{containerV2:{[rt]:"data-testid Choose starting day of the week"},placeholder:{[rt]:"Choose starting day of the week"}},TraceViewer:{spanBar:{"9.0.0":"data-testid SpanBar--wrapper"}},QueryField:{container:{"10.3.0":"data-testid Query field",[rt]:"Query field"}},QueryBuilder:{queryPatterns:{"10.3.0":"data-testid Query patterns",[rt]:"Query patterns"},labelSelect:{"10.3.0":"data-testid Select label",[rt]:"Select label"},inputSelect:{"11.1.0":"data-testid Select label-input"},valueSelect:{"10.3.0":"data-testid Select value",[rt]:"Select value"},matchOperatorSelect:{"10.3.0":"data-testid Select match operator",[rt]:"Select match operator"}},ValuePicker:{button:{"10.3.0":e=>`data-testid Value picker button ${e}`},select:{"10.3.0":e=>`data-testid Value picker select ${e}`}},Search:{sectionV2:{[rt]:"data-testid Search section"},itemsV2:{[rt]:"data-testid Search items"},cards:{[rt]:"data-testid Search cards"},collapseFolder:{[rt]:e=>`data-testid Collapse folder ${e}`},expandFolder:{[rt]:e=>`data-testid Expand folder ${e}`},dashboardItem:{[rt]:e=>`data-testid Dashboard search item ${e}`},dashboardCard:{[rt]:e=>`data-testid Search card ${e}`},folderHeader:{"9.3.0":e=>`data-testid Folder header ${e}`},folderContent:{"9.3.0":e=>`data-testid Folder content ${e}`},dashboardItems:{[rt]:"data-testid Dashboard search item"}},DashboardLinks:{container:{[rt]:"data-testid Dashboard link container"},dropDown:{[rt]:"data-testid Dashboard link dropdown"},link:{[rt]:"data-testid Dashboard link"}},LoadingIndicator:{icon:{"10.4.0":"data-testid Loading indicator",[rt]:"Loading indicator"}},CallToActionCard:{buttonV2:{[rt]:e=>`data-testid Call to action button ${e}`}},DataLinksContextMenu:{singleLink:{"10.3.0":"data-testid Data link",[rt]:"Data link"}},CodeEditor:{container:{"10.2.3":"data-testid Code editor container",[rt]:"Code editor container"}},ReactMonacoEditor:{editorLazy:{"11.1.0":"data-testid ReactMonacoEditor editorLazy"}},DashboardImportPage:{textarea:{[rt]:"data-testid-import-dashboard-textarea"},submit:{[rt]:"data-testid-load-dashboard"}},ImportDashboardForm:{name:{[rt]:"data-testid-import-dashboard-title"},submit:{[rt]:"data-testid-import-dashboard-submit"}},PanelAlertTabContent:{content:{"10.2.3":"data-testid Unified alert editor tab content",[rt]:"Unified alert editor tab content"}},VisualizationPreview:{card:{[rt]:e=>`data-testid suggestion-${e}`}},ColorSwatch:{name:{[rt]:"data-testid-colorswatch"}},DashboardRow:{title:{[rt]:e=>`data-testid dashboard-row-title-${e}`}},UserProfile:{profileSaveButton:{[rt]:"data-testid-user-profile-save"},preferencesSaveButton:{[rt]:"data-testid-shared-prefs-save"},orgsTable:{[rt]:"data-testid-user-orgs-table"},sessionsTable:{[rt]:"data-testid-user-sessions-table"},extensionPointTabs:{"10.2.3":"data-testid-extension-point-tabs"},extensionPointTab:{"10.2.3":e=>`data-testid-extension-point-tab-${e}`}},FileUpload:{inputField:{"9.0.0":"data-testid-file-upload-input-field"},fileNameSpan:{"9.0.0":"data-testid-file-upload-file-name"}},DebugOverlay:{wrapper:{"9.2.0":"debug-overlay"}},OrgRolePicker:{input:{"9.5.0":"Role"}},AnalyticsToolbarButton:{button:{"9.5.0":"Dashboard insights"}},Variables:{variableOption:{"9.5.0":"data-testid variable-option"},variableLinkWrapper:{"11.1.1":"data-testid variable-link-wrapper"}},Annotations:{annotationsTypeInput:{"11.1.0":"data-testid annotations-type-input",[rt]:"annotations-type-input"},annotationsChoosePanelInput:{"11.1.0":"data-testid choose-panels-input",[rt]:"choose-panels-input"},editor:{testButton:{"11.0.0":"data-testid annotations-test-button"},resultContainer:{"11.0.0":"data-testid annotations-query-result-container"}}},Tooltip:{container:{"10.2.0":"data-testid tooltip"}},ReturnToPrevious:{buttonGroup:{"11.0.0":"data-testid dismissable button group"},backButton:{"11.0.0":"data-testid back"},dismissButton:{"11.0.0":"data-testid dismiss"}},SQLQueryEditor:{selectColumn:{"11.0.0":"data-testid select-column"},selectColumnInput:{"11.0.0":"data-testid select-column-input"},selectFunctionParameter:{"11.0.0":e=>`data-testid select-function-parameter-${e}`},selectAggregation:{"11.0.0":"data-testid select-aggregation"},selectAggregationInput:{"11.0.0":"data-testid select-aggregation-input"},selectAlias:{"11.0.0":"data-testid select-alias"},selectAliasInput:{"11.0.0":"data-testid select-alias-input"},selectInputParameter:{"11.0.0":"data-testid select-input-parameter"},filterConjunction:{"11.0.0":"data-testid filter-conjunction"},filterField:{"11.0.0":"data-testid filter-field"},filterOperator:{"11.0.0":"data-testid filter-operator"},headerTableSelector:{"11.0.0":"data-testid header-table-selector"},headerFilterSwitch:{"11.0.0":"data-testid header-filter-switch"},headerGroupSwitch:{"11.0.0":"data-testid header-group-switch"},headerOrderSwitch:{"11.0.0":"data-testid header-order-switch"},headerPreviewSwitch:{"11.0.0":"data-testid header-preview-switch"}},EntityNotFound:{container:{"11.2.0":"data-testid entity-not-found"}},Portal:{container:{"11.5.0":"data-testid portal-container"}}},at={pages:Ze({Alerting:{AddAlertRule:{url:{"10.1.0":"/alerting/new/alerting",[rt]:"/alerting/new"}},EditAlertRule:{url:{[rt]:e=>`alerting/${e}/edit`}}},Login:{url:{[rt]:"/login"},username:{"10.2.3":"data-testid Username input field",[rt]:"Username input field"},password:{"10.2.3":"data-testid Password input field",[rt]:"Password input field"},submit:{"10.2.3":"data-testid Login button",[rt]:"Login button"},skip:{"10.2.3":"data-testid Skip change password button"}},PasswordlessLogin:{url:{[rt]:"/login/passwordless/authenticate"},email:{"10.2.3":"data-testid Email input field",[rt]:"Email input field"},submit:{"10.2.3":"data-testid PasswordlessLogin button",[rt]:"PasswordlessLogin button"}},Home:{url:{[rt]:"/"}},DataSource:{name:{"10.3.0":"data-testid Data source settings page name input field",[rt]:"Data source settings page name input field"},delete:{[rt]:"Data source settings page Delete button"},readOnly:{"10.3.0":"data-testid Data source settings page read only message",[rt]:"Data source settings page read only message"},saveAndTest:{"10.0.0":"data-testid Data source settings page Save and Test button",[rt]:"Data source settings page Save and Test button"},alert:{"10.3.0":"data-testid Data source settings page Alert",[rt]:"Data source settings page Alert"}},DataSources:{url:{[rt]:"/datasources"},dataSources:{[rt]:e=>`Data source list item ${e}`}},EditDataSource:{url:{"9.5.0":e=>`/datasources/edit/${e}`},settings:{"9.5.0":"Datasource settings page basic settings"}},AddDataSource:{url:{[rt]:"/datasources/new"},dataSourcePluginsV2:{"9.3.1":e=>`Add new data source ${e}`,[rt]:e=>`Data source plugin item ${e}`}},ConfirmModal:{delete:{"10.0.0":"data-testid Confirm Modal Danger Button",[rt]:"Confirm Modal Danger Button"}},AddDashboard:{url:{[rt]:"/dashboard/new"},itemButton:{"9.5.0":e=>`data-testid ${e}`},addNewPanel:{"11.1.0":"data-testid Add new panel","8.0.0":"Add new panel",[rt]:"Add new panel"},itemButtonAddViz:{[rt]:"Add new visualization menu item"},addNewRow:{"11.1.0":"data-testid Add new row",[rt]:"Add new row"},addNewPanelLibrary:{"11.1.0":"data-testid Add new panel from panel library",[rt]:"Add new panel from panel library"},Settings:{Annotations:{List:{url:{[rt]:"/dashboard/new?orgId=1&editview=annotations"}},Edit:{url:{[rt]:e=>`/dashboard/new?editview=annotations&editIndex=${e}`}}},Variables:{List:{url:{"11.3.0":"/dashboard/new?orgId=1&editview=variables",[rt]:"/dashboard/new?orgId=1&editview=templating"}},Edit:{url:{"11.3.0":e=>`/dashboard/new?orgId=1&editview=variables&editIndex=${e}`,[rt]:e=>`/dashboard/new?orgId=1&editview=templating&editIndex=${e}`}}}}},Dashboard:{url:{[rt]:e=>`/d/${e}`},DashNav:{nav:{[rt]:"Dashboard navigation"},navV2:{[rt]:"data-testid Dashboard navigation"},publicDashboardTag:{"9.1.0":"data-testid public dashboard tag"},shareButton:{"10.4.0":"data-testid share-button"},scrollContainer:{"11.1.0":"data-testid Dashboard canvas scroll container"},newShareButton:{container:{"11.1.0":"data-testid new share button"},shareLink:{"11.1.0":"data-testid new share link-button"},arrowMenu:{"11.1.0":"data-testid new share button arrow menu"},menu:{container:{"11.1.0":"data-testid new share button menu"},shareInternally:{"11.1.0":"data-testid new share button share internally"},shareExternally:{"11.1.1":"data-testid new share button share externally"},shareSnapshot:{"11.2.0":"data-testid new share button share snapshot"}}},NewExportButton:{container:{"11.2.0":"data-testid new export button"},arrowMenu:{"11.2.0":"data-testid new export button arrow menu"},Menu:{container:{"11.2.0":"data-testid new export button menu"},exportAsJson:{"11.2.0":"data-testid new export button export as json"}}},playlistControls:{prev:{"11.0.0":"data-testid playlist previous dashboard button"},stop:{"11.0.0":"data-testid playlist stop dashboard button"},next:{"11.0.0":"data-testid playlist next dashboard button"}}},Controls:{"11.1.0":"data-testid dashboard controls"},SubMenu:{submenu:{[rt]:"Dashboard submenu"},submenuItem:{[rt]:"data-testid template variable"},submenuItemLabels:{[rt]:e=>`data-testid Dashboard template variables submenu Label ${e}`},submenuItemValueDropDownValueLinkTexts:{[rt]:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`},submenuItemValueDropDownDropDown:{[rt]:"Variable options"},submenuItemValueDropDownOptionTexts:{[rt]:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Annotations:{annotationsWrapper:{"10.0.0":"data-testid annotation-wrapper"},annotationLabel:{"10.0.0":e=>`data-testid Dashboard annotations submenu Label ${e}`},annotationToggle:{"10.0.0":e=>`data-testid Dashboard annotations submenu Toggle ${e}`}}},Settings:{Actions:{close:{"9.5.0":"data-testid dashboard-settings-close"}},General:{deleteDashBoard:{"11.1.0":"data-testid Dashboard settings page delete dashboard button"},sectionItems:{[rt]:e=>`Dashboard settings section item ${e}`},saveDashBoard:{[rt]:"Dashboard settings aside actions Save button"},saveAsDashBoard:{[rt]:"Dashboard settings aside actions Save As button"},title:{"11.2.0":"General"}},Annotations:{Edit:{urlParams:{[rt]:e=>`editview=annotations&editIndex=${e}`}},List:{url:{[rt]:e=>`/d/${e}?editview=annotations`},addAnnotationCTAV2:{[rt]:"data-testid Call to action button Add annotation query"},annotations:{"10.4.0":"data-testid list-annotations"}},Settings:{name:{"11.1.0":"data-testid Annotations settings name input",[rt]:"Annotations settings name input"}},NewAnnotation:{panelFilterSelect:{"10.0.0":"data-testid annotations-panel-filter"},showInLabel:{"11.1.0":"data-testid show-in-label"},previewInDashboard:{"10.0.0":"data-testid annotations-preview"},delete:{"10.4.0":"data-testid annotations-delete"},apply:{"10.4.0":"data-testid annotations-apply"},enable:{"10.4.0":"data-testid annotation-enable"},hide:{"10.4.0":"data-testid annotation-hide"}}},Variables:{List:{url:{"11.3.0":e=>`/d/${e}?editview=variables`,[rt]:e=>`/d/${e}?editview=templating`},addVariableCTAV2:{[rt]:"data-testid Call to action button Add variable"},newButton:{[rt]:"Variable editor New variable button"},table:{[rt]:"Variable editor Table"},tableRowNameFields:{[rt]:e=>`Variable editor Table Name field ${e}`},tableRowDefinitionFields:{"10.1.0":e=>`Variable editor Table Definition field ${e}`},tableRowArrowUpButtons:{[rt]:e=>`Variable editor Table ArrowUp button ${e}`},tableRowArrowDownButtons:{[rt]:e=>`Variable editor Table ArrowDown button ${e}`},tableRowDuplicateButtons:{[rt]:e=>`Variable editor Table Duplicate button ${e}`},tableRowRemoveButtons:{[rt]:e=>`Variable editor Table Remove button ${e}`}},Edit:{urlParams:{"11.3.0":e=>`editview=variables&editIndex=${e}`,[rt]:e=>`editview=templating&editIndex=${e}`},General:{headerLink:{[rt]:"Variable editor Header link"},modeLabelNew:{[rt]:"Variable editor Header mode New"},modeLabelEdit:{[rt]:"Variable editor Header mode Edit"},generalNameInput:{[rt]:"Variable editor Form Name field"},generalNameInputV2:{[rt]:"data-testid Variable editor Form Name field"},generalTypeSelect:{[rt]:"Variable editor Form Type select"},generalTypeSelectV2:{[rt]:"data-testid Variable editor Form Type select"},generalLabelInput:{[rt]:"Variable editor Form Label field"},generalLabelInputV2:{[rt]:"data-testid Variable editor Form Label field"},generalHideSelect:{[rt]:"Variable editor Form Hide select"},generalHideSelectV2:{[rt]:"data-testid Variable editor Form Hide select"},selectionOptionsAllowCustomValueSwitch:{[rt]:"data-testid Variable editor Form Allow Custom Value switch"},selectionOptionsMultiSwitch:{"10.4.0":"data-testid Variable editor Form Multi switch",[rt]:"Variable editor Form Multi switch"},selectionOptionsIncludeAllSwitch:{"10.4.0":"data-testid Variable editor Form IncludeAll switch",[rt]:"Variable editor Form IncludeAll switch"},selectionOptionsCustomAllInput:{"10.4.0":"data-testid Variable editor Form IncludeAll field",[rt]:"Variable editor Form IncludeAll field"},previewOfValuesOption:{"10.4.0":"data-testid Variable editor Preview of Values option",[rt]:"Variable editor Preview of Values option"},submitButton:{"10.4.0":"data-testid Variable editor Run Query button",[rt]:"Variable editor Submit button"},applyButton:{"9.3.0":"data-testid Variable editor Apply button"}},QueryVariable:{queryOptionsDataSourceSelect:{"10.4.0":"data-testid Select a data source","10.0.0":"data-testid Data source picker select container",[rt]:"Data source picker select container"},queryOptionsRefreshSelect:{[rt]:"Variable editor Form Query Refresh select"},queryOptionsRefreshSelectV2:{[rt]:"data-testid Variable editor Form Query Refresh select"},queryOptionsRegExInput:{[rt]:"Variable editor Form Query RegEx field"},queryOptionsRegExInputV2:{[rt]:"data-testid Variable editor Form Query RegEx field"},queryOptionsSortSelect:{[rt]:"Variable editor Form Query Sort select"},queryOptionsSortSelectV2:{[rt]:"data-testid Variable editor Form Query Sort select"},queryOptionsQueryInput:{"10.4.0":"data-testid Variable editor Form Default Variable Query Editor textarea"},valueGroupsTagsEnabledSwitch:{[rt]:"Variable editor Form Query UseTags switch"},valueGroupsTagsTagsQueryInput:{[rt]:"Variable editor Form Query TagsQuery field"},valueGroupsTagsTagsValuesQueryInput:{[rt]:"Variable editor Form Query TagsValuesQuery field"}},ConstantVariable:{constantOptionsQueryInput:{[rt]:"Variable editor Form Constant Query field"},constantOptionsQueryInputV2:{[rt]:"data-testid Variable editor Form Constant Query field"}},DatasourceVariable:{datasourceSelect:{[rt]:"data-testid datasource variable datasource type"}},TextBoxVariable:{textBoxOptionsQueryInput:{[rt]:"Variable editor Form TextBox Query field"},textBoxOptionsQueryInputV2:{[rt]:"data-testid Variable editor Form TextBox Query field"}},CustomVariable:{customValueInput:{[rt]:"data-testid custom-variable-input"}},IntervalVariable:{intervalsValueInput:{[rt]:"data-testid interval variable intervals input"},autoEnabledCheckbox:{"10.4.0":"data-testid interval variable auto value checkbox"},stepCountIntervalSelect:{"10.4.0":"data-testid interval variable step count input"},minIntervalInput:{"10.4.0":"data-testid interval variable mininum interval input"}},GroupByVariable:{dataSourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid group by variable info text"},modeToggle:{"10.4.0":"data-testid group by variable mode toggle"}},AdHocFiltersVariable:{datasourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid ad-hoc filters variable info text"},modeToggle:{"11.0.0":"data-testid ad-hoc filters variable mode toggle"}}}}},Annotations:{marker:{"10.0.0":"data-testid annotation-marker"}},Rows:{Repeated:{ConfigSection:{warningMessage:{"10.2.0":"data-testid Repeated rows warning message"}}}}},Dashboards:{url:{[rt]:"/dashboards"},dashboards:{"10.2.0":e=>`Dashboard search item ${e}`}},SaveDashboardAsModal:{newName:{"10.2.0":"Save dashboard title field"},save:{"10.2.0":"Save dashboard button"}},SaveDashboardModal:{save:{"10.2.0":"Dashboard settings Save Dashboard Modal Save button"},saveVariables:{"10.2.0":"Dashboard settings Save Dashboard Modal Save variables checkbox"},saveTimerange:{"10.2.0":"Dashboard settings Save Dashboard Modal Save timerange checkbox"},saveRefresh:{"11.1.0":"Dashboard settings Save Dashboard Modal Save refresh checkbox"}},SharePanelModal:{linkToRenderedImage:{[rt]:"Link to rendered image"}},ShareDashboardModal:{PublicDashboard:{WillBePublicCheckbox:{"9.1.0":"data-testid public dashboard will be public checkbox"},LimitedDSCheckbox:{"9.1.0":"data-testid public dashboard limited datasources checkbox"},CostIncreaseCheckbox:{"9.1.0":"data-testid public dashboard cost may increase checkbox"},PauseSwitch:{"9.5.0":"data-testid public dashboard pause switch"},EnableAnnotationsSwitch:{"9.3.0":"data-testid public dashboard on off switch for annotations"},CreateButton:{"9.5.0":"data-testid public dashboard create button"},DeleteButton:{"9.3.0":"data-testid public dashboard delete button"},CopyUrlInput:{"9.1.0":"data-testid public dashboard copy url input"},CopyUrlButton:{"9.1.0":"data-testid public dashboard copy url button"},SettingsDropdown:{"10.1.0":"data-testid public dashboard settings dropdown"},TemplateVariablesWarningAlert:{"9.1.0":"data-testid public dashboard disabled template variables alert"},UnsupportedDataSourcesWarningAlert:{"9.5.0":"data-testid public dashboard unsupported data sources alert"},NoUpsertPermissionsWarningAlert:{"9.5.0":"data-testid public dashboard no upsert permissions alert"},EnableTimeRangeSwitch:{"9.4.0":"data-testid public dashboard on off switch for time range"},EmailSharingConfiguration:{Container:{"9.5.0":"data-testid email sharing config container"},ShareType:{"9.5.0":"data-testid public dashboard share type"},EmailSharingInput:{"9.5.0":"data-testid public dashboard email sharing input"},EmailSharingInviteButton:{"9.5.0":"data-testid public dashboard email sharing invite button"},EmailSharingList:{"9.5.0":"data-testid public dashboard email sharing list"},DeleteEmail:{"9.5.0":"data-testid public dashboard delete email button"},ReshareLink:{"9.5.0":"data-testid public dashboard reshare link button"}}},SnapshotScene:{url:{"11.1.0":e=>`/dashboard/snapshot/${e}`},PublishSnapshot:{"11.1.0":"data-testid publish snapshot button"},CopyUrlButton:{"11.1.0":"data-testid snapshot copy url button"},CopyUrlInput:{"11.1.0":"data-testid snapshot copy url input"}}},ShareDashboardDrawer:{ShareInternally:{container:{"11.3.0":"data-testid share internally drawer container"},lockTimeRangeSwitch:{"11.3.0":"data-testid share internally lock time range switch"},shortenUrlSwitch:{"11.3.0":"data-testid share internally shorten url switch"},copyUrlButton:{"11.3.0":"data-testid share internally copy url button"},SharePanel:{preview:{"11.5.0":"data-testid share panel internally image generation preview"},widthInput:{"11.5.0":"data-testid share panel internally width input"},heightInput:{"11.5.0":"data-testid share panel internally height input"},scaleFactorInput:{"11.5.0":"data-testid share panel internally scale factor input"},generateImageButton:{"11.5.0":"data-testid share panel internally generate image button"},downloadImageButton:{"11.5.0":"data-testid share panel internally download image button"}}},ShareExternally:{container:{"11.3.0":"data-testid share externally drawer container"},publicAlert:{"11.3.0":"data-testid public share alert"},emailSharingAlert:{"11.3.0":"data-testid email share alert"},shareTypeSelect:{"11.3.0":"data-testid share externally share type select"},Creation:{PublicShare:{createButton:{"11.3.0":"data-testid public share dashboard create button"},cancelButton:{"11.3.0":"data-testid public share dashboard cancel button"}},EmailShare:{createButton:{"11.3.0":"data-testid email share dashboard create button"},cancelButton:{"11.3.0":"data-testid email share dashboard cancel button"}},willBePublicCheckbox:{"11.3.0":"data-testid share dashboard will be public checkbox"}},Configuration:{enableTimeRangeSwitch:{"11.3.0":"data-testid share externally enable time range switch"},enableAnnotationsSwitch:{"11.3.0":"data-testid share externally enable annotations switch"},copyUrlButton:{"11.3.0":"data-testid share externally copy url button"},revokeAccessButton:{"11.3.0":"data-testid share externally revoke access button"},toggleAccessButton:{"11.3.0":"data-testid share externally pause or resume access button"}}},ShareSnapshot:{url:{"11.3.0":e=>`/dashboard/snapshot/${e}`},container:{"11.3.0":"data-testid share snapshot drawer container"},publishSnapshot:{"11.3.0":"data-testid share snapshot publish button"},copyUrlButton:{"11.3.0":"data-testid share snapshot copy url button"}}},ExportDashboardDrawer:{ExportAsJson:{container:{"11.3.0":"data-testid export as json drawer container"},codeEditor:{"11.3.0":"data-testid export as json code editor"},exportExternallyToggle:{"11.3.0":"data-testid export as json externally switch"},saveToFileButton:{"11.3.0":"data-testid export as json save to file button"},copyToClipboardButton:{"11.3.0":"data-testid export as json copy to clipboard button"},cancelButton:{"11.3.0":"data-testid export as json cancel button"}}},PublicDashboard:{page:{"9.5.0":"public-dashboard-page"},NotAvailable:{container:{"9.5.0":"public-dashboard-not-available"},title:{"9.5.0":"public-dashboard-title"},pausedDescription:{"9.5.0":"public-dashboard-paused-description"}},footer:{"11.0.0":"public-dashboard-footer"}},PublicDashboardScene:{loadingPage:{"11.0.0":"public-dashboard-scene-loading-page"},page:{"11.0.0":"public-dashboard-scene-page"},controls:{"11.0.0":"public-dashboard-controls"}},RequestViewAccess:{form:{"9.5.0":"request-view-access-form"},recipientInput:{"9.5.0":"request-view-access-recipient-input"},submitButton:{"9.5.0":"request-view-access-submit-button"}},PublicDashboardConfirmAccess:{submitButton:{"10.2.0":"data-testid confirm-access-submit-button"}},Explore:{url:{[rt]:"/explore"},General:{container:{[rt]:"data-testid Explore"},graph:{[rt]:"Explore Graph"},table:{[rt]:"Explore Table"},scrollView:{"9.0.0":"data-testid explorer scroll view"}},QueryHistory:{container:{"11.1.0":"data-testid QueryHistory"}}},SoloPanel:{url:{[rt]:e=>`/d-solo/${e}`}},PluginsList:{page:{[rt]:"Plugins list page"},list:{[rt]:"Plugins list"},listItem:{[rt]:"Plugins list item"},signatureErrorNotice:{"10.3.0":"data-testid Unsigned plugins notice",[rt]:"Unsigned plugins notice"}},PluginPage:{page:{[rt]:"Plugin page"},signatureInfo:{"10.3.0":"data-testid Plugin signature info",[rt]:"Plugin signature info"},disabledInfo:{"10.3.0":"data-testid Plugin disabled info",[rt]:"Plugin disabled info"}},PlaylistForm:{name:{[rt]:"Playlist name"},interval:{[rt]:"Playlist interval"},itemDelete:{"10.2.0":"data-testid playlist-form-delete-item"}},BrowseDashboards:{table:{body:{"10.2.0":"data-testid browse-dashboards-table"},row:{"10.2.0":e=>`data-testid browse dashboards row ${e}`},checkbox:{"10.0.0":e=>`data-testid ${e} checkbox`}},NewFolderForm:{form:{"10.2.0":"data-testid new folder form"},nameInput:{"10.2.0":"data-testid new-folder-name-input"},createButton:{"10.2.0":"data-testid new-folder-create-button"}}},Search:{url:{"9.3.0":"/?search=openn"},FolderView:{url:{"9.3.0":"/?search=open&layout=folders"}}},PublicDashboards:{ListItem:{linkButton:{"9.3.0":"public-dashboard-link-button"},configButton:{"9.3.0":"public-dashboard-configuration-button"},trashcanButton:{"9.3.0":"public-dashboard-remove-button"},pauseSwitch:{"10.1.0":"data-testid public dashboard pause switch"}}},UserListPage:{tabs:{allUsers:{"10.0.0":"data-testid all-users-tab"},orgUsers:{"10.0.0":"data-testid org-users-tab"},anonUserDevices:{"10.2.3":"data-testid anon-user-devices-tab"},publicDashboardsUsers:{"10.0.0":"data-testid public-dashboards-users-tab"},users:{"10.0.0":"data-testid users-tab"}},org:{url:{"10.2.0":"/admin/users","9.5.0":"/org/users"}},admin:{url:{"9.5.0":"/admin/users"}},publicDashboards:{container:{"11.1.0":"data-testid public-dashboards-users-list"}},UserListAdminPage:{container:{"10.0.0":"data-testid user-list-admin-page"}},UsersListPage:{container:{"10.0.0":"data-testid users-list-page"}},UserAnonListPage:{container:{"10.4.0":"data-testid user-anon-list-page"}},UsersListPublicDashboardsPage:{container:{"10.0.0":"data-testid users-list-public-dashboards-page"},DashboardsListModal:{listItem:{"10.0.0":e=>`data-testid dashboards-list-item-${e}`}}}},ProfilePage:{url:{"10.2.0":"/profile"}},Plugin:{url:{[rt]:e=>`/plugins/${e}`}}}),components:Ze(nt)};var it=r(6089),st=r(7993);const ot=/[^ -~]/m,lt=/^[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+$/m,ut=new st.A({intraMode:1});function ct(e,t,r){let n=[];if(""===r)n=e;else if(ot.test(r)||lt.test(r)||r.length>25||ut.split(r).length>5)for(let a=0;a<t.length;a++){t[a].includes(r)&&n.push(e[a])}else{const[a,i,s]=ut.search(t,r,5,1e4);(null==a?void 0:a.length)&&(n=i&&s?s.map((t=>e[i.idx[t]])):a.map((t=>e[t])))}return n}function dt(e,t=!1){let r=e;t&&(r=[{value:be,label:ve},...r]);const n=r.map((e=>e.label));return e=>ct(r,n,e)}const ht=()=>!0,pt=e=>"$__all"!==e.value,ft=(e,t)=>e.length===t.filter(pt).length?Ge.ToggleAllState.allSelected:0===e.length||1===e.length&&e[0]&&"$__all"===e[0].value?Ge.ToggleAllState.noneSelected:Ge.ToggleAllState.indeterminate;function mt({model:e,state:t}){const{value:r,text:n,key:a,options:i,includeAll:s,isReadOnly:o,allowCustomValue:l=!0}=t,[u,d]=(0,c.useState)(""),[p,f]=(0,c.useState)(!1),m=function(e,t){return{value:e,label:null!=t?t:String(e)}}(r,String(n)),g=Ws.getQueryController(e),v=(0,c.useMemo)((()=>dt(i,s)),[i,s])(u);return h().createElement(Ge.Select,{id:a,isValidNewOption:e=>e.trim().length>0,placeholder:"Select value",width:"auto",disabled:o,value:m,inputValue:u,allowCustomValue:l,virtualized:!0,filterOption:ht,tabSelectsValue:!1,onInputChange:(t,{action:r})=>"input-change"===r?(d(t),e.onSearchChange&&e.onSearchChange(t),t):t,onOpenMenu:()=>{p&&d(String(n))},onCloseMenu:()=>{d("")},options:v,"data-testid":at.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${r}`),onChange:t=>{e.changeValueTo(t.value,t.label,!0),null==g||g.startProfile("VariableValueSelect"),p!==t.__isNew__&&f(t.__isNew__)}})}function gt({model:e,state:t}){const{value:r,options:n,key:a,maxVisibleValues:i,noValueOnClear:s,includeAll:o,isReadOnly:l,allowCustomValue:u=!0}=t,d=(0,c.useMemo)((()=>(0,D.isArray)(r)?r:[r]),[r]),[p,f]=(0,c.useState)(d),[m,g]=(0,c.useState)(""),v=Ws.getQueryController(e),b=(0,c.useMemo)((()=>dt(n,o)),[n,o]);(0,c.useEffect)((()=>{f(d)}),[d]);const y=n.length>0?"Select value":"",O=b(m);return h().createElement(Ge.MultiSelect,{id:a,placeholder:y,width:"auto",inputValue:m,disabled:l,value:p,noMultiValueWrap:!0,maxVisibleValues:null!=i?i:5,tabSelectsValue:!1,virtualized:!0,allowCustomValue:u,toggleAllOptions:{enabled:!0,optionsFilter:pt,determineToggleAllState:ft},options:O,closeMenuOnSelect:!1,components:{Option:vt},isClearable:!0,hideSelectedOptions:!1,onInputChange:(t,{action:r})=>"input-change"===r?(g(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===r?(g(""),""):m,onBlur:()=>{e.changeValueTo(p,void 0,!0),null==v||v.startProfile("VariableValueSelectMulti")},filterOption:ht,"data-testid":at.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${p}`),onChange:(t,r)=>{"clear"===r.action&&s&&e.changeValueTo([],void 0,!0),f(t.map((e=>e.value)))}})}const vt=({children:e,data:t,innerProps:r,innerRef:n,isFocused:a,isSelected:i,indeterminate:s,renderOptionLabel:o})=>{var l;const{onMouseMove:u,onMouseOver:c,...d}=r,p=(0,Ge.useTheme2)(),f=(0,Ge.getSelectStyles)(p),m=(0,Ge.useStyles2)(bt);return h().createElement("div",{ref:n,className:(0,it.cx)(f.option,a&&f.optionFocused),...d,"data-testid":"data-testid Select option",title:t.title},h().createElement("div",{className:m.checkbox},h().createElement(Ge.Checkbox,{indeterminate:s,value:i})),h().createElement("div",{className:f.optionBody,"data-testid":at.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(null!=(l=t.label)?l:String(t.value))},h().createElement("span",null,e)))};vt.displayName="SelectMenuOptions";const bt=e=>({checkbox:(0,it.css)({marginRight:e.spacing(2)})});function yt({model:e}){const t=e.useState();return t.isMulti?h().createElement(gt,{model:e,state:t}):h().createElement(mt,{model:e,state:t})}class Ot{constructor(e){this._sceneObject=e,this._nextChangeShouldAddHistoryStep=!1}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){return this._sceneObject.state.skipUrlSync?{}:{[this.getKey()]:wt(this._sceneObject.state.value,this._sceneObject.state.text)}}updateFromUrl(e){let t=e[this.getKey()];if(null!=t){this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0);const{values:e,texts:n}=(r=t,(r=Array.isArray(r)?r:[r]).reduce(((e,t)=>{const[r,n]=(null!=t?t:"").split(",");return e.values.push(vs(r)),e.texts.push(vs(null!=n?n:r)),e}),{values:[],texts:[]}));this._sceneObject.changeValueTo(e,n)}var r}performBrowserHistoryAction(e){this._nextChangeShouldAddHistoryStep=!0,e(),this._nextChangeShouldAddHistoryStep=!1}shouldCreateHistoryStep(e){return this._nextChangeShouldAddHistoryStep}}function wt(e,t){return e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.map(((e,r)=>{if(null==e)return"";e=String(e);let n=t[r];return n=null==n?e:String(n),bs(e,n)}))}function xt(e){const t=e.getRoot();return"enrichFiltersRequest"in t?t.enrichFiltersRequest(e):null}var St,_t=e=>{throw TypeError(e)},$t=(e,t,r)=>t.has(e)||_t("Cannot "+r);class Et{constructor(e){((e,t,r)=>{t.has(e)?_t("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r)})(this,St),this.text="__sceneObject",this.valueOf=()=>{return $t(e=this,t=St,"read from private field"),r?r.call(e):t.get(e);var e,t,r},((e,t,r)=>{$t(e,t,"write to private field"),t.set(e,r)})(this,St,e)}toString(){}get value(){return this}}function Pt(e){return function(e){const t=e.match(/^(\d+)\.(\d+)\.(\d+)/);if(!t)return!1;const r=parseInt(t[1],10),n=parseInt(t[2],10),a=parseInt(t[3],10);return 11===r?0===n&&a>=4||1===n&&a>=2||n>1:10===r?4===n&&a>=8||n>=5:r>11}(s.config.buildInfo.version)?new Et(e):{value:e,text:"__sceneObject"}}St=new WeakMap;class Rt extends Pe{constructor(e){super({isMulti:!0,name:"",value:[],text:[],options:[],datasource:null,baseFilters:[],applyMode:"auto",layout:"horizontal",type:"groupby",...e,noValueOnClear:!0}),this.isLazy=!0,this._urlSync=new Ot(this),this._getKeys=async e=>{var t,r,n,a;const i=await(null==(r=(t=this.state).getTagKeysProvider)?void 0:r.call(t,this,null));if(i&&i.replace)return i.values;if(this.state.defaultOptions)return this.state.defaultOptions.concat(ys(null!=(n=null==i?void 0:i.values)?n:[]));if(!e.getTagKeys)return[];const s=ps(this),o=this.state.baseFilters||[],l=Ws.getTimeRange(this).state.value,u=await e.getTagKeys({filters:o,queries:s,timeRange:l,scopes:null==(a=this._scopesBridge)?void 0:a.getValue(),...xt(this)});Os(u)&&this.setState({error:u.error.message});let c=ys(u);i&&(c=c.concat(ys(i.values)));const d=this.state.tagKeyRegexFilter;return d&&(c=c.filter((e=>e.text.match(d)))),c},"auto"===this.state.applyMode&&this.addActivationHandler((()=>(He.add(this),()=>He.delete(this))))}validateAndUpdate(){return this.getValueOptions({}).pipe((0,p.map)((e=>(this._updateValueGivenNewOptions(e),{}))))}_updateValueGivenNewOptions(e){const{value:t,text:r}=this.state,n={options:e,loading:!1,value:null!=t?t:[],text:null!=r?r:[]};this.setState(n)}getValueOptions(e){return this.state.defaultOptions?(0,p.of)(this.state.defaultOptions.map((e=>({label:e.text,value:String(e.value),group:e.group})))):(this.setState({loading:!0,error:null}),(0,p.from)(Ve(this.state.datasource,{__sceneObject:Pt(this)})).pipe((0,p.mergeMap)((e=>(0,p.from)(this._getKeys(e)).pipe((0,p.tap)((e=>{Os(e)&&this.setState({error:e.error.message})})),(0,p.map)((e=>ys(e))),(0,p.take)(1),(0,p.mergeMap)((e=>{const t=e.map((e=>({label:e.text,value:e.value?String(e.value):e.text,group:e.group})));return(0,p.of)(t)})))))))}getDefaultMultiState(e){return{value:[],text:[]}}}Rt.Component=function({model:e}){const{value:t,text:r,key:n,isMulti:a=!0,maxVisibleValues:i,noValueOnClear:s,options:o,includeAll:l,allowCustomValue:u=!0}=e.useState(),d=(0,c.useMemo)((()=>{const e=(0,D.isArray)(t)?t:[t],n=(0,D.isArray)(r)?r:[r];return e.map(((e,t)=>{var r;return{value:e,label:String(null!=(r=n[t])?r:e)}}))}),[t,r]),[f,m]=(0,c.useState)(!1),[g,v]=(0,c.useState)(!1),[b,y]=(0,c.useState)(""),[O,w]=(0,c.useState)(d),x=(0,c.useMemo)((()=>dt(o,l)),[o,l]);(0,c.useEffect)((()=>{w(d)}),[d]);const S=(t,{action:r})=>"input-change"===r?(y(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===r?(y(""),""):b,_=(0,c.useMemo)((()=>ws(x(b).map(Ct))),[x,b]);return a?h().createElement(Ge.MultiSelect,{"aria-label":"Group by selector","data-testid":`GroupBySelect-${n}`,id:n,placeholder:"Select value",width:"auto",allowCustomValue:u,inputValue:b,value:O,noMultiValueWrap:!0,maxVisibleValues:null!=i?i:5,tabSelectsValue:!1,virtualized:!0,options:_,filterOption:Tt,closeMenuOnSelect:!1,isOpen:g,isClearable:!0,hideSelectedOptions:!1,isLoading:f,components:{Option:vt},onInputChange:S,onBlur:()=>{e.changeValueTo(O.map((e=>e.value)),O.map((e=>e.label)),!0)},onChange:(t,r)=>{"clear"===r.action&&s&&e.changeValueTo([],void 0,!0),w(t)},onOpenMenu:async()=>{m(!0),await(0,p.lastValueFrom)(e.validateAndUpdate()),m(!1),v(!0)},onCloseMenu:()=>{v(!1)}}):h().createElement(Ge.Select,{"aria-label":"Group by selector","data-testid":`GroupBySelect-${n}`,id:n,placeholder:"Select value",width:"auto",inputValue:b,value:O,allowCustomValue:u,noMultiValueWrap:!0,maxVisibleValues:null!=i?i:5,tabSelectsValue:!1,virtualized:!0,options:_,filterOption:Tt,closeMenuOnSelect:!0,isOpen:g,isClearable:!0,hideSelectedOptions:!1,noValueOnClear:!0,isLoading:f,onInputChange:S,onChange:(t,r)=>{if("clear"===r.action)return w([]),void(s&&e.changeValueTo([]));(null==t?void 0:t.value)&&(w([t]),e.changeValueTo([t.value],t.label?[t.label]:void 0))},onOpenMenu:async()=>{m(!0),await(0,p.lastValueFrom)(e.validateAndUpdate()),m(!1),v(!0)},onCloseMenu:()=>{v(!1)}})};const Tt=()=>!0;function Ct(e){const{label:t,value:r,group:n}=e,a={label:t,value:r};return n&&(a.group=n),a}function kt(e){return h().createElement(Ge.Tooltip,{content:"Cancel query"},h().createElement(Ge.Icon,{className:"spin-clockwise",name:"sync",size:"xs",role:"button",onMouseDown:t=>{e.onCancel(t)}}))}function Dt(e){const t=(0,Ge.useStyles2)(It),r=(0,Ge.useTheme2)(),n="vertical"===e.layout,a=Boolean(e.isLoading)?h().createElement("div",{style:{marginLeft:r.spacing(1),marginTop:"-1px"},"aria-label":at.components.LoadingIndicator.icon},h().createElement(kt,{onCancel:t=>{var r;t.preventDefault(),t.stopPropagation(),null==(r=e.onCancel)||r.call(e)}})):null;let i=null;e.error&&(i=h().createElement(Ge.Tooltip,{content:e.error,placement:"bottom"},h().createElement(Ge.Icon,{className:t.errorIcon,name:"exclamation-triangle"})));let s=null;e.description&&(s=h().createElement(Ge.Tooltip,{content:e.description,placement:n?"top":"bottom"},h().createElement(Ge.Icon,{className:t.normalIcon,name:"info-circle"})));const o="string"==typeof e.label?at.pages.Dashboard.SubMenu.submenuItemLabels(e.label):"";let l;return l=n?h().createElement("label",{className:(0,it.cx)(t.verticalLabel,e.className),"data-testid":o,htmlFor:e.htmlFor},e.prefix,e.label,s,i,e.icon&&h().createElement(Ge.Icon,{name:e.icon,className:t.normalIcon}),a,e.onRemove&&h().createElement(Ge.IconButton,{variant:"secondary",size:"xs",name:"times",onClick:e.onRemove,tooltip:"Remove"}),e.suffix):h().createElement("label",{className:(0,it.cx)(t.horizontalLabel,e.className),"data-testid":o,htmlFor:e.htmlFor},e.prefix,i,e.icon&&h().createElement(Ge.Icon,{name:e.icon,className:t.normalIcon}),e.label,s,a,e.suffix),l}const It=e=>({horizontalLabel:(0,it.css)({background:e.isDark?e.colors.background.primary:e.colors.background.secondary,display:"flex",alignItems:"center",padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),borderRadius:`${e.shape.radius.default} 0 0 ${e.shape.radius.default}`,border:`1px solid ${e.components.input.borderColor}`,position:"relative",right:-1,whiteSpace:"nowrap",gap:e.spacing(.5)}),verticalLabel:(0,it.css)({display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,lineHeight:e.typography.bodySmall.lineHeight,whiteSpace:"nowrap",marginBottom:e.spacing(.5),gap:e.spacing(1)}),errorIcon:(0,it.css)({color:e.colors.error.text}),normalIcon:(0,it.css)({color:e.colors.text.secondary})});function At(e){const t=e.map((e=>{var t;return null!=(t=e.label)?t:String(e.value)}));return r=>ct(e,t,r)}function Lt(e,t){return""!==e?{value:e,label:t||e}:null}const Nt=()=>!0;function Mt({filter:e,model:t}){var r,n,a,i,s;const o=(0,Ge.useStyles2)(jt),[l,u]=(0,c.useState)([]),[d,p]=(0,c.useState)([]),[f,m]=(0,c.useState)(!1),[g,v]=(0,c.useState)(!1),[b,y]=(0,c.useState)(!1),[O,w]=(0,c.useState)(!1),[x,S]=(0,c.useState)(!1),[_,$]=(0,c.useState)(""),[E,P]=(0,c.useState)(!1),[R,T]=(0,c.useState)(e.values?e.values.map(((t,r)=>{var n;return Lt(t,null==(n=e.valueLabels)?void 0:n[r])})):[]),C=es(e.operator),k=Lt(e.key,e.keyLabel),D=Lt(e.value,null==(r=e.valueLabels)?void 0:r[0]),I=(0,c.useMemo)((()=>At(d)),[d]),A=t.state.onAddCustomValue,L=(0,c.useMemo)((()=>ws(I(_))),[I,_]),N={isMulti:!0,value:R,components:{Option:vt},hideSelectedOptions:!1,closeMenuOnSelect:!1,openMenuOnFocus:!1,onChange:e=>{T(e),e.some((e=>e.__isNew__))&&$("")},onBlur:()=>{var r,n;t._updateFilter(e,{value:null!=(n=null==(r=R[0])?void 0:r.value)?n:"",values:R.map((e=>e.value)),valueLabels:R.map((e=>e.label))})}},M=h().createElement(Ge.Select,{virtualized:!0,allowCustomValue:null==(n=t.state.allowCustomValue)||n,isValidNewOption:e=>e.trim().length>0,allowCreateWhileLoading:!0,formatCreateLabel:e=>`Use custom value: ${e}`,disabled:t.state.readOnly,className:(0,it.cx)(o.value,O?o.widthWhenOpen:void 0),width:"auto",value:D,filterOption:Nt,placeholder:"Select value",options:L,inputValue:_,onInputChange:(e,{action:t})=>("input-change"===t&&$(e),e),onChange:r=>{A&&r.__isNew__?t._updateFilter(e,A(r,e)):t._updateFilter(e,{value:r.value,valueLabels:r.label?[r.label]:[r.value]}),E!==r.__isNew__&&P(r.__isNew__)},isOpen:O&&!g,isLoading:g,openMenuOnFocus:!0,onOpenMenu:async()=>{var r;v(!0),w(!0);const n=await t._getValuesFor(e);v(!1),p(n),E&&$(null!=(r=null==D?void 0:D.label)?r:"")},onCloseMenu:()=>{w(!1),$("")},...C&&N}),j=h().createElement(Ge.Select,{key:""+(g?"loading":"loaded"),disabled:t.state.readOnly,className:(0,it.cx)(o.key,b?o.widthWhenOpen:void 0),width:"auto",allowCustomValue:null==(a=t.state.allowCustomValue)||a,value:k,placeholder:"Select label",options:ws(l),onChange:r=>{t._updateFilter(e,{key:r.value,keyLabel:r.label,value:"",valueLabels:[""],values:void 0}),T([])},autoFocus:""===e.key,isOpen:b&&!f,isLoading:f,onOpenMenu:async()=>{y(!0),m(!0);const r=await t._getKeys(e.key);m(!1),u(r)},onCloseMenu:()=>{y(!1)},onBlur:()=>{""===e.key&&t._removeFilter(e)},openMenuOnFocus:!0}),Q=h().createElement(Ge.Select,{className:(0,it.cx)(o.operator,{[o.widthWhenOpen]:x}),value:e.operator,disabled:t.state.readOnly,options:t._getOperators(),onChange:r=>{var n,a;const i=e.operator,s=r.value,o={operator:s};es(i)&&!es(s)?(o.value="",o.valueLabels=[""],o.values=void 0,T([])):!es(i)&&es(s)&&e.value&&(o.values=[e.value],T([{value:e.value,label:null!=(a=null==(n=e.valueLabels)?void 0:n[0])?a:e.value}])),t._updateFilter(e,o)},onOpenMenu:()=>{S(!0)},onCloseMenu:()=>{S(!1)}});if("vertical"===t.state.layout){if(e.key){const r=h().createElement(Dt,{layout:"vertical",label:null!=(i=e.key)?i:"",onRemove:()=>t._removeFilter(e)});return h().createElement(Ge.Field,{label:r,"data-testid":`AdHocFilter-${e.key}`,className:o.field},h().createElement("div",{className:o.wrapper},Q,M))}return h().createElement(Ge.Field,{label:"Select label","data-testid":`AdHocFilter-${e.key}`,className:o.field},j)}return h().createElement("div",{className:o.wrapper,"data-testid":`AdHocFilter-${e.key}`},j,Q,M,h().createElement(Ge.Button,{variant:"secondary","aria-label":"Remove filter",title:"Remove filter",className:o.removeButton,icon:"times","data-testid":`AdHocFilter-remove-${null!=(s=e.key)?s:""}`,onClick:()=>t._removeFilter(e)}))}const jt=e=>({field:(0,it.css)({marginBottom:0}),wrapper:(0,it.css)({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:0,"&:hover":{zIndex:1},"&:focus-within":{zIndex:2}}}),widthWhenOpen:(0,it.css)({minWidth:e.spacing(16)}),value:(0,it.css)({flexBasis:"content",flexShrink:1,minWidth:"90px"}),key:(0,it.css)({flexBasis:"content",minWidth:"90px",flexShrink:1}),operator:(0,it.css)({flexShrink:0,flexBasis:"content"}),removeButton:(0,it.css)({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),borderLeft:"none",width:e.spacing(3),marginRight:e.spacing(1),boxSizing:"border-box",position:"relative",left:"1px"})});function Qt({model:e,addFilterButtonText:t}){const{_wip:r}=e.useState();return r?h().createElement(Mt,{filter:r,model:e}):h().createElement(Ge.Button,{variant:"secondary",icon:"plus",title:"Add filter","aria-label":"Add filter","data-testid":"AdHocFilter-add",onClick:()=>e._addWip()},t)}class Vt{constructor(e){this._variable=e}getKey(){return`var-${this._variable.state.name}`}getKeys(){return[this.getKey()]}getUrlState(){const e=this._variable.state.filters,t=this._variable.state.baseFilters;let r=[];return 0===e.length&&0===(null==t?void 0:t.length)?{[this.getKey()]:[""]}:(e.length&&r.push(...e.filter(Ji).filter((e=>!e.hidden)).map((e=>zt(e).map(fs).join("|")))),(null==t?void 0:t.length)&&r.push(...null==t?void 0:t.filter(Ji).filter((e=>!e.hidden&&e.origin&&e.restorable)).map((e=>zt(e).map(gs).join("|").concat(`#${e.origin}#restorable`)))),{[this.getKey()]:r.length?r:[""]})}updateFromUrl(e){const t=e[this.getKey()];if(null==t)return;const r=function(e){if(Array.isArray(e)){return e.map(Ft).filter(Bt)}const t=Ft(e);return null===t?[]:[t]}(t),n=[...this._variable.state.baseFilters||[]];for(let e=0;e<r.length;e++){const t=n.findIndex((t=>t.key===r[e].key));t>-1?(r[e].origin||"dashboard"!==n[t].origin||(r[e].origin="dashboard",r[e].restorable=!0),Ki(r[e])&&(r[e].matchAllFilter=!0),n[t]=r[e]):"dashboard"===r[e].origin?(delete r[e].origin,delete r[e].restorable):-1===t&&"scope"===r[e].origin&&r[e].restorable&&n.push(r[e])}this._variable.setState({filters:r.filter((e=>!e.origin)),baseFilters:n})}}function zt(e){var t;const r=[bs(e.key,e.keyLabel),e.operator];return es(e.operator)?e.values.forEach(((t,n)=>{var a;r.push(bs(t,null==(a=e.valueLabels)?void 0:a[n]))})):r.push(bs(e.value,null==(t=e.valueLabels)?void 0:t[0])),r}function Ft(e){if("string"!=typeof e||0===e.length)return null;const[t,r,n]=e.split("#"),[a,i,s,o,...l]=t.split("|").reduce(((e,t)=>{const[r,n]=t.split(",");return e.push(r,null!=n?n:r),e}),[]).map(vs);return{key:a,keyLabel:i,operator:s,value:l[0],values:es(s)?l.filter(((e,t)=>t%2==0)):void 0,valueLabels:l.filter(((e,t)=>t%2==1)),condition:"",...(u=r,("scope"===u||"dashboard"===u)&&{origin:r}),...!!n&&{restorable:!0}};var u}function Bt(e){return null!==e&&"string"==typeof e.key&&"string"==typeof e.value}function Xt(){return"undefined"!=typeof window}function qt(e){return Ht(e)?(e.nodeName||"").toLowerCase():"#document"}function Ut(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Wt(e){var t;return null==(t=(Ht(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ht(e){return!!Xt()&&(e instanceof Node||e instanceof Ut(e).Node)}function Gt(e){return!!Xt()&&(e instanceof Element||e instanceof Ut(e).Element)}function Yt(e){return!!Xt()&&(e instanceof HTMLElement||e instanceof Ut(e).HTMLElement)}function Zt(e){return!(!Xt()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ut(e).ShadowRoot)}function Kt(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=ar(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Jt(e){return["table","td","th"].includes(qt(e))}function er(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function tr(e){const t=rr(),r=Gt(e)?ar(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!r[e]&&"none"!==r[e]))||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function rr(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function nr(e){return["html","body","#document"].includes(qt(e))}function ar(e){return Ut(e).getComputedStyle(e)}function ir(e){return Gt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sr(e){if("html"===qt(e))return e;const t=e.assignedSlot||e.parentNode||Zt(e)&&e.host||Wt(e);return Zt(t)?t.host:t}function or(e){const t=sr(e);return nr(t)?e.ownerDocument?e.ownerDocument.body:e.body:Yt(t)&&Kt(t)?t:or(t)}function lr(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const a=or(e),i=a===(null==(n=e.ownerDocument)?void 0:n.body),s=Ut(a);if(i){const e=ur(s);return t.concat(s,s.visualViewport||[],Kt(a)?a:[],e&&r?lr(e):[])}return t.concat(a,lr(a,[],r))}function ur(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cr(e){let t=e.activeElement;for(;null!=(null==(r=t)||null==(r=r.shadowRoot)?void 0:r.activeElement);){var r;t=t.shadowRoot.activeElement}return t}function dr(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&Zt(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function hr(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function pr(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:r}=e;return t+"/"+r})).join(" "):navigator.userAgent}function fr(e){return!(0!==e.mozInputSource||!e.isTrusted)||(vr()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function mr(e){return!pr().includes("jsdom/")&&(!vr()&&0===e.width&&0===e.height||vr()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function gr(){return/apple/i.test(navigator.vendor)}function vr(){const e=/android/i;return e.test(hr())||e.test(pr())}function br(e){return(null==e?void 0:e.ownerDocument)||document}function yr(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return null!=r.target&&t.contains(r.target)}function Or(e){return"composedPath"in e?e.composedPath()[0]:e.target}function wr(e){e.preventDefault(),e.stopPropagation()}function xr(e){return!!e&&("combobox"===e.getAttribute("role")&&function(e){return Yt(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}(e))}const Sr=Math.min,_r=Math.max,$r=Math.round,Er=Math.floor,Pr=e=>({x:e,y:e}),Rr={left:"right",right:"left",bottom:"top",top:"bottom"},Tr={start:"end",end:"start"};function Cr(e,t){return"function"==typeof e?e(t):e}function kr(e){return e.split("-")[0]}function Dr(e){return e.split("-")[1]}function Ir(e){return"y"===e?"height":"width"}function Ar(e){return["top","bottom"].includes(kr(e))?"y":"x"}function Lr(e){return"x"===Ar(e)?"y":"x"}function Nr(e){return e.replace(/start|end/g,(e=>Tr[e]))}function Mr(e){return e.replace(/left|right|bottom|top/g,(e=>Rr[e]))}function jr(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}var Qr=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Vr=Qr.join(","),zr="undefined"==typeof Element,Fr=zr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Br=!zr&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},Xr=function e(t,r){var n;void 0===r&&(r=!0);var a=null==t||null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"inert");return""===a||"true"===a||r&&t&&e(t.parentNode)},qr=function(e,t,r){if(Xr(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Vr));return t&&Fr.call(e,Vr)&&n.unshift(e),n=n.filter(r)},Ur=function e(t,r,n){for(var a=[],i=Array.from(t);i.length;){var s=i.shift();if(!Xr(s,!1))if("SLOT"===s.tagName){var o=s.assignedElements(),l=e(o.length?o:s.children,!0,n);n.flatten?a.push.apply(a,l):a.push({scopeParent:s,candidates:l})}else{Fr.call(s,Vr)&&n.filter(s)&&(r||!t.includes(s))&&a.push(s);var u=s.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(s),c=!Xr(u,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(u&&c){var d=e(!0===u?s.children:u.children,!0,n);n.flatten?a.push.apply(a,d):a.push({scopeParent:s,candidates:d})}else i.unshift.apply(i,s.children)}}return a},Wr=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Hr=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,r=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r}(e))&&!Wr(e)?0:e.tabIndex},Gr=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Yr=function(e){return"INPUT"===e.tagName},Zr=function(e){return function(e){return Yr(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,r=e.form||Br(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]}(t,e.form);return!a||a===e}(e)},Kr=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},Jr=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var a=Fr.call(e,"details>summary:first-of-type")?e.parentElement:e;if(Fr.call(a,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return Kr(e)}else{if("function"==typeof n){for(var i=e;e;){var s=e.parentElement,o=Br(e);if(s&&!s.shadowRoot&&!0===n(s))return Kr(e);e=e.assignedSlot?e.assignedSlot:s||o===e.ownerDocument?s:o.host}e=i}if(function(e){var t,r,n,a,i=e&&Br(e),s=null===(t=i)||void 0===t?void 0:t.host,o=!1;if(i&&i!==e)for(o=!!(null!==(r=s)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(s)||null!=e&&null!==(a=e.ownerDocument)&&void 0!==a&&a.contains(e));!o&&s;){var l,u,c;o=!(null===(u=s=null===(l=i=Br(s))||void 0===l?void 0:l.host)||void 0===u||null===(c=u.ownerDocument)||void 0===c||!c.contains(s))}return o}(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},en=function(e,t){return!(t.disabled||Xr(t)||function(e){return Yr(e)&&"hidden"===e.type}(t)||Jr(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!Fr.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},tn=function(e,t){return!(Zr(t)||Hr(t)<0||!en(e,t))},rn=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},nn=function e(t){var r=[],n=[];return t.forEach((function(t,a){var i=!!t.scopeParent,s=i?t.scopeParent:t,o=function(e,t){var r=Hr(e);return r<0&&t&&!Wr(e)?0:r}(s,i),l=i?e(t.candidates):s;0===o?i?r.push.apply(r,l):r.push(s):n.push({documentOrder:a,tabIndex:o,item:t,isScope:i,content:l})})),n.sort(Gr).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(r)},an=function(e,t){var r;return r=(t=t||{}).getShadowRoot?Ur([e],t.includeContainer,{filter:tn.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:rn}):qr(e,t.includeContainer,tn.bind(null,t)),nn(r)},sn=r(8398);function on(e,t,r){let{reference:n,floating:a}=e;const i=Ar(t),s=Lr(t),o=Ir(s),l=kr(t),u="y"===i,c=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let p;switch(l){case"top":p={x:c,y:n.y-a.height};break;case"bottom":p={x:c,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-a.width,y:d};break;default:p={x:n.x,y:n.y}}switch(Dr(t)){case"start":p[s]-=h*(r&&u?-1:1);break;case"end":p[s]+=h*(r&&u?-1:1)}return p}async function ln(e,t){var r;void 0===t&&(t={});const{x:n,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Cr(t,e),f=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(p),m=o[h?"floating"===d?"reference":"floating":d],g=jr(await i.getClippingRect({element:null==(r=await(null==i.isElement?void 0:i.isElement(m)))||r?m:m.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===d?{x:n,y:a,width:s.floating.width,height:s.floating.height}:s.reference,b=await(null==i.getOffsetParent?void 0:i.getOffsetParent(o.floating)),y=await(null==i.isElement?void 0:i.isElement(b))&&await(null==i.getScale?void 0:i.getScale(b))||{x:1,y:1},O=jr(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:b,strategy:l}):v);return{top:(g.top-O.top+f.top)/y.y,bottom:(O.bottom-g.bottom+f.bottom)/y.y,left:(g.left-O.left+f.left)/y.x,right:(O.right-g.right+f.right)/y.x}}function un(e){const t=ar(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Yt(e),i=a?e.offsetWidth:r,s=a?e.offsetHeight:n,o=$r(r)!==i||$r(n)!==s;return o&&(r=i,n=s),{width:r,height:n,$:o}}function cn(e){return Gt(e)?e:e.contextElement}function dn(e){const t=cn(e);if(!Yt(t))return Pr(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=un(t);let s=(i?$r(r.width):r.width)/n,o=(i?$r(r.height):r.height)/a;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const hn=Pr(0);function pn(e){const t=Ut(e);return rr()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:hn}function fn(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const a=e.getBoundingClientRect(),i=cn(e);let s=Pr(1);t&&(n?Gt(n)&&(s=dn(n)):s=dn(e));const o=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Ut(e))&&t}(i,r,n)?pn(i):Pr(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,c=a.width/s.x,d=a.height/s.y;if(i){const e=Ut(i),t=n&&Gt(n)?Ut(n):n;let r=e,a=ur(r);for(;a&&n&&t!==r;){const e=dn(a),t=a.getBoundingClientRect(),n=ar(a),i=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=i,u+=s,r=Ut(a),a=ur(r)}}return jr({width:c,height:d,x:l,y:u})}function mn(e,t){const r=ir(e).scrollLeft;return t?t.left+r:fn(Wt(e)).left+r}function gn(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:mn(e,n)),y:n.top+t.scrollTop}}function vn(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Ut(e),n=Wt(e),a=r.visualViewport;let i=n.clientWidth,s=n.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const e=rr();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}(e,r);else if("document"===t)n=function(e){const t=Wt(e),r=ir(e),n=e.ownerDocument.body,a=_r(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=_r(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+mn(e);const o=-r.scrollTop;return"rtl"===ar(n).direction&&(s+=_r(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:s,y:o}}(Wt(e));else if(Gt(t))n=function(e,t){const r=fn(e,!0,"fixed"===t),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Yt(e)?dn(e):Pr(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:a*i.x,y:n*i.y}}(t,r);else{const r=pn(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return jr(n)}function bn(e,t){const r=sr(e);return!(r===t||!Gt(r)||nr(r))&&("fixed"===ar(r).position||bn(r,t))}function yn(e,t,r){const n=Yt(t),a=Wt(t),i="fixed"===r,s=fn(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=Pr(0);if(n||!n&&!i)if(("body"!==qt(t)||Kt(a))&&(o=ir(t)),n){const e=fn(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=mn(a));const u=!a||n||i?Pr(0):gn(a,o);return{x:s.left+o.scrollLeft-l.x-u.x,y:s.top+o.scrollTop-l.y-u.y,width:s.width,height:s.height}}function On(e){return"static"===ar(e).position}function wn(e,t){if(!Yt(e)||"fixed"===ar(e).position)return null;if(t)return t(e);let r=e.offsetParent;return Wt(e)===r&&(r=r.ownerDocument.body),r}function xn(e,t){const r=Ut(e);if(er(e))return r;if(!Yt(e)){let t=sr(e);for(;t&&!nr(t);){if(Gt(t)&&!On(t))return t;t=sr(t)}return r}let n=wn(e,t);for(;n&&Jt(n)&&On(n);)n=wn(n,t);return n&&nr(n)&&On(n)&&!tr(n)?r:n||function(e){let t=sr(e);for(;Yt(t)&&!nr(t);){if(tr(t))return t;if(er(t))return null;t=sr(t)}return null}(e)||r}const Sn={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i="fixed"===a,s=Wt(n),o=!!t&&er(t.floating);if(n===s||o&&i)return r;let l={scrollLeft:0,scrollTop:0},u=Pr(1);const c=Pr(0),d=Yt(n);if((d||!d&&!i)&&(("body"!==qt(n)||Kt(s))&&(l=ir(n)),Yt(n))){const e=fn(n);u=dn(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}const h=!s||d||i?Pr(0):gn(s,l,!0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:r.y*u.y-l.scrollTop*u.y+c.y+h.y}},getDocumentElement:Wt,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const i=[..."clippingAncestors"===r?er(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=lr(e,[],!1).filter((e=>Gt(e)&&"body"!==qt(e))),a=null;const i="fixed"===ar(e).position;let s=i?sr(e):e;for(;Gt(s)&&!nr(s);){const t=ar(s),r=tr(s);r||"fixed"!==t.position||(a=null),(i?!r&&!a:!r&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||Kt(s)&&!r&&bn(e,s))?n=n.filter((e=>e!==s)):a=t,s=sr(s)}return t.set(e,n),n}(t,this._c):[].concat(r),n],s=i[0],o=i.reduce(((e,r)=>{const n=vn(t,r,a);return e.top=_r(n.top,e.top),e.right=Sr(n.right,e.right),e.bottom=Sr(n.bottom,e.bottom),e.left=_r(n.left,e.left),e}),vn(t,s,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:xn,getElementRects:async function(e){const t=this.getOffsetParent||xn,r=this.getDimensions,n=await r(e.floating);return{reference:yn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=un(e);return{width:t,height:r}},getScale:dn,isElement:Gt,isRTL:function(e){return"rtl"===ar(e).direction}};function _n(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $n(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,u=cn(e),c=a||i?[...u?lr(u):[],...lr(t)]:[];c.forEach((e=>{a&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)}));const d=u&&o?function(e,t){let r,n=null;const a=Wt(e);function i(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),i();const u=e.getBoundingClientRect(),{left:c,top:d,width:h,height:p}=u;if(o||t(),!h||!p)return;const f={rootMargin:-Er(d)+"px "+-Er(a.clientWidth-(c+h))+"px "+-Er(a.clientHeight-(d+p))+"px "+-Er(c)+"px",threshold:_r(0,Sr(1,l))||1};let m=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return s();n?s(!1,n):r=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==n||_n(u,e.getBoundingClientRect())||s(),m=!1}try{n=new IntersectionObserver(g,{...f,root:a.ownerDocument})}catch(e){n=new IntersectionObserver(g,f)}n.observe(e)}(!0),i}(u,r):null;let h,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[n]=e;n&&n.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),r()})),u&&!l&&f.observe(u),f.observe(t));let m=l?fn(e):null;return l&&function t(){const n=fn(e);m&&!_n(m,n)&&r();m=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;c.forEach((e=>{a&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const En=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await async function(e,t){const{placement:r,platform:n,elements:a}=e,i=await(null==n.isRTL?void 0:n.isRTL(a.floating)),s=kr(r),o=Dr(r),l="y"===Ar(r),u=["left","top"].includes(s)?-1:1,c=i&&l?-1:1,d=Cr(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof f&&(p="end"===o?-1*f:f),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}(t,e);return s===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},Pn=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=Cr(e,t);if(null!=(r=i.arrow)&&r.alignmentOffset)return{};const v=kr(a),b=Ar(o),y=kr(o)===o,O=await(null==l.isRTL?void 0:l.isRTL(u.floating)),w=h||(y||!m?[Mr(o)]:function(e){const t=Mr(e);return[Nr(e),t,Nr(t)]}(o)),x="none"!==f;!h&&x&&w.push(...function(e,t,r,n){const a=Dr(e);let i=function(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:s;default:return[]}}(kr(e),"start"===r,n);return a&&(i=i.map((e=>e+"-"+a)),t&&(i=i.concat(i.map(Nr)))),i}(o,m,f,O));const S=[o,...w],_=await ln(t,g),$=[];let E=(null==(n=i.flip)?void 0:n.overflows)||[];if(c&&$.push(_[v]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=Dr(e),a=Lr(e),i=Ir(a);let s="x"===a?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Mr(s)),[s,Mr(s)]}(a,s,O);$.push(_[e[0]],_[e[1]])}if(E=[...E,{placement:a,overflows:$}],!$.every((e=>e<=0))){var P,R;const e=((null==(P=i.flip)?void 0:P.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let r=null==(R=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:R.placement;if(!r)switch(p){case"bestFit":{var T;const e=null==(T=E.filter((e=>{if(x){const t=Ar(e.placement);return t===b||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:T[0];e&&(r=e);break}case"initialPlacement":r=o}if(a!==r)return{reset:{placement:r}}}return{}}}},Rn=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=Cr(e,t),c=await ln(t,u),d=kr(a),h=Dr(a),p="y"===Ar(a),{width:f,height:m}=i.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=h===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,g="end"===h?"top":"bottom");const b=m-c.top-c.bottom,y=f-c.left-c.right,O=Sr(m-c[g],b),w=Sr(f-c[v],y),x=!t.middlewareData.shift;let S=O,_=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(_=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(S=b),x&&!h){const e=_r(c.left,0),t=_r(c.right,0),r=_r(c.top,0),n=_r(c.bottom,0);p?_=f-2*(0!==e||0!==t?e+t:_r(c.left,c.right)):S=m-2*(0!==r||0!==n?r+n:_r(c.top,c.bottom))}await l({...t,availableWidth:_,availableHeight:S});const $=await s.getDimensions(o.floating);return f!==$.width||m!==$.height?{reset:{rects:!0}}:{}}}},Tn=(e,t,r)=>{const n=new Map,a={platform:Sn,...r},i={...a.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:s}=r,o=i.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:d}=on(u,n,l),h=n,p={},f=0;for(let r=0;r<o.length;r++){const{name:i,fn:m}=o[r],{x:g,y:v,data:b,reset:y}=await m({x:c,y:d,initialPlacement:n,placement:h,strategy:a,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=v?v:d,p={...p,[i]:{...p[i],...b}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(u=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:c,y:d}=on(u,h,l))),r=-1)}return{x:c,y:d,placement:h,strategy:a,middlewareData:p}})(e,t,{...a,platform:i})};var Cn="undefined"!=typeof document?c.useLayoutEffect:c.useEffect;function kn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!=n--;)if(!kn(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;0!=n--;){const r=a[n];if(("_owner"!==r||!e.$$typeof)&&!kn(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function Dn(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function In(e,t){const r=Dn(e);return Math.round(t*r)/r}function An(e){const t=c.useRef(e);return Cn((()=>{t.current=e})),t}const Ln=(e,t)=>({...Pn(e),options:[e,t]}),Nn=(e,t)=>({...Rn(e),options:[e,t]});const Mn={...d},jn=Mn.useInsertionEffect||(e=>e());function Qn(e){const t=c.useRef((()=>{0}));return jn((()=>{t.current=e})),c.useCallback((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)}),[])}const Vn="ArrowUp",zn="ArrowDown",Fn="ArrowLeft",Bn="ArrowRight";function Xn(e,t,r){return Math.floor(e/t)!==r}function qn(e,t){return t<0||t>=e.current.length}function Un(e,t){return Hn(e,{disabledIndices:t})}function Wn(e,t){return Hn(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Hn(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:a,amount:i=1}=void 0===t?{}:t;const s=e.current;let o=r;do{o+=n?-i:i}while(o>=0&&o<=s.length-1&&Jn(s,o,a));return o}function Gn(e,t){let{event:r,orientation:n,loop:a,rtl:i,cols:s,disabledIndices:o,minIndex:l,maxIndex:u,prevIndex:c,stopEvent:d=!1}=t,h=c;if(r.key===Vn){if(d&&wr(r),-1===c)h=u;else if(h=Hn(e,{startingIndex:h,amount:s,decrement:!0,disabledIndices:o}),a&&(c-s<l||h<0)){const e=c%s,t=u%s,r=u-(t-e);h=t===e?u:t>e?r:r-s}qn(e,h)&&(h=c)}if(r.key===zn&&(d&&wr(r),-1===c?h=l:(h=Hn(e,{startingIndex:c,amount:s,disabledIndices:o}),a&&c+s>u&&(h=Hn(e,{startingIndex:c%s-s,amount:s,disabledIndices:o}))),qn(e,h)&&(h=c)),"both"===n){const t=Er(c/s);r.key===(i?Fn:Bn)&&(d&&wr(r),c%s!=s-1?(h=Hn(e,{startingIndex:c,disabledIndices:o}),a&&Xn(h,s,t)&&(h=Hn(e,{startingIndex:c-c%s-1,disabledIndices:o}))):a&&(h=Hn(e,{startingIndex:c-c%s-1,disabledIndices:o})),Xn(h,s,t)&&(h=c)),r.key===(i?Bn:Fn)&&(d&&wr(r),c%s!=0?(h=Hn(e,{startingIndex:c,decrement:!0,disabledIndices:o}),a&&Xn(h,s,t)&&(h=Hn(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o}))):a&&(h=Hn(e,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o})),Xn(h,s,t)&&(h=c));const n=Er(u/s)===t;qn(e,h)&&(h=a&&n?r.key===(i?Bn:Fn)?u:Hn(e,{startingIndex:c-c%s-1,disabledIndices:o}):c)}return h}function Yn(e,t,r){const n=[];let a=0;return e.forEach(((e,i)=>{let{width:s,height:o}=e,l=!1;for(r&&(a=0);!l;){const e=[];for(let r=0;r<s;r++)for(let n=0;n<o;n++)e.push(a+r+n*t);a%t+s<=t&&e.every((e=>null==n[e]))?(e.forEach((e=>{n[e]=i})),l=!0):a++}})),[...n]}function Zn(e,t,r,n,a){if(-1===e)return-1;const i=r.indexOf(e),s=t[e];switch(a){case"tl":return i;case"tr":return s?i+s.width-1:i;case"bl":return s?i+(s.height-1)*n:i;case"br":return r.lastIndexOf(e)}}function Kn(e,t){return t.flatMap(((t,r)=>e.includes(t)?[r]:[]))}function Jn(e,t,r){if(r)return r.includes(t);const n=e[t];return null==n||n.hasAttribute("disabled")||"true"===n.getAttribute("aria-disabled")}var ea="undefined"!=typeof document?c.useLayoutEffect:c.useEffect;const ta=[Fn,Bn],ra=[Vn,zn];function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},na.apply(this,arguments)}let aa=!1,ia=0;const sa=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ia++;const oa=Mn.useId||function(){const[e,t]=c.useState((()=>aa?sa():void 0));return ea((()=>{null==e&&t(sa())}),[]),c.useEffect((()=>{aa=!0}),[]),e};function la(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach((e=>e(r)))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter((e=>e!==r)))||[])}}}const ua=c.createContext(null),ca=c.createContext(null),da=()=>{var e;return(null==(e=c.useContext(ua))?void 0:e.id)||null},ha=()=>c.useContext(ca);function pa(e){return"data-floating-ui-"+e}function fa(e){const t=(0,c.useRef)(e);return ea((()=>{t.current=e})),t}let ma=0;function ga(e,t){void 0===t&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:a=!1}=t;n&&cancelAnimationFrame(ma);const i=()=>null==e?void 0:e.focus({preventScroll:r});a?i():ma=requestAnimationFrame(i)}function va(e,t){let r=e.filter((e=>{var r;return e.parentId===t&&(null==(r=e.context)?void 0:r.open)})),n=r;for(;n.length;)n=e.filter((e=>{var t;return null==(t=n)?void 0:t.some((t=>{var r;return e.parentId===t.id&&(null==(r=e.context)?void 0:r.open)}))})),r=r.concat(n);return r}let ba=new WeakMap,ya=new WeakSet,Oa={},wa=0;const xa=e=>e&&(e.host||xa(e.parentNode));function Sa(e,t,r,n){const a="data-floating-ui-inert",i=n?"inert":r?"aria-hidden":null,s=(o=t,e.map((e=>{if(o.contains(e))return e;const t=xa(e);return o.contains(t)?t:null})).filter((e=>null!=e)));var o;const l=new Set,u=new Set(s),c=[];Oa[a]||(Oa[a]=new WeakMap);const d=Oa[a];return s.forEach((function e(t){if(!t||l.has(t))return;l.add(t),t.parentNode&&e(t.parentNode)})),function e(t){if(!t||u.has(t))return;[].forEach.call(t.children,(t=>{if("script"!==qt(t))if(l.has(t))e(t);else{const e=i?t.getAttribute(i):null,r=null!==e&&"false"!==e,n=(ba.get(t)||0)+1,s=(d.get(t)||0)+1;ba.set(t,n),d.set(t,s),c.push(t),1===n&&r&&ya.add(t),1===s&&t.setAttribute(a,""),!r&&i&&t.setAttribute(i,"true")}}))}(t),l.clear(),wa++,()=>{c.forEach((e=>{const t=(ba.get(e)||0)-1,r=(d.get(e)||0)-1;ba.set(e,t),d.set(e,r),t||(!ya.has(e)&&i&&e.removeAttribute(i),ya.delete(e)),r||e.removeAttribute(a)})),wa--,wa||(ba=new WeakMap,ba=new WeakMap,ya=new WeakSet,Oa={})}}function _a(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=br(e[0]).body;return Sa(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const $a=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ea(e,t){const r=an(e,$a());"prev"===t&&r.reverse();const n=r.indexOf(cr(br(e)));return r.slice(n+1)[0]}function Pa(){return Ea(document.body,"next")}function Ra(){return Ea(document.body,"prev")}function Ta(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!dr(r,n)}function Ca(e){an(e,$a()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function ka(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const Da={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function Ia(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const Aa=c.forwardRef((function(e,t){const[r,n]=c.useState();ea((()=>(gr()&&n("button"),document.addEventListener("keydown",Ia),()=>{document.removeEventListener("keydown",Ia)})),[]);const a={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[pa("focus-guard")]:"",style:Da};return c.createElement("span",na({},e,a))})),La=c.createContext(null),Na=pa("portal");function Ma(e){const{children:t,id:r,root:n,preserveTabOrder:a=!0}=e,i=function(e){void 0===e&&(e={});const{id:t,root:r}=e,n=oa(),a=ja(),[i,s]=c.useState(null),o=c.useRef(null);return ea((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{o.current=null}))}),[i]),ea((()=>{if(!n)return;if(o.current)return;const e=t?document.getElementById(t):null;if(!e)return;const r=document.createElement("div");r.id=n,r.setAttribute(Na,""),e.appendChild(r),o.current=r,s(r)}),[t,n]),ea((()=>{if(null===r)return;if(!n)return;if(o.current)return;let e=r||(null==a?void 0:a.portalNode);e&&!Gt(e)&&(e=e.current),e=e||document.body;let i=null;t&&(i=document.createElement("div"),i.id=t,e.appendChild(i));const l=document.createElement("div");l.id=n,l.setAttribute(Na,""),e=i||e,e.appendChild(l),o.current=l,s(l)}),[t,r,n,a]),i}({id:r,root:n}),[s,o]=c.useState(null),l=c.useRef(null),u=c.useRef(null),d=c.useRef(null),h=c.useRef(null),p=null==s?void 0:s.modal,f=null==s?void 0:s.open,m=!!s&&!s.modal&&s.open&&a&&!(!n&&!i);return c.useEffect((()=>{if(i&&a&&!p)return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){if(i&&Ta(e)){("focusin"===e.type?ka:Ca)(i)}}}),[i,a,p]),c.useEffect((()=>{i&&(f||ka(i))}),[f,i]),c.createElement(La.Provider,{value:c.useMemo((()=>({preserveTabOrder:a,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:h,portalNode:i,setFocusManagerState:o})),[a,i])},m&&i&&c.createElement(Aa,{"data-type":"outside",ref:l,onFocus:e=>{if(Ta(e,i)){var t;null==(t=d.current)||t.focus()}else{const e=Ra()||(null==s?void 0:s.refs.domReference.current);null==e||e.focus()}}}),m&&i&&c.createElement("span",{"aria-owns":i.id,style:Da}),i&&sn.createPortal(t,i),m&&i&&c.createElement(Aa,{"data-type":"outside",ref:u,onFocus:e=>{if(Ta(e,i)){var t;null==(t=h.current)||t.focus()}else{const t=Pa()||(null==s?void 0:s.refs.domReference.current);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const ja=()=>c.useContext(La),Qa="data-floating-ui-focusable";function Va(e){return e?e.hasAttribute(Qa)?e:e.querySelector("["+Qa+"]")||e:null}let za=[];function Fa(e){za=za.filter((e=>e.isConnected));let t=e;if(t&&"body"!==qt(t)){if(!function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Fr.call(e,Vr)&&tn(t,e)}(t,$a())){const e=an(t,$a())[0];e&&(t=e)}za.push(t),za.length>20&&(za=za.slice(-20))}}function Ba(){return za.slice().reverse().find((e=>e.isConnected))}const Xa=c.forwardRef((function(e,t){return c.createElement("button",na({},e,{type:"button",ref:t,tabIndex:-1,style:Da}))}));function qa(e){const{context:t,children:r,disabled:n=!1,order:a=["content"],guards:i=!0,initialFocus:s=0,returnFocus:o=!0,restoreFocus:l=!1,modal:u=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:h=!0}=e,{open:p,refs:f,nodeId:m,onOpenChange:g,events:v,dataRef:b,floatingId:y,elements:{domReference:O,floating:w}}=t,x="number"==typeof s&&s<0,S=xr(O)&&x,_="undefined"==typeof HTMLElement||!("inert"in HTMLElement.prototype)||i,$=fa(a),E=fa(s),P=fa(o),R=ha(),T=ja(),C=c.useRef(null),k=c.useRef(null),D=c.useRef(!1),I=c.useRef(!1),A=c.useRef(-1),L=null!=T,N=Va(w),M=Qn((function(e){return void 0===e&&(e=N),e?an(e,$a()):[]})),j=Qn((e=>{const t=M(e);return $.current.map((e=>O&&"reference"===e?O:N&&"floating"===e?N:t)).filter(Boolean).flat()}));function Q(e){return!n&&d&&u?c.createElement(Xa,{ref:"start"===e?C:k,onClick:e=>g(!1,e.nativeEvent)},"string"==typeof d?d:"Dismiss"):null}c.useEffect((()=>{if(n)return;if(!u)return;function e(e){if("Tab"===e.key){dr(N,cr(br(N)))&&0===M().length&&!S&&wr(e);const t=j(),r=Or(e);"reference"===$.current[0]&&r===O&&(wr(e),e.shiftKey?ga(t[t.length-1]):ga(t[1])),"floating"===$.current[1]&&r===N&&e.shiftKey&&(wr(e),ga(t[0]))}}const t=br(N);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[n,O,N,u,$,S,M,j]),c.useEffect((()=>{if(!n&&w)return w.addEventListener("focusin",e),()=>{w.removeEventListener("focusin",e)};function e(e){const t=Or(e),r=M().indexOf(t);-1!==r&&(A.current=r)}}),[n,w,M]),c.useEffect((()=>{if(!n&&h)return w&&Yt(O)?(O.addEventListener("focusout",t),O.addEventListener("pointerdown",e),w.addEventListener("focusout",t),()=>{O.removeEventListener("focusout",t),O.removeEventListener("pointerdown",e),w.removeEventListener("focusout",t)}):void 0;function e(){I.current=!0,setTimeout((()=>{I.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const r=!(dr(O,t)||dr(w,t)||dr(t,w)||dr(null==T?void 0:T.portalNode,t)||null!=t&&t.hasAttribute(pa("focus-guard"))||R&&(va(R.nodesRef.current,m).find((e=>{var r,n;return dr(null==(r=e.context)?void 0:r.elements.floating,t)||dr(null==(n=e.context)?void 0:n.elements.domReference,t)}))||function(e,t){var r;let n=[],a=null==(r=e.find((e=>e.id===t)))?void 0:r.parentId;for(;a;){const t=e.find((e=>e.id===a));a=null==t?void 0:t.parentId,t&&(n=n.concat(t))}return n}(R.nodesRef.current,m).find((e=>{var r,n;return(null==(r=e.context)?void 0:r.elements.floating)===t||(null==(n=e.context)?void 0:n.elements.domReference)===t}))));if(l&&r&&cr(br(N))===br(N).body){Yt(N)&&N.focus();const e=A.current,t=M(),r=t[e]||t[t.length-1]||N;Yt(r)&&r.focus()}!S&&u||!t||!r||I.current||t===Ba()||(D.current=!0,g(!1,e,"focus-out"))}))}}),[n,O,w,N,u,m,R,T,g,h,l,M,S]),c.useEffect((()=>{var e;if(n)return;const t=Array.from((null==T||null==(e=T.portalNode)?void 0:e.querySelectorAll("["+pa("portal")+"]"))||[]);if(w){const e=[w,...t,C.current,k.current,$.current.includes("reference")||S?O:null].filter((e=>null!=e)),r=u||S?_a(e,_,!_):_a(e);return()=>{r()}}}),[n,O,w,u,$,T,S,_]),ea((()=>{if(n||!Yt(N))return;const e=cr(br(N));queueMicrotask((()=>{const t=j(N),r=E.current,n=("number"==typeof r?t[r]:r.current)||N,a=dr(N,e);x||a||!p||ga(n,{preventScroll:n===N})}))}),[n,p,N,x,j,E]),ea((()=>{if(n||!N)return;let e=!1;const t=br(N),r=cr(t);let a=b.current.openEvent;function i(t){let{open:r,reason:n,event:i,nested:s}=t;r&&(a=i),"escape-key"===n&&f.domReference.current&&Fa(f.domReference.current),"hover"===n&&"mouseleave"===i.type&&(D.current=!0),"outside-press"===n&&(s?(D.current=!1,e=!0):D.current=!(fr(i)||mr(i)))}Fa(r),v.on("openchange",i);const s=t.createElement("span");return s.setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true"),Object.assign(s.style,Da),L&&O&&O.insertAdjacentElement("afterend",s),()=>{v.off("openchange",i);const r=cr(t),n=dr(w,r)||R&&va(R.nodesRef.current,m).some((e=>{var t;return dr(null==(t=e.context)?void 0:t.elements.floating,r)}));(n||a&&["click","mousedown"].includes(a.type))&&f.domReference.current&&Fa(f.domReference.current);const o="boolean"==typeof P.current?Ba()||s:P.current.current||s;queueMicrotask((()=>{P.current&&!D.current&&Yt(o)&&(o===r||r===t.body||n)&&o.focus({preventScroll:e}),s.remove()}))}}),[n,w,N,P,b,f,v,R,m,L,O]),c.useEffect((()=>{queueMicrotask((()=>{D.current=!1}))}),[n]),ea((()=>{if(!n&&T)return T.setFocusManagerState({modal:u,closeOnFocusOut:h,open:p,onOpenChange:g,refs:f}),()=>{T.setFocusManagerState(null)}}),[n,T,u,p,g,f,h]),ea((()=>{if(n)return;if(!N)return;if("function"!=typeof MutationObserver)return;if(x)return;const e=()=>{const e=N.getAttribute("tabindex"),t=M(),r=cr(br(w)),n=t.indexOf(r);-1!==n&&(A.current=n),$.current.includes("floating")||r!==f.domReference.current&&0===t.length?"0"!==e&&N.setAttribute("tabindex","0"):"-1"!==e&&N.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(N,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[n,w,N,f,$,M,x]);const V=!n&&_&&(!u||!S)&&(L||u);return c.createElement(c.Fragment,null,V&&c.createElement(Aa,{"data-type":"inside",ref:null==T?void 0:T.beforeInsideRef,onFocus:e=>{if(u){const e=j();ga("reference"===a[0]?e[0]:e[e.length-1])}else if(null!=T&&T.preserveTabOrder&&T.portalNode)if(D.current=!1,Ta(e,T.portalNode)){const e=Pa()||O;null==e||e.focus()}else{var t;null==(t=T.beforeOutsideRef.current)||t.focus()}}}),!S&&Q("start"),r,Q("end"),V&&c.createElement(Aa,{"data-type":"inside",ref:null==T?void 0:T.afterInsideRef,onFocus:e=>{if(u)ga(j()[0]);else if(null!=T&&T.preserveTabOrder&&T.portalNode)if(h&&(D.current=!0),Ta(e,T.portalNode)){const e=Ra()||O;null==e||e.focus()}else{var t;null==(t=T.afterOutsideRef.current)||t.focus()}}}))}const Ua={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Wa={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ha=e=>{var t,r;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(r=null==e?void 0:e.outsidePress)||r}};function Ga(e){void 0===e&&(e={});const{nodeId:t}=e,r=function(e){const{open:t=!1,onOpenChange:r,elements:n}=e,a=oa(),i=c.useRef({}),[s]=c.useState((()=>la())),o=null!=da(),[l,u]=c.useState(n.reference),d=Qn(((e,t,n)=>{i.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:n,nested:o}),null==r||r(e,t,n)})),h=c.useMemo((()=>({setPositionReference:u})),[]),p=c.useMemo((()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference})),[l,n.reference,n.floating]);return c.useMemo((()=>({dataRef:i,open:t,onOpenChange:d,elements:p,events:s,floatingId:a,refs:h})),[t,d,p,s,a,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,a=n.elements,[i,s]=c.useState(null),[o,l]=c.useState(null),u=(null==a?void 0:a.domReference)||i,d=c.useRef(null),h=ha();ea((()=>{u&&(d.current=u)}),[u]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=c.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=c.useState(n);kn(p,n)||f(n);const[m,g]=c.useState(null),[v,b]=c.useState(null),y=c.useCallback((e=>{e!==S.current&&(S.current=e,g(e))}),[]),O=c.useCallback((e=>{e!==_.current&&(_.current=e,b(e))}),[]),w=i||m,x=s||v,S=c.useRef(null),_=c.useRef(null),$=c.useRef(d),E=null!=l,P=An(l),R=An(a),T=An(u),C=c.useCallback((()=>{if(!S.current||!_.current)return;const e={placement:t,strategy:r,middleware:p};R.current&&(e.platform=R.current),Tn(S.current,_.current,e).then((e=>{const t={...e,isPositioned:!1!==T.current};k.current&&!kn($.current,t)&&($.current=t,sn.flushSync((()=>{h(t)})))}))}),[p,t,r,R,T]);Cn((()=>{!1===u&&$.current.isPositioned&&($.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const k=c.useRef(!1);Cn((()=>(k.current=!0,()=>{k.current=!1})),[]),Cn((()=>{if(w&&(S.current=w),x&&(_.current=x),w&&x){if(P.current)return P.current(w,x,C);C()}}),[w,x,C,P,E]);const D=c.useMemo((()=>({reference:S,floating:_,setReference:y,setFloating:O})),[y,O]),I=c.useMemo((()=>({reference:w,floating:x})),[w,x]),A=c.useMemo((()=>{const e={position:r,left:0,top:0};if(!I.floating)return e;const t=In(I.floating,d.x),n=In(I.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...Dn(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,o,I.floating,d.x,d.y]);return c.useMemo((()=>({...d,update:C,refs:D,elements:I,floatingStyles:A})),[d,C,D,I,A])}({...e,elements:{...a,...o&&{reference:o}}}),f=c.useCallback((e=>{const t=Gt(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)}),[p.refs]),m=c.useCallback((e=>{(Gt(e)||null===e)&&(d.current=e,s(e)),(Gt(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!Gt(e))&&p.refs.setReference(e)}),[p.refs]),g=c.useMemo((()=>({...p.refs,setReference:m,setPositionReference:f,domReference:d})),[p.refs,m,f]),v=c.useMemo((()=>({...p.elements,domReference:u})),[p.elements,u]),b=c.useMemo((()=>({...p,...n,refs:g,elements:v,nodeId:t})),[p,g,v,t,n]);return ea((()=>{n.dataRef.current.floatingContext=b;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===t));e&&(e.context=b)})),c.useMemo((()=>({...p,context:b,refs:g,elements:v})),[p,g,v,b])}const Ya="active",Za="selected";function Ka(e,t,r){const n=new Map,a="item"===r;let i=e;if(a&&e){const{[Ya]:t,[Za]:r,...n}=e;i=n}return{..."floating"===r&&{tabIndex:-1,[Qa]:""},...i,...t.map((t=>{const n=t?t[r]:null;return"function"==typeof n?e?n(e):null:n})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[r,i]=t;var s;a&&[Ya,Za].includes(r)||(0===r.indexOf("on")?(n.has(r)||n.set(r,[]),"function"==typeof i&&(null==(s=n.get(r))||s.push(i),e[r]=function(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return null==(e=n.get(r))?void 0:e.map((e=>e(...a))).find((e=>void 0!==e))})):e[r]=i)})),e):e),{})}}let Ja=!1;function ei(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function ti(e,t){return ei(t,e===Vn||e===zn,e===Fn||e===Bn)}function ri(e,t,r){return ei(t,e===zn,r?e===Fn:e===Bn)||"Enter"===e||" "===e||""===e}function ni(e,t,r){return ei(t,r?e===Bn:e===Fn,e===Vn)}function ai(e,t){const{open:r,onOpenChange:n,elements:a}=e,{listRef:i,activeIndex:s,onNavigate:o=()=>{},enabled:l=!0,selectedIndex:u=null,allowEscape:d=!1,loop:h=!1,nested:p=!1,rtl:f=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:b=!0,disabledIndices:y,orientation:O="vertical",cols:w=1,scrollItemIntoView:x=!0,virtualItemRef:S,itemSizes:_,dense:$=!1}=t;const E=fa(Va(a.floating)),P=da(),R=ha(),T=Qn(o),C=xr(a.domReference),k=c.useRef(g),D=c.useRef(null!=u?u:-1),I=c.useRef(null),A=c.useRef(!0),L=c.useRef(T),N=c.useRef(!!a.floating),M=c.useRef(r),j=c.useRef(!1),Q=c.useRef(!1),V=fa(y),z=fa(r),F=fa(x),B=fa(u),[X,q]=c.useState(),[U,W]=c.useState(),H=Qn((function(e,t,r){function n(e){m?(q(e.id),null==R||R.events.emit("virtualfocus",e),S&&(S.current=e)):ga(e,{preventScroll:!0,sync:!(!hr().toLowerCase().startsWith("mac")||navigator.maxTouchPoints||!gr())&&(Ja||j.current)})}void 0===r&&(r=!1);const a=e.current[t.current];a&&n(a),requestAnimationFrame((()=>{const i=e.current[t.current]||a;if(!i)return;a||n(i);const s=F.current;s&&Y&&(r||!A.current)&&(null==i.scrollIntoView||i.scrollIntoView("boolean"==typeof s?{block:"nearest",inline:"nearest"}:s))}))}));ea((()=>{document.createElement("div").focus({get preventScroll(){return Ja=!0,!1}})}),[]),ea((()=>{l&&(r&&a.floating?k.current&&null!=u&&(Q.current=!0,D.current=u,T(u)):N.current&&(D.current=-1,L.current(null)))}),[l,r,a.floating,u,T]),ea((()=>{if(l&&r&&a.floating)if(null==s){if(j.current=!1,null!=B.current)return;if(N.current&&(D.current=-1,H(i,D)),(!M.current||!N.current)&&k.current&&(null!=I.current||!0===k.current&&null==I.current)){let e=0;const t=()=>{if(null==i.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else D.current=null==I.current||ri(I.current,O,f)||p?Un(i,V.current):Wn(i,V.current),I.current=null,T(D.current)};t()}}else qn(i,s)||(D.current=s,H(i,D,Q.current),Q.current=!1)}),[l,r,a.floating,s,B,p,i,O,f,T,H,V]),ea((()=>{var e;if(!l||a.floating||!R||m||!N.current)return;const t=R.nodesRef.current,r=null==(e=t.find((e=>e.id===P)))||null==(e=e.context)?void 0:e.elements.floating,n=cr(br(a.floating)),i=t.some((e=>e.context&&dr(e.context.elements.floating,n)));r&&!i&&A.current&&r.focus({preventScroll:!0})}),[l,a.floating,R,P,m]),ea((()=>{if(l&&R&&m&&!P)return R.events.on("virtualfocus",e),()=>{R.events.off("virtualfocus",e)};function e(e){W(e.id),S&&(S.current=e)}}),[l,R,m,P,S]),ea((()=>{L.current=T,N.current=!!a.floating})),ea((()=>{r||(I.current=null)}),[r]),ea((()=>{M.current=r}),[r]);const G=null!=s,Y=c.useMemo((()=>{function e(e){if(!r)return;const t=i.current.indexOf(e);-1!==t&&T(t)}const t={onFocus(t){let{currentTarget:r}=t;e(r)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...v&&{onMouseMove(t){let{currentTarget:r}=t;e(r)},onPointerLeave(e){let{pointerType:t}=e;A.current&&"touch"!==t&&(D.current=-1,H(i,D),T(null),m||ga(E.current,{preventScroll:!0}))}}};return t}),[r,E,H,v,i,T,m]),Z=Qn((e=>{if(A.current=!1,j.current=!0,229===e.which)return;if(!z.current&&e.currentTarget===E.current)return;if(p&&ni(e.key,O,f))return wr(e),n(!1,e.nativeEvent,"list-navigation"),void(Yt(a.domReference)&&(m?null==R||R.events.emit("virtualfocus",a.domReference):a.domReference.focus()));const t=D.current,s=Un(i,y),o=Wn(i,y);if(C||("Home"===e.key&&(wr(e),D.current=s,T(D.current)),"End"===e.key&&(wr(e),D.current=o,T(D.current))),w>1){const t=_||Array.from({length:i.current.length},(()=>({width:1,height:1}))),r=Yn(t,w,$),n=r.findIndex((e=>null!=e&&!Jn(i.current,e,y))),a=r.reduce(((e,t,r)=>null==t||Jn(i.current,t,y)?e:r),-1),l=r[Gn({current:r.map((e=>null!=e?i.current[e]:null))},{event:e,orientation:O,loop:h,rtl:f,cols:w,disabledIndices:Kn([...y||i.current.map(((e,t)=>Jn(i.current,t)?t:void 0)),void 0],r),minIndex:n,maxIndex:a,prevIndex:Zn(D.current>o?s:D.current,t,r,w,e.key===zn?"bl":e.key===(f?Fn:Bn)?"tr":"tl"),stopEvent:!0})];if(null!=l&&(D.current=l,T(D.current)),"both"===O)return}if(ti(e.key,O)){if(wr(e),r&&!m&&cr(e.currentTarget.ownerDocument)===e.currentTarget)return D.current=ri(e.key,O,f)?s:o,void T(D.current);ri(e.key,O,f)?D.current=h?t>=o?d&&t!==i.current.length?-1:s:Hn(i,{startingIndex:t,disabledIndices:y}):Math.min(o,Hn(i,{startingIndex:t,disabledIndices:y})):D.current=h?t<=s?d&&-1!==t?i.current.length:o:Hn(i,{startingIndex:t,decrement:!0,disabledIndices:y}):Math.max(s,Hn(i,{startingIndex:t,decrement:!0,disabledIndices:y})),qn(i,D.current)?T(null):T(D.current)}})),K=c.useMemo((()=>m&&r&&G&&{"aria-activedescendant":U||X}),[m,r,G,U,X]),J=c.useMemo((()=>({"aria-orientation":"both"===O?void 0:O,...!xr(a.domReference)&&K,onKeyDown:Z,onPointerMove(){A.current=!0}})),[K,Z,a.domReference,O]),ee=c.useMemo((()=>{function e(e){"auto"===g&&fr(e.nativeEvent)&&(k.current=!0)}return{...K,onKeyDown(e){A.current=!1;const t=e.key.startsWith("Arrow"),a=["Home","End"].includes(e.key),s=t||a,o=function(e,t,r){return ei(t,r?e===Fn:e===Bn,e===zn)}(e.key,O,f),l=ni(e.key,O,f),c=ti(e.key,O),d=(p?o:c)||"Enter"===e.key||""===e.key.trim();if(m&&r){const t=null==R?void 0:R.nodesRef.current.find((e=>null==e.parentId)),r=R&&t?function(e,t){let r,n=-1;return function t(a,i){i>n&&(r=a,n=i),va(e,a).forEach((e=>{t(e.id,i+1)}))}(t,0),e.find((e=>e.id===r))}(R.nodesRef.current,t.id):null;if(s&&r&&S){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(o||l){var h,g;const n=(null==(h=r.context)?void 0:h.elements.domReference)===e.currentTarget,a=l&&!n?null==(g=r.context)?void 0:g.elements.domReference:o?i.current.find((e=>(null==e?void 0:e.id)===X)):null;a&&(wr(e),a.dispatchEvent(t),W(void 0))}var v;if((c||a)&&r.context)if(r.context.open&&r.parentId&&e.currentTarget!==r.context.elements.domReference)return wr(e),void(null==(v=r.context.elements.domReference)||v.dispatchEvent(t))}return Z(e)}(r||b||!t)&&(d&&(I.current=p&&c?null:e.key),p?o&&(wr(e),r?(D.current=Un(i,V.current),T(D.current)):n(!0,e.nativeEvent,"list-navigation")):c&&(null!=u&&(D.current=u),wr(e),!r&&b?n(!0,e.nativeEvent,"list-navigation"):Z(e),r&&T(D.current)))},onFocus(){r&&!m&&T(null)},onPointerDown:function(e){k.current=g,"auto"===g&&mr(e.nativeEvent)&&(k.current=!0)},onMouseDown:e,onClick:e}}),[X,K,Z,V,g,i,p,T,n,r,b,O,f,u,R,m,S]);return c.useMemo((()=>l?{reference:ee,floating:J,item:Y}:{}),[l,ee,J,Y])}const ii=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function si(e,t,r){let n,a=r.initialDeps??[];return()=>{var i,s,o,l;let u;r.key&&(null==(i=r.debug)?void 0:i.call(r))&&(u=Date.now());const c=e(),d=c.length!==a.length||c.some(((e,t)=>a[t]!==e));if(!d)return n;let h;if(a=c,r.key&&(null==(s=r.debug)?void 0:s.call(r))&&(h=Date.now()),n=t(...c),r.key&&(null==(o=r.debug)?void 0:o.call(r))){Math.round(100*(Date.now()-u)),Math.round(100*(Date.now()-h))}return null==(l=null==r?void 0:r.onChange)||l.call(r,n),n}}function oi(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?`: ${t}`:""));return e}const li=(e,t,r)=>{let n;return function(...a){e.clearTimeout(n),n=e.setTimeout((()=>t.apply(this,a)),r)}},ui=e=>e,ci=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let e=t;e<=r;e++)n.push(e);return n},di=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const a=e=>{const{width:r,height:n}=e;t({width:Math.round(r),height:Math.round(n)})};if(a(r.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const i=new n.ResizeObserver((e=>{const t=e[0];if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e)return void a({width:e.inlineSize,height:e.blockSize})}a(r.getBoundingClientRect())}));return i.observe(r,{box:"border-box"}),()=>{i.unobserve(r)}},hi={passive:!0},pi="undefined"==typeof window||"onscrollend"in window,fi=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let a=0;const i=e.options.useScrollendEvent&&pi?()=>{}:li(n,(()=>{t(a,!1)}),e.options.isScrollingResetDelay),s=n=>()=>{const{horizontal:s,isRtl:o}=e.options;a=s?r.scrollLeft*(o?-1:1):r.scrollTop,i(),t(a,n)},o=s(!0),l=s(!1);return l(),r.addEventListener("scroll",o,hi),r.addEventListener("scrollend",l,hi),()=>{r.removeEventListener("scroll",o),r.removeEventListener("scrollend",l)}},mi=(e,t,r)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[r.options.horizontal?"inlineSize":"blockSize"])}}return Math.round(e.getBoundingClientRect()[r.options.horizontal?"width":"height"])},gi=(e,{adjustments:t=0,behavior:r},n)=>{var a,i;const s=e+t;null==(i=null==(a=n.scrollElement)?void 0:a.scrollTo)||i.call(a,{[n.options.horizontal?"left":"top"]:s,behavior:r})};class vi{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver((e=>{e.forEach((e=>{this._measureElement(e.target,e)}))})):null);return{disconnect:()=>{var r;null==(r=t())||r.disconnect(),e=null},observe:e=>{var r;return null==(r=t())?void 0:r.observe(e,{box:"border-box"})},unobserve:e=>{var r;return null==(r=t())?void 0:r.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach((([t,r])=>{void 0===r&&delete e[t]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ui,rangeExtractor:ci,onChange:()=>{},measureElement:mi,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var t,r;null==(r=(t=this.options).onChange)||r.call(t,this,e)},this.maybeNotify=si((()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null])),(e=>{this.notify(e)}),{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((e=>e())),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach((e=>{this.observer.observe(e)})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(e=>{this.scrollRect=e,this.maybeNotify()}))),this.unsubs.push(this.options.observeElementOffset(this,((e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const r=new Map,n=new Map;for(let a=t-1;a>=0;a--){const t=e[a];if(r.has(t.lane))continue;const i=n.get(t.lane);if(null==i||t.end>i.end?n.set(t.lane,t):t.end<i.end&&r.set(t.lane,!0),r.size===this.options.lanes)break}return n.size===this.options.lanes?Array.from(n.values()).sort(((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end))[0]:void 0},this.getMeasurementOptions=si((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((e,t,r,n,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:r,getItemKey:n,enabled:a})),{key:!1}),this.getMeasurements=si((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:e,paddingStart:t,scrollMargin:r,getItemKey:n,enabled:a},i)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((e=>{this.itemSizeCache.set(e.key,e.size)})));const s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const o=this.measurementsCache.slice(0,s);for(let a=s;a<e;a++){const e=n(a),s=1===this.options.lanes?o[a-1]:this.getFurthestMeasurement(o,a),l=s?s.end+this.options.gap:t+r,u=i.get(e),c="number"==typeof u?u:this.options.estimateSize(a),d=l+c,h=s?s.lane:a%this.options.lanes;o[a]={index:a,start:l,size:c,end:d,key:e,lane:h}}return this.measurementsCache=o,o}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=si((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()]),((e,t,r)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:r}){const n=e.length-1,a=t=>e[t].start,i=bi(0,n,a,r);let s=i;for(;s<n&&e[s].end<r+t;)s++;return{startIndex:i,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:r}):null),{key:!1,debug:()=>this.options.debug}),this.getIndexes=si((()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count]),((e,t,r,n)=>null===t?[]:e({startIndex:t.startIndex,endIndex:t.endIndex,overscan:r,count:n})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,r=e.getAttribute(t);return r?parseInt(r,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const r=this.indexFromElement(e),n=this.measurementsCache[r];if(!n)return;const a=n.key,i=this.elementsCache.get(a);i!==e&&(i&&this.observer.unobserve(i),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(r,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const r=this.measurementsCache[e];if(!r)return;const n=t-(this.itemSizeCache.get(r.key)??r.size);0!==n&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(r,n,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach(((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))}))},this.getVirtualItems=si((()=>[this.getIndexes(),this.getMeasurements()]),((e,t)=>{const r=[];for(let n=0,a=e.length;n<a;n++){const a=t[e[n]];r.push(a)}return r}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return oi(t[bi(0,t.length-1,(e=>oi(t[e]).start),e)])},this.getOffsetForAlignment=(e,t)=>{const r=this.getSize(),n=this.getScrollOffset();"auto"===t&&e>=n+r&&(t="end"),"end"===t&&(e-=r);const a=this.options.horizontal?"scrollWidth":"scrollHeight",i=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-r;return Math.max(Math.min(i,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const r=this.measurementsCache[e];if(!r)return;const n=this.getSize(),a=this.getScrollOffset();if("auto"===t)if(r.end>=a+n-this.options.scrollPaddingEnd)t="end";else{if(!(r.start<=a+this.options.scrollPaddingStart))return[a,t];t="start"}const i=r.start-this.options.scrollPaddingStart+(r.size-n)/2;switch(t){case"center":return[this.getOffsetForAlignment(i,t),t];case"end":return[this.getOffsetForAlignment(r.end+this.options.scrollPaddingEnd,t),t];default:return[this.getOffsetForAlignment(r.start-this.options.scrollPaddingStart,t),t]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:r}={})=>{this.cancelScrollToIndex(),"smooth"===r&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:r})},this.scrollToIndex=(e,{align:t="auto",behavior:r}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===r&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const n=this.getOffsetForIndex(e,t);if(!n)return;const[a,i]=n;this._scrollToOffset(a,{adjustments:void 0,behavior:r}),"smooth"!==r&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{this.scrollToIndexTimeoutId=null;if(this.elementsCache.has(this.options.getItemKey(e))){const[a]=oi(this.getOffsetForIndex(e,i));t=a,n=this.getScrollOffset(),Math.abs(t-n)<1||this.scrollToIndex(e,{align:i,behavior:r})}else this.scrollToIndex(e,{align:i,behavior:r});var t,n})))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let r;return r=0===t.length?this.options.paddingStart:1===this.options.lanes?(null==(e=t[t.length-1])?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map((e=>e.end))),Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:r})=>{this.options.scrollToFn(e,{behavior:r,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const bi=(e,t,r,n)=>{for(;e<=t;){const a=(e+t)/2|0,i=r(a);if(i<n)e=a+1;else{if(!(i>n))return a;t=a-1}}return e>0?e-1:0};const yi="undefined"!=typeof document?c.useLayoutEffect:c.useEffect;function Oi(e){const t=c.useReducer((()=>({})),{})[1],r={...e,onChange:(r,n)=>{var a;n?(0,sn.flushSync)(t):t(),null==(a=e.onChange)||a.call(e,r,n)}},[n]=c.useState((()=>new vi(r)));return n.setOptions(r),yi((()=>n._didMount()),[]),yi((()=>n._willUpdate())),n}const wi=(0,c.forwardRef)((function({children:e,active:t,addGroupBottomBorder:r,isMultiValueEdit:n,checked:a,...i},s){const o=(0,Ge.useStyles2)(xi),l=(0,c.useId)();return h().createElement("div",{ref:s,role:"option",id:l,"aria-selected":t,className:(0,it.cx)(o.option,t&&o.optionFocused,r&&o.groupBottomBorder),...i},h().createElement("div",{className:o.optionBody,"data-testid":`data-testid ad hoc filter option value ${e}`},h().createElement("span",null,n?h().createElement(Ge.Checkbox,{tabIndex:-1,checked:a,className:o.checkbox}):null,e)))})),xi=e=>({option:(0,it.css)({label:"grafana-select-option",top:0,left:0,width:"100%",position:"absolute",padding:e.spacing(1),display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer","&:hover":{background:e.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${e.colors.primary.border}`}}}),optionFocused:(0,it.css)({label:"grafana-select-option-focused",background:e.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${e.colors.primary.border}`}}),optionBody:(0,it.css)({label:"grafana-select-option-body",display:"flex",fontWeight:e.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),groupBottomBorder:(0,it.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),checkbox:(0,it.css)({paddingRight:e.spacing(.5)}),multiValueApplyWrapper:(0,it.css)({position:"fixed",top:0,left:0,display:"flex",backgroundColor:e.colors.background.primary,color:e.colors.text.primary,boxShadow:e.shadows.z2,overflowY:"auto",zIndex:e.zIndex.dropdown,gap:e.spacing(1.5),padding:`${e.spacing(1.5)} ${e.spacing(1)}`})}),Si=()=>h().createElement(wi,{onClick:e=>e.stopPropagation()},"Loading options..."),_i=()=>h().createElement(wi,{onClick:e=>e.stopPropagation()},"No options found"),$i=({handleFetchOptions:e})=>h().createElement(wi,{onClick:e},"An error has occurred fetching labels. Click to retry"),Ei=({onApply:e,floatingElement:t,maxOptionWidth:r,menuHeight:n})=>{const a=(0,Ge.useStyles2)(xi),i=null==t?void 0:t.getBoundingClientRect();return h().createElement("div",{className:a.multiValueApplyWrapper,style:{width:`${r}px`,transform:`translate(${null==i?void 0:i.left}px,${i?i.top+n:0}px)`}},h().createElement(Ge.Button,{onClick:e,size:"sm",tabIndex:-1},"Apply"))},Pi={key:"operator",operator:"value",value:"key"},Ri=(e,t,r,n,a)=>Ti(Pi[e],t,"value"===e?r:void 0,n,a),Ti=(e,t,r,n,a)=>{t(e),null==r||r(void 0,a),setTimeout((()=>null==n?void 0:n.focus()))},Ci=({filterInputType:e,item:t,filter:r,setFilterMultiValues:n,onAddCustomValue:a})=>{var i,s,o,l,u;if("key"===e)return{key:t.value,keyLabel:t.label?t.label:t.value,meta:null==t?void 0:t.meta};if("value"===e)return t.isCustom&&a?a(t,r):{value:t.value,valueLabels:[t.label?t.label:t.value]};if("operator"===e){if(es(r.operator)&&!es(t.value))return n([]),{operator:t.value,valueLabels:[(null==(i=r.valueLabels)?void 0:i[0])||(null==(s=r.values)?void 0:s[0])||r.value],values:void 0};if(es(t.value)&&!es(r.operator)){const e=[(null==(o=r.valueLabels)?void 0:o[0])||(null==(l=r.values)?void 0:l[0])||r.value],a=[r.value];return a[0]&&n([{value:a[0],label:null!=(u=null==e?void 0:e[0])?u:a[0]}]),{operator:t.value,valueLabels:e,values:a}}}return{[e]:t.value}},ki="Filter by label values",Di=(e,t,r,n)=>{var a;return"key"===t?ki:"value"===t?r?"Edit values":(null==(a=e.valueLabels)?void 0:a[0])||"":e[t]&&!n?`${e[t]}`:ki},Ii=({populateInputOnEdit:e,item:t,filterInputType:r,setInputValue:n,filter:a})=>{var i,s,o;e&&!es(t.value||"")&&"value"===Pi[r]?n(null!=(o=null!=(s=null==(i=null==a?void 0:a.valueLabels)?void 0:i[0])?s:null==a?void 0:a.value)?o:""):n("")},Ai=({open:e,onOpenChange:t,activeIndex:r,setActiveIndex:n,outsidePressIdsToIgnore:a,listRef:i,disabledIndicesRef:s})=>{const{refs:o,floatingStyles:l,context:u}=Ga({whileElementsMounted:$n,open:e,onOpenChange:t,placement:"bottom-start",middleware:[(d=10,{...En(d),options:[d,h]}),Ln({padding:10}),Nn({apply({availableHeight:e,availableWidth:t,elements:r}){r.floating.style.maxHeight=`${Math.min(300,e)}px`,r.floating.style.maxWidth=`${t}px`},padding:10})],strategy:"fixed"});var d,h;const p=function(e,t){var r;void 0===t&&(t={});const{open:n,floatingId:a}=e,{enabled:i=!0,role:s="dialog"}=t,o=null!=(r=ii.get(s))?r:s,l=oa(),u=null!=da(),d=c.useMemo((()=>"tooltip"===o||"label"===s?{["aria-"+("label"===s?"labelledby":"describedby")]:n?a:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":"alertdialog"===o?"dialog":o,"aria-controls":n?a:void 0,..."listbox"===o&&{role:"combobox"},..."menu"===o&&{id:l},..."menu"===o&&u&&{role:"menuitem"},..."select"===s&&{"aria-autocomplete":"none"},..."combobox"===s&&{"aria-autocomplete":"list"}}),[o,a,u,n,l,s]),h=c.useMemo((()=>{const e={id:a,...o&&{role:o}};return"tooltip"===o||"label"===s?e:{...e,..."menu"===o&&{"aria-labelledby":l}}}),[o,a,l,s]),p=c.useCallback((e=>{let{active:t,selected:r}=e;const n={role:"option",...t&&{id:a+"-option"}};switch(s){case"select":return{...n,"aria-selected":t&&r};case"combobox":return{...n,...t&&{"aria-selected":!0}}}return{}}),[a,s]);return c.useMemo((()=>i?{reference:d,floating:h,item:p}:{}),[i,d,h,p])}(u,{role:"listbox"}),f=function(e,t){void 0===t&&(t={});const{open:r,onOpenChange:n,elements:a,dataRef:i}=e,{enabled:s=!0,escapeKey:o=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:m}=t,g=ha(),v=Qn("function"==typeof l?l:()=>!1),b="function"==typeof l?v:l,y=c.useRef(!1),O=c.useRef(!1),{escapeKey:w,outsidePress:x}=Ha(f),{escapeKey:S,outsidePress:_}=Ha(m),$=c.useRef(!1),E=Qn((e=>{var t;if(!r||!s||!o||"Escape"!==e.key)return;if($.current)return;const a=null==(t=i.current.floatingContext)?void 0:t.nodeId,l=g?va(g.nodesRef.current,a):[];if(!w&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}n(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),P=Qn((e=>{var t;const r=()=>{var t;E(e),null==(t=Or(e))||t.removeEventListener("keydown",r)};null==(t=Or(e))||t.addEventListener("keydown",r)})),R=Qn((e=>{var t;const r=y.current;y.current=!1;const s=O.current;if(O.current=!1,"click"===u&&s)return;if(r)return;if("function"==typeof b&&!b(e))return;const o=Or(e),l="["+pa("inert")+"]",c=br(a.floating).querySelectorAll(l);let d=Gt(o)?o:null;for(;d&&!nr(d);){const e=sr(d);if(nr(e)||!Gt(e))break;d=e}if(c.length&&Gt(o)&&!o.matches("html,body")&&!dr(o,a.floating)&&Array.from(c).every((e=>!dr(d,e))))return;if(Yt(o)&&k){const t=o.clientWidth>0&&o.scrollWidth>o.clientWidth,r=o.clientHeight>0&&o.scrollHeight>o.clientHeight;let n=r&&e.offsetX>o.clientWidth;if(r&&"rtl"===ar(o).direction&&(n=e.offsetX<=o.offsetWidth-o.clientWidth),n||t&&e.offsetY>o.clientHeight)return}const h=null==(t=i.current.floatingContext)?void 0:t.nodeId,p=g&&va(g.nodesRef.current,h).some((t=>{var r;return yr(e,null==(r=t.context)?void 0:r.elements.floating)}));if(yr(e,a.floating)||yr(e,a.domReference)||p)return;const f=g?va(g.nodesRef.current,h):[];if(f.length>0){let e=!0;if(f.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}n(!1,e,"outside-press")})),T=Qn((e=>{var t;const r=()=>{var t;R(e),null==(t=Or(e))||t.removeEventListener(u,r)};null==(t=Or(e))||t.addEventListener(u,r)}));c.useEffect((()=>{if(!r||!s)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=x;let e=-1;function t(e){n(!1,e,"ancestor-scroll")}function l(){window.clearTimeout(e),$.current=!0}function c(){e=window.setTimeout((()=>{$.current=!1}),rr()?5:0)}const d=br(a.floating);o&&(d.addEventListener("keydown",S?P:E,S),d.addEventListener("compositionstart",l),d.addEventListener("compositionend",c)),b&&d.addEventListener(u,_?T:R,_);let h=[];return p&&(Gt(a.domReference)&&(h=lr(a.domReference)),Gt(a.floating)&&(h=h.concat(lr(a.floating))),!Gt(a.reference)&&a.reference&&a.reference.contextElement&&(h=h.concat(lr(a.reference.contextElement)))),h=h.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),h.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{o&&(d.removeEventListener("keydown",S?P:E,S),d.removeEventListener("compositionstart",l),d.removeEventListener("compositionend",c)),b&&d.removeEventListener(u,_?T:R,_),h.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[i,a,o,b,u,r,n,p,s,w,x,E,S,P,R,_,T]),c.useEffect((()=>{y.current=!1}),[b,u]);const C=c.useMemo((()=>({onKeyDown:E,[Ua[h]]:e=>{d&&n(!1,e.nativeEvent,"reference-press")}})),[E,n,d,h]),k=c.useMemo((()=>({onKeyDown:E,onMouseDown(){O.current=!0},onMouseUp(){O.current=!0},[Wa[u]]:()=>{y.current=!0}})),[E,u]);return c.useMemo((()=>s?{reference:C,floating:k}:{}),[s,C,k])}(u,{outsidePress:e=>{var t;if(e.currentTarget instanceof Element){const r=e.currentTarget;let n=r.id;if("path"===r.nodeName&&(n=(null==(t=r.parentElement)?void 0:t.id)||""),a.includes(n))return!1}return!0}}),m=ai(u,{listRef:i,activeIndex:r,onNavigate:n,virtual:!0,loop:!0,disabledIndices:s.current}),{getReferenceProps:g,getFloatingProps:v,getItemProps:b}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),r=e.map((e=>null==e?void 0:e.floating)),n=e.map((e=>null==e?void 0:e.item)),a=c.useCallback((t=>Ka(t,e,"reference")),t),i=c.useCallback((t=>Ka(t,e,"floating")),r),s=c.useCallback((t=>Ka(t,e,"item")),n);return c.useMemo((()=>({getReferenceProps:a,getFloatingProps:i,getItemProps:s})),[a,i,s])}([p,f,m]);return{refs:o,floatingStyles:l,context:u,getReferenceProps:g,getFloatingProps:v,getItemProps:b}},Li=({item:e,handleRemoveMultiValue:t,index:r,handleEditMultiValuePill:n})=>{var a,i;const s=(0,Ge.useStyles2)(Ni),o=(0,c.useCallback)((t=>{t.stopPropagation(),t.preventDefault(),n(e)}),[n,e]),l=(0,c.useCallback)((e=>{"Enter"===e.key&&o(e)}),[o]),u=(0,c.useCallback)((r=>{r.stopPropagation(),r.preventDefault(),t(e)}),[t,e]),d=(0,c.useCallback)((e=>{"Enter"===e.key&&u(e)}),[u]);return h().createElement("div",{className:(0,it.cx)(s.basePill,s.valuePill),onClick:o,onKeyDown:l,tabIndex:0,id:`${e.value}-${r}`},null!=(a=e.label)?a:e.value,h().createElement(Ge.Button,{onClick:u,onKeyDownCapture:d,fill:"text",size:"sm",variant:"secondary",className:s.removeButton,tooltip:`Remove filter value - ${null!=(i=e.label)?i:e.value}`},h().createElement(Ge.Icon,{name:"times",size:"md",id:`${e.value}-${r}-close-icon`})))},Ni=e=>({basePill:(0,it.css)({display:"flex",alignItems:"center",background:e.colors.action.disabledBackground,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,1,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75),...e.typography.bodySmall,cursor:"pointer"}),valuePill:(0,it.css)({background:e.colors.action.selected,padding:e.spacing(.125,0,.125,1)}),removeButton:(0,it.css)({marginInline:e.spacing(.5),height:"100%",padding:0,cursor:"pointer","&:hover":{color:e.colors.text.primary}})}),Mi=(0,c.forwardRef)((function({filter:e,model:t,isAlwaysWip:r,handleChangeViewMode:n,focusOnWipInputRef:a,populateInputOnEdit:i},s){var o,l,u,d;const[p,f]=(0,c.useState)(!1),[m,g]=(0,c.useState)([]),[v,b]=(0,c.useState)(!1),[y,O]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[S,_]=(0,c.useState)(null),[$,E]=(0,c.useState)(r?"key":"value"),[P,R]=(0,c.useState)(!r&&"value"===$),T=(0,Ge.useStyles2)(ji),[C,k]=(0,c.useState)([]),[D,I]=(0,c.useState)({}),A=null==(o=t.state.allowCustomValue)||o,L=(0,c.useRef)(null),N=es((null==e?void 0:e.operator)||""),M=N&&"value"===$,j=(0,c.useId)(),Q=(0,c.useRef)([]),V=(0,c.useRef)([]),z=(0,c.useRef)(r?"key":"value"),F=(0,c.useMemo)((()=>At(m)),[m]),B=(0,c.useMemo)((()=>!r&&t.state.filters.at(-1)===e),[e,r,t.state.filters]),X=(0,c.useCallback)((()=>{r&&(t._addWip(),E("key"),x(""))}),[t,r]),q=(0,c.useCallback)(((e,t,r,n)=>{if(!r.length&&t.origin&&e.updateToMatchAll(t),r.length){const n=[],a=[];r.forEach((e=>{var t;n.push(null!=(t=e.label)?t:e.value),a.push(e.value)})),e._updateFilter(t,{valueLabels:n,values:a,value:a[0]}),k([])}n||setTimeout((()=>{var e;return null==(e=G.domReference.current)?void 0:e.focus()}))}),[]),U=(0,c.useCallback)((e=>{k((t=>t.some((t=>t.value===e.value))?t.filter((t=>t.value!==e.value)):[...t,e]))}),[]),W=(0,c.useCallback)(((r,a,i)=>{f(r),i&&["outside-press","escape-key"].includes(i)&&(M&&q(t,e,C),X(),null==n||n())}),[e,C,n,q,X,M,t]),H=(0,c.useMemo)((()=>[j,...C.reduce(((e,t,r)=>[...e,`${t.value}-${r}`,`${t.value}-${r}-close-icon`]),[])]),[j,C]),{refs:G,floatingStyles:Y,context:Z,getReferenceProps:K,getFloatingProps:J,getItemProps:ee}=Ai({open:p,onOpenChange:W,activeIndex:S,setActiveIndex:_,outsidePressIdsToIgnore:H,listRef:Q,disabledIndicesRef:V});(0,c.useImperativeHandle)(s,(()=>()=>{var e;return null==(e=G.domReference.current)?void 0:e.focus()}),[G.domReference]);const te=(0,c.useCallback)((e=>{k((t=>t.filter((t=>t.value!==e.value)))),setTimeout((()=>{var e;return null==(e=G.domReference.current)?void 0:e.focus()}))}),[G.domReference]),re=(e=>e.flatMap((e=>e.options?[e,...e.options]:[e])))(ws(F(P?"":w)));A&&"operator"!==$&&w&&re.push({value:w.trim(),label:w.trim(),isCustom:!0});const ne=t.state.onAddCustomValue,ae=((e,t,r)=>{var n,a,i,s;let o=182;const l=[],u=[];for(let t=0;t<e.length;t++){l.push(null),(null==(n=e[t])?void 0:n.options)&&u.push(t);let r=null!=(i=null!=(a=e[t].label)?a:e[t].value)?i:"",c=8;8*r.length<6*((null==(s=e[t].description)?void 0:s.length)||0)&&(r=e[t].description,c=6);const d=(e[t].isCustom?r.length+18:r.length)*c+16;d>o&&(o=d)}return t.current=[...l],r.current=[...u],o})(re,Q,V),ie=(0,c.useCallback)((async r=>{var n;O(!1),b(!0),g([]);let a=[];try{if("key"===r?a=await t._getKeys(null):"operator"===r?a=t._getOperators():"value"===r&&(a=await t._getValuesFor(e)),z.current!==r)return;g(a),(null==(n=a[0])?void 0:n.group)?_(1):_(0)}catch(e){O(!0)}b(!1)}),[e,t]),se=function(e){return Oi({observeElementRect:di,observeElementOffset:fi,scrollToFn:gi,...e})}({count:re.length,getScrollElement:()=>G.floating.current,estimateSize:e=>re[e].description?60:38,overscan:5}),oe=(0,c.useCallback)(((n,i)=>{if("Backspace"===n.key&&!w){if("value"===$){if(i&&C.length)return void k((e=>{const t=[...e];return t.splice(-1,1),t}));if(null==e?void 0:e.origin)return;return void E("operator")}null==a||a(),t._handleComboboxBackspace(e),r&&X()}}),[w,$,t,e,r,C.length,X,a]),le=(0,c.useCallback)(((r,a)=>{var i;"Tab"!==r.key||r.shiftKey||(a&&(r.preventDefault(),q(t,e,C),null==(i=G.domReference.current)||i.focus()),null==n||n(),X())}),[e,C,n,q,X,t,G.domReference]),ue=(0,c.useCallback)(((r,a)=>{"Tab"===r.key&&r.shiftKey&&(a&&(r.preventDefault(),q(t,e,C,!0)),null==n||n(),X())}),[e,C,n,q,X,t]),ce=(0,c.useCallback)(((r,s)=>{if("Enter"===r.key&&null!=S){if(!re[S])return;const r=re[S];s?(U(r),x("")):(t._updateFilter(e,Ci({filterInputType:$,item:r,filter:e,setFilterMultiValues:k,onAddCustomValue:ne})),Ii({populateInputOnEdit:i,item:r,filterInputType:$,setInputValue:x,filter:e}),Ri($,E,n,G.domReference.current,!B&&void 0),_(null),B&&(null==a||a()))}}),[S,re,U,t,e,$,i,n,G.domReference,B,a,ne]),de=(0,c.useCallback)((e=>{var t;const r=e.label||e.value;k((t=>t.filter((t=>t.value!==e.value)))),R(!0),x(r),null==(t=G.domReference.current)||t.focus(),setTimeout((()=>{var e;null==(e=G.domReference.current)||e.select()}))}),[G.domReference]);(0,c.useEffect)((()=>{p&&ie($)}),[p,$]),(0,c.useEffect)((()=>{var t,n,a,s;if(!r){if(N&&(null==(t=null==e?void 0:e.values)?void 0:t.length)){const t=e.values.reduce(((t,r,n)=>{var a;return[...t,{label:(null==(a=e.valueLabels)?void 0:a[n])||r,value:r}]}),[]);k(t)}!N&&i&&(x(null!=(a=null==(n=null==e?void 0:e.valueLabels)?void 0:n[0])?a:(null==e?void 0:e.value)||""),setTimeout((()=>{var e;null==(e=G.domReference.current)||e.select()}))),null==(s=G.domReference.current)||s.focus()}}),[]),(0,c.useEffect)((()=>{M&&C&&setTimeout((()=>I({})))}),[C,M]),(0,c.useLayoutEffect)((()=>{z.current&&(z.current=$)}),[$]),(0,c.useLayoutEffect)((()=>{var e,t;null!==S&&se.range&&(S>(null==(e=se.range)?void 0:e.endIndex)||S<(null==(t=se.range)?void 0:t.startIndex))&&se.scrollToIndex(S)}),[S,se]);const he=null!=(l=null==e?void 0:e.keyLabel)?l:null==e?void 0:e.key;return h().createElement("div",{className:T.comboboxWrapper},e?h().createElement("div",{className:T.pillWrapper},(null==e?void 0:e.key)?h().createElement("div",{className:(0,it.cx)(T.basePill,T.keyPill)},he):null,(null==e?void 0:e.key)&&(null==e?void 0:e.operator)&&"operator"!==$?h().createElement("div",{id:j,className:(0,it.cx)(T.basePill,!e.origin&&T.operatorPill,e.origin&&T.keyPill,j),"aria-label":"Edit filter operator",tabIndex:e.origin?-1:0,onClick:t=>{e.origin?null==n||n():(t.stopPropagation(),x(""),Ti("operator",E,void 0,G.domReference.current))},onKeyDown:t=>{e.origin||(ue(t,N),"Enter"===t.key&&(x(""),Ti("operator",E,void 0,G.domReference.current)))},...!e.origin&&{role:"button"}},e.operator):null,h().createElement("div",{ref:L}),M?C.map(((e,t)=>h().createElement(Li,{key:`${e.value}-${t}`,item:e,index:t,handleRemoveMultiValue:te,handleEditMultiValuePill:de}))):null):null,h().createElement("input",{...K({ref:G.setReference,onChange:function(e){const t=e.target.value;x(t),_(0),P&&R(!1)},value:w,placeholder:Di(e,$,M,r),"aria-autocomplete":"list",onKeyDown(e){p?("operator"===$&&ue(e),oe(e,M),le(e,M),ce(e,M)):f(!0)}}),className:(0,it.cx)(T.inputStyle,{[T.loadingInputPadding]:!v}),onClick:e=>{e.stopPropagation(),f(!0)},onFocus:()=>{f(!0)}}),v?h().createElement(Ge.Spinner,{className:T.loadingIndicator,inline:!0}):null,h().createElement(Ma,null,p&&h().createElement(qa,{context:Z,initialFocus:-1,visuallyHiddenDismiss:!0,modal:!1},h().createElement(h().Fragment,null,h().createElement("div",{style:{...Y,width:`${y?366:ae}px`,transform:M?`translate(${(null==(u=L.current)?void 0:u.getBoundingClientRect().left)||0}px, ${((null==(d=G.domReference.current)?void 0:d.getBoundingClientRect().bottom)||0)+10}px )`:Y.transform},ref:G.setFloating,className:T.dropdownWrapper,tabIndex:-1},h().createElement("div",{style:{height:`${se.getTotalSize()||38}px`},...J(),tabIndex:-1},v?h().createElement(Si,null):y?h().createElement($i,{handleFetchOptions:()=>ie($)}):re.length||A&&"operator"!==$&&w?se.getVirtualItems().map((r=>{var a;const s=re[r.index],o=r.index;if(s.options)return h().createElement("div",{key:`${s.label}+${o}`,className:(0,it.cx)(T.optionGroupLabel,T.groupTopBorder),style:{height:`${r.size}px`,transform:`translateY(${r.start}px)`}},h().createElement(Ge.Text,{weight:"bold",variant:"bodySmall",color:"secondary"},s.label));const l=re[r.index+1],u=l&&!l.group&&!l.options&&s.group;return h().createElement(wi,{...ee({key:`${s.value}-${o}`,ref(e){Q.current[o]=e},onClick(r){var a;"value"!==$&&r.stopPropagation(),M?(r.preventDefault(),r.stopPropagation(),U(s),x(""),null==(a=G.domReference.current)||a.focus()):(t._updateFilter(e,Ci({filterInputType:$,item:s,filter:e,setFilterMultiValues:k,onAddCustomValue:ne})),Ii({populateInputOnEdit:i,item:s,filterInputType:$,setInputValue:x,filter:e}),Ri($,E,n,G.domReference.current,!1))}}),active:S===o,addGroupBottomBorder:u,style:{height:`${r.size}px`,transform:`translateY(${r.start}px)`},"aria-setsize":re.length,"aria-posinset":r.index+1,isMultiValueEdit:M,checked:C.some((e=>e.value===s.value))},h().createElement("span",null,s.isCustom?"Use custom value: ":""," ",null!=(a=s.label)?a:s.value),s.description?h().createElement("div",{className:T.descriptionText},s.description):null)})):h().createElement(_i,null))),M&&!v&&!y&&re.length?h().createElement(Ei,{onApply:()=>{q(t,e,C)},floatingElement:G.floating.current,maxOptionWidth:ae,menuHeight:Math.min(se.getTotalSize(),300)}):null))))})),ji=e=>({comboboxWrapper:(0,it.css)({display:"flex",flexWrap:"wrap"}),pillWrapper:(0,it.css)({display:"flex",alignItems:"center",flexWrap:"wrap"}),basePill:(0,it.css)({display:"flex",alignItems:"center",background:e.colors.action.disabledBackground,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,1,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75),...e.typography.bodySmall,cursor:"pointer"}),keyPill:(0,it.css)({fontWeight:e.typography.fontWeightBold,cursor:"default"}),operatorPill:(0,it.css)({"&:hover":{background:e.colors.action.hover}}),dropdownWrapper:(0,it.css)({backgroundColor:e.colors.background.primary,color:e.colors.text.primary,boxShadow:e.shadows.z2,overflowY:"auto",zIndex:e.zIndex.dropdown}),inputStyle:(0,it.css)({paddingBlock:0,"&:focus":{outline:"none"}}),loadingIndicator:(0,it.css)({color:e.colors.text.secondary,marginLeft:e.spacing(.5)}),loadingInputPadding:(0,it.css)({paddingRight:e.spacing(2.5)}),optionGroupLabel:(0,it.css)({padding:e.spacing(1),position:"absolute",top:0,left:0,width:"100%"}),groupTopBorder:(0,it.css)({"&:not(:first-child)":{borderTop:`1px solid ${e.colors.border.weak}`}}),descriptionText:(0,it.css)({...e.typography.bodySmall,color:e.colors.text.secondary,paddingTop:e.spacing(.5)})});function Qi({filter:e,model:t,readOnly:r,focusOnWipInputRef:n}){var a,i,s;const o=(0,Ge.useStyles2)(Vi),[l,u]=(0,c.useState)(!0),[d,p]=(0,c.useState)(!1),f=(0,c.useRef)(null),[m,g]=(0,c.useState)(!1),v=null!=(a=e.keyLabel)?a:e.key,b=(null==(i=e.valueLabels)?void 0:i.join(", "))||(null==(s=e.values)?void 0:s.join(", "))||e.value,y=(0,c.useCallback)(((e,t)=>{null==e||e.stopPropagation(),r||(p(null!=t?t:!l),u(!l))}),[r,l]);if((0,c.useEffect)((()=>{var e;d&&(null==(e=f.current)||e.focus(),p(!1))}),[d]),(0,c.useEffect)((()=>{e.forceEdit&&l&&(u(!1),t._updateFilter(e,{forceEdit:void 0}))}),[e,t,l]),(0,c.useEffect)((()=>{l&&g((e=>!e&&e))}),[l]),l){const a=h().createElement("span",{className:o.pillText},v," ",e.operator," ",b);return h().createElement("div",{className:(0,it.cx)(o.combinedFilterPill,r&&o.readOnlyCombinedFilter,Ki(e)&&o.matchAllPill),onClick:e=>{e.stopPropagation(),g(!0),y()},onKeyDown:e=>{"Enter"===e.key&&(g(!0),y())},role:"button","aria-label":`Edit filter with key ${v}`,tabIndex:0,ref:f},b.length<20?a:h().createElement(Ge.Tooltip,{content:h().createElement("div",{className:o.tooltipText},b),placement:"top"},a),r||e.matchAllFilter||e.origin&&"dashboard"!==e.origin?null:h().createElement(Ge.IconButton,{onClick:r=>{r.stopPropagation(),e.origin&&"dashboard"===e.origin?t.updateToMatchAll(e):t._removeFilter(e),setTimeout((()=>null==n?void 0:n()))},onKeyDownCapture:r=>{"Enter"===r.key&&(r.preventDefault(),r.stopPropagation(),e.origin&&"dashboard"===e.origin?t.updateToMatchAll(e):t._removeFilter(e),setTimeout((()=>null==n?void 0:n())))},name:"times",size:"md",className:o.pillIcon,tooltip:`Remove filter with key ${v}`}),e.origin&&!e.restorable&&h().createElement(Ge.Tooltip,{content:`This is a ${e.origin} injected filter`,placement:"bottom"},h().createElement(Ge.Icon,{name:"info-circle",size:"md",className:o.infoPillIcon})),e.origin&&e.restorable&&h().createElement(Ge.IconButton,{onClick:r=>{r.stopPropagation(),t.restoreOriginalFilter(e)},onKeyDownCapture:r=>{"Enter"===r.key&&(r.preventDefault(),r.stopPropagation(),t.restoreOriginalFilter(e))},name:"history",size:"md",className:Ki(e)?o.matchAllPillIcon:o.pillIcon,tooltip:"Restore filter to its original value"}))}return h().createElement(Mi,{filter:e,model:t,handleChangeViewMode:y,focusOnWipInputRef:n,populateInputOnEdit:m})}const Vi=e=>({combinedFilterPill:(0,it.css)({display:"flex",alignItems:"center",background:e.colors.action.selected,borderRadius:e.shape.radius.default,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(.125,0,.125,1),color:e.colors.text.primary,overflow:"hidden",whiteSpace:"nowrap",minHeight:e.spacing(2.75),...e.typography.bodySmall,fontWeight:e.typography.fontWeightBold,cursor:"pointer","&:hover":{background:e.colors.action.hover}}),readOnlyCombinedFilter:(0,it.css)({paddingRight:e.spacing(1),cursor:"text","&:hover":{background:e.colors.action.selected}}),pillIcon:(0,it.css)({marginInline:e.spacing(.5),cursor:"pointer","&:hover":{color:e.colors.text.primary}}),pillText:(0,it.css)({maxWidth:"200px",width:"100%",textOverflow:"ellipsis",overflow:"hidden"}),tooltipText:(0,it.css)({textAlign:"center"}),infoPillIcon:(0,it.css)({marginInline:e.spacing(.5),cursor:"pointer"}),matchAllPillIcon:(0,it.css)({marginInline:e.spacing(.5),cursor:"pointer",color:e.colors.text.disabled}),matchAllPill:(0,it.css)({background:e.colors.action.selected,color:e.colors.text.disabled,border:0,"&:hover":{background:e.colors.action.selected}})}),zi=(0,c.forwardRef)((function({model:e},t){const{_wip:r}=e.useState();return(0,c.useLayoutEffect)((()=>{r||e._addWip()}),[r]),h().createElement(Mi,{model:e,filter:r,isAlwaysWip:!0,ref:t})})),Fi=(0,c.memo)((function({model:e}){const{baseFilters:t,filters:r,readOnly:n}=e.useState(),a=(0,Ge.useStyles2)(Bi),i=(0,c.useRef)();return h().createElement("div",{className:(0,it.cx)(a.comboboxWrapper,{[a.comboboxFocusOutline]:!n}),onClick:()=>{var e;null==(e=i.current)||e.call(i)}},h().createElement(Ge.Icon,{name:"filter",className:a.filterIcon,size:"lg"}),null==t?void 0:t.map(((t,r)=>t.origin?h().createElement(Qi,{key:`${r}-${t.key}`,filter:t,model:e,focusOnWipInputRef:i.current}):null)),r.map(((t,r)=>h().createElement(Qi,{key:`${r}-${t.key}`,filter:t,model:e,readOnly:n||t.readOnly,focusOnWipInputRef:i.current}))),n?null:h().createElement(zi,{model:e,ref:i}))})),Bi=e=>({comboboxWrapper:(0,it.css)({display:"flex",flexWrap:"wrap",alignItems:"center",columnGap:e.spacing(1),rowGap:e.spacing(.5),minHeight:e.spacing(4),backgroundColor:e.components.input.background,border:`1px solid ${e.colors.border.strong}`,borderRadius:e.shape.radius.default,paddingInline:e.spacing(1),paddingBlock:e.spacing(.5),flexGrow:1}),comboboxFocusOutline:(0,it.css)({"&:focus-within":{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow",zIndex:2}}),filterIcon:(0,it.css)({color:e.colors.text.secondary,alignSelf:"center"})}),Xi=Object.fromEntries(Object.entries(i.scopeFilterOperatorMap).map((([e,t])=>[t,e])));function qi(e){return new Set(["equals","not-equals","one-of","not-one-of"]).has(e)}function Ui(e,t,r){var n,a;const s=e.get(r.key);s&&function(e,t){const r=i.scopeFilterOperatorMap[e];if(!qi(r)||!qi(t))return!1;if(r.includes("not")&&!t.includes("not")||!r.includes("not")&&t.includes("not"))return!1;return!0}(s.operator,r.operator)?function(e,t){var r,n,a,i;const s=null!=(r=t.values)?r:[t.value];for(const t of s)(null==(n=e.values)?void 0:n.includes(t))||null==(a=e.values)||a.push(t);if(1===(null==(i=e.values)?void 0:i.length))return;"equals"===t.operator&&e.operator===Xi.equals?e.operator=Xi["one-of"]:"not-equals"===t.operator&&e.operator===Xi["not-equals"]&&(e.operator=Xi["not-one-of"])}(s,r):s?t.push({key:r.key,operator:Xi[r.operator],value:r.value,values:null!=(a=r.values)?a:[r.value],origin:"scope"}):e.set(r.key,{key:r.key,operator:Xi[r.operator],value:r.value,values:null!=(n=r.values)?n:[r.value],origin:"scope"})}const Wi=[{value:"=",description:"Equals"},{value:"!=",description:"Not equal"},{value:"=|",description:"One of. Use to filter on multiple values.",isMulti:!0},{value:"!=|",description:"Not one of. Use to exclude multiple values.",isMulti:!0},{value:"=~",description:"Matches regex",isRegex:!0},{value:"!~",description:"Does not match regex",isRegex:!0},{value:"<",description:"Less than"},{value:">",description:"Greater than"}];class Hi extends T{constructor(e){var t,r,n,a,i,o;super({type:"adhoc",name:null!=(t=e.name)?t:"Filters",filters:[],datasource:null,applyMode:"auto",filterExpression:null!=(i=e.filterExpression)?i:Gi(e.expressionBuilder,[...null!=(n=null==(r=e.baseFilters)?void 0:r.filter((e=>e.origin)))?n:[],...null!=(a=e.filters)?a:[]]),...e}),this._scopedVars={__sceneObject:Pt(this)},this._dataSourceSrv=(0,s.getDataSourceSrv)(),this._originalValues=new Map,this._urlSync=new Vt(this),this._activationHandler=()=>{var e,t;this._scopesBridge=Ws.getScopesBridge(this);const r=null==(e=this._scopesBridge)?void 0:e.getValue();r&&this._updateScopesFilters(r);const n=null==(t=this._scopesBridge)?void 0:t.subscribeToValue(((e,t)=>{this._updateScopesFilters(e)}));return()=>{var e,t;null==n||n.unsubscribe(),(null==(e=this.state.baseFilters)?void 0:e.length)&&(this.setState({baseFilters:[...this.state.baseFilters.filter((e=>"scope"!==e.origin))]}),null==(t=this.state.baseFilters)||t.forEach((e=>{"dashboard"===e.origin&&e.restorable&&this.restoreOriginalFilter(e)})))}},"auto"===this.state.applyMode&&function(e){if(e.addActivationHandler((()=>(We.add(e),()=>We.delete(e)))),Ue)return;const t=(0,s.getTemplateSrv)();(null==t?void 0:t.getAdhocFilters)&&(Ue=t.getAdhocFilters,t.getAdhocFilters=function(e){var r;if(0===We.size)return Ue.call(t,e);const n=(0,s.getDataSourceSrv)().getInstanceSettings(e);if(!n)return[];for(const e of We.values())if((null==(r=e.state.datasource)?void 0:r.uid)===n.uid)return e.state.filters;return[]}.bind(t))}(this),null==(o=this.state.baseFilters)||o.forEach((e=>{var t;"dashboard"===e.origin&&this._originalValues.set(e.key,{operator:e.operator,value:null!=(t=e.values)?t:[e.value]})})),this.addActivationHandler(this._activationHandler)}_updateScopesFilters(e){var t,r;if(!e.length)return void this.setState({baseFilters:null==(t=this.state.baseFilters)?void 0:t.filter((e=>"scope"!==e.origin))});const n=function(e){const t=new Map,r=[],n=e.flatMap((e=>e.spec.filters));for(const e of n)Ui(t,r,e);return[...t.values(),...r]}(e);if(!n.length)return;let a=n;const i=[],s=[];a.forEach((e=>{var t;this._originalValues.set(e.key,{value:null!=(t=e.values)?t:[e.value],operator:e.operator})})),null==(r=this.state.baseFilters)||r.forEach((e=>{"scope"===e.origin?i.push(e):s.push(e)}));const o=i.filter((e=>e.restorable)),l=o.map((e=>e.key)),u=n.map((e=>e.key));a=[...o.filter((e=>u.includes(e.key))),...n.filter((e=>!l.includes(e.key)))],this.setState({baseFilters:[...a,...s]})}setState(e){var t,r,n;let a=!1;if((e.filters&&e.filters!==this.state.filters||e.baseFilters&&e.baseFilters!==this.state.baseFilters)&&!e.filterExpression){const i=null!=(t=e.filters)?t:this.state.filters,s=null!=(r=e.baseFilters)?r:this.state.baseFilters;e.filterExpression=Gi(this.state.expressionBuilder,[...null!=(n=null==s?void 0:s.filter((e=>e.origin)))?n:[],...null!=i?i:[]]),a=e.filterExpression!==this.state.filterExpression}super.setState(e),a&&this.publishEvent(new ne(this),!0)}updateFilters(e,t){var r,n;let a,i=!1;e&&e!==this.state.filters&&(a=Gi(this.state.expressionBuilder,[...null!=(n=null==(r=this.state.baseFilters)?void 0:r.filter((e=>e.origin)))?n:[],...e]),i=a!==this.state.filterExpression),super.setState({filters:e,filterExpression:a}),(i&&!0!==(null==t?void 0:t.skipPublish)||(null==t?void 0:t.forcePublish))&&this.publishEvent(new ne(this),!0)}restoreOriginalFilter(e){const t={matchAllFilter:!1,restorable:!1};if(e.restorable){const r=this._originalValues.get(e.key);t.value=null==r?void 0:r.value[0],t.values=null==r?void 0:r.value,t.valueLabels=null==r?void 0:r.value,t.operator=null==r?void 0:r.operator}this._updateFilter(e,t)}getValue(){return this.state.filterExpression}_updateFilter(e,t){var r;const{baseFilters:n,filters:a,_wip:i}=this.state;if(e.origin){const a=this._originalValues.get(e.key),i=t.values||(t.value?[t.value]:void 0);!t.hasOwnProperty("restorable")&&(i&&!(0,D.isEqual)(i,null==a?void 0:a.value)||t.operator&&t.operator!==(null==a?void 0:a.operator))?t.restorable=!0:i&&(0,D.isEqual)(i,null==a?void 0:a.value)&&(t.restorable=!1);const s=null!=(r=null==n?void 0:n.map((r=>r===e?{...r,...t}:r)))?r:[];return void this.setState({baseFilters:s})}if(e===i)return void("value"in t&&""!==t.value?this.setState({filters:[...a,{...i,...t}],_wip:void 0}):this.setState({_wip:{...e,...t}}));const s=this.state.filters.map((r=>r===e?{...r,...t}:r));this.setState({filters:s})}updateToMatchAll(e){this._updateFilter(e,{operator:"=~",value:".*",values:[".*"],valueLabels:["All"],matchAllFilter:!0,restorable:!0})}_removeFilter(e){e!==this.state._wip?this.setState({filters:this.state.filters.filter((t=>t!==e))}):this.setState({_wip:void 0})}_removeLastFilter(){const e=this.state.filters.at(-1);e&&this._removeFilter(e)}_handleComboboxBackspace(e){var t;if(this.state.filters.length){let t=this.state.filters.length-1;e!==this.state._wip&&(t=-1),this.setState({filters:this.state.filters.reduce(((r,n,a)=>a===t?[...r,{...n,forceEdit:!0}]:n===e?r:[...r,n]),[])})}else if(null==(t=this.state.baseFilters)?void 0:t.length){let t=this.state.baseFilters.length-1;e!==this.state._wip&&(t=-1),this.setState({baseFilters:this.state.baseFilters.reduce(((r,n,a)=>a===t?[...r,{...n,forceEdit:!0}]:n===e?r:[...r,n]),[])})}}async _getKeys(e){var t,r,n,a;const i=await(null==(r=(t=this.state).getTagKeysProvider)?void 0:r.call(t,this,e));if(i&&i.replace)return ys(i.values).map(Zi);if(this.state.defaultKeys)return this.state.defaultKeys.map(Zi);const s=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!s||!s.getTagKeys)return[];const o=this.state.filters.filter((t=>t.key!==e)).concat(null!=(n=this.state.baseFilters)?n:[]),l=Ws.getTimeRange(this).state.value,u=this.state.useQueriesAsFilterForOptions?ps(this):void 0,c=await s.getTagKeys({filters:o,queries:u,timeRange:l,scopes:null==(a=this._scopesBridge)?void 0:a.getValue(),...xt(this)});Os(c)&&this.setState({error:c.error.message});let d=ys(c);i&&(d=d.concat(ys(i.values)));const h=this.state.tagKeyRegexFilter;return h&&(d=d.filter((e=>e.text.match(h)))),d.map(Zi)}async _getValuesFor(e){var t,r,n,a,i;const s=await(null==(r=(t=this.state).getTagValuesProvider)?void 0:r.call(t,this,e));if(s&&s.replace)return ys(s.values).map(Zi);const o=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!o||!o.getTagValues)return[];const l=null!=(a=null==(n=this.state.baseFilters)?void 0:n.filter((t=>t.origin&&t.key!==e.key)))?a:[],u=this.state.filters.filter((t=>t.key!==e.key)).concat(l),c=Ws.getTimeRange(this).state.value,d=this.state.useQueriesAsFilterForOptions?ps(this):void 0;let h=null==(i=this._scopesBridge)?void 0:i.getValue();"scope"===e.origin&&(h=null==h?void 0:h.map((t=>({...t,spec:{...t.spec,filters:t.spec.filters.filter((t=>t.key!==e.key))}}))));const p=await o.getTagValues({key:e.key,filters:u,timeRange:c,queries:d,scopes:h,...xt(this)});Os(p)&&this.setState({error:p.error.message});let f=ys(p);return s&&(f=f.concat(ys(s.values))),f.map(Zi)}_addWip(){this.setState({_wip:{key:"",value:"",operator:"=",condition:""}})}_getOperators(){const{supportsMultiValueOperators:e,allowCustomValue:t=!0}=this.state;return Wi.filter((({isMulti:r,isRegex:n})=>!(!e&&r)&&!(!t&&n))).map((({value:e,description:t})=>({label:e,value:e,description:t})))}}function Gi(e,t){return(null!=e?e:us)(null!=t?t:[])}Hi.Component=function({model:e}){const{filters:t,readOnly:r,addFilterButtonText:n}=e.useState(),a=(0,Ge.useStyles2)(Yi);if("combobox"===e.state.layout)return h().createElement(Fi,{model:e});return h().createElement("div",{className:a.wrapper},t.filter((e=>!e.hidden)).map(((t,r)=>h().createElement(h().Fragment,{key:r},h().createElement(Mt,{filter:t,model:e})))),!r&&h().createElement(Qt,{model:e,key:"'builder",addFilterButtonText:n}))};const Yi=e=>({wrapper:(0,it.css)({display:"flex",flexWrap:"wrap",alignItems:"flex-end",columnGap:e.spacing(2),rowGap:e.spacing(1)})});function Zi(e){const{text:t,value:r}=e,n={label:String(t),value:String(null!=r?r:t)};return"group"in e&&(n.group=e.group),"meta"in e&&(n.meta=e.meta),n}function Ki(e){return"=~"===e.operator&&".*"===e.value}function Ji(e){return""!==e.key&&""!==e.operator&&""!==e.value}function es(e){const t=Wi.find((t=>t.value===e));return!!t&&Boolean(t.isMulti)}class ts{constructor(){this._resultsMap=new Map,this._prevLayers=[]}getMergedStream(e){(function(e,t){if(e.length!==t.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1})(e,this._prevLayers)&&(this._resultsMap=new Map,this._prevLayers=e);const t=e.map((e=>e.getResultsStream())),r=[];for(const t of e)r.push(t.activate());return(0,p.merge)(t).pipe((0,p.mergeAll)(),(0,p.filter)((e=>this._resultsMap.get(e.origin.state.key)!==e)),(0,p.map)((e=>(this._resultsMap.set(e.origin.state.key,e),this._resultsMap.values()))),(0,p.finalize)((()=>{r.forEach((e=>e()))})))}}let rs=100;function ns(){return"SQR"+rs++}class as extends T{constructor(e){super(e),this._dataLayersMerger=new ts,this._variableValueRecorder=new ze,this._results=new p.ReplaySubject(1),this._scopedVars={__sceneObject:Pt(this)},this._variableDependency=new Ss(this,{statePaths:["queries","datasource","minInterval"],onVariableUpdateCompleted:this.onVariableUpdatesCompleted.bind(this),onAnyVariableChanged:this.onAnyVariableChanged.bind(this)}),this.onDataReceived=e=>{const t=(0,i.preProcessPanelData)(e,this.state.data);this._resultAnnotations=e.annotations;const r=this._combineDataLayers(t);let n=this.state._hasFetchedData;n||t.state===F.Loading||(n=!0),this.setState({data:r,_hasFetchedData:n}),this._results.next({origin:this,data:r})},this.addActivationHandler((()=>this._onActivate()))}getResultsStream(){return this._results}_onActivate(){if(this.isQueryModeAuto()){const e=Ws.getTimeRange(this),t=Ws.getScopesBridge(this),r=this.getClosestExtraQueryProviders();for(const e of r)this._subs.add(e.subscribeToState(((t,r)=>{e.shouldRerun(r,t,this.state.queries)&&this.runQueries()})));this.subscribeToScopesChanges(t),this.subscribeToTimeRangeChanges(e),this.shouldRunQueriesOnActivate()&&this.runQueries()}return this._dataLayersSub||this._handleDataLayers(),()=>this._onDeactivate()}_handleDataLayers(){const e=Ws.getDataLayers(this);0!==e.length&&(this._dataLayersSub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayersReceived.bind(this)))}_onLayersReceived(e){var t,r,n,a,s;const o=Ws.getTimeRange(this),{dataLayerFilter:l}=this.state;let u,c=[],d=[];for(const n of e)for(let e of n.data.series)(null==(t=e.meta)?void 0:t.dataTopic)===i.DataTopic.Annotations&&(c=c.concat(e)),(null==(r=e.meta)?void 0:r.dataTopic)===i.DataTopic.AlertStates&&(d=d.concat(e));if((null==l?void 0:l.panelId)&&(c.length>0&&(c=function(e,t){var r;if(!Array.isArray(e)||0===e.length)return e;const n=Array.from({length:e.length},(()=>new Set));let a=0;for(const i of e){for(let e=0;e<i.length;e++){if(n[a].has(e))continue;let s=!0;const o=i.fields.find((e=>"panelId"===e.name)),l=i.fields.find((e=>"source"===e.name));if(l){o&&"dashboard"===l.values[e].type&&(s=[t.panelId,Xe].includes(o.values[e]));const n=l.values[e].filter;if(n){const e=[...null!=(r=n.ids)?r:[],Xe].includes(t.panelId);n.exclude?e&&(s=!1):e||(s=!1)}}s&&n[a].add(e)}a++}const i=[];a=0;for(const t of e){const e=n[a].size,r=[];for(const e of t.fields){const i=[];for(let r=0;r<t.length;r++)n[a].has(r)&&i.push(e.values[r]);r.push({...e,values:i})}i.push({...t,fields:r,length:e}),a++}return i}(c,l)),d.length>0))for(const e of d){const t=new i.DataFrameView(e);for(const e of t)if(e.panelId===l.panelId){u=e;break}}if(ss(c)&&ss(this._layerAnnotations)&&(0,D.isEqual)(u,null==(n=this.state.data)?void 0:n.alertState))return;this._layerAnnotations=c;const h=this.state.data?this.state.data:{...X,timeRange:o.state.value};this.setState({data:{...h,annotations:[...null!=(a=this._resultAnnotations)?a:[],...c],alertState:null!=u?u:null==(s=this.state.data)?void 0:s.alertState}})}onVariableUpdatesCompleted(){this.isQueryModeAuto()&&this.runQueries()}onAnyVariableChanged(e){this._adhocFiltersVar!==e&&this._groupByVar!==e&&this.isQueryModeAuto()&&(e instanceof Hi&&this._isRelevantAutoVariable(e)&&this.runQueries(),e instanceof Rt&&this._isRelevantAutoVariable(e)&&this.runQueries())}_isRelevantAutoVariable(e){var t,r;const n=null!=(t=this.state.datasource)?t:is(this.state.queries);return"auto"===e.state.applyMode&&(null==n?void 0:n.uid)===(null==(r=e.state.datasource)?void 0:r.uid)}shouldRunQueriesOnActivate(){return this._variableValueRecorder.hasDependenciesChanged(this)?(Q(),!0):!this.state.data||!!this._isDataTimeRangeStale(this.state.data)}_isDataTimeRangeStale(e){const t=Ws.getTimeRange(this).state.value,r=e.timeRange;return(t.from.unix()!==r.from.unix()||t.to.unix()!==r.to.unix())&&(Q(),!0)}_onDeactivate(){var e;this._querySub&&(this._querySub.unsubscribe(),this._querySub=void 0),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),null==(e=this._timeSub)||e.unsubscribe(),this._timeSub=void 0,this._timeSubRange=void 0,this._adhocFiltersVar=void 0,this._groupByVar=void 0,this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}setContainerWidth(e){!this._containerWidth&&e>0?(this._containerWidth=e,this.state.maxDataPointsFromWidth&&!this.state.maxDataPoints&&setTimeout((()=>{this.isActive&&!this.state._hasFetchedData&&this.runQueries()}),0)):e>0&&(this._containerWidth=e)}isDataReadyToDisplay(){return Boolean(this.state._hasFetchedData)}subscribeToScopesChanges(e){e&&this._scopesSubBridge!==e&&(this._scopesSub&&this._scopesSub.unsubscribe(),this._scopesSubBridge=e,this._scopesSub=e.subscribeToValue((()=>{this.runWithTimeRangeAndScopes(Ws.getTimeRange(this),e)})))}subscribeToTimeRangeChanges(e){this._timeSubRange!==e&&(this._timeSub&&this._timeSub.unsubscribe(),this._timeSubRange=e,this._timeSub=e.subscribeToState((()=>{this.runWithTimeRangeAndScopes(e,Ws.getScopesBridge(this))})))}runQueries(){const e=Ws.getTimeRange(this),t=Ws.getScopesBridge(this);this.isQueryModeAuto()&&(this.subscribeToTimeRangeChanges(e),this.subscribeToScopesChanges(t)),this.runWithTimeRangeAndScopes(e,t)}getMaxDataPoints(){var e;return this.state.maxDataPoints?this.state.maxDataPoints:this.state.maxDataPointsFromWidth&&null!=(e=this._containerWidth)?e:500}cancelQuery(){var e;null==(e=this._querySub)||e.unsubscribe(),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),this.setState({data:{...this.state.data,state:F.Done}})}async runWithTimeRangeAndScopes(e,t){var r,n,a,i;if(!this.state.maxDataPoints&&this.state.maxDataPointsFromWidth&&!this._containerWidth)return;if(this._dataLayersSub||this._handleDataLayers(),null==(r=this._querySub)||r.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())return Q(),void this.setState({data:{...null!=(n=this.state.data)?n:X,state:F.Loading}});if((null==t?void 0:t.isLoading())&&(null==t?void 0:t.getValue().length))return Q(),void this.setState({data:{...null!=(a=this.state.data)?a:X,state:F.Loading}});const{queries:o}=this.state;if(null==o?void 0:o.length)try{const r=null!=(i=this.state.datasource)?i:is(o),n=await Ve(r,this._scopedVars);this.findAndSubscribeToAdHocFilters(n.uid);const a=(0,s.getRunRequest)(),{primary:l,secondaries:u,processors:c}=this.prepareRequests(e,n,t);Q(0,0,this.state.key);let d=a(n,l);if(u.length>0){const e=u.map((e=>a(n,e))),t=(e=>t=>t.pipe((0,p.mergeMap)((([t,...r])=>{const n=r.flatMap((r=>{var n,a;return null!=(a=null==(n=e.get(r.request.requestId))?void 0:n(t,r))?a:(0,p.of)(r)}));return(0,p.forkJoin)([(0,p.of)(t),...n])})),(0,p.map)((([e,...t])=>{var r;return{...e,series:[...e.series,...t.flatMap((e=>e.series))],annotations:[...null!=(r=e.annotations)?r:[],...t.flatMap((e=>{var t;return null!=(t=e.annotations)?t:[]}))]}}))))(c);d=(0,p.forkJoin)([d,...e]).pipe(t)}d=d.pipe(je({type:"data",request:l,origin:this,cancel:()=>this.cancelQuery()})),this._querySub=d.subscribe(this.onDataReceived)}catch(e){console.error("PanelQueryRunner Error",e),this.onDataReceived({...X,...this.state.data,state:F.Error,errors:[(0,s.toDataQueryError)(e)]})}else this._setNoDataState()}clone(e){var t;const r=super.clone(e);return this._resultAnnotations&&(r._resultAnnotations=this._resultAnnotations.map((e=>({...e})))),this._layerAnnotations&&(r._layerAnnotations=this._layerAnnotations.map((e=>({...e})))),r._variableValueRecorder=this._variableValueRecorder.cloneAndRecordCurrentValuesForSceneObject(this),r._containerWidth=this._containerWidth,r._results.next({origin:this,data:null!=(t=this.state.data)?t:X}),r}prepareRequests(e,t,r){var n,a;const{minInterval:o,queries:l}=this.state;let u={app:"scenes",requestId:ns(),timezone:e.getTimeZone(),range:e.state.value,interval:"1s",intervalMs:1e3,targets:(0,D.cloneDeep)(l),maxDataPoints:this.getMaxDataPoints(),scopedVars:this._scopedVars,startTime:Date.now(),liveStreaming:this.state.liveStreaming,rangeRaw:{from:e.state.from,to:e.state.to},cacheTimeout:this.state.cacheTimeout,queryCachingTTL:this.state.queryCachingTTL,scopes:null==r?void 0:r.getValue(),...qe(this)};if(this._adhocFiltersVar){if(u.filters=[],null==(n=this._adhocFiltersVar.state.baseFilters)?void 0:n.length){const e=this._adhocFiltersVar.state.baseFilters.filter((e=>e.origin));u.filters=u.filters.concat(e)}u.filters=u.filters.concat(this._adhocFiltersVar.state.filters.filter(Ji))}this._groupByVar&&(u.groupByKeys=this._groupByVar.state.value),u.targets=u.targets.map((e=>{var r;return e.datasource&&(e.datasource.uid===t.uid||(null==(r=t.meta)?void 0:r.mixed)||!s.isExpressionReference||(0,s.isExpressionReference)(e.datasource))||(e.datasource=t.getRef()),e}));const c=o?Bs(this,o):t.interval,d=i.rangeUtil.calculateInterval(e.state.value,u.maxDataPoints,c);u.scopedVars=Object.assign({},u.scopedVars,{__interval:{text:d.interval,value:d.interval},__interval_ms:{text:d.intervalMs.toString(),value:d.intervalMs}}),u.interval=d.interval,u.intervalMs=d.intervalMs;const h=e.state.value;let p=[],f=new Map;for(const e of null!=(a=this.getClosestExtraQueryProviders())?a:[])for(const{req:t,processor:r}of e.getExtraQueries(u)){const e=ns();p.push({...t,requestId:e}),f.set(e,null!=r?r:Be)}return u.range=h,{primary:u,secondaries:p,processors:f}}_combineDataLayers(e){return this._layerAnnotations&&this._layerAnnotations.length>0&&(e.annotations=(e.annotations||[]).concat(this._layerAnnotations)),this.state.data&&this.state.data.alertState&&(e.alertState=this.state.data.alertState),e}_setNoDataState(){this.state.data!==X&&this.setState({data:X})}getClosestExtraQueryProviders(){const e=new Map;return this.parent?(A(this.parent,(t=>(Fe(t)&&!e.has(t.constructor)&&e.set(t.constructor,t),t.forEachChild((t=>{Fe(t)&&!e.has(t.constructor)&&e.set(t.constructor,t)})),null))),Array.from(e.values())):[]}findAndSubscribeToAdHocFilters(e){const t=function(e){var t;for(const r of We.values())if(Bs(r,null==(t=r.state.datasource)?void 0:t.uid)===e)return r}(e);this._adhocFiltersVar!==t&&(this._adhocFiltersVar=t,this._updateExplicitVariableDependencies());const r=function(e){var t;for(const r of He.values())if(Bs(r,null==(t=r.state.datasource)?void 0:t.uid)===e)return r}(e);this._groupByVar!==r&&(this._groupByVar=r,this._updateExplicitVariableDependencies())}_updateExplicitVariableDependencies(){const e=[];this._adhocFiltersVar&&e.push(this._adhocFiltersVar.state.name),this._groupByVar&&e.push(this._groupByVar.state.name),this._variableDependency.setVariableNames(e)}isQueryModeAuto(){var e;return"auto"===(null!=(e=this.state.runQueriesMode)?e:"auto")}}function is(e){var t,r;return null!=(r=null==(t=e.find((e=>null!==e.datasource)))?void 0:t.datasource)?r:void 0}function ss(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(e[t].length>0)return!1;return!0}function os(e,t){return e===t||(0,D.isEqual)(e,t)}function ls(e){try{return JSON.stringify(e,(()=>{const e=new WeakSet;return(t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}})())}catch(e){console.error(e)}return""}function us(e){return e.map((e=>function(e){var t,r;let n="",a=e.operator;"=|"===a?(a="=~",n=null==(t=e.values)?void 0:t.map(ds).join("|")):"!=|"===a?(a="!~",n=null==(r=e.values)?void 0:r.map(ds).join("|")):n="=~"===a||"!~"===a?ds(e.value):cs(e.value);return`${e.key}${a}"${n}"`}(e))).join(",")}function cs(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function ds(e){return cs(e.replace(hs,"\\$&"))}const hs=/[*+?()|\\.\[\]{}^$]/g;function ps(e){var t;const r=Ws.findAllObjects(e.getRoot(),(e=>e instanceof as)),n=Ws.interpolate(e,null==(t=e.state.datasource)?void 0:t.uid),a=function(e){const t={};for(const r of e)r.state.key&&(r.state.key in t||(t[r.state.key]=[]),t[r.state.key].push(r));return Object.values(t).flatMap((e=>{const t=e.filter((e=>e.isActive));return 0===t.length&&1===e.length?e:t}))}(r).filter((t=>{var r;return Ws.interpolate(e,null==(r=t.state.datasource)?void 0:r.uid)===n}));if(0===a.length)return[];const i=[];return a.forEach((t=>{i.push(...t.state.queries.filter((t=>{if(!t.datasource||!t.datasource.uid)return!0;return Ws.interpolate(e,t.datasource.uid)===n})))})),i}function fs(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function ms(e){return null==e?"":/,/g[Symbol.replace](e,"__gfc__")}function gs(e){return function(e){return null==e?"":/#/g[Symbol.replace](e,"__gfh__")}(fs(e))}function vs(e){return null==e?"":(e=/__gfp__/g[Symbol.replace](e,"|"),e=/__gfc__/g[Symbol.replace](e,","),e=/__gfh__/g[Symbol.replace](e,"#"))}function bs(e,t){return t&&e!==t?[e,t].map(ms).join(","):ms(e)}function ys(e){return Array.isArray(e)?e:e.data}function Os(e){return!Array.isArray(e)&&Boolean(e.error)}function ws(e){const t=[],r=new Map;for(const n of e){const e=n.group;if(e){let a=r.get(e);a||(a=[],r.set(e,a),t.push({label:e,options:a})),a.push(n)}else t.push(n)}return t}class xs extends T{constructor(e){super({type:"constant",value:"",name:"",...e,skipUrlSync:!0}),this._variableDependency=new Ss(this,{statePaths:["value"]}),this._prevValue=""}validateAndUpdate(){const e=this.getValue();return this._prevValue!==e&&(this._prevValue=e,this.publishEvent(new ne(this),!0)),(0,p.of)({})}getValue(){return"string"==typeof this.state.value?Ws.interpolate(this,this.state.value):this.state.value}}class Ss{constructor(e,t){this._sceneObject=e,this._options=t,this._dependencies=new Set,this._isWaitingForVariables=!1,this.scanCount=0,this._statePaths=t.statePaths,this._options.handleTimeMacros&&this.handleTimeMacros()}hasDependencyOn(e){return this.getNames().has(e)}variableUpdateCompleted(e,t){const r=this.getNames();let n=!1;(r.has(e.state.name)||r.has(i.DataLinkBuiltInVars.includeVars))&&t&&(n=!0),Q(0,0,e.state.name,this._isWaitingForVariables),this._options.onAnyVariableChanged&&this._options.onAnyVariableChanged(e),this._options.onVariableUpdateCompleted&&(this._isWaitingForVariables||n)&&this._options.onVariableUpdateCompleted(),n&&(this._options.onReferencedVariableValueChanged&&this._options.onReferencedVariableValueChanged(e),this._options.onReferencedVariableValueChanged||this._options.onVariableUpdateCompleted||this._sceneObject.forceRender())}hasDependencyInLoadingState(){return Ws.hasVariableDependencyInLoadingState(this._sceneObject)?(this._isWaitingForVariables=!0,!0):(this._isWaitingForVariables=!1,!1)}getNames(){const e=this._state,t=this._state=this._sceneObject.state;if(!e)return this.scanStateForDependencies(this._state),this._dependencies;if(t!==e)if(this._statePaths){for(const r of this._statePaths)if("*"===r||t[r]!==e[r]){this.scanStateForDependencies(t);break}}else this.scanStateForDependencies(t);return this._dependencies}setVariableNames(e){this._options.variableNames=e,this.scanStateForDependencies(this._state)}setPaths(e){this._statePaths=e}scanStateForDependencies(e){if(this._dependencies.clear(),this.scanCount+=1,this._options.variableNames)for(const e of this._options.variableNames)this._dependencies.add(e);if(this._statePaths)for(const t of this._statePaths){if("*"===t){this.extractVariablesFrom(e);break}{const r=e[t];r&&this.extractVariablesFrom(r)}}}extractVariablesFrom(e){Oe.lastIndex=0;const t=("string"!=typeof e?ls(e):e).matchAll(Oe);if(t)for(const e of t){const[,t,r,,n]=e,a=t||r||n;this._dependencies.add(a)}}handleTimeMacros(){this._sceneObject.addActivationHandler((()=>{const e=Ws.getTimeRange(this._sceneObject).subscribeToState(((e,t)=>{const r=this.getNames(),n=r.has("__from"),a=r.has("__to"),i=r.has("__timezone");if(e.value!==t.value)if(n){const t=new xs({name:"__from",value:e.from});this.variableUpdateCompleted(t,!0)}else if(a){const t=new xs({name:"__to",value:e.to});this.variableUpdateCompleted(t,!0)}if(e.timeZone!==t.timeZone&&i){const t=new xs({name:"__timezone",value:e.timeZone});this.variableUpdateCompleted(t,!0)}}));return()=>e.unsubscribe()}))}}const _s=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),$s=e=>{if(!e.variables)return!1;if(e.variables.getType()!==i.VariableSupportType.Standard)return!1;const t=e.variables;return"toDataQuery"in t&&Boolean(t.toDataQuery)},Es=e=>{if(!e.variables)return!1;if(e.variables.getType()!==i.VariableSupportType.Custom)return!1;const t=e.variables;return"query"in t&&"editor"in t&&Boolean(t.query)&&Boolean(t.editor)},Ps=e=>!!e.variables&&e.variables.getType()===i.VariableSupportType.Datasource;class Rs{constructor(e,t=(0,s.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if($s(this.datasource))return this.datasource.variables.toDataQuery(function(e){var t;const r=null!=(t=e.state.query)?t:"";if("string"==typeof r)return{query:r,refId:`variable-${e.state.name}`};if(null==r.refId)return{...r,refId:`variable-${e.state.name}`};return e.state.query}(e));throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return $s(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Ds()}}class Ts{constructor(e){this.datasource=e}getTarget(e){if(_s(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({variable:e,searchFilter:t},r){return _s(this.datasource)?(0,p.from)(this.datasource.metricFindQuery(e.state.query,{...r,variable:{name:e.state.name,type:e.state.type},searchFilter:t})).pipe((0,p.mergeMap)((e=>{if(!e||!e.length)return Ds();const t=e;return(0,p.of)({series:t,state:i.LoadingState.Done,timeRange:r.range})}))):Ds()}}class Cs{constructor(e,t=(0,s.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(Es(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return Es(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Ds()}}class ks{constructor(e,t=(0,s.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){var t;if(Ps(this.datasource))return"string"==typeof e.state.query?e.state.query:{...e.state.query,refId:null!=(t=e.state.query.refId)?t:"variable-query"};throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return Ps(this.datasource)?this._runRequest(this.datasource,t):Ds()}}function Ds(){return(0,p.of)({state:i.LoadingState.Done,series:[],timeRange:(0,i.getDefaultTimeRange)()})}let Is=function(e){if($s(e))return new Rs(e,(0,s.getRunRequest)());if(_s(e))return new Ts(e);if(Es(e))return new Cs(e);if(Ps(e))return new ks(e);throw new Error(`Couldn't create a query runner for datasource ${e.type}`)};const As=(e,t)=>{const r=[];let n=null;t.lastIndex=0;do{n=t.exec(e),n&&r.push(n)}while(t.global&&n&&""!==n[0]&&void 0!==n[0]);return r},Ls=(e,t)=>{if(t===i.VariableSort.disabled)return e;switch(t){case i.VariableSort.alphabeticalAsc:e=(0,D.sortBy)(e,"label");break;case i.VariableSort.alphabeticalDesc:e=(0,D.sortBy)(e,"label").reverse();break;case i.VariableSort.numericalAsc:e=(0,D.sortBy)(e,Ns);break;case i.VariableSort.numericalDesc:e=(e=(0,D.sortBy)(e,Ns)).reverse();break;case i.VariableSort.alphabeticalCaseInsensitiveAsc:e=(0,D.sortBy)(e,(e=>(0,D.toLower)(e.label)));break;case i.VariableSort.alphabeticalCaseInsensitiveDesc:e=(e=(0,D.sortBy)(e,(e=>(0,D.toLower)(e.label)))).reverse();break;case i.VariableSort.naturalAsc||7:e=js(e);break;case i.VariableSort.naturalDesc||8:e=(e=js(e)).reverse()}return e};function Ns(e){if(!e.label)return-1;const t=e.label.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)}const Ms=new Intl.Collator(void 0,{sensitivity:"accent",numeric:!0});function js(e){return e.slice().sort(((e,t)=>Ms.compare(e.label,t.label)))}function Qs(){return e=>e.pipe((0,p.map)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,i.isDataFrame)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const r=e.toLowerCase();if("text"===r||"value"===r)return!0}return!1}(t))return t;if(0===t[0].fields.length)return[];const r=(0,i.getProcessedDataFrames)(t),n=[];let a=-1,s=-1,o=-1,l=-1;for(const e of r)for(let r=0;r<e.fields.length;r++){const n=e.fields[r],u=(0,i.getFieldDisplayName)(n,e,t).toLowerCase();n.type===i.FieldType.string&&-1===o&&(o=r),"text"===u&&n.type===i.FieldType.string&&-1===s&&(s=r),"value"===u&&n.type===i.FieldType.string&&-1===a&&(a=r),"expandable"!==u||n.type!==i.FieldType.boolean&&n.type!==i.FieldType.number||-1!==l||(l=r)}if(-1===o)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const r=-1!==l?e.fields[l].values.get(t):void 0,i=e.fields[o].values.get(t),u=-1!==s?e.fields[s].values.get(t):"",c=-1!==a?e.fields[a].values.get(t):"";-1!==a||-1!==s?-1!==a||-1===s?-1===a||-1!==s?n.push({text:u,value:c,expandable:r}):n.push({text:c,value:c,expandable:r}):n.push({text:u,value:u,expandable:r}):n.push({text:i,value:i,expandable:r})}return n})))}class Vs extends Pe{constructor(e){super({type:"query",name:"",value:"",text:"",options:[],datasource:null,regex:"",query:"",refresh:i.VariableRefresh.onDashboardLoad,sort:i.VariableSort.disabled,...e}),this._variableDependency=new Ss(this,{statePaths:["regex","query","datasource"]}),this.onSearchChange=e=>{ls(this.state.query).indexOf(we)>-1&&this._updateOptionsBasedOnSearchFilter(e)},this._updateOptionsBasedOnSearchFilter=(0,D.debounce)((async e=>{const t=await(0,p.lastValueFrom)(this.getValueOptions({searchFilter:e}));this.setState({options:t,loading:!1})}),400)}getValueOptions(e){return this.state.query?(this.setState({loading:!0,error:null}),(0,p.from)(Ve(this.state.datasource,{__sceneObject:Pt(this)})).pipe((0,p.mergeMap)((t=>{const r=Is(t),n=r.getTarget(this),a=this.getRequest(n,e.searchFilter);return r.runRequest({variable:this,searchFilter:e.searchFilter},a).pipe(je({type:"variable",request:a,origin:this}),(0,p.filter)((e=>e.state===i.LoadingState.Done||e.state===i.LoadingState.Error)),(0,p.take)(1),(0,p.mergeMap)((e=>e.state===i.LoadingState.Error?(0,p.throwError)((()=>e.error)):(0,p.of)(e))),Qs(),(0,p.mergeMap)((e=>{let t="";return this.state.regex&&(t=Ws.interpolate(this,this.state.regex,void 0,"regex")),(0,p.of)(function(e,t,r){var n,a,s,o,l,u,c,d,h,p;let f,m=[];e&&(f=(0,i.stringToJsRegex)(e));for(let e=0;e<r.length;e++){const t=r[e];let i=null!=(a=null!=(n=t.text)?n:t.value)?a:"",g=null!=(o=null!=(s=t.value)?s:t.text)?o:"";if((0,D.isNumber)(g)&&(g=g.toString()),(0,D.isNumber)(i)&&(i=i.toString()),f){const e=As(g,f);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),r=e.find((e=>e.groups&&e.groups.text)),n=e.find((e=>e.length>1)),a=e.length>1&&n;if(t||r)g=null!=(c=null==(l=null==t?void 0:t.groups)?void 0:l.value)?c:null==(u=null==r?void 0:r.groups)?void 0:u.text,i=null!=(p=null==(d=null==r?void 0:r.groups)?void 0:d.text)?p:null==(h=null==t?void 0:t.groups)?void 0:h.value;else{if(a){for(let t=0;t<e.length;t++){const r=e[t];m.push({label:r[1],value:r[1]})}continue}n&&(i=n[1],g=n[1])}}m.push({label:i,value:g})}return m=(0,D.uniqBy)(m,"value"),Ls(m,t)}(t,this.state.sort,e))})),(0,p.catchError)((e=>e.cancelled?(0,p.of)([]):(0,p.throwError)((()=>e)))))})))):(0,p.of)([])}getRequest(e,t){const r={__sceneObject:Pt(this)};t&&(r.__searchFilter={value:t,text:t});const n=Ws.getTimeRange(this).state.value;return{app:i.CoreApp.Dashboard,requestId:O(),timezone:"",range:n,interval:"",intervalMs:0,targets:[e],scopedVars:r,startTime:Date.now()}}}Vs.Component=({model:e})=>h().createElement(yt,{model:e});class zs extends T{constructor(){super(...arguments),this._renderBeforeActivation=!0,this._contextSubject=new p.BehaviorSubject(void 0)}getValue(){var e,t;return null!=(t=null==(e=this.context)?void 0:e.state.value)?t:[]}subscribeToValue(e){return this.contextObservable.pipe((0,p.map)((e=>{var t;return null!=(t=null==e?void 0:e.state.value)?t:[]})),(0,p.pairwise)(),(0,p.filter)((([e,t])=>!(0,D.isEqual)(e,t)))).subscribe((([t,r])=>{e(r,t)}))}isLoading(){var e,t;return null!=(t=null==(e=this.context)?void 0:e.state.loading)&&t}subscribeToLoading(e){return this.contextObservable.pipe((0,p.filter)((e=>!!e)),(0,p.pairwise)(),(0,p.map)((([e,t])=>{var r,n;return[null!=(r=null==e?void 0:e.state.loading)&&r,null!=(n=null==t?void 0:t.state.loading)&&n]})),(0,p.filter)((([e,t])=>e!==t))).subscribe((([t,r])=>{e(r)}))}setEnabled(e){var t;null==(t=this.context)||t.setEnabled(e)}setReadOnly(e){var t;null==(t=this.context)||t.setReadOnly(e)}updateContext(e){var t;this.context===e&&(null==(t=this.context)?void 0:t.state)===(null==e?void 0:e.state)||this._contextSubject.next(e)}get context(){return this._contextSubject.getValue()}get contextObservable(){return this._contextSubject.asObservable()}}function Fs(e){var t;return null!=(t=A(e,(e=>e.state.$data)))?t:J}function Bs(e,t,r,n,a){return""===t||null==t?"":Ae(e,t,r,n,a)}function Xs(e,t,r,n){if(t(e))return e;let a=null;return e.forEachChild((e=>{if(e===r)return;let n=Xs(e,t);n&&(a=n)})),a||(n&&e.parent?Xs(e.parent,t,e,!0):null)}function qs(e,t){return Xs(e,t,void 0,!0)}function Us(e,t){const r=[];return e.forEachChild((e=>{t(e)&&r.push(e),r.push(...Us(e,t))})),r}zs.Component=function({model:e}){const t=(0,s.useScopes)();return(0,c.useEffect)((()=>{e.updateContext(t)}),[t,e]),null};const Ws={getVariables:function(e){var t;return null!=(t=A(e,(e=>e.state.$variables)))?t:te},getData:Fs,getTimeRange:re,getLayout:function(e){const t=A(e,(e=>function(e){return"isDraggable"in e}(e)?e:void 0));return t||null},getDataLayers:function(e,t=!1){let r=e,n=[];for(;r;){const e=r.state.$data;if(e){if(Me(e)?n=n.concat(e):e.state.$data&&Me(e.state.$data)&&(n=n.concat(e.state.$data)),t&&n.length>0)break;r=r.parent}else r=r.parent}return n},interpolate:Bs,lookupVariable:j,hasVariableDependencyInLoadingState:function(e){if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){if(e instanceof Vs&&e.state.name===t){console.warn("Query variable is referencing itself");continue}const r=j(t,e);if(!r)continue;if(r.parent.isVariableLoadingOrWaitingToUpdate(r))return!0}return!1},findByKey:function(e,t){const r=qs(e,(e=>e.state.key===t));if(!r)throw new Error("Unable to find scene with key "+t);return r},findByKeyAndType:function(e,t,r){const n=qs(e,(e=>e.state.key===t));if(!n)throw new Error("Unable to find scene with key "+t);if(!(n instanceof r))throw new Error(`Found scene object with key ${t} does not match type ${r.name}`);return n},findObject:qs,findAllObjects:Us,getAncestor:function(e,t){let r=e;for(;r;){if(r instanceof t)return r;r=r.parent}if(!r)throw new Error("Unable to find parent of type "+t.name);return r},getQueryController:V,findDescendents:function(e,t){function r(e){return e instanceof t}return Us(e,r).filter(r)},getScopesBridge:function(e){var t;return null!=(t=qs(e,(e=>e instanceof zs)))?t:void 0}};class Hs{constructor(){this.index=new Map}getUniqueKey(e,t){const r=this.index.get(e);if(!r)return this.index.set(e,[t]),e;let n=r.findIndex((e=>e===t));return-1===n&&(!function(e){for(const t of e)if(Gs(t)){const r=e.indexOf(t);e.splice(r,1)}}(r),r.push(t),n=r.length-1),n>0?`${e}-${n+1}`:e}clear(){this.index.clear()}}function Gs(e){const t=e.getRoot();return!Ws.findObject(t,(t=>t===e))}function Ys(e){const t=new Hs,r={},n=e=>{if(e.urlSync){const n=e.urlSync.getUrlState();for(const[a,i]of Object.entries(n))if(null!=i){const n=t.getUniqueKey(a,e);r[n]=i}}e.forEachChild(n)};return n(e),r}function Zs(e,t,r,n){n||Ks(e,t,r),e.forEachChild((e=>{Ks(e,t,r)})),e.forEachChild((e=>Zs(e,t,r,!0)))}function Ks(e,t,r){if(e.urlSync){const n={},a=e.urlSync.getUrlState();for(const i of e.urlSync.getKeys()){const s=r.getUniqueKey(i,e),o=t.getAll(s),l=a[i];Js(o,l)||(o.length>0?Array.isArray(l)?n[i]=o:n[i]=o[0]:n[i]=null)}Object.keys(n).length>0&&e.urlSync.updateFromUrl(n)}}function Js(e,t){return 0===e.length&&null==t||(Array.isArray(t)||1!==(null==e?void 0:e.length)?0===(null==t?void 0:t.length)&&null===e||(0,D.isEqual)(e,t):t===e[0])}var eo=r(6145);class to extends T{constructor(e){super({...e,sync:e.sync||eo.yV.Off}),this.getEventsBus=e=>{if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return new ro(this.parent,e)}}getEventsScope(){if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return this.state.key}}class ro{constructor(e,t){this._source=e,this._eventsOrigin=t}publish(e){e.origin=this,this._eventsOrigin.publishEvent(e,!0)}getStream(e){return new p.Observable((t=>{const r=this._source.subscribeToEvent(e,(e=>{t.next(e)}));return()=>r.unsubscribe()}))}subscribe(e,t){return this.getStream(e).pipe().subscribe(t)}removeAllListeners(){}newScopedBus(e,t){throw new Error("For internal use only")}}var no=function(){};var ao="undefined"!=typeof window;const io=ao?c.useLayoutEffect:c.useEffect;var so={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const oo=ao&&void 0!==window.ResizeObserver?function(){var e=(0,c.useState)(null),t=e[0],r=e[1],n=(0,c.useState)(so),a=n[0],i=n[1],s=(0,c.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,a=t.width,s=t.height,o=t.top,l=t.left,u=t.bottom,c=t.right;i({x:r,y:n,width:a,height:s,top:o,left:l,bottom:u,right:c})}}))}),[]);return io((function(){if(t)return s.observe(t),function(){s.disconnect()}}),[t]),[r,a]}:function(){return[no,so]};function lo({data:e,showAll:t,seriesLimit:r,onShowAllSeries:n}){const a=(0,Ge.useStyles2)(uo),i=null==e?void 0:e.series.length;if(void 0===i||i<r)return null;const s=t?"Restore limit":`Show all ${i}`;return h().createElement("div",{className:a.timeSeriesDisclaimer},!t&&h().createElement("span",{className:a.warningMessage},h().createElement(Ge.Icon,{title:`Showing only ${r} series`,name:"exclamation-triangle","aria-hidden":"true"})),h().createElement(Ge.Tooltip,{content:"Rendering too many series in a single panel may impact performance and make data harder to read."},h().createElement(Ge.Button,{variant:"secondary",size:"sm",onClick:n},s)))}const uo=e=>({timeSeriesDisclaimer:(0,it.css)({label:"time-series-disclaimer",display:"flex",alignItems:"center",gap:e.spacing(1)}),warningMessage:(0,it.css)({display:"flex",alignItems:"center",gap:e.spacing(.5),color:e.colors.warning.main,fontSize:e.typography.bodySmall.fontSize})});function co(e,t){if(t)return t;let r=e.error?e.error.message:void 0;return e.errors&&(r=e.errors.map((e=>e.message)).join(", ")),r}const ho=(0,it.css)({position:"relative",width:"100%",height:"100%"}),po=(0,it.css)({position:"absolute",width:"100%",height:"100%"}),fo=e=>({ok:(0,it.css)({color:e.colors.success.text}),pending:(0,it.css)({color:e.colors.warning.text}),alerting:(0,it.css)({color:e.colors.error.text})}),mo="hideSeriesFrom",go=(0,i.isSystemOverrideWithRef)(mo);function vo(e,t=i.ByNamesMatcherMode.exclude,r){return r=null!=r?r:{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:mo,matcher:{id:i.FieldMatcherID.byNames,options:{mode:t,names:e,prefix:t===i.ByNamesMatcherMode.exclude?"All except:":void 0,readOnly:!0}},properties:[{...r,value:{viz:!0,legend:!1,tooltip:!1}}]}}const bo=(e,t,r=i.ByNamesMatcherMode.exclude)=>{const n=e.properties.find((e=>"custom.hideFrom"===e.id)),a=yo(e),s=a.findIndex((e=>e===t));return s<0?a.push(t):a.splice(s,1),vo(a,r,n)},yo=e=>{var t;const r=null==(t=e.matcher.options)?void 0:t.names;return Array.isArray(r)?[...r]:[]},Oo=(e,t)=>yo(e).length===wo(t).length,wo=(e,t)=>{const r=new Set;for(const n of e)for(const a of n.fields){if(a.type!==i.FieldType.number)continue;const s=(0,i.getFieldDisplayName)(a,n,e);s!==t&&r.add(s)}return Array.from(r)},xo=(e,t)=>{var r;let n=[];for(const a of e){const e=a.properties.find((e=>"custom.hideFrom"===e.id));if(void 0!==e&&!0===(null==(r=e.value)?void 0:r.legend)){const e=i.fieldMatchers.get(a.matcher.id).get(a.matcher.options);for(const r of t)for(const a of r.fields){if(a.type!==i.FieldType.number)continue;const s=(0,i.getFieldDisplayName)(a,r,t);e(a,r,t)&&n.push(s)}}}return n},So=(e,t)=>({matcher:{id:i.FieldMatcherID.byName,options:e},properties:[_o(t)]}),_o=e=>({id:"color",value:{mode:i.FieldColorModeId.Fixed,fixedColor:e}});class $o extends T{constructor(e){var t;super({options:{},fieldConfig:{defaults:{},overrides:[]},title:"Title",pluginId:"timeseries",_renderCounter:0,...e}),this._variableDependency=new Ss(this,{statePaths:["title","options","fieldConfig"]}),this._structureRev=0,this.onTimeRangeChange=e=>{Ws.getTimeRange(this).onTimeRangeChange({raw:{from:(0,i.toUtc)(e.from),to:(0,i.toUtc)(e.to)},from:(0,i.toUtc)(e.from),to:(0,i.toUtc)(e.to)})},this.getTimeRange=e=>{const t=Ws.findObject(this,(e=>e instanceof Po)),r=Ws.getTimeRange(this);if(t instanceof Po&&t.isEnabled)return H(r.state.from,r.state.to,r.getTimeZone(),r.state.fiscalYearStartMonth,r.state.UNSAFE_nowDelay,r.state.weekStart);const n=this.getPlugin();return n&&!n.meta.skipDataQuery&&e&&e.timeRange?e.timeRange:r.state.value},this.onTitleChange=e=>{this.setState({title:e})},this.onDescriptionChange=e=>{this.setState({description:e})},this.onDisplayModeChange=e=>{this.setState({displayMode:e})},this.onToggleCollapse=e=>{this.setState({collapsed:e})},this.onOptionsChange=(e,t=!1,r=!1)=>{var n;const{fieldConfig:a,options:s}=this.state,o=t?e:(0,D.mergeWith)((0,D.cloneDeep)(s),e,((e,t,r,n)=>{if((0,D.isArray)(t))return t;e===t||void 0!==t||(n[r]=t)})),l=(0,i.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:o,currentFieldConfig:a,isAfterPluginChange:r});this.setState({options:l.options,_renderCounter:(null!=(n=this.state._renderCounter)?n:0)+1})},this.onFieldConfigChange=(e,t)=>{const{fieldConfig:r,options:n}=this.state,a=t?e:(0,D.merge)((0,D.cloneDeep)(r),e),s=(0,i.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:n,currentFieldConfig:a,isAfterPluginChange:!1});this._dataWithFieldConfig=void 0,this.setState({fieldConfig:s.fieldConfig})},this.interpolate=(e,t,r)=>Ws.interpolate(this,e,t,r),this.getDescription=()=>{this.publishEvent(new _({origin:this,interaction:"panel-description-shown"}),!0);const{description:e}=this.state;if(e){const t=this.interpolate(e);return(0,i.renderMarkdown)(t)}return""},this.onCancelQuery=()=>{var e;this.publishEvent(new _({origin:this,interaction:"panel-cancel-query-clicked"}),!0);const t=Ws.getData(this);null==(e=t.cancelQuery)||e.call(t)},this.onStatusMessageClick=()=>{this.publishEvent(new _({origin:this,interaction:"panel-status-message-clicked"}),!0)},this._onSeriesColorChange=(e,t)=>{this.onFieldConfigChange(((e,t,r)=>{const{overrides:n}=r,a=r.overrides.findIndex((t=>t.matcher.id===i.FieldMatcherID.byName&&t.matcher.options===e));if(a<0)return{...r,overrides:[...r.overrides,So(e,t)]};const s=Array.from(n),o=s[a],l=o.properties.findIndex((e=>"color"===e.id));if(l<0)return s[a]={...o,properties:[...o.properties,_o(t)]},{...r,overrides:s};const u=Array.from(o.properties);return u[l]=_o(t),s[a]={...o,properties:u},{...r,overrides:s}})(e,t,this.state.fieldConfig))},this._onSeriesVisibilityChange=(e,t)=>{this._dataWithFieldConfig&&this.onFieldConfigChange(function(e,t,r,n){const{overrides:a}=r,i=e,s=a.findIndex(go);if(s<0){if(t===Ge.SeriesVisibilityChangeMode.ToggleSelection){const e=vo([i,...xo(a,n)]);return{...r,overrides:[...r.overrides,e]}}const e=vo(wo(n,i));return{...r,overrides:[...r.overrides,e]}}const o=Array.from(a),[l]=o.splice(s,1);if(t===Ge.SeriesVisibilityChangeMode.ToggleSelection){let e=yo(l);const t=xo(o,n);if(t.length>0&&(e=e.filter((e=>t.indexOf(e)<0))),e[0]===i&&1===e.length)return{...r,overrides:o};const a=vo([i,...t]);return{...r,overrides:[...o,a]}}const u=bo(l,i);return Oo(u,n)?{...r,overrides:o}:{...r,overrides:[...o,u]}}(e,t,this.state.fieldConfig,this._dataWithFieldConfig.series),!0)},this._onInstanceStateChange=e=>{this._panelContext&&(this._panelContext={...this._panelContext,instanceState:e}),this.setState({_pluginInstanceState:e})},this._onToggleLegendSort=e=>{const t=this.state.options.legend;if(!t)return;let r=t.sortDesc,n=t.sortBy;e!==n&&(r=void 0),!1===r?(n=void 0,r=void 0):(r=!r,n=e),this.onOptionsChange({...this.state.options,legend:{...t,sortBy:n,sortDesc:r}},!0)},this.addActivationHandler((()=>{this._onActivate()})),null==(t=e.menu)||t.addActivationHandler((()=>{this.publishEvent(new _({origin:this,interaction:"panel-menu-shown"}),!0)}))}_onActivate(){this._plugin||this._loadPlugin(this.state.pluginId)}forceRender(){var e;this.setState({_renderCounter:(null!=(e=this.state._renderCounter)?e:0)+1})}async _loadPlugin(e,t,r,n){const a=function(e){var t;const{getPanelPluginFromCache:r}=(0,s.getPluginImportUtils)();return null!=(t=r(e))?t:u.get(e)}(e);if(a)this._pluginLoaded(a,t,r,n);else{const{importPanelPlugin:a}=(0,s.getPluginImportUtils)();try{const i=a(e),s=Ws.getQueryController(this);s&&s.state.enableProfiling&&Qe(i).pipe(je({type:"plugin",origin:this})).subscribe((()=>{}));const o=await i;this._pluginLoaded(o,t,r,n)}catch(t){this._pluginLoaded(function(e){const t=new i.PanelPlugin((()=>null));return t.meta={id:e,name:e,sort:100,type:i.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},t}(e)),t instanceof Error&&this.setState({_pluginLoadError:t.message})}}}getLegacyPanelId(){var e,t;const r=null!=(t=null==(e=this.state.key)?void 0:e.split("/"))?t:[];if(0===r.length)return 0;const n=r[r.length-1],a=parseInt(n.replace("panel-",""),10);return isNaN(a)?0:a}async _pluginLoaded(e,t,r,n){const{options:a,fieldConfig:s,title:o,pluginVersion:l,_UNSAFE_customMigrationHandler:u}=this.state,c={title:o,options:a,fieldConfig:s,id:this.getLegacyPanelId(),type:e.meta.id,pluginVersion:l};t&&(c.options=t),r&&(c.fieldConfig=r);const d=this._getPluginVersion(e);null==u||u(c,e),e.onPanelMigration&&d!==l&&!n&&(c.options=await e.onPanelMigration(c));const h=(0,i.getPanelOptionsWithDefaults)({plugin:e,currentOptions:c.options,currentFieldConfig:c.fieldConfig,isAfterPluginChange:null!=n&&n});if(this._plugin=e,this.setState({options:h.options,fieldConfig:h.fieldConfig,pluginVersion:d,pluginId:e.meta.id}),e.meta.skipDataQuery){const e=Ws.getTimeRange(this);this._subs.add(e.subscribeToState((()=>this.forceRender())))}}_getPluginVersion(e){return e&&e.meta.info.version?e.meta.info.version:s.config.buildInfo.version}getPlugin(){return this._plugin}getPanelContext(){return null!=this._panelContext||(this._panelContext=this.buildPanelContext()),this._panelContext}async changePluginType(e,t,r){var n,a;const{options:i,fieldConfig:s,pluginId:o}=this.state;this._dataWithFieldConfig=void 0;const l=this.state.pluginId!==e;await this._loadPlugin(e,null!=t?t:{},r,l);const u={title:this.state.title,options:this.state.options,fieldConfig:this.state.fieldConfig,id:1,type:e},c=null==(a=null==(n=this._plugin)?void 0:n.onPanelTypeChanged)?void 0:a.call(n,u,o,i,s);c&&!(0,D.isEmpty)(c)&&this.onOptionsChange(c,!0,!0)}clearFieldConfigCache(){this._dataWithFieldConfig=void 0}applyFieldConfig(e){var t,r,n,a;const o=this._plugin;if(!o||o.meta.skipDataQuery||!e)return X;if(this._prevData===e&&this._dataWithFieldConfig)return this._dataWithFieldConfig;const l=o.dataSupport||{alertStates:!1,annotations:!1},u=o.fieldConfigRegistry,c=null!=(r=null==(t=this._dataWithFieldConfig)?void 0:t.series)?r:[],d=(0,i.applyFieldOverrides)({data:e.series,fieldConfig:this.state.fieldConfig,fieldConfigRegistry:u,replaceVariables:this.interpolate,theme:s.config.theme2,timeZone:null==(n=e.request)?void 0:n.timezone});return(0,i.compareArrayValues)(d,c,i.compareDataFrameStructures)||this._structureRev++,this._dataWithFieldConfig={...e,structureRev:this._structureRev,series:d},this._dataWithFieldConfig.annotations&&(this._dataWithFieldConfig.annotations=(0,i.applyFieldOverrides)({data:this._dataWithFieldConfig.annotations,fieldConfig:{defaults:{},overrides:[]},fieldConfigRegistry:u,replaceVariables:this.interpolate,theme:s.config.theme2,timeZone:null==(a=e.request)?void 0:a.timezone})),l.alertStates||(this._dataWithFieldConfig.alertState=void 0),l.annotations||(this._dataWithFieldConfig.annotations=void 0),this._prevData=e,this._dataWithFieldConfig}buildPanelContext(){const e=(t=this,Ws.findObject(t,(e=>e instanceof to)));var t;const r={eventsScope:e?e.getEventsScope():"__global_",eventBus:e?e.getEventsBus(this):(0,s.getAppEvents)(),app:i.CoreApp.Unknown,sync:()=>e?e.state.sync:i.DashboardCursorSync.Off,onSeriesColorChange:this._onSeriesColorChange,onToggleSeriesVisibility:this._onSeriesVisibilityChange,onToggleLegendSort:this._onToggleLegendSort,onInstanceStateChange:this._onInstanceStateChange};return this.state.extendPanelContext&&this.state.extendPanelContext(this,r),r}}$o.Component=function({model:e}){var t;const{title:r,options:n,fieldConfig:a,_pluginLoadError:o,displayMode:l,hoverHeader:u,showMenuAlways:d,hoverHeaderOffset:p,menu:f,headerActions:m,titleItems:g,seriesLimit:v,seriesLimitShowAll:b,description:y,collapsible:O,collapsed:w,_renderCounter:x=0}=e.useState(),[S,{width:_,height:$}]=oo(),E=(0,c.useMemo)((()=>(0,s.getAppEvents)()),[]),P=(0,c.useCallback)((()=>{e.state.key&&E.publish(new i.SetPanelAttentionEvent({panelId:e.state.key}))}),[e.state.key,E]),R=(0,c.useMemo)((()=>(0,D.debounce)(P,100,{leading:!0,trailing:!1})),[P]),T=e.getPlugin(),{dragClass:C,dragClassCancel:k}=function(e){var t,r;const n=Ws.getLayout(e),a=null==n?void 0:n.isDraggable();if(!n||!a||function(e,t){let r=e.parent;for(;r&&r!==t;){if("isDraggable"in r.state&&!1===r.state.isDraggable)return!0;r=r.parent}return!1}(e,n))return{dragClass:"",dragClassCancel:""};return{dragClass:null==(t=n.getDragClass)?void 0:t.call(n),dragClassCancel:null==(r=null==n?void 0:n.getDragClassCancel)?void 0:r.call(n)}}(e),I=function(e){var t,r;const n=Ws.getLayout(e);return null!=(r=null==(t=null==n?void 0:n.getDragHooks)?void 0:t.call(n))?r:{}}(e),A=Ws.getData(e),L=A.useState(),N=function(e,t,r){return(0,c.useMemo)((()=>(null==e?void 0:e.series)&&t&&!r?{...e,series:e.series.slice(0,t)}:e),[e,t,r])}(L.data,v,b),M=e.applyFieldConfig(N),j=Ws.getTimeRange(e).getTimeZone(),Q=e.getTimeRange(M),V=e.interpolate(r,void 0,"text"),z=(0,Ge.useStyles2)(fo);if(!T)return h().createElement("div",null,"Loading plugin panel...");if(!T.panel)return h().createElement("div",null,"Panel plugin has no panel component");const F=T.panel;A&&A.setContainerWidth&&A.setContainerWidth(Math.round(_));let B,X,q=[];g&&(Array.isArray(g)?q=q.concat(g.map((e=>h().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Le(g)?q.push(h().createElement(g.Component,{model:g})):q.push(g)),v&&q.push(h().createElement(lo,{key:"series-limit",data:L.data,seriesLimit:v,showAll:b,onShowAllSeries:()=>e.setState({seriesLimitShowAll:!b})})),e.state.$timeRange&&q.push(h().createElement(e.state.$timeRange.Component,{model:e.state.$timeRange,key:e.state.key})),M.alertState&&q.push(h().createElement(Ge.Tooltip,{content:null!=(t=M.alertState.state)?t:"unknown",key:`alert-states-icon-${e.state.key}`},h().createElement(Ge.PanelChrome.TitleItem,{className:(0,it.cx)({[z.ok]:M.alertState.state===i.AlertState.OK,[z.pending]:M.alertState.state===i.AlertState.Pending,[z.alerting]:M.alertState.state===i.AlertState.Alerting})},h().createElement(Ge.Icon,{name:"alerting"===M.alertState.state?"heart-break":"heart",className:"panel-alert-icon",size:"md"})))),f&&(B=h().createElement(f.Component,{model:f})),m&&(X=Array.isArray(m)?h().createElement(h().Fragment,null,m.map((e=>h().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Le(m)?h().createElement(m.Component,{model:m}):m);const U=M,W=!A.isDataReadyToDisplay||A.isDataReadyToDisplay(),H=e.getPanelContext(),G=e.getLegacyPanelId();return h().createElement("div",{className:ho},h().createElement("div",{ref:S,className:po,"data-viz-panel-key":e.state.key},_>0&&$>0&&h().createElement(Ge.PanelChrome,{title:V,description:(null==y?void 0:y.trim())?e.getDescription:void 0,loadingState:U.state,statusMessage:co(U,o),statusMessageOnClick:e.onStatusMessageClick,width:_,height:$,selectionId:e.state.key,displayMode:l,titleItems:q,dragClass:C,actions:X,dragClassCancel:k,padding:T.noPadding?"none":"md",menu:B,onCancelQuery:e.onCancelQuery,onFocus:P,onMouseEnter:P,onMouseMove:R,onDragStart:t=>{var r;null==(r=I.onDragStart)||r.call(I,t,e)},showMenuAlways:d,...O?{collapsible:Boolean(O),collapsed:w,onToggleCollapse:e.onToggleCollapse}:{hoverHeader:u,hoverHeaderOffset:p}},((t,s)=>h().createElement(h().Fragment,null,h().createElement(Ge.ErrorBoundaryAlert,{dependencies:[T,U]},h().createElement(i.PluginContextProvider,{meta:T.meta},h().createElement(Ge.PanelContextProvider,{value:H},W&&h().createElement(F,{id:G,data:U,title:r,timeRange:Q,timeZone:j,options:n,fieldConfig:a,transparent:!1,width:t,height:s,renderCounter:x,replaceVariables:e.interpolate,onOptionsChange:e.onOptionsChange,onFieldConfigChange:e.onFieldConfigChange,onChangeTimeRange:e.onTimeRangeChange,eventBus:H.eventBus})))))))))};const Eo=class e extends T{constructor({enabled:e=!1}){super({enabled:e}),this.timerId=void 0,this._activationHandler=()=>(this.state.enabled&&this.enable(),()=>{window.clearInterval(this.timerId),this.timerId=void 0}),this.addActivationHandler(this._activationHandler)}enable(){window.clearInterval(this.timerId),this.timerId=void 0,this.timerId=window.setInterval((()=>{const e=Ws.findAllObjects(this.getRoot(),(e=>e instanceof $o));for(const t of e)t.forceRender()}),e.REFRESH_RATE),this.setState({enabled:!0})}disable(){window.clearInterval(this.timerId),this.timerId=void 0,this.setState({enabled:!1})}get isEnabled(){return this.state.enabled}};Eo.REFRESH_RATE=100;let Po=Eo;function Ro(e){if("string"==typeof e)return e;if(e){if(e instanceof Error)return e.message;if((0,s.isFetchError)(e)){if(e.data&&e.data.message)return e.data.message;if(e.statusText)return e.statusText}else if(e.hasOwnProperty("message"))return e.message}return JSON.stringify(e)}class To extends T{constructor(e,t=[]){super({isEnabled:!0,...e}),this._results=new p.ReplaySubject(1),this.isDataLayer=!0,this._variableValueRecorder=new ze,this._variableDependency=new Ss(this,{onVariableUpdateCompleted:this.onVariableUpdateCompleted.bind(this)}),this._variableDependency.setPaths(t),this.addActivationHandler((()=>this.onActivate()))}onActivate(){return this.state.isEnabled&&this.onEnable(),this.shouldRunLayerOnActivate()&&this.runLayer(),this.subscribeToState(((e,t)=>{!e.isEnabled&&this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.onDisable(),this._results.next({origin:this,data:X}),this.setStateHelper({data:X})),e.isEnabled&&!t.isEnabled&&(this.onEnable(),this.runLayer())})),()=>{this.onDeactivate()}}onDeactivate(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0),this.onDisable(),this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}onVariableUpdateCompleted(){this.runLayer()}cancelQuery(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.publishResults(X))}publishResults(e){this.state.isEnabled&&(this._results.next({origin:this,data:e}),this.setStateHelper({data:e}))}getResultsStream(){return this._results}shouldRunLayerOnActivate(){return!!this.state.isEnabled&&(this._variableValueRecorder.hasDependenciesChanged(this)?(Q(),!0):!this.state.data)}setStateHelper(e){$e(this,e)}}function Co({layer:e}){var t,r;const n=`data-layer-${e.state.key}`,{data:a,isEnabled:i}=e.useState(),s=Boolean(a&&a.state===F.Loading);return h().createElement("div",{className:ko},h().createElement(Dt,{htmlFor:n,isLoading:s,onCancel:()=>{var t;return null==(t=e.cancelQuery)?void 0:t.call(e)},label:e.state.name,description:e.state.description,error:null==(r=null==(t=e.state.data)?void 0:t.errors)?void 0:r[0].message}),h().createElement(Ge.InlineSwitch,{id:n,value:i,onChange:()=>e.setState({isEnabled:!i})}))}(class extends T{constructor(){super({})}}).Component=function({model:e}){const t=Ws.getDataLayers(e,!0);if(0===t.length)return null;return h().createElement(h().Fragment,null,t.map((e=>h().createElement(e.Component,{model:e,key:e.state.key}))))};const ko=(0,it.css)({display:"flex"});var Do=r(7708),Io=r(4629),Ao=r(1693);var Lo=r(8353),No=r(3449),Mo="function"==typeof Symbol&&Symbol.observable||"@@observable",jo=r(3887);function Qo(e){return 0===e.length?jo.D:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Vo=r(2236),zo=r(3004),Fo=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,a=this,i=(n=e)&&n instanceof Lo.vU||function(e){return e&&(0,Ao.T)(e.next)&&(0,Ao.T)(e.error)&&(0,Ao.T)(e.complete)}(n)&&(0,No.Uv)(n)?e:new Lo.Ms(e,t,r);return(0,zo.Y)((function(){var e=a,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?a._subscribe(i):a._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Bo(t))((function(t,n){var a=new Lo.Ms({next:function(t){try{e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:t});r.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Mo]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Qo(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Bo(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function Bo(e){var t;return null!==(t=null!=e?e:Vo.$.Promise)&&void 0!==t?t:Promise}var Xo="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";var qo=r(6712);function Uo(e){if(e instanceof Fo)return e;if(null!=e){if(function(e){return(0,Ao.T)(e[Mo])}(e))return s=e,new Fo((function(e){var t=s[Mo]();if((0,Ao.T)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((i=e)&&"number"==typeof i.length&&"function"!=typeof i)return a=e,new Fo((function(e){for(var t=0;t<a.length&&!e.closed;t++)e.next(a[t]);e.complete()}));if(n=e,(0,Ao.T)(null==n?void 0:n.then))return r=e,new Fo((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,qo.m)}));if(function(e){return Symbol.asyncIterator&&(0,Ao.T)(null==e?void 0:e[Symbol.asyncIterator])}(e))return Wo(e);if(function(e){return(0,Ao.T)(null==e?void 0:e[Xo])}(e))return t=e,new Fo((function(e){var r,n;try{for(var a=(0,Io.Ju)(t),i=a.next();!i.done;i=a.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}e.complete()}));if(function(e){return(0,Ao.T)(null==e?void 0:e.getReader)}(e))return Wo(function(e){return(0,Io.AQ)(this,arguments,(function(){var t,r,n;return(0,Io.YH)(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,(0,Io.N3)(t.read())];case 3:return r=a.sent(),n=r.value,r.done?[4,(0,Io.N3)(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,(0,Io.N3)(n)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,r,n,a,i,s;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function Wo(e){return new Fo((function(t){(function(e,t){var r,n,a,i;return(0,Io.sH)(this,void 0,void 0,(function(){var s,o;return(0,Io.YH)(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=(0,Io.xN)(e),l.label=1;case 1:return[4,r.next()];case 2:if((n=l.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=l.sent(),a={error:o},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}var Ho=r(5096);var Go=r(4370);function Yo(e,t,r){return void 0===r&&(r=1/0),(0,Ao.T)(t)?Yo((function(r,n){return(0,Do.T)((function(e,a){return t(r,e,n,a)}))(Uo(e(r,n)))}),r):("number"==typeof t&&(r=t),(0,Ho.N)((function(t,n){return function(e,t,r,n,a,i,s,o){var l=[],u=0,c=0,d=!1,h=function(){!d||l.length||u||t.complete()},p=function(e){return u<n?f(e):l.push(e)},f=function(e){i&&t.next(e),u++;var o=!1;Uo(r(e,c++)).subscribe((0,Go._)(t,(function(e){null==a||a(e),i?p(e):t.next(e)}),(function(){o=!0}),void 0,(function(){if(o)try{u--;for(var e=function(){var e=l.shift();s?function(e,t,r,n,a){void 0===n&&(n=0),void 0===a&&(a=!1);var i=t.schedule((function(){r(),a?e.add(this.schedule(null,n)):this.unsubscribe()}),n);e.add(i)}(t,s,(function(){return f(e)})):f(e)};l.length&&u<n;)e();h()}catch(e){t.error(e)}})))};return e.subscribe((0,Go._)(t,p,(function(){d=!0,h()}))),function(){null==o||o()}}(t,n,e,r)})))}const Zo={prepareAnnotation:e=>{if((0,D.isString)(null==e?void 0:e.query)){const{query:t,...r}=e;return{...r,target:{refId:"annotation_query",query:t},mappings:{}}}return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,p.of)(e).pipe((e=>e.pipe(Yo((e=>{if(!(null==e?void 0:e.length))return(0,p.of)(void 0);if(1===e.length)return(0,p.of)(e[0]);const t={interpolate:e=>e};return(0,p.of)(e).pipe(i.standardTransformers.mergeTransformer.operator({},t),(0,Do.T)((e=>e[0])))})))),(0,Do.T)((e=>{if(!(null==e?void 0:e.length))return[];let r=!1,n=!1;const a={};for(const t of e.fields){a[(0,i.getFieldDisplayName)(t,e).toLowerCase()]=t}t||(t={});const s=[];for(const o of Jo){const l=t[o.key]||{};if(l.source===i.AnnotationEventFieldSource.Skip)continue;const u={key:o.key,split:o.split};if(l.source===i.AnnotationEventFieldSource.Text)u.text=l.value;else{const t=(l.value||o.key).toLowerCase();u.field=a[t],!u.field&&o.field&&(u.field=o.field(e))}(u.field||u.text)&&(s.push(u),"time"===u.key?r=!0:"text"===u.key&&(n=!0))}if(!r||!n)return console.error("Cannot process annotation fields. No time or text present."),[];const o=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const r of s){let n;if(r.text)n=r.text;else if(r.field&&(n=r.field.values.get(t),void 0!==n&&r.regex)){const e=r.regex.exec(n);e&&(n=e[1]?e[1]:e[0])}null!=n&&(r.split&&"string"==typeof n&&(n=n.split(",")),e[r.key]=n)}o.push(e)}return o})))}(t,e.mappings)};const Ko=[{key:"time",field:e=>e.fields.find((e=>e.type===i.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===i.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],Jo=[...s.config.publicDashboardAccessToken?[{key:"color"},{key:"isRegion"},{key:"source"}]:[],...Ko,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];const el=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];let tl=100;function rl(e,t,r,n){var a;if(e.annotationQuery&&function(e){const{type:t}=e;return!e.annotations||el.includes(t)}(e))return console.warn("Using deprecated annotationQuery method, please upgrade your datasource"),(0,p.from)(e.annotationQuery({range:t.state.value,rangeRaw:t.state.value.raw,annotation:r,dashboard:{getVariables:(0,s.getTemplateSrv)().getVariables}})).pipe((0,Do.T)((e=>({state:F.Done,events:e}))));const o={...Zo,...e.annotations},l={...null==(a=o.getDefaultQuery)?void 0:a.call(o),...r},u=o.prepareAnnotation(l);if(!u)return(0,p.of)({state:F.Done,events:[]});const c=o.prepareQuery(u);if(!c)return(0,p.of)({state:F.Done,events:[]});const d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=i.rangeUtil.calculateInterval(t.state.value,d,e.interval),f={__interval:{text:h.interval,value:h.interval},__interval_ms:{text:h.intervalMs.toString(),value:h.intervalMs},__annotation:{text:u.name,value:u},__sceneObject:Pt(n)},m={startTime:Date.now(),requestId:"AQ"+tl++,range:t.state.value,maxDataPoints:d,scopedVars:f,...h,app:i.CoreApp.Dashboard,timezone:t.getTimeZone(),targets:[{...c,refId:"Anno"}],...qe(n)};return(0,s.getRunRequest)()(e,m).pipe(Yo((e=>{const t=(null==e?void 0:e.series.length)?e.series:e.annotations;return(null==t?void 0:t.length)?(t.forEach((e=>{var t;(null==(t=e.meta)?void 0:t.dataTopic)||(e.meta={...e.meta||{},dataTopic:i.DataTopic.Annotations})})),o.processEvents(u,t).pipe((0,Do.T)((t=>({state:e.state,events:t||[]}))))):(0,p.of)({state:e.state,events:[]})})))}function nl(e){return"panel-alert"===e.eventType}(class extends To{constructor(e){super({isEnabled:!0,...e},["query"]),this._scopedVars={__sceneObject:Pt(this)}}onEnable(){this.publishEvent(new s.RefreshEvent,!0);const e=Ws.getTimeRange(this);this._timeRangeSub=e.subscribeToState((()=>{this.runWithTimeRange(e)}))}onDisable(){var e;this.publishEvent(new s.RefreshEvent,!0),null==(e=this._timeRangeSub)||e.unsubscribe()}runLayer(){Q();const e=Ws.getTimeRange(this);this.runWithTimeRange(e)}async runWithTimeRange(e){const{query:t}=this.state;if(this.querySub&&this.querySub.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())Q();else try{let r=rl(await this.resolveDataSource(t),e,t,this).pipe(je({type:"annotations",origin:this,cancel:()=>this.cancelQuery()}),(0,p.map)((e=>this.processEvents(t,e))));this.querySub=r.subscribe((e=>{this.publishResults(e)}))}catch(e){this.publishResults({...X,state:F.Error,errors:[{message:Ro(e)}]}),console.error("AnnotationsDataLayer error",e)}}async resolveDataSource(e){return await Ve(e.datasource||void 0,this._scopedVars)}processEvents(e,t){let r=(n=e,a=t.events||[],n.snapshotData&&delete(n=(0,D.cloneDeep)(n)).snapshotData,a.map((e=>{var t;const r={...e};switch(r.source=n,r.color=s.config.theme2.visualization.getColorByName(n.iconColor),r.type=n.name,r.isRegion=Boolean(r.timeEnd&&r.time!==r.timeEnd),null==(t=r.newState)?void 0:t.toLowerCase()){case"pending":r.color="yellow";break;case"alerting":r.color="red";break;case"ok":case"normal":r.color="green";break;case"no_data":case"nodata":r.color="gray"}return r})));var n,a;r=function(e){let t=[];const r=(0,D.partition)(e,"id"),n=(0,D.groupBy)(r[0],"id");return t=(0,D.map)(n,(e=>e.length>1&&!(0,D.every)(e,nl)?(0,D.find)(e,(e=>"panel-alert"!==e.eventType)):(0,D.head)(e))),t=(0,D.concat)(t,r[1]),t}(r);const o={...X,state:t.state},l=(0,i.arrayToDataFrame)(r);return l.meta={...l.meta,dataTopic:i.DataTopic.Annotations},o.series=[l],o}}).Component=function({model:e}){const{isHidden:t}=e.useState();if(t)return null;return h().createElement(Co,{layer:e})};class al extends T{constructor(){super(...arguments),this.isDataLayer=!0,this._results=new p.ReplaySubject(1),this._dataLayersMerger=new ts}subscribeToAllLayers(e){e.length>0?this.querySub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayerUpdateReceived.bind(this)):(this._results.next({origin:this,data:X}),this.setStateHelper({data:X}))}_onLayerUpdateReceived(e){var t;let r=[];for(const n of e)(null==(t=n.data)?void 0:t.series)&&(r=r.concat(n.data.series));const n={...X,series:r};this._results.next({origin:this,data:n}),this.setStateHelper({data:n})}getResultsStream(){return this._results}cancelQuery(){var e;null==(e=this.querySub)||e.unsubscribe()}setStateHelper(e){$e(this,e)}}class il extends al{constructor(e){var t,r;super({name:null!=(t=e.name)?t:"Data layers",layers:null!=(r=e.layers)?r:[]}),this.addActivationHandler((()=>this._onActivate()))}_onActivate(){return this._subs.add(this.subscribeToState(((e,t)=>{var r;e.layers!==t.layers&&(null==(r=this.querySub)||r.unsubscribe(),this.subscribeToAllLayers(e.layers))}))),this.subscribeToAllLayers(this.state.layers),()=>{var e;null==(e=this.querySub)||e.unsubscribe()}}}il.Component=({model:e})=>{const{layers:t}=e.useState();return h().createElement(h().Fragment,null,t.map((e=>h().createElement(e.Component,{model:e,key:e.state.key}))))};class sl extends T{}function ol({variable:e,layout:t,showAlways:r,hideLabel:n}){return C(e,{shouldActivateOrKeepAlive:!0}).hide!==i.VariableHide.hideVariable||r?"vertical"===t?h().createElement("div",{className:cl,"data-testid":at.pages.Dashboard.SubMenu.submenuItem},h().createElement(ll,{variable:e,layout:t,hideLabel:n}),h().createElement(e.Component,{model:e})):h().createElement("div",{className:ul,"data-testid":at.pages.Dashboard.SubMenu.submenuItem},h().createElement(ll,{variable:e,hideLabel:n}),h().createElement(e.Component,{model:e})):null}function ll({variable:e,layout:t,hideLabel:r}){var n;const{state:a}=e;if(e.state.hide===i.VariableHide.hideLabel||r)return null;const s=`var-${a.key}`,o=a.label||a.name;return h().createElement(Dt,{htmlFor:s,isLoading:a.loading,onCancel:()=>{var t;return null==(t=e.onCancel)?void 0:t.call(e)},label:o,error:a.error,layout:t,description:null!=(n=a.description)?n:void 0})}sl.Component=function({model:e}){const t=Ws.getVariables(e).useState();return h().createElement(h().Fragment,null,t.variables.map((t=>h().createElement(ol,{key:t.state.key,variable:t,layout:e.state.layout}))))};const ul=(0,it.css)({display:"flex","> :nth-child(2)":(0,it.css)({borderTopLeftRadius:0,borderBottomLeftRadius:0})}),cl=(0,it.css)({display:"flex",flexDirection:"column"});(class extends T{}).Component=function({model:e}){const t=Ws.lookupVariable(e.state.variableName,e);if(!t)return null;return h().createElement(ol,{key:t.state.key,variable:t,layout:e.state.layout,showAlways:!0})};class dl extends T{constructor(e){super(e),this._variablesThatHaveChanged=new Set,this._variablesToUpdate=new Set,this._updating=new Map,this._variableValueRecorder=new ze,this._variableDependency=new pl(this._handleParentVariableUpdatesCompleted.bind(this)),this._onActivate=()=>{const e=Ws.getTimeRange(this);this._subs.add(this.subscribeToEvent(ne,(e=>this._handleVariableValueChanged(e.payload)))),this._subs.add(e.subscribeToState((()=>{this._refreshTimeRangeBasedVariables()}))),this._subs.add(this.subscribeToState(this._onStateChanged)),this._checkForVariablesThatChangedWhileInactive();for(const e of this.state.variables)this._variableNeedsUpdate(e)&&this._variablesToUpdate.add(e);return this._updateNextBatch(),this._onDeactivate},this._onDeactivate=()=>{var e;for(const t of this._updating.values())null==(e=t.subscription)||e.unsubscribe();for(const e of this.state.variables)this._variablesToUpdate.has(e)||this._updating.has(e)||this._variableValueRecorder.recordCurrentValue(e);this._variablesToUpdate.clear(),this._updating.clear()},this._onStateChanged=(e,t)=>{const r=this._variablesToUpdate.size;for(const r of t.variables)if(!e.variables.includes(r)){const e=this._updating.get(r);(null==e?void 0:e.subscription)&&e.subscription.unsubscribe(),this._updating.delete(r),this._variablesToUpdate.delete(r)}for(const r of e.variables)t.variables.includes(r)||this._variableNeedsUpdate(r)&&this._variablesToUpdate.add(r);0===r&&this._variablesToUpdate.size>0&&this._updateNextBatch()},this.addActivationHandler(this._onActivate)}getByName(e){return this.state.variables.find((t=>t.state.name===e))}_refreshTimeRangeBasedVariables(){for(const e of this.state.variables)"refresh"in e.state&&e.state.refresh===i.VariableRefresh.onTimeRangeChanged&&this._variablesToUpdate.add(e);this._updateNextBatch()}_checkForVariablesThatChangedWhileInactive(){if(this._variableValueRecorder.hasValues())for(const e of this.state.variables)this._variableValueRecorder.hasValueChanged(e)&&(hl(e,"Changed while in-active"),this._addDependentVariablesToUpdateQueue(e))}_variableNeedsUpdate(e){return!e.isLazy&&(!!e.validateAndUpdate&&(!this._variableValueRecorder.hasRecordedValue(e)||(hl(e,"Skipping updateAndValidate current value valid"),!1)))}_updateNextBatch(){for(const e of this._variablesToUpdate){if(!e.validateAndUpdate)throw new Error("Variable added to variablesToUpdate but does not have validateAndUpdate");if(this._updating.has(e))continue;if(Ws.hasVariableDependencyInLoadingState(e))continue;const t={variable:e};this._updating.set(e,t),hl(e,"updateAndValidate started"),t.subscription=e.validateAndUpdate().subscribe({next:()=>this._validateAndUpdateCompleted(e),complete:()=>this._validateAndUpdateCompleted(e),error:t=>this._handleVariableError(e,t)})}}_validateAndUpdateCompleted(e){var t;if(!this._updating.has(e))return;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),hl(e,"updateAndValidate completed"),this._notifyDependentSceneObjects(e),this._updateNextBatch()}cancel(e){var t;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e)}_handleVariableError(e,t){var r;const n=this._updating.get(e);null==(r=null==n?void 0:n.subscription)||r.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),e.setState({loading:!1,error:t.message}),console.error("SceneVariableSet updateAndValidate error",t),hl(e,"updateAndValidate error",t),this._notifyDependentSceneObjects(e),this._updateNextBatch()}_handleVariableValueChanged(e){this._variablesThatHaveChanged.add(e),this._addDependentVariablesToUpdateQueue(e),this._updating.has(e)||(this._updateNextBatch(),this._notifyDependentSceneObjects(e))}_handleParentVariableUpdatesCompleted(e,t){t&&this._addDependentVariablesToUpdateQueue(e),this._variablesToUpdate.size>0&&0===this._updating.size&&this._updateNextBatch()}_addDependentVariablesToUpdateQueue(e){for(const t of this.state.variables)t.variableDependency&&t.variableDependency.hasDependencyOn(e.state.name)&&(hl(t,"Added to update queue, dependant variable value changed"),this._updating.has(t)&&t.onCancel&&t.onCancel(),this._variablesToUpdate.add(t))}_notifyDependentSceneObjects(e){this.parent&&(this._traverseSceneAndNotify(this.parent,e,this._variablesThatHaveChanged.has(e)),this._variablesThatHaveChanged.delete(e))}_traverseSceneAndNotify(e,t,r){if(this!==e&&e.isActive){if(e.state.$variables&&e.state.$variables!==this){const r=e.state.$variables.getByName(t.state.name);if(null==r?void 0:r.isAncestorLoading)t=r;else if(r)return}e.variableDependency&&e.variableDependency.variableUpdateCompleted(t,r),e.forEachChild((e=>this._traverseSceneAndNotify(e,t,r)))}}isVariableLoadingOrWaitingToUpdate(e){return!(!e.isAncestorLoading||!e.isAncestorLoading())||(!(!this._variablesToUpdate.has(e)&&!this._updating.has(e))||Ws.hasVariableDependencyInLoadingState(e))}}function hl(e,t,r){Q(0,e.state.name)}class pl{constructor(e){this._variableUpdatesCompleted=e,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(e){return!1}variableUpdateCompleted(e,t){this._variableUpdatesCompleted(e,t)}}class fl extends Pe{constructor(e){super({type:"custom",query:"",value:"",text:"",options:[],name:"",...e}),this._variableDependency=new Ss(this,{statePaths:["query"]})}getValueOptions(e){var t;const r=(null!=(t=Ws.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g))?t:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const r=null!=(t=/^(.+)\s:\s(.+)$/g.exec(e))?t:[];if(3===r.length){const[,e,t]=r;return{label:e.trim(),value:t.trim()}}return{label:e.trim(),value:e.trim()}}));return r.length||(this.skipNextValidation=!0),(0,p.of)(r)}}fl.Component=({model:e})=>h().createElement(yt,{model:e});class ml extends Pe{constructor(e){super({type:"datasource",value:"",text:"",options:[],name:"",regex:"",pluginId:"",...e}),this._variableDependency=new Ss(this,{statePaths:["regex"]})}getValueOptions(e){if(!this.state.pluginId)return(0,p.of)([]);const t=(0,s.getDataSourceSrv)().getList({metrics:!0,variables:!1,pluginId:this.state.pluginId});let r;if(this.state.regex){const e=Ws.interpolate(this,this.state.regex,void 0,"regex");r=(0,i.stringToJsRegex)(e)}const n=[];for(let e=0;e<t.length;e++){const a=t[e];gl(a,r)&&n.push({label:a.name,value:a.uid}),this.state.defaultOptionEnabled&&vl(a,r)&&n.push({label:"default",value:"default"})}return 0===n.length?this.setState({error:"No data sources found"}):this.state.error&&this.setState({error:null}),(0,p.of)(n)}}function gl(e,t){return!t||t.exec(e.name)}function vl(e,t){return!!e.isDefault&&(!t||t.exec("default"))}function bl(e,t){const r=["A","B","C","D","E","F","G","H"],n=[];if(t>5)return[];for(const a of r){const r=`${e}${a}`;n.push({name:r,children:bl(r,t+1)})}return n}function yl(e,t,r){if(r>=t.length)return e;if("*"===t[r])return e;const n=t[r];let a=[],i=[n];n.startsWith("{")&&(i=n.replace(/\{|\}/g,"").split(","));for(const n of e)for(const e of i)if(-1!==e.indexOf("*")){const i=e.replace("*","");new RegExp(`^${i}.*`,"gi").test(n.name)&&(a=a.concat(yl([n],t,r+1)))}else n.name===e&&(a=a.concat(yl(n.children,t,r+1)));return a}function Ol(e){if(0===e.indexOf("value"))return[{name:e,children:[]}];return yl(bl("",0),e.split("."),0)}ml.Component=({model:e})=>h().createElement(yt,{model:e});function wl({model:e}){const{value:t,key:r,loading:n}=e.useState(),a=(0,c.useCallback)((t=>{e.setValue(t.currentTarget.value)}),[e]),i=(0,c.useCallback)((t=>{"Enter"===t.key&&e.setValue(t.currentTarget.value)}),[e]);return h().createElement(Ge.AutoSizeInput,{id:r,placeholder:"Enter value",minWidth:15,maxWidth:30,value:t,loading:n,onBlur:a,onKeyDown:i})}(class extends Pe{constructor(e,t=!1){super({type:"custom",name:"Test",value:"Value",text:"Text",query:"Query",options:[],refresh:i.VariableRefresh.onDashboardLoad,updateOptions:!0,...e}),this.completeUpdate=new p.Subject,this.isGettingValues=!0,this.getValueOptionsCount=0,this.isLazy=!1,this._variableDependency=new Ss(this,{statePaths:["query"]}),this.isLazy=t}getValueOptions(e){const{delayMs:t}=this.state;this.getValueOptionsCount+=1;const r=Ws.getQueryController(this);return new p.Observable((e=>{const n={type:"variable",origin:this,cancel:()=>e.complete()};if(r&&r.queryStarted(n),this.setState({loading:!0}),this.state.throwError)throw new Error(this.state.throwError);const a=Ws.interpolate(this,this.state.query),i=this.getOptions(a),s=this.completeUpdate.subscribe({next:()=>{const t={issuedQuery:a,loading:!1};this.state.updateOptions&&(t.options=i),this.setState(t),e.next(i),e.complete()}});let o;return t?o=window.setTimeout((()=>this.signalUpdateCompleted()),t):0===t&&this.signalUpdateCompleted(),this.isGettingValues=!0,()=>{s.unsubscribe(),window.clearTimeout(o),this.isGettingValues=!1,this.state.loading&&this.setState({loading:!1}),r&&r.queryCompleted(n)}}))}cancel(){const e=A(this,(e=>e instanceof dl?e:void 0));null==e||e.cancel(this)}getOptions(e){return this.state.optionsToReturn?this.state.optionsToReturn:Ol(e).map((e=>({label:e.name,value:e.name})))}signalUpdateCompleted(){this.completeUpdate.next(1)}}).Component=({model:e})=>h().createElement(yt,{model:e});(class extends T{constructor(e){super({type:"textbox",value:"",name:"",...e}),this._urlSync=new q(this,{keys:()=>[this.getKey()]})}getValue(){return this.state.value}setValue(e){e!==this.state.value&&(this.setState({value:e}),this.publishEvent(new ne(this),!0))}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t=e[this.getKey()];"string"==typeof t&&this.setValue(t)}}).Component=({model:e})=>h().createElement(wl,{model:e});(class extends T{constructor(e){super({type:"interval",value:"",intervals:["1m","10m","30m","1h","6h","12h","1d","7d","14d","30d"],name:"",autoStepCount:30,autoMinInterval:"10s",autoEnabled:!1,refresh:eo.CO.onTimeRangeChanged,...e}),this._onChange=e=>{this.setState({value:e.value}),this.publishEvent(new ne(this),!0)},this._urlSync=new q(this,{keys:()=>[this.getKey()]})}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},r=e[this.getKey()];"string"==typeof r&&(r.startsWith("$__auto_interval_")?t.value=ye:t.value=r),this.setState(t)}getOptionsForSelect(){const{value:e,intervals:t,autoEnabled:r}=this.state;let n=t.map((e=>({value:e,label:e})));return r&&(n=[{value:ye,label:"Auto"},...n]),e&&!n.some((t=>t.value===e))&&n.push({value:e,label:e}),n}getValue(){const{value:e,autoStepCount:t,autoMinInterval:r}=this.state;return e===ye?this.getAutoRefreshInteval(t,r):e}getAutoRefreshInteval(e,t){const r=Ws.getTimeRange(this).state.value;return i.rangeUtil.calculateInterval(r,e,t).interval}validateAndUpdate(){const{value:e,intervals:t}=this.state;let r=!1;if(e===ye)r=!0;else if(!e&&t.length>0){const e=t[0];this.setState({value:e}),r=!0}return r&&this.publishEvent(new ne(this),!0),(0,p.of)({})}}).Component=({model:e})=>{const{key:t,value:r}=e.useState();return h().createElement(Ge.Select,{id:t,placeholder:"Select value",width:"auto",value:r,tabSelectsValue:!1,options:e.getOptionsForSelect(),onChange:e._onChange})};var xl,Sl,_l=e=>{throw TypeError(e)},$l=(e,t,r)=>t.has(e)||_l("Cannot "+r),El=(e,t,r)=>($l(e,t,"read from private field"),r?r.call(e):t.get(e)),Pl=(e,t,r)=>t.has(e)?_l("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Rl=(e,t,r,n)=>($l(e,t,"write to private field"),t.set(e,r),r);class Tl extends i.BusEventWithPayload{}Tl.type="new-scene-object-added";class Cl{constructor(e={},t=s.locationService){this._urlKeyMapper=new Hs,this._options=e,this._locationService=t,this._paramsCache=new kl(t)}initSync(e){var t;if(this._subs&&(Q(0,0,null==(t=this._sceneRoot)||t.state.key),this._subs.unsubscribe()),Q(0,0,e.state.key),this._sceneRoot=e,this._subs=new p.Subscription,this._subs.add(e.subscribeToEvent(S,(e=>{this.handleSceneObjectStateChanged(e.payload.changedObject)}))),this._subs.add(e.subscribeToEvent(Tl,(e=>{this.handleNewObject(e.payload)}))),this._urlKeyMapper.clear(),this._lastLocation=this._locationService.getLocation(),this.handleNewObject(this._sceneRoot),this._options.updateUrlOnInit){const t=Ys(e);(function(e,t){for(let r in e)if(!Js(t.getAll(r),e[r]))return!0;return!1})(t,this._paramsCache.getParams())&&this._locationService.partial(t,!0)}}cleanUp(e){this._sceneRoot===e&&(Q(),this._subs&&(this._subs.unsubscribe(),this._subs=void 0,Q(0,0,(this._sceneRoot.state.key,e.state.key))),this._sceneRoot=void 0,this._lastLocation=void 0)}handleNewLocation(e){this._sceneRoot&&this._lastLocation!==e&&(Q(),this._lastLocation=e,Zs(this._sceneRoot,this._paramsCache.getParams(),this._urlKeyMapper))}handleNewObject(e){this._sceneRoot&&Zs(e,this._paramsCache.getParams(),this._urlKeyMapper)}handleSceneObjectStateChanged(e){var t,r;if(!e.urlSync)return;const n=e.urlSync.getUrlState(),a=this._locationService.getSearch(),i={};for(const[t,r]of Object.entries(n)){const n=this._urlKeyMapper.getUniqueKey(t,e);Js(a.getAll(n),r)||(i[n]=r)}if(Object.keys(i).length>0){const a=!0!==(null==(r=(t=e.urlSync).shouldCreateHistoryStep)?void 0:r.call(t,n));Q(),this._locationService.partial(i,a),this._lastLocation=this._locationService.getLocation()}}getUrlState(e){return Ys(e)}}class kl{constructor(e){this.locationService=e,Pl(this,xl),Pl(this,Sl)}getParams(){const e=this.locationService.getLocation();return El(this,Sl)===e||(Rl(this,Sl,e),Rl(this,xl,new URLSearchParams(e.search))),El(this,xl)}}function Dl(e,t={}){const r=(0,a.useLocation)(),n=Ee(),[i,s]=(0,c.useState)(!1),o=function(e,t){return(0,c.useMemo)((()=>new Cl({updateUrlOnInit:e.updateUrlOnInit,createBrowserHistorySteps:e.createBrowserHistorySteps},t)),[e.updateUrlOnInit,e.createBrowserHistorySteps,t])}(t,n);return(0,c.useEffect)((()=>(o.initSync(e),s(!0),()=>o.cleanUp(e))),[e,o]),(0,c.useEffect)((()=>{const e=n.getLocation(),t=e!==r?e:r;e!==r&&Q(),o.handleNewLocation(t)}),[e,o,r,n]),i}function Il({children:e,scene:t,updateUrlOnInit:r,createBrowserHistorySteps:n}){return Dl(t,{updateUrlOnInit:r,createBrowserHistorySteps:n})?e:null}xl=new WeakMap,Sl=new WeakMap;class Al extends T{constructor(e){super(e),this.addActivationHandler((()=>{const e=function(e){const t=window.__grafanaSceneContext;return Q(),window.__grafanaSceneContext=e,()=>{window.__grafanaSceneContext===e&&(Q(),window.__grafanaSceneContext=t)}}(this);return()=>{e()}}))}}Al.Component=function({model:e}){const{body:t,controls:r}=e.useState(),n=(0,Ge.useStyles2)(Ll);return h().createElement("div",{className:n.container},r&&h().createElement("div",{className:n.controls},r.map((e=>h().createElement(e.Component,{key:e.state.key,model:e})))),h().createElement("div",{className:n.body},h().createElement(t.Component,{model:t})))};const Ll=e=>({container:(0,it.css)({flexGrow:1,display:"flex",gap:e.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,it.css)({flexGrow:1,display:"flex",gap:e.spacing(1)}),controls:(0,it.css)({display:"flex",gap:e.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})});class Nl extends T{addItem(e){this.setState({items:this.state.items?[...this.state.items,e]:[e]})}setItems(e){this.setState({items:e})}}function Ml(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={loading:!1});var n,a,i=(0,c.useRef)(0),s=(n=(0,c.useRef)(!1),a=(0,c.useCallback)((function(){return n.current}),[]),(0,c.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),a),o=(0,c.useState)(r),l=o[0],u=o[1],d=(0,c.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=++i.current;return l.loading||u((function(e){return(0,Io.Cl)((0,Io.Cl)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&n===i.current&&u({value:e,loading:!1}),e}),(function(e){return s()&&n===i.current&&u({error:e,loading:!1}),e}))}),t);return[l,d]}async function jl(e,t,r,n){var a,i,o,l;const u=null==(a=e.request)?void 0:a.targets;if(!u)return"";const{from:c,to:d}=r,h=null==(i=e.request)?void 0:i.filters,p={__sceneObject:Pt(t)},f=(await Promise.allSettled(u.map((async e=>{var t;const r=await(0,s.getDataSourceSrv)().get(e.datasource);return(null==(t=r.interpolateVariablesInQueries)?void 0:t.call(r,[e],null!=p?p:{},h)[0])||e})))).filter((e=>"fulfilled"===e.status)).map((e=>e.value)).map((e=>{var t;return null!=(t=null==n?void 0:n(e))?t:e})),m=null!=f?f:[];let g=new Set(m.map((e=>{var t;return null==(t=e.datasource)?void 0:t.uid}))).size>1?"-- Mixed --":null==(l=null==(o=m.find((e=>{var t;return!!(null==(t=e.datasource)?void 0:t.uid)})))?void 0:o.datasource)?void 0:l.uid;if((null==m?void 0:m.length)&&g&&c&&d){return`/explore?left=${encodeURIComponent(JSON.stringify({datasource:g,queries:m,range:{from:c,to:d}}))}`}return""}Nl.Component=function({model:e}){const{items:t=[]}=e.useState(),r=h().useRef(null);(0,c.useEffect)((()=>{r.current&&r.current.focus()}),[]);const n=e=>e.map((e=>{switch(e.type){case"divider":return h().createElement(Ge.Menu.Divider,{key:e.text});case"group":return h().createElement(Ge.Menu.Group,{key:e.text,label:e.text},e.subMenu?n(e.subMenu):void 0);default:return h().createElement(Ge.Menu.Item,{key:e.text,label:e.text,icon:e.iconClassName,childItems:e.subMenu?n(e.subMenu):void 0,url:e.href,onClick:e.onClick,shortcut:e.shortcut,testId:at.components.Panels.Panel.menuItems(e.text)})}}));return h().createElement(Ge.Menu,{ref:r},n(t))};(class extends T{constructor(e={}){super({options:e})}}).Component=function({model:e}){const{options:t}=e.useState(),{data:r}=Ws.getData(e).useState(),{from:n,to:a}=Ws.getTimeRange(e).useState(),{value:i}=function(e,t){void 0===t&&(t=[]);var r=Ml(e,t,{loading:!0}),n=r[0],a=r[1];return(0,c.useEffect)((function(){a()}),[a]),n}((async()=>r?jl(r,e,{from:n,to:a},t.transform):""),[r,e,n,a]),o=(0,s.useReturnToPrevious)();if(i)return h().createElement(Ge.LinkButton,{key:"explore",icon:"compass",size:"sm",variant:"secondary",href:i,onClick:()=>{var e;t.returnToPrevious&&o(t.returnToPrevious.title,t.returnToPrevious.href),null==(e=t.onClick)||e.call(t)}},"Explore");return null};function Ql(e){return e instanceof tu}(class extends T{}).Component=function({model:e}){const{body:t}=e.useState(),r=e.parent;if(r&&(n=r,!(n instanceof Kl))&&!Ql(r))throw new Error("SceneGridItem must be a child of SceneGridLayout or SceneGridRow");var n;if(!t)return null;return h().createElement(t.Component,{model:t})};var Vl=r(2548),zl=r.n(Vl);const Fl=function(e){(0,c.useEffect)(e,[])};function Bl(){const e=(0,c.useRef)(void 0);return null!=e.current||(e.current=(0,D.uniqueId)()),e.current}const Xl=h().forwardRef((({children:e,onLoad:t,onChange:r,className:n,...a},i)=>{const s=Bl(),{hideEmpty:o}=(0,Ge.useStyles2)(ql),[l,u]=(0,c.useState)(!1),[d,p]=(0,c.useState)(!1),f=(0,c.useRef)(null);return(0,c.useImperativeHandle)(i,(()=>f.current)),Fl((()=>{Xl.addCallback(s,(e=>{!l&&e.isIntersecting&&(u(!0),null==t||t()),p(e.isIntersecting),null==r||r(e.isIntersecting)}));const e=f.current;return e&&Xl.observer.observe(e),()=>{e&&Xl.observer.unobserve(e),delete Xl.callbacks[s],0===Object.keys(Xl.callbacks).length&&Xl.observer.disconnect()}})),h().createElement("div",{id:s,ref:f,className:`${o} ${n}`,...a},!l&&" ",l&&("function"==typeof e?e({isInView:d}):e))}));function ql(){return{hideEmpty:(0,it.css)({"&:empty":{display:"none"}})}}Xl.displayName="LazyLoader",Xl.callbacks={},Xl.addCallback=(e,t)=>Xl.callbacks[e]=t,Xl.observer=new IntersectionObserver((e=>{for(const t of e)"function"==typeof Xl.callbacks[t.target.id]&&Xl.callbacks[t.target.id](t)}),{rootMargin:"100px"});const Ul=h().forwardRef(((e,t)=>{var r;const{grid:n,layoutItem:a,index:i,totalCount:s,isLazy:o,style:l,onLoad:u,onChange:c,children:d,...p}=e,f=n.getSceneLayoutChild(a.i),m=null==(r=f.getClassName)?void 0:r.call(f),g=h().createElement(f.Component,{model:f,key:f.state.key});return o?h().createElement(Xl,{...p,key:f.state.key,"data-griditem-key":f.state.key,className:(0,it.cx)(m,e.className),style:l,ref:t},g,d):h().createElement("div",{...p,ref:t,key:f.state.key,"data-griditem-key":f.state.key,className:(0,it.cx)(m,e.className),style:l},g,d)}));function Wl(e,t,r){e.current?t?e.current.classList.add("react-grid-layout--enable-move-animations"):e.current.classList.remove("react-grid-layout--enable-move-animations"):r||setTimeout((()=>Wl(e,t,!0)),50)}Ul.displayName="GridItemWrapper";const Hl=h().forwardRef((({handleAxis:e,...t},r)=>{const n=(0,Ge.useStyles2)(Gl);return h().createElement("div",{ref:r,...t,className:`${n} scene-resize-handle`},h().createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h().createElement("path",{d:"M21 15L15 21M21 8L8 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}));function Gl(e){return(0,it.css)({position:"absolute",bottom:0,right:0,zIndex:999,padding:e.spacing(1.5,0,0,1.5),color:e.colors.border.strong,cursor:"se-resize","&:hover":{color:e.colors.text.link},svg:{display:"block"},".react-resizable-hide &":{display:"none"}})}Hl.displayName="ResizeHandle";class Yl extends i.BusEventWithPayload{}Yl.type="scene-grid-layout-drag-start";const Zl=class e extends T{constructor(e){super({...e,children:Jl(e.children)}),this._skipOnLayoutChange=!1,this._oldLayout=[],this._loadOldLayout=!1,this.onLayoutChange=e=>{if(this._skipOnLayoutChange)this._skipOnLayoutChange=!1;else{this._loadOldLayout&&(e=[...this._oldLayout],this._loadOldLayout=!1);for(const n of e){const e=this.getSceneLayoutChild(n.i),a={x:n.x,y:n.y,width:n.w,height:n.h};t=e.state,r=a,(t.x!==r.x||t.y!==r.y||t.width!==r.width||t.height!==r.height)&&e.setState({...a})}var t,r;this.setState({children:Jl(this.state.children)})}},this.onResizeStop=(e,t,r)=>{this.getSceneLayoutChild(r.i).setState({width:r.w,height:r.h})},this.onDragStart=e=>{this._oldLayout=[...e]},this.onDragStop=(e,t,r)=>{const n=this.getSceneLayoutChild(r.i);e=eu(e);for(let t=0;t<e.length;t++){const r=e[t],n=this.getSceneLayoutChild(r.i),a=n.state;(null==a?void 0:a.x)===r.x&&(null==a?void 0:a.y)===r.y||n.setState({x:r.x,y:r.y})}const a=e.findIndex((e=>e.i===r.i));let i=this.findGridItemSceneParent(e,a-1),s=this.state.children;n instanceof tu&&i instanceof tu&&(this.isRowDropValid(e,r,a)||(this._loadOldLayout=!0),i=this),i!==n.parent&&(s=this.moveChildTo(n,i)),this.setState({children:Jl(s)}),this._skipOnLayoutChange=!0}}isDraggable(){var e;return null!=(e=this.state.isDraggable)&&e}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}getDragHooks(){return{onDragStart:(e,t)=>{this.publishEvent(new Yl({evt:e,panel:t}),!0)}}}toggleRow(e){var t,r;if(!e.state.isCollapsed)return e.setState({isCollapsed:!0}),void this.setState({});const n=e.state.children;if(0===n.length)return e.setState({isCollapsed:!1}),void this.setState({});const a=e.state.y,i=(null!=(t=n[0].state.y)?t:a)-(a+1);let s=a;for(const e of n){const t={...e.state};t.y=null!=(r=t.y)?r:a,t.y-=i,t.y!==e.state.y&&e.setState(t),s=Math.max(s,Number(t.y)+Number(t.height))}const o=s-a-1;for(const t of this.state.children)if(t.state.y>a&&this.pushChildDown(t,o),Ql(t)&&t!==e)for(const e of t.state.children)e.state.y>a&&this.pushChildDown(e,o);e.setState({isCollapsed:!1}),this.setState({})}ignoreLayoutChange(e){this._skipOnLayoutChange=e}getSceneLayoutChild(e){for(const t of this.state.children){if(t.state.key===e)return t;if(t instanceof tu)for(const r of t.state.children)if(r.state.key===e)return r}throw new Error("Scene layout child not found for GridItem")}pushChildDown(e,t){e.setState({y:e.state.y+t})}findGridItemSceneParent(e,t){for(let r=t;r>=0;r--){const t=e[r],n=this.getSceneLayoutChild(t.i);if(n instanceof tu)return n.state.isCollapsed?this:n}return this}isRowDropValid(t,r,n){if(t[t.length-1].i===r.i)return!0;const a=this.getSceneLayoutChild(t[n+1].i);return a instanceof tu||a.parent instanceof e}moveChildTo(t,r){const n=t.parent;let a=this.state.children;const i=t.clone({key:t.state.key});if(n instanceof tu){const e=n.clone();if(e.setState({children:e.state.children.filter((e=>e.state.key!==t.state.key))}),a=a.map((t=>t===n?e:t)),r instanceof tu){const e=r.clone();e.setState({children:[...e.state.children,i]}),a=a.map((t=>t===r?e:t))}else a=[...a,i]}else if(!(r instanceof e)){a=a.filter((e=>e.state.key!==t.state.key));const e=r.clone();e.setState({children:[...e.state.children,i]}),a=a.map((t=>t===r?e:t))}return a}toGridCell(e){var t,r;const n=e.state;let a=null!=(t=n.x)?t:0,i=null!=(r=n.y)?r:0;const s=Number.isInteger(Number(n.width))?Number(n.width):4,o=Number.isInteger(Number(n.height))?Number(n.height):4;let l=e.state.isDraggable,u=e.state.isResizable;return e instanceof tu&&(l=!!e.state.isCollapsed,u=!1),{i:e.state.key,x:a,y:i,h:o,w:s,isResizable:u,isDraggable:l}}buildGridLayout(e,t){let r=[];for(const e of this.state.children)if(r.push(this.toGridCell(e)),e instanceof tu&&!e.state.isCollapsed)for(const t of e.state.children)r.push(this.toGridCell(t));return r=eu(r),this.state.UNSAFE_fitPanels&&(r=function(e,t){const r=t-32,n=Math.max(...e.map((e=>e.h+e.y)))/Math.floor(r/38);return e.map((e=>({...e,y:Math.round(e.y/n)||0,h:Math.round(e.h/n)||1})))}(r,t)),e<768?(this._skipOnLayoutChange=!0,r.map((e=>({...e,w:24})))):(this._skipOnLayoutChange=!1,r)}};Zl.Component=function({model:e}){const{children:t,isLazy:r,isDraggable:n,isResizable:a}=e.useState(),[i,{width:s,height:o}]=oo(),l=(0,c.useRef)(null);return(0,c.useEffect)((()=>{Wl(l,!!n)}),[n]),function(e){if(e.some((e=>void 0===e.state.height||void 0===e.state.width||void 0===e.state.x||void 0===e.state.y)))throw new Error("All children must have a size specified")}(t),h().createElement("div",{ref:i,style:{flex:"1 1 auto",position:"relative",zIndex:1,width:"100%"}},((t,i)=>{if(!t||!i)return null;const s=e.buildGridLayout(t,i);return h().createElement("div",{ref:l,style:{width:`${t}px`,height:"100%"},className:"react-grid-layout"},h().createElement(zl(),{width:t,isDraggable:n&&t>768,isResizable:null!=a&&a,containerPadding:[0,0],useCSSTransforms:!0,margin:[8,8],cols:24,rowHeight:30,draggableHandle:`.grid-drag-handle-${e.state.key}`,draggableCancel:".grid-drag-cancel",layout:s,onDragStart:e.onDragStart,onDragStop:e.onDragStop,onResizeStop:e.onResizeStop,onLayoutChange:e.onLayoutChange,isBounded:!1,resizeHandle:h().createElement(Hl,null)},s.map(((t,n)=>h().createElement(Ul,{key:t.i,grid:e,layoutItem:t,index:n,isLazy:r,totalCount:s.length})))))})(s,o))};let Kl=Zl;function Jl(e){return e.forEach((e=>{e instanceof tu&&e.setState({children:Jl(e.state.children)})})),[...e].sort(((e,t)=>e.state.y-t.state.y||e.state.x-t.state.x))}function eu(e){return[...e].sort(((e,t)=>e.y-t.y||e.x-t.x))}class tu extends T{constructor(e){super({children:e.children||[],isCollapsible:e.isCollapsible||!0,title:e.title||"",...e,x:0,height:1,width:24}),this._variableDependency=new Ss(this,{statePaths:["title"],handleTimeMacros:!0}),this.onCollapseToggle=()=>{this.state.isCollapsible&&this.getGridLayout().toggleRow(this)}}getGridLayout(){const e=this.parent;if(!(e&&e instanceof Kl))throw new Error("SceneGridRow must be a child of SceneGridLayout");return e}getUrlState(){return{rowc:this.state.isCollapsed?"1":"0"}}updateFromUrl(e){null!=e.rowc&&e.rowc!==this.getUrlState().rowc&&this.onCollapseToggle()}}tu.Component=function({model:e}){const t=(0,Ge.useStyles2)(ru),{isCollapsible:r,isCollapsed:n,title:a,actions:i,children:s}=e.useState(),o=e.getGridLayout(),l=o.getDragClass(),u=o.isDraggable(),c=s?s.length:0,d=1===c?"panel":"panels";return h().createElement("div",{className:(0,it.cx)(t.row,n&&t.rowCollapsed)},h().createElement("div",{className:t.rowTitleAndActionsGroup},h().createElement("button",{onClick:e.onCollapseToggle,className:t.rowTitleButton,"aria-label":n?"Expand row":"Collapse row","data-testid":at.components.DashboardRow.title(Ws.interpolate(e,a,void 0,"text"))},r&&h().createElement(Ge.Icon,{name:n?"angle-right":"angle-down"}),h().createElement("span",{className:t.rowTitle,role:"heading"},Ws.interpolate(e,a,void 0,"text"))),h().createElement("span",{className:(0,it.cx)(t.panelCount,n&&t.panelCountCollapsed)},"(",c," ",d,")"),i&&h().createElement("div",{className:t.rowActions},h().createElement(i.Component,{model:i}))),u&&n&&h().createElement("div",{className:(0,it.cx)(t.dragHandle,l)},h().createElement(Ge.Icon,{name:"draggabledots"})))};const ru=e=>({row:(0,it.css)({width:"100%",height:"30px",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowTitleButton:(0,it.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",minWidth:0,gap:e.spacing(1)}),rowCollapsed:(0,it.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),rowTitle:(0,it.css)({fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",flexGrow:1,minWidth:0}),collapsedInfo:(0,it.css)({fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary,display:"flex",alignItems:"center",flexGrow:1}),rowTitleAndActionsGroup:(0,it.css)({display:"flex",minWidth:0,"&:hover, &:focus-within":{"& > div":{opacity:1}}}),rowActions:(0,it.css)({display:"flex",whiteSpace:"nowrap",opacity:0,transition:"200ms opacity ease-in 200ms","&:hover, &:focus-within":{opacity:1}}),dragHandle:(0,it.css)({display:"flex",padding:e.spacing(0,1),alignItems:"center",justifyContent:"flex-end",cursor:"move",color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary}}),panelCount:(0,it.css)({whiteSpace:"nowrap",paddingLeft:e.spacing(2),color:e.colors.text.secondary,fontStyle:"italic",fontSize:e.typography.size.sm,fontWeight:"normal",display:"none",lineHeight:"30px"}),panelCountCollapsed:(0,it.css)({display:"inline-block"})});(class extends T{constructor(){super(...arguments),this.onToggle=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onRemove=()=>{const e=this.parent;"body"in e.state&&e.setState({body:void 0})}}}).Component=function({model:e}){const{title:t,isCollapsed:r,canCollapse:n,canRemove:a,body:i,controls:s}=e.useState(),o=(0,Ge.useStyles2)(ru),l=(0,Ge.useStyles2)(nu),u=(null!=s?s:[]).map((e=>h().createElement(e.Component,{key:e.state.key,model:e})));a&&u.push(h().createElement(Ge.ToolbarButton,{icon:"times",variant:"default",onClick:e.onRemove,key:"remove-button","aria-label":"Remove scene"}));return h().createElement("div",{className:l.wrapper},h().createElement("div",{className:(0,it.cx)(l.row,r&&l.rowCollapsed)},h().createElement("button",{onClick:e.onToggle,className:o.rowTitleButton,"aria-label":r?"Expand scene":"Collapse scene"},n&&h().createElement(Ge.Icon,{name:r?"angle-right":"angle-down"}),h().createElement("span",{className:o.rowTitle,role:"heading"},Ws.interpolate(e,t,void 0,"text"))),h().createElement("div",{className:l.actions},u)),!r&&h().createElement(i.Component,{model:i}))};const nu=e=>({wrapper:(0,it.css)({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(1)}),row:(0,it.css)({width:"100%",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowCollapsed:(0,it.css)({borderBottom:`1px solid ${e.colors.border.weak}`,paddingBottom:e.spacing(1)}),actions:(0,it.css)({display:"flex",alignItems:"center",gap:e.spacing(1),justifyContent:"flex-end",flexGrow:1})});(class extends T{constructor(){super(...arguments),this._variableDependency=new Ss(this,{statePaths:["text"]})}}).Component=({model:e})=>{const{text:t,fontSize:r=20,align:n="left",key:a,spacing:i}=e.useState(),s=(0,Ge.useTheme2)(),o=(0,it.css)({fontSize:r,display:"flex",flexGrow:1,alignItems:"center",padding:i?s.spacing(i,0):void 0,justifyContent:n});return h().createElement("div",{className:o,"data-testid":a},Ws.interpolate(e,t))};(class extends T{}).Component=({model:e})=>{const t=e.useState();return h().createElement(Ge.ToolbarButton,{onClick:t.onClick,icon:t.icon})};(class extends T{}).Component=({model:e})=>{const t=e.useState();return h().createElement("div",{style:{display:"flex"}},t.label&&h().createElement(Dt,{label:t.label}),h().createElement(Ge.Input,{defaultValue:t.value,width:8,onBlur:t=>{e.state.onChange(parseInt(t.currentTarget.value,10))}}))};const au=function(e,t,r){if(!ao)return[t,no,no];if(!e)throw new Error("useLocalStorage key may not be falsy");var n=r?r.raw?function(e){return e}:r.deserializer:JSON.parse,a=(0,c.useRef)((function(e){try{var a=r?r.raw?String:r.serializer:JSON.stringify,i=localStorage.getItem(e);return null!==i?n(i):(t&&localStorage.setItem(e,a(t)),t)}catch(e){return t}})),i=(0,c.useState)((function(){return a.current(e)})),s=i[0],o=i[1];(0,c.useLayoutEffect)((function(){return o(a.current(e))}),[e]);var l=(0,c.useCallback)((function(t){try{var a="function"==typeof t?t(s):t;if(void 0===a)return;var i=void 0;i=r?r.raw?"string"==typeof a?a:JSON.stringify(a):r.serializer?r.serializer(a):JSON.stringify(a):JSON.stringify(a),localStorage.setItem(e,i),o(n(i))}catch(e){}}),[e,o]),u=(0,c.useCallback)((function(){try{localStorage.removeItem(e),o(void 0)}catch(e){}}),[e,o]);return[s,l,u]};class iu extends T{constructor(){super(...arguments),this.onZoom=()=>{const e=Ws.getTimeRange(this),t=function(e,t){const r=e.to.valueOf()-e.from.valueOf(),n=e.to.valueOf()-r/2,a=0===r?3e4:r*t,s=n+a/2,o=n-a/2;return{from:(0,i.toUtc)(o),to:(0,i.toUtc)(s),raw:{from:(0,i.toUtc)(o),to:(0,i.toUtc)(s)}}}(e.state.value,2);e.onTimeRangeChange(t)},this.onChangeFiscalYearStartMonth=e=>{Ws.getTimeRange(this).setState({fiscalYearStartMonth:e})},this.toAbsolute=()=>{const e=Ws.getTimeRange(this),t=e.state.value,r=(0,i.toUtc)(t.from),n=(0,i.toUtc)(t.to);e.onTimeRangeChange({from:r,to:n,raw:{from:r,to:n}})},this.onMoveBackward=()=>{const e=Ws.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(su(0,t,Date.now()))},this.onMoveForward=()=>{const e=Ws.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(su(1,t,Date.now()))}}}function su(e,t,r){const n=t.to.valueOf(),a=t.from.valueOf(),s=(n-a)/2;let o,l;0===e?(o=a-s,l=n-s):(o=a+s,l=n+s,l>r&&n<r&&(l=r,o=a));const u=(0,i.toUtc)(o),c=(0,i.toUtc)(l);return{from:u,to:c,raw:{from:u,to:c}}}iu.Component=function({model:e}){const{hidePicker:t,isOnCanvas:r,quickRanges:n}=e.useState(),a=Ws.getTimeRange(e),s=a.getTimeZone(),o=a.useState(),[l,u]=au(ou,[],{raw:!1,serializer:uu,deserializer:lu});if(t)return null;return h().createElement(Ge.TimeRangePicker,{isOnCanvas:null==r||r,value:o.value,onChange:e=>{var t;t=e,((0,i.isDateTime)(t.raw.from)||(0,i.isDateTime)(t.raw.to))&&u([e,...null!=l?l:[]]),a.onTimeRangeChange(e)},timeZone:s,fiscalYearStartMonth:o.fiscalYearStartMonth,onMoveBackward:e.onMoveBackward,onMoveForward:e.onMoveForward,onZoom:e.onZoom,onChangeTimeZone:a.onTimeZoneChange,onChangeFiscalYearStartMonth:e.onChangeFiscalYearStartMonth,weekStart:o.weekStart,history:l,quickRanges:n})};const ou="grafana.dashboard.timepicker.history";function lu(e){return JSON.parse(e).map((e=>i.rangeUtil.convertRawToRange(e,"utc",void 0,"YYYY-MM-DD HH:mm:ss")))}function uu(e){return JSON.stringify((t=e.map((e=>({from:"string"==typeof e.raw.from?e.raw.from:e.raw.from.toISOString(),to:"string"==typeof e.raw.to?e.raw.to:e.raw.to.toISOString()}))),(0,D.uniqBy)(t,(e=>e.from+e.to)).slice(0,4)));var t}const cu=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class du extends T{constructor(e){var t,r,n;super({refresh:"",...e,autoValue:void 0,autoEnabled:null==(t=e.autoEnabled)||t,autoMinInterval:null!=(r=e.autoMinInterval)?r:s.config.minRefreshInterval,intervals:(null!=(n=e.intervals)?n:cu).filter((t=>{var r;const n=null!=(r=e.minRefreshInterval)?r:s.config.minRefreshInterval;try{return!n||i.rangeUtil.intervalToMs(t)>=i.rangeUtil.intervalToMs(n)}catch(e){return!1}}))}),this._urlSync=new q(this,{keys:["refresh"]}),this._autoRefreshBlocked=!1,this.onRefresh=()=>{const e=Ws.getQueryController(this);if(null==e||e.startProfile("SceneRefreshPicker"),null==e?void 0:e.state.isRunning)return void e.cancelAll();const t=Ws.getTimeRange(this);this._intervalTimer&&clearInterval(this._intervalTimer),t.onRefresh(),this.setupIntervalTimer()},this.onIntervalChanged=e=>{this.setState({refresh:e}),this.setupIntervalTimer()},this.setupAutoTimeRangeListener=()=>Ws.getTimeRange(this).subscribeToState(((e,t)=>{e.from===t.from&&e.to===t.to||this.setupIntervalTimer()})),this.calculateAutoRefreshInterval=()=>{var e;const t=Ws.getTimeRange(this),r=null!=(e=null==window?void 0:window.innerWidth)?e:2e3;return i.rangeUtil.calculateInterval(t.state.value,r,this.state.autoMinInterval)},this.setupIntervalTimer=()=>{var e;const t=Ws.getTimeRange(this),{refresh:r,intervals:n}=this.state;if((this._intervalTimer||""===r)&&clearInterval(this._intervalTimer),""===r)return;if(r!==Ge.RefreshPicker.autoOption.value&&n&&!n.includes(r))return;let a;if(null==(e=this._autoTimeRangeListener)||e.unsubscribe(),r===Ge.RefreshPicker.autoOption.value){const e=this.calculateAutoRefreshInterval();a=e.intervalMs,this._autoTimeRangeListener=this.setupAutoTimeRangeListener(),e.interval!==this.state.autoValue&&this.setState({autoValue:e.interval})}else a=i.rangeUtil.intervalToMs(r);this._intervalTimer=setInterval((()=>{if(this.isTabVisible()){const e=Ws.getQueryController(this);null==e||e.startProfile("SceneRefreshPicker"),t.onRefresh()}else this._autoRefreshBlocked=!0}),a)},this.addActivationHandler((()=>{this.setupIntervalTimer();const e=()=>{this._autoRefreshBlocked&&"visible"===document.visibilityState&&(this._autoRefreshBlocked=!1,this.onRefresh())};return document.addEventListener("visibilitychange",e),()=>{var t;this._intervalTimer&&clearInterval(this._intervalTimer),document.removeEventListener("visibilitychange",e),null==(t=this._autoTimeRangeListener)||t.unsubscribe()}}))}getUrlState(){let e=this.state.refresh;return"string"==typeof e&&0!==e.length||(e=void 0),{refresh:e}}updateFromUrl(e){const{intervals:t}=this.state;let r=e.refresh;"string"==typeof r&&function(e){try{return i.rangeUtil.describeInterval(e).count>0}catch(e){return!1}}(r)&&((null==t?void 0:t.includes(r))?this.setState({refresh:r}):this.setState({refresh:t?t[0]:void 0}))}isTabVisible(){return void 0===document.visibilityState||"visible"===document.visibilityState}}du.Component=function({model:e}){var t;const{refresh:r,intervals:n,autoEnabled:a,autoValue:i,isOnCanvas:s,primary:o,withText:l}=e.useState(),u=function(e){const t=Ws.getQueryController(e);if(!t)return!1;return t.useState().isRunning}(e);let c,d,p=r===(null==(t=Ge.RefreshPicker.autoOption)?void 0:t.value)?i:l?"Refresh":void 0;u&&(c="Cancel all queries",l&&(p="Cancel"));l&&(d="96px");return h().createElement(Ge.RefreshPicker,{showAutoInterval:a,value:r,intervals:n,tooltip:c,width:d,text:p,onRefresh:()=>{e.onRefresh()},primary:o,onIntervalChanged:e.onIntervalChanged,isLoading:u,isOnCanvas:null==s||s})};const hu=e=>`${e}-compare`,pu="__previousPeriod",fu="__noPeriod",mu={label:"Previous period",value:pu},gu={label:"No comparison",value:fu},vu=[{label:"Day before",value:"24h"},{label:"Week before",value:"1w"},{label:"Month before",value:"1M"}];(class extends T{constructor(e){super({compareOptions:vu,...e}),this._urlSync=new q(this,{keys:["compareWith"]}),this._onActivate=()=>{const e=Ws.getTimeRange(this);this.setState({compareOptions:this.getCompareOptions(e.state.value)}),this._subs.add(e.subscribeToState((e=>{const t=this.getCompareOptions(e.value),r={compareOptions:t};Boolean(this.state.compareWith)&&!t.find((({value:e})=>e===this.state.compareWith))&&(r.compareWith=pu),this.setState(r)})))},this.getCompareOptions=e=>{const t=Math.ceil(e.to.diff(e.from)),r=vu.findIndex((({value:e})=>i.rangeUtil.intervalToMs(e)>=t));return[gu,mu,...vu.slice(r).map((({label:e,value:t})=>({label:e,value:t})))]},this.onCompareWithChanged=e=>{e===fu?this.onClearCompare():this.setState({compareWith:e})},this.onClearCompare=()=>{this.setState({compareWith:void 0})},this.addActivationHandler(this._onActivate)}getExtraQueries(e){const t=[],r=this.getCompareTimeRange(e.range);if(!r)return t;const n=e.targets.filter((e=>!1!==e.timeRangeCompare));return n.length&&t.push({req:{...e,targets:n,range:r},processor:bu}),t}shouldRerun(e,t,r){return e.compareWith!==t.compareWith&&void 0!==r.find((e=>!1!==e.timeRangeCompare))}getCompareTimeRange(e){let t,r;if(this.state.compareWith){if(this.state.compareWith===pu){const n=e.to.diff(e.from);t=(0,i.dateTime)(e.from).subtract(n),r=(0,i.dateTime)(e.to).subtract(n)}else t=(0,i.dateTime)(e.from).subtract(i.rangeUtil.intervalToMs(this.state.compareWith)),r=(0,i.dateTime)(e.to).subtract(i.rangeUtil.intervalToMs(this.state.compareWith));return{from:t,to:r,raw:{from:t,to:r}}}}getUrlState(){return{compareWith:this.state.compareWith}}updateFromUrl(e){if(!e.compareWith)return;const t=W(e.compareWith);if(t){this.getCompareOptions(Ws.getTimeRange(this).state.value).find((({value:e})=>e===t))?this.setState({compareWith:t}):this.setState({compareWith:"__previousPeriod"})}}}).Component=function({model:e}){var t;const r=(0,Ge.useStyles2)(yu),{compareWith:n,compareOptions:a}=e.useState(),[i,s]=h().useState(n),o=null!=(t=a.find((({value:e})=>e===i)))?t:mu,l=a.find((({value:e})=>e===n)),u=Boolean(l),c=()=>{u?(s(n),e.onClearCompare()):u||e.onCompareWithChanged(o.value)};return h().createElement(Ge.ButtonGroup,null,h().createElement(Ge.ToolbarButton,{variant:"canvas",tooltip:"Enable time frame comparison",onClick:e=>{e.stopPropagation(),e.preventDefault(),c()}},h().createElement(Ge.Checkbox,{label:" ",value:u,onClick:c}),"Comparison"),u?h().createElement(Ge.ButtonSelect,{variant:"canvas",value:l,options:a,onChange:t=>{e.onCompareWithChanged(t.value)}}):h().createElement(Ge.ToolbarButton,{className:r.previewButton,disabled:!0,variant:"canvas",isOpen:!1},o.label))};const bu=(e,t)=>{const r=t.timeRange.from.diff(e.timeRange.from);return t.series.forEach((e=>{e.refId=hu(e.refId||""),e.meta={...e.meta,timeCompare:{diffMs:r,isTimeShiftQuery:!0}},e.fields.forEach((e=>(e.type===i.FieldType.time&&(e.values=e.values.map((e=>r<0?e-r:e+r))),e.config={...e.config,color:{mode:"fixed",fixedColor:s.config.theme.palette.gray60}},e)))})),(0,p.of)(t)};function yu(e){return{previewButton:(0,it.css)({"&:disabled":{border:`1px solid ${e.colors.secondary.border}`,color:e.colors.text.disabled,opacity:1}})}}(class extends T{constructor(e){super(e),this.addActivationHandler((()=>{const e=Ws.getData(this);this._subs.add(e.subscribeToState((e=>{var t;(null==(t=e.data)?void 0:t.state)===i.LoadingState.Done&&this.performRepeat(e.data)}))),e.state.data&&this.performRepeat(e.state.data)}))}performRepeat(e){const t=[];for(let r=0;r<e.series.length;r++){const n=this.state.getLayoutChild(e,e.series[r],r);t.push(n)}this.state.body.setState({children:t})}}).Component=({model:e})=>{const{body:t}=e.useState();return h().createElement(t.Component,{model:t})};(class extends T{constructor(e){super(e),this._variableDependency=new Ss(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>this.performRepeat()}),this.addActivationHandler((()=>this.performRepeat()))}performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const e=Ws.lookupVariable(this.state.variableName,this);if(!(e instanceof Pe))return void console.error("SceneByVariableRepeater: variable is not a MultiValueVariable");const t=function(e){const{value:t,text:r,options:n}=e.state;if(e.hasAllValue())return n;if(Array.isArray(t)&&Array.isArray(r))return t.map(((e,t)=>({value:e,label:r[t]})));return[{value:t,label:r}]}(e),r=[];for(const e of t){const t=this.state.getLayoutChild(e);r.push(t)}this.state.body.setState({children:r})}}).Component=({model:e})=>{const{body:t}=e.useState();return h().createElement(t.Component,{model:t})};class Ou extends T{constructor(){super({}),this._renderBeforeActivation=!0}}Ou.Component=e=>h().createElement("div",{style:{flexGrow:1}});class wu extends T{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}wu.Component=function({model:e,parentState:t}){const{children:r,isHidden:n}=e.useState(),a=function(e,t){return(0,c.useMemo)((()=>{var r,n,a,i,o,l,u,c,d,h;const{direction:p="row",wrap:f}=e,m=s.config.theme2,g={};return t?Su(g,e,t):(g.display="flex",g.flexGrow=1,g.minWidth=e.minWidth,g.minHeight=e.minHeight),g.flexDirection=p,g.gap="8px",g.flexWrap=f||"nowrap",g.alignContent="baseline",g.minWidth=g.minWidth||0,g.minHeight=g.minHeight||0,g[m.breakpoints.down("md")]={flexDirection:null!=(n=null==(r=e.md)?void 0:r.direction)?n:"column",maxWidth:null!=(i=null==(a=e.md)?void 0:a.maxWidth)?i:"unset",maxHeight:null!=(l=null==(o=e.md)?void 0:o.maxHeight)?l:"unset",height:null!=(c=null==(u=e.md)?void 0:u.height)?c:"unset",width:null!=(h=null==(d=e.md)?void 0:d.width)?h:"unset"},(0,it.css)(g)}),[t,e])}(e.state,t);if(n)return null;return h().createElement("div",{className:a},r.map((t=>{const r=t.Component;return h().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};class xu extends T{}function Su(e,t,r){var n,a,i;const s=null!=(n=r.direction)?n:"row",{xSizing:o="fill",ySizing:l="fill"}=t;return e.display="flex",e.position="relative",e.flexDirection=s,"column"===s?(t.height?e.height=t.height:e.flexGrow="fill"===l?1:0,t.width?e.width=t.width:e.alignSelf="fill"===o?"stretch":"flex-start"):(t.height?e.height=t.height:e.alignSelf="fill"===l?"stretch":"flex-start",t.width?e.width=t.width:e.flexGrow="fill"===o?1:0),e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.minHeight=null!=(a=t.minHeight)?a:r.minHeight,e.height=null!=(i=t.height)?i:r.height,e}xu.Component=function({model:e,parentState:t}){if(!t)throw new Error("SceneFlexItem must be a child of SceneFlexLayout");const{body:r,isHidden:n}=e.useState(),a=function(e,t){return(0,c.useMemo)((()=>{var r,n,a,i,o,l,u,c,d,h;const p=s.config.theme2,f=Su({},e,t);return f[p.breakpoints.down("md")]={maxWidth:null!=(n=null==(r=e.md)?void 0:r.maxWidth)?n:"unset",maxHeight:null!=(i=null==(a=e.md)?void 0:a.maxHeight)?i:"unset",height:null!=(u=null==(o=e.md)?void 0:o.height)?u:null==(l=t.md)?void 0:l.height,width:null!=(h=null==(c=e.md)?void 0:c.width)?h:null==(d=t.md)?void 0:d.width},(0,it.css)(f)}),[e,t])}(e.state,t);if(!r||n)return null;return h().createElement("div",{className:a},h().createElement(r.Component,{model:r}))};class _u extends T{constructor(e){var t,r;super({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:null!=(t=e.autoRows)?t:"320px",children:null!=(r=e.children)?r:[],...e})}isDraggable(){return!1}}_u.Component=function({model:e}){const{children:t,isHidden:r,isLazy:n}=e.useState(),a=(i=e.state,(0,c.useMemo)((()=>{var e,t,r,n,a,o,l,u,c,d,h;const p={},f=s.config.theme2;return p.display="grid",p.gridTemplateColumns=i.templateColumns,p.gridTemplateRows=i.templateRows||"unset",p.gridAutoRows=i.autoRows||"unset",p.rowGap=f.spacing(null!=(e=i.rowGap)?e:1),p.columnGap=f.spacing(null!=(t=i.columnGap)?t:1),p.justifyItems=i.justifyItems||"unset",p.alignItems=i.alignItems||"unset",p.justifyContent=i.justifyContent||"unset",p.flexGrow=1,i.md&&(p[f.breakpoints.down("md")]={gridTemplateRows:null==(r=i.md)?void 0:r.templateRows,gridTemplateColumns:null==(n=i.md)?void 0:n.templateColumns,rowGap:i.md.rowGap?f.spacing(null!=(o=null==(a=i.md)?void 0:a.rowGap)?o:1):void 0,columnGap:i.md.columnGap?f.spacing(null!=(u=null==(l=i.md)?void 0:l.rowGap)?u:1):void 0,justifyItems:null==(c=i.md)?void 0:c.justifyItems,alignItems:null==(d=i.md)?void 0:d.alignItems,justifyContent:null==(h=i.md)?void 0:h.justifyContent}),(0,it.css)(p)}),[i]));var i;if(r)return null;return h().createElement("div",{className:a},t.map((t=>{const r=t.Component;return n?h().createElement(Xl,{key:t.state.key,className:a},h().createElement(r,{key:t.state.key,model:t,parentState:e.state})):h().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};class $u extends T{}$u.Component=function({model:e,parentState:t}){if(!t)throw new Error("SceneCSSGridItem must be a child of SceneCSSGridLayout");const{body:r,isHidden:n}=e.useState(),a=(i=e.state,(0,c.useMemo)((()=>{const e={};return e.gridColumn=i.gridColumn||"unset",e.gridRow=i.gridRow||"unset",e.position="relative",(0,it.css)(e)}),[i]));var i;if(!r||n)return null;return h().createElement("div",{className:a},h().createElement(r.Component,{model:r}))};const Eu=new Set(["ArrowUp","ArrowDown"]),Pu=new Set(["ArrowLeft","ArrowRight"]),Ru={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function Tu({direction:e="row",handleSize:t=32,initialSize:r="auto",primaryPaneStyles:n,secondaryPaneStyles:a,onDragFinished:i,children:s}){const o=h().Children.toArray(s),l=(0,c.useRef)(null),u=(0,c.useRef)(null),d=(0,c.useRef)(null),p=(0,c.useRef)(null),f=(0,c.useRef)(null),m=(0,c.useRef)("1fr"),g=(0,c.useRef)(void 0),v=(0,c.useRef)(void 0),b=Ru[e].dim,y=Ru[e].axis,O=Ru[e].min,w=Ru[e].max;!function(e,t,r=0,n){const a=(0,D.throttle)(t,r);(0,c.useLayoutEffect)((()=>{if(!e)return;const t=new ResizeObserver(a);return t.observe(e,{box:"device-pixel-content-box"}),()=>t.disconnect()}),n)}(p.current,(e=>{for(const t of e){if(!t.target.isSameNode(p.current))return;const e=u.current.getBoundingClientRect()[b],r=ku(u.current);l.current.ariaValueNow=`${(0,D.clamp)((e-r[O])/(r[w]-r[O])*100,0,100)}`}}),500,[w,O,e,b]);const x=(0,c.useRef)(null),S=(0,c.useCallback)((e=>{m.current=u.current.getBoundingClientRect()[b],f.current=p.current.getBoundingClientRect()[b],x.current=e[y],l.current.setPointerCapture(e.pointerId),g.current=ku(u.current),v.current=void 0}),[b,y]),_=(0,c.useCallback)((e=>{if(null!==x.current&&"1fr"!==m.current){const r=e[y]-x.current,n=g.current,a=(0,D.clamp)(m.current+r,n[O],n[w]),i=a/(f.current-t);u.current.style.flexGrow=`${i}`,d.current.style.flexGrow=""+(1-i);const s=(0,D.clamp)((a-n[O])/(n[w]-n[O])*100,0,100);l.current.ariaValueNow=`${s}`}}),[t,y,O,w]),$=(0,c.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),l.current.releasePointerCapture(e.pointerId),x.current=null,null==i||i(parseFloat(u.current.style.flexGrow))}),[i]),E=(0,c.useRef)(new Set),P=(0,c.useRef)(null),R=(0,c.useCallback)((r=>{var n;if(0===E.current.size)return void(P.current=null);if("1fr"===m.current)return;const a=.3*(r-(null!=(n=P.current)?n:r));let i=0;"row"===e?(E.current.has("ArrowLeft")&&(i-=a),E.current.has("ArrowRight")&&(i+=a)):(E.current.has("ArrowUp")&&(i-=a),E.current.has("ArrowDown")&&(i+=a));const s=g.current,o=u.current.getBoundingClientRect()[b],c=(0,D.clamp)(o+i,s[O],s[w]),h=c/(f.current-t);u.current.style.flexGrow=`${h}`,d.current.style.flexGrow=""+(1-h);const p=(c-s[O])/(s[w]-s[O])*100;l.current.ariaValueNow=`${(0,D.clamp)(p,0,100)}`,P.current=r,window.requestAnimationFrame(R)}),[e,t,O,w,b]),T=(0,c.useCallback)((r=>{if("Enter"===r.key)return void(void 0===v.current?(v.current=u.current.style.flexGrow,u.current.style.flexGrow="0",d.current.style.flexGrow="1"):(u.current.style.flexGrow=v.current,d.current.style.flexGrow=""+(1-parseFloat(v.current)),v.current=void 0));if("Home"===r.key){g.current=ku(u.current),f.current=p.current.getBoundingClientRect()[b];const e=g.current[O]/(f.current-t);return u.current.style.flexGrow=`${e}`,d.current.style.flexGrow=""+(1-e),void(l.current.ariaValueNow="0")}if("End"===r.key){g.current=ku(u.current),f.current=p.current.getBoundingClientRect()[b];const e=g.current[w]/(f.current-t);return u.current.style.flexGrow=`${e}`,d.current.style.flexGrow=""+(1-e),void(l.current.ariaValueNow="100")}if(!("column"===e&&Eu.has(r.key)||"row"===e&&Pu.has(r.key))||E.current.has(r.key))return;v.current=void 0,r.preventDefault(),r.stopPropagation(),m.current=u.current.getBoundingClientRect()[b],f.current=p.current.getBoundingClientRect()[b],g.current=ku(u.current);if(!E.current.has(r.key)){const e=0===E.current.size;E.current.add(r.key),e&&window.requestAnimationFrame(R)}}),[e,R,t,w,b,O]),C=(0,c.useCallback)((t=>{"row"===e&&!Pu.has(t.key)||"column"===e&&!Eu.has(t.key)||(E.current.delete(t.key),null==i||i(parseFloat(u.current.style.flexGrow)))}),[e,i]),k=(0,c.useCallback)((()=>{u.current.style.flexGrow="0.5",d.current.style.flexGrow="0.5";const e=ku(u.current);g.current=e,m.current=u.current.getBoundingClientRect()[b],l.current.ariaValueNow=""+(m.current-e[O])/(e[w]-e[O])*100}),[w,b,O]),I=(0,c.useCallback)((()=>{E.current.size>0&&(E.current.clear(),x.current=null,null==i||i(parseFloat(u.current.style.flexGrow)))}),[i]),A=(0,Ge.useStyles2)(Cu),L=Bl(),N=2===o.length?"visible":"hidden";return h().createElement("div",{ref:p,className:A.container,style:{flexDirection:e}},h().createElement("div",{ref:u,className:A.panel,style:{flexGrow:"auto"===r?.5:(0,D.clamp)(r,0,1),[O]:"min-content",...n},id:`start-panel-${L}`},o[0]),o[1]&&h().createElement(h().Fragment,null,h().createElement("div",{ref:l,style:{[b]:`${t}px`},className:(0,it.cx)(A.handle,{[A.handleHorizontal]:"column"===e}),onPointerUp:$,onPointerDown:S,onPointerMove:_,onKeyDown:T,onKeyUp:C,onDoubleClick:k,onBlur:I,role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":50,"aria-controls":`start-panel-${L}`,"aria-label":"Pane resize widget",tabIndex:0}),h().createElement("div",{ref:d,className:A.panel,style:{flexGrow:"auto"===r?.5:(0,D.clamp)(1-r,0,1),[O]:"min-content",visibility:`${N}`,...a},id:`end-panel-${L}`},o[1])))}function Cu(e){return{handle:(0,it.css)({cursor:"col-resize",position:"relative",flexShrink:0,userSelect:"none","&::before":{content:'""',position:"absolute",backgroundColor:e.colors.primary.main,left:"50%",transform:"translate(-50%)",top:0,height:"100%",width:"1px",opacity:0,transition:"opacity ease-in-out 0.2s"},"&::after":{content:'""',width:"4px",borderRadius:"4px",backgroundColor:e.colors.border.weak,transition:"background-color ease-in-out 0.2s",height:"50%",top:"calc(50% - (50%) / 2)",transform:"translateX(-50%)",position:"absolute",left:"50%"},"&:hover, &:focus-visible":{outline:"none","&::before":{opacity:1},"&::after":{backgroundColor:e.colors.primary.main}}}),handleHorizontal:(0,it.css)({cursor:"row-resize","&::before":{left:"inherit",transform:"translateY(-50%)",top:"50%",height:"1px",width:"100%"},"&::after":{width:"50%",height:"4px",top:"50%",transform:"translateY(-50%)",left:"calc(50% - (50%) / 2)"}}),container:(0,it.css)({display:"flex",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,it.css)({display:"flex",position:"relative",flexBasis:0})}}function ku(e){if(null===e)return;const t=document.body.style.overflow,r=e.style.width,n=e.style.height,a=e.style.flexGrow;document.body.style.overflow="hidden",e.style.flexGrow="0";const{width:i,height:s}=e.getBoundingClientRect();e.style.flexGrow="100";const{width:o,height:l}=e.getBoundingClientRect();return document.body.style.overflow=t,e.style.width=r,e.style.height=n,e.style.flexGrow=a,{minWidth:i,maxWidth:o,minHeight:s,maxHeight:l}}(class extends T{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}).Component=function({model:e}){const{primary:t,secondary:r,direction:n,isHidden:a,initialSize:i,primaryPaneStyles:s,secondaryPaneStyles:o}=e.useState();if(a)return null;const l=t.Component,u=null==r?void 0:r.Component;let c=r?i:1;return h().createElement(Tu,{direction:n,initialSize:null!=c?c:.5,primaryPaneStyles:s,secondaryPaneStyles:o},h().createElement(l,{key:t.state.key,model:t,parentState:e.state}),u&&r&&h().createElement(u,{key:r.state.key,model:r,parentState:e.state}))};(class extends T{constructor(){super(...arguments),this._renderBeforeActivation=!0}enrichDataRequest(){return{app:this.state.name||"app"}}}).Component=({model:e})=>{const{pages:t,scopesBridge:r}=e.useState();return h().createElement(h().Fragment,null,r&&h().createElement(r.Component,{model:r}),h().createElement(Du.Provider,{value:e},h().createElement(a.Routes,null,t.map((e=>h().createElement(a.Route,{key:e.state.url,path:e.state.routePath,element:h().createElement(e.Component,{model:e})}))))))};const Du=(0,c.createContext)(null);class Iu extends T{}function Au({node:e}){const t=e.useState(),r=(0,Ge.useStyles2)(Lu);return h().createElement("div",{className:r.container},Object.keys(t).map((n=>h().createElement("div",{className:r.row,key:n},h().createElement("div",{className:r.keyName},n),h().createElement("div",{className:r.value},function(e,t,r){if(null===t)return"null";switch(typeof t){case"number":return h().createElement(Ge.Input,{type:"number",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.valueAsNumber})});case"string":return h().createElement(Ge.Input,{type:"text",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.value})});case"object":return Le(t)?t.constructor.name:(0,D.isPlainObject)(t)||(0,D.isArray)(t)?h().createElement(Ge.JSONFormatter,{json:t,open:0}):String(t);default:return typeof t}}(n,t[n],e))))))}function Lu(e){return{container:(0,it.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),row:(0,it.css)({display:"flex",gap:e.spacing(2)}),keyName:(0,it.css)({display:"flex",flexGrow:"0",width:120,alignItems:"center",height:e.spacing(e.components.height.md)}),value:(0,it.css)({flexGrow:1,minHeight:e.spacing(e.components.height.md),display:"flex",alignItems:"center"})}}function Nu({node:e,selectedObject:t,onSelect:r}){const n=(0,Ge.useStyles2)(Mu),a=[],i=e===t;return e.forEachChild((e=>{a.push(h().createElement(Nu,{node:e,key:e.state.key,selectedObject:t,onSelect:r}))})),h().createElement("div",{className:n.container},h().createElement("div",{className:(0,it.cx)(n.name,i&&n.selected),onClick:()=>r(e)},e.constructor.name),h().createElement("div",{className:n.children},a))}function Mu(e){return{container:(0,it.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),name:(0,it.css)({flexGrow:1,display:"flex",gap:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,cursor:"pointer",padding:e.spacing(0,1),borderRadius:e.shape.borderRadius(2),position:"relative","&:hover":{background:e.colors.background.secondary}}),selected:(0,it.css)({"&::before":{display:"block",content:"' '",position:"absolute",left:0,width:4,bottom:2,top:2,borderRadius:e.shape.radius.default,backgroundImage:e.colors.gradients.brandVertical}}),children:(0,it.css)({flexGrow:1,display:"flex",flexDirection:"column",paddingLeft:e.spacing(1)})}}function ju({scene:e}){const t=(0,Ge.useStyles2)(Qu),[r,n]=(0,c.useState)(!1),[a,i]=(0,c.useState)();return h().createElement(h().Fragment,null,h().createElement(Ge.ToolbarButton,{variant:"canvas",icon:"bug",onClick:()=>n(!0)}),r&&h().createElement(Ge.Drawer,{title:"Scene debugger",onClose:()=>n(!1),size:"lg"},h().createElement("div",{className:t.panes},h().createElement("div",{className:t.pane1},h().createElement("div",{className:t.paneHeading},"Scene graph"),h().createElement(Ge.CustomScrollbar,{autoHeightMin:"100%"},h().createElement("div",{className:t.treeWrapper},h().createElement(Nu,{node:e,selectedObject:a,onSelect:i})))),h().createElement("div",{className:t.pane2},h().createElement("div",{className:t.paneHeading},"Object details"),a&&h().createElement(Au,{node:a})))))}function Qu(e){return{panes:(0,it.css)({flexGrow:1,display:"flex",height:"100%",flexDirection:"row",marginTop:e.spacing(-2)}),pane1:(0,it.css)({flexGrow:0,display:"flex",height:"100%",flexDirection:"column",borderRight:`1px solid ${e.colors.border.weak}`}),pane2:(0,it.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column",paddingLeft:e.spacing(2)}),treeWrapper:(0,it.css)({paddingRight:e.spacing(2),height:"100%",marginLeft:e.spacing(-1)}),paneHeading:(0,it.css)({padding:e.spacing(1,0),fontWeight:e.typography.fontWeightMedium})}}function Vu({page:e}){const t=l(e.state.url),r=function(e){if(e.parent instanceof Bu)return e.parent;return e}(e),n=r.useState(),i=function(){const e=(0,a.useLocation)();return(0,s.locationSearchToObject)(e.search||"")}(),u=e.getScene(t),d=(0,c.useContext)(Du),p=n.initializedScene===u,{layout:f}=e.state,m=Ee();(0,c.useLayoutEffect)((()=>{p||r.initializeScene(u)}),[u,r,p]),(0,c.useEffect)((()=>()=>r.setState({initializedScene:void 0})),[r]);const g=Dl(r,null==d?void 0:d.state.urlSyncOptions);if(!p&&!g)return null;const v={text:n.title,img:n.titleImg,icon:n.titleIcon,url:o(n.url,m.getSearchObject(),n.preserveUrlKeys),hideFromBreadcrumbs:n.hideFromBreadcrumbs,parentItem:zu(n.getParentPage?n.getParentPage():r.parent,i,m.getSearchObject())};n.tabs&&(v.children=n.tabs.map((t=>({text:t.state.title,icon:t.state.titleIcon,tabSuffix:t.state.tabSuffix,active:e===t,url:o(t.state.url,m.getSearchObject(),t.state.preserveUrlKeys),parentItem:v}))));let b=[];return n.controls&&(b=n.controls.map((e=>h().createElement(e.Component,{model:e,key:e.state.key})))),i["scene-debugger"]&&b.push(h().createElement(ju,{scene:r,key:"scene-debugger"})),h().createElement(s.PluginPage,{layout:f,pageNav:v,actions:b,renderTitle:n.renderTitle,subTitle:n.subTitle},h().createElement(u.Component,{model:u}))}function zu(e,t,r){if(e instanceof Bu)return{text:e.state.title,url:o(e.state.url,r,e.state.preserveUrlKeys),hideFromBreadcrumbs:e.state.hideFromBreadcrumbs,parentItem:zu(e.state.getParentPage?e.state.getParentPage():e.parent,t,r)}}function Fu({drilldown:e,parent:t}){const r=l(e.routePath),n=t.getDrilldownPage(e,r);return h().createElement(n.Component,{model:n})}Iu.Component=({model:e})=>{const{component:t,props:r,reactNode:n}=e.useState();return t?h().createElement(t,{...r}):n||null};class Bu extends T{constructor(e){super(e),this._sceneCache=new Map,this._drilldownCache=new Map,this._activationHandler=()=>{if(this.state.useScopes){if(this._scopesBridge=Ws.getScopesBridge(this),!this._scopesBridge)throw new Error("Use of scopes is enabled but no scopes bridge found");return this._scopesBridge.setEnabled(!0),()=>{var e;null==(e=this._scopesBridge)||e.setEnabled(!1)}}},this.addActivationHandler(this._activationHandler)}initializeScene(e){this.setState({initializedScene:e})}getScene(e){let t=this._sceneCache.get(e.url);if(t)return t;if(!this.state.getScene)throw new Error("Missing getScene on SceneAppPage "+this.state.title);return t=this.state.getScene(e),this._sceneCache.set(e.url,t),t}getDrilldownPage(e,t){let r=this._drilldownCache.get(t.url);return r||(r=e.getPage(t,this),this._drilldownCache.set(t.url,r),r)}enrichDataRequest(e){if(this.state.getParentPage)return this.state.getParentPage().enrichDataRequest(e);if(!this.parent)return null;const t=this.getRoot();return Ne(t)?t.enrichDataRequest(e):null}}Bu.Component=function({model:e}){const{tabs:t,drilldowns:r}=e.useState(),n=[];if(n.push(function(e){var t,r,n;return h().createElement(a.Route,{key:"fallback route",path:"*",element:h().createElement(Vu,{page:null!=(n=null==(r=(t=e.state).getFallbackPage)?void 0:r.call(t))?n:new Bu({url:"",title:"Not found",subTitle:"The url did not match any page",routePath:"*",getScene:()=>new Al({body:new wu({direction:"column",children:[new xu({body:new Iu({component:()=>h().createElement("div",{"data-testid":"default-fallback-content"},"If you found your way here using a link then there might be a bug in this application.")})})]})})})})})}(e)),t&&t.length>0)for(let r=0;r<t.length;r++){const i=t[r];if(0===r&&n.push(h().createElement(a.Route,{key:e.state.routePath,path:"",element:h().createElement(i.Component,{model:i})})),n.push(h().createElement(a.Route,{key:i.state.url,path:i.state.routePath,element:h().createElement(i.Component,{model:i})})),i.state.drilldowns)for(const e of i.state.drilldowns)n.push(h().createElement(a.Route,{key:e.routePath,path:e.routePath,element:h().createElement(Fu,{drilldown:e,parent:i})}))}if(r)for(const t of r)n.push(h().createElement(a.Route,{key:t.routePath,path:t.routePath,Component:()=>h().createElement(Fu,{drilldown:t,parent:e})}));t||n.push(h().createElement(a.Route,{key:"home route",path:"/",element:h().createElement(Vu,{page:e})}));return h().createElement(a.Routes,null,n)};var Xu=r(4049);const qu={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Xu.i.Auto,showValue:Xu.V.Auto,stacking:Xu.S.None,xTickLabelRotation:0,xTickLabelSpacing:0},Uu={fillOpacity:80,gradientMode:Xu.G.None,lineWidth:1},Wu={displayMode:Xu.f.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:Xu.g.Auto,showUnfilled:!0,sizing:Xu.e.Auto,valueMode:Xu.h.Color},Hu={selectedSeries:0},Gu={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:Xu.e.Auto},Yu={layers:[]};var Zu=r(5938);const Ku={bucketCount:30,bucketOffset:0},Ju={fillOpacity:80,gradientMode:Xu.G.None,lineWidth:1},ec={showImage:!0};const tc={displayLabels:[]},rc={colorMode:Xu.B.Value,graphMode:Xu.a.Area,justifyMode:Xu.b.Auto,percentChangeColorMode:Xu.P.Standard,showPercentChange:!1,textMode:Xu.c.Auto,wideLayout:!0},nc={alignValue:"left",mergeValues:!0,perPage:20,rowHeight:.9,showValue:Xu.V.Auto},ac={fillOpacity:70,lineWidth:0},ic={colWidth:.9,perPage:20,rowHeight:.9,showValue:Xu.V.Auto},sc={fillOpacity:70,lineWidth:1},oc={cellHeight:Xu.T.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};const lc={content:"# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",mode:"markdown"};const uc={fillOpacity:50,show:"points"},cc={series:[]};class dc{constructor(){this._overrides=[]}overrideColor(e){return this._overrides[this._overrides.length-1].properties.push({id:"color",value:e}),this}overrideDecimals(e){return this._overrides[this._overrides.length-1].properties.push({id:"decimals",value:e}),this}overrideDisplayName(e){return this._overrides[this._overrides.length-1].properties.push({id:"displayName",value:e}),this}overrideFilterable(e){return this._overrides[this._overrides.length-1].properties.push({id:"filterable",value:e}),this}overrideLinks(e){return this._overrides[this._overrides.length-1].properties.push({id:"links",value:e}),this}overrideMappings(e){return this._overrides[this._overrides.length-1].properties.push({id:"mappings",value:e}),this}overrideMax(e){return this._overrides[this._overrides.length-1].properties.push({id:"max",value:e}),this}overrideMin(e){return this._overrides[this._overrides.length-1].properties.push({id:"min",value:e}),this}overrideNoValue(e){return this._overrides[this._overrides.length-1].properties.push({id:"noValue",value:e}),this}overrideThresholds(e){return this._overrides[this._overrides.length-1].properties.push({id:"thresholds",value:e}),this}overrideUnit(e){return this._overrides[this._overrides.length-1].properties.push({id:"unit",value:e}),this}}class hc extends dc{match(e){return this._overrides.push({matcher:e,properties:[]}),this}matchFieldsWithName(e){return this._overrides.push({matcher:{id:i.FieldMatcherID.byName,options:e},properties:[]}),this}matchFieldsWithNameByRegex(e){return this._overrides.push({matcher:{id:i.FieldMatcherID.byRegexp,options:e},properties:[]}),this}matchFieldsByType(e){return this._overrides.push({matcher:{id:i.FieldMatcherID.byType,options:e},properties:[]}),this}matchFieldsByQuery(e){return this._overrides.push({matcher:{id:i.FieldMatcherID.byFrameRefID,options:e},properties:[]}),this}matchFieldsByValue(e){return this._overrides.push({matcher:{id:i.FieldMatcherID.byValue,options:e},properties:[]}),this}matchComparisonQuery(e){return this.matchFieldsByQuery(hu(e))}overrideCustomFieldConfig(e,t){const r=`custom.${String(e)}`;return this._overrides[this._overrides.length-1].properties.push({id:r,value:t}),this}build(){return this._overrides}}class pc{constructor(e){this.defaultFieldConfig=e,this._fieldConfig={defaults:{},overrides:[]},this._overridesBuilder=new hc,this.setDefaults()}setDefaults(){const e={defaults:{custom:this.defaultFieldConfig?(0,D.cloneDeep)(this.defaultFieldConfig()):{}},overrides:[]};this._fieldConfig=e}setColor(e){return this.setFieldConfigDefaults("color",e)}setDecimals(e){return this.setFieldConfigDefaults("decimals",e)}setDisplayName(e){return this.setFieldConfigDefaults("displayName",e)}setFilterable(e){return this.setFieldConfigDefaults("filterable",e)}setLinks(e){return this.setFieldConfigDefaults("links",e)}setMappings(e){return this.setFieldConfigDefaults("mappings",e)}setMax(e){return this.setFieldConfigDefaults("max",e)}setMin(e){return this.setFieldConfigDefaults("min",e)}setNoValue(e){return this.setFieldConfigDefaults("noValue",e)}setThresholds(e){return this.setFieldConfigDefaults("thresholds",e)}setUnit(e){return this.setFieldConfigDefaults("unit",e)}setCustomFieldConfig(e,t){return this._fieldConfig.defaults={...this._fieldConfig.defaults,custom:(0,D.merge)(this._fieldConfig.defaults.custom,{[e]:t})},this}setOverrides(e){return e(this._overridesBuilder),this}setFieldConfigDefaults(e,t){return this._fieldConfig.defaults={...this._fieldConfig.defaults,[e]:t},this}build(){return{defaults:this._fieldConfig.defaults,overrides:this._overridesBuilder.build()}}}class fc{constructor(e){this.defaultOptions=e,this._options={},this.setDefaults()}setDefaults(){this._options=this.defaultOptions?(0,D.cloneDeep)(this.defaultOptions()):{}}setOption(e,t){return this._options=(0,D.merge)(this._options,{[e]:t}),this}build(){return this._options}}class mc{constructor(e,t,r,n){this._state={},this._state.title="",this._state.description="",this._state.displayMode="default",this._state.hoverHeader=!1,this._state.pluginId=e,this._state.pluginVersion=t,this._fieldConfigBuilder=new pc(n),this._panelOptionsBuilder=new fc(r)}setTitle(e){return this._state.title=e,this}setDescription(e){return this._state.description=e,this}setDisplayMode(e){return this._state.displayMode=e,this}setHoverHeader(e){return this._state.hoverHeader=e,this}setShowMenuAlways(e){return this._state.showMenuAlways=e,this}setMenu(e){return this._state.menu=e,this}setHeaderActions(e){return this._state.headerActions=e,this}setCollapsible(e){return this._state.collapsible=e,this}setCollapsed(e){return this._state.collapsed=e,this}setColor(e){return this._fieldConfigBuilder.setColor(e),this}setDecimals(e){return this._fieldConfigBuilder.setDecimals(e),this}setDisplayName(e){return this._fieldConfigBuilder.setDisplayName(e),this}setFilterable(e){return this._fieldConfigBuilder.setFilterable(e),this}setLinks(e){return this._fieldConfigBuilder.setLinks(e),this}setMappings(e){return this._fieldConfigBuilder.setMappings(e),this}setMax(e){return this._fieldConfigBuilder.setMax(e),this}setMin(e){return this._fieldConfigBuilder.setMin(e),this}setNoValue(e){return this._fieldConfigBuilder.setNoValue(e),this}setThresholds(e){return this._fieldConfigBuilder.setThresholds(e),this}setUnit(e){return this._fieldConfigBuilder.setUnit(e),this}setCustomFieldConfig(e,t){return this._fieldConfigBuilder.setCustomFieldConfig(e,t),this}setOverrides(e){return this._fieldConfigBuilder.setOverrides(e),this}setOption(e,t){return this._panelOptionsBuilder.setOption(e,t),this}setData(e){return this._state.$data=e,this}setTimeRange(e){return this._state.$timeRange=e,this}setVariables(e){return this._state.$variables=e,this}setBehaviors(e){return this._state.$behaviors=e,this}setSeriesLimit(e){return this._state.seriesLimit=e,this}applyMixin(e){return e(this),this}build(){return new $o({...this._state,options:this._panelOptionsBuilder.build(),fieldConfig:this._fieldConfigBuilder.build()})}}const gc={barchart:()=>new mc("barchart","10.0.0",(()=>qu),(()=>Uu)),bargauge:()=>new mc("bargauge","10.0.0",(()=>Wu)),datagrid:()=>new mc("datagrid","10.0.0",(()=>Hu)),flamegraph:()=>new mc("flamegraph","10.0.0"),gauge:()=>new mc("gauge","10.0.0",(()=>Gu)),geomap:()=>new mc("geomap","10.0.0",(()=>Yu)),heatmap:()=>new mc("heatmap","10.0.0",(()=>Zu.KQ)),histogram:()=>new mc("histogram","10.0.0",(()=>Ku),(()=>Ju)),logs:()=>new mc("logs","10.0.0"),news:()=>new mc("news","10.0.0",(()=>ec)),nodegraph:()=>new mc("nodeGraph","10.0.0"),piechart:()=>new mc("piechart","10.0.0",(()=>tc)),stat:()=>new mc("stat","10.0.0",(()=>rc)),statetimeline:()=>new mc("state-timeline","10.0.0",(()=>nc),(()=>ac)),statushistory:()=>new mc("status-history","10.0.0",(()=>ic),(()=>sc)),table:()=>new mc("table","10.0.0",(()=>oc)),text:()=>new mc("text","10.0.0",(()=>lc)),timeseries:()=>new mc("timeseries","10.0.0"),trend:()=>new mc("trend","10.0.0"),traces:()=>new mc("traces","10.0.0"),xychart:()=>new mc("xychart","10.0.0",(()=>cc),(()=>uc))};const vc={barchart:()=>new pc((()=>Uu)),bargauge:()=>new pc,datagrid:()=>new pc,flamegraph:()=>new pc,gauge:()=>new pc,geomap:()=>new pc,heatmap:()=>new pc,histogram:()=>new pc((()=>Ju)),logs:()=>new pc,news:()=>new pc,nodegraph:()=>new pc,piechart:()=>new pc,stat:()=>new pc,statetimeline:()=>new pc((()=>ac)),statushistory:()=>new pc((()=>sc)),table:()=>new pc,text:()=>new pc,timeseries:()=>new pc,trend:()=>new pc,traces:()=>new pc,xychart:()=>new pc((()=>uc))},bc={getUrlWithAppState:o,registerRuntimePanelPlugin:function({pluginId:e,plugin:t}){if(u.has(e))throw new Error(`A runtime panel plugin with id ${e} has already been registered`);t.meta={...t.meta,id:e,name:e,module:"runtime plugin",baseUrl:"runtime plugin",info:{author:{name:"Runtime plugin "+e},description:"",links:[],logos:{large:"",small:""},screenshots:[],updated:"",version:""}},u.set(e,t)},registerRuntimeDataSource:M,registerVariableMacro:function(e,t){if(Ie.get(e))throw new Error(`Macro already registered ${e}`);return Ie.set(e,t),()=>{Ie.delete(e)}},cloneSceneObjectState:I,syncStateFromSearchParams:function(e,t){Zs(e,t,new Hs)},getUrlState:Ys,renderPrometheusLabelFilters:us,escapeLabelValueInRegexSelector:ds,escapeLabelValueInExactSelector:cs,escapeURLDelimiters:function(e){return ms(fs(e))},isAdHocVariable:function(e){return"adhoc"===e.state.type},isConstantVariable:function(e){return"constant"===e.state.type},isCustomVariable:function(e){return"custom"===e.state.type},isDataSourceVariable:function(e){return"datasource"===e.state.type},isIntervalVariable:function(e){return"interval"===e.state.type},isQueryVariable:function(e){return"query"===e.state.type},isTextBoxVariable:function(e){return"textbox"===e.state.type},isGroupByVariable:function(e){return"groupby"===e.state.type}}},4049:(e,t,r)=>{"use strict";r.d(t,{B:()=>o,G:()=>a,P:()=>d,S:()=>i,T:()=>v,V:()=>n,a:()=>l,b:()=>u,c:()=>c,d:()=>h,e:()=>g,f:()=>p,g:()=>m,h:()=>f,i:()=>s});var n=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(n||{}),a=(e=>(e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme",e))(a||{}),i=(e=>(e.None="none",e.Normal="normal",e.Percent="percent",e))(i||{}),s=(e=>(e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical",e))(s||{}),o=(e=>(e.Background="background",e.BackgroundSolid="background_solid",e.None="none",e.Value="value",e))(o||{}),l=(e=>(e.Area="area",e.Line="line",e.None="none",e))(l||{}),u=(e=>(e.Auto="auto",e.Center="center",e))(u||{}),c=(e=>(e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name",e))(c||{}),d=(e=>(e.Inverted="inverted",e.SameAsValue="same_as_value",e.Standard="standard",e))(d||{}),h=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(h||{}),p=(e=>(e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd",e))(p||{}),f=(e=>(e.Color="color",e.Hidden="hidden",e.Text="text",e))(f||{}),m=(e=>(e.Auto="auto",e.Hidden="hidden",e.Left="left",e.Top="top",e))(m||{}),g=(e=>(e.Auto="auto",e.Manual="manual",e))(g||{}),v=(e=>(e.Auto="auto",e.Lg="lg",e.Md="md",e.Sm="sm",e))(v||{})},5938:(e,t,r)=>{"use strict";r.d(t,{KQ:()=>i,P7:()=>a});var n=r(4049);var a=(e=>(e.Opacity="opacity",e.Scheme="scheme",e))(a||{});const i={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},selectionMode:"x",showValue:n.V.Auto,tooltip:{mode:n.d.Single,yHistogram:!1,showColorScale:!1}}},2039:e=>{"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0,a=void 0,i=void 0,s=[];return function(){var l=function(e){return"function"==typeof e?e():e}(t),u=(new Date).getTime(),c=!n||u-n>l;n=u;for(var d=arguments.length,h=Array(d),p=0;p<d;p++)h[p]=arguments[p];if(c&&r.leading)return r.accumulate?Promise.resolve(e.call(this,[h])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(h)));if(a?clearTimeout(i):a=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}(),s.push(h),i=setTimeout(o.bind(this),l),r.accumulate){var f=s.length-1;return a.promise.then((function(e){return e[f]}))}return a.promise};function o(){var t=a;clearTimeout(i),Promise.resolve(r.accumulate?e.call(this,s):e.apply(this,s[s.length-1])).then(t.resolve,t.reject),s=[],a=null}}},3823:e=>{"use strict";const t=[],r=[],n=(e,n)=>{if(e===n)return 0;const a=e;e.length>n.length&&(e=n,n=a);let i=e.length,s=n.length;for(;i>0&&e.charCodeAt(~-i)===n.charCodeAt(~-s);)i--,s--;let o,l,u,c,d=0;for(;d<i&&e.charCodeAt(d)===n.charCodeAt(d);)d++;if(i-=d,s-=d,0===i)return s;let h=0,p=0;for(;h<i;)r[h]=e.charCodeAt(d+h),t[h]=++h;for(;p<s;)for(o=n.charCodeAt(d+p),u=p++,l=p,h=0;h<i;h++)c=o===r[h]?u:u+1,u=t[h],l=t[h]=u>l?c>l?l+1:c:c>u?u+1:c;return l};e.exports=n,e.exports.default=n},7842:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",a=9007199254740991,i="[object Arguments]",s="[object Array]",o="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",m="[object RegExp]",g="[object Set]",v="[object String]",b="[object Symbol]",y="[object WeakMap]",O="[object ArrayBuffer]",w="[object DataView]",x=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[i]=_[s]=_[O]=_[o]=_[w]=_[l]=_[u]=_[c]=_[d]=_[h]=_[p]=_[m]=_[g]=_[v]=_[y]=!1;var $="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,E="object"==typeof self&&self&&self.Object===Object&&self,P=$||E||Function("return this")(),R=t&&!t.nodeType&&t,T=R&&e&&!e.nodeType&&e,C=T&&T.exports===R,k=C&&$.process,D=function(){try{return k&&k.binding&&k.binding("util")}catch(e){}}(),I=D&&D.isTypedArray;function A(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function N(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var M,j,Q,V=Array.prototype,z=Function.prototype,F=Object.prototype,B=P["__core-js_shared__"],X=z.toString,q=F.hasOwnProperty,U=(M=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",W=F.toString,H=RegExp("^"+X.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=C?P.Buffer:void 0,Y=P.Symbol,Z=P.Uint8Array,K=F.propertyIsEnumerable,J=V.splice,ee=Y?Y.toStringTag:void 0,te=Object.getOwnPropertySymbols,re=G?G.isBuffer:void 0,ne=(j=Object.keys,Q=Object,function(e){return j(Q(e))}),ae=De(P,"DataView"),ie=De(P,"Map"),se=De(P,"Promise"),oe=De(P,"Set"),le=De(P,"WeakMap"),ue=De(Object,"create"),ce=Ne(ae),de=Ne(ie),he=Ne(se),pe=Ne(oe),fe=Ne(le),me=Y?Y.prototype:void 0,ge=me?me.valueOf:void 0;function ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ye;++t<r;)this.add(e[t])}function we(e){var t=this.__data__=new be(e);this.size=t.size}function xe(e,t){var r=Qe(e),n=!r&&je(e),a=!r&&!n&&Ve(e),i=!r&&!n&&!a&&qe(e),s=r||n||a||i,o=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=o.length;for(var u in e)!t&&!q.call(e,u)||s&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Le(u,l))||o.push(u);return o}function Se(e,t){for(var r=e.length;r--;)if(Me(e[r][0],t))return r;return-1}function _e(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ee&&ee in Object(e)?function(e){var t=q.call(e,ee),r=e[ee];try{e[ee]=void 0;var n=!0}catch(e){}var a=W.call(e);n&&(t?e[ee]=r:delete e[ee]);return a}(e):function(e){return W.call(e)}(e)}function $e(e){return Xe(e)&&_e(e)==i}function Ee(e,t,r,n,a){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!=e&&t!=t:function(e,t,r,n,a,c){var f=Qe(e),y=Qe(t),x=f?s:Ae(e),S=y?s:Ae(t),_=(x=x==i?p:x)==p,$=(S=S==i?p:S)==p,E=x==S;if(E&&Ve(e)){if(!Ve(t))return!1;f=!0,_=!1}if(E&&!_)return c||(c=new we),f||qe(e)?Te(e,t,r,n,a,c):function(e,t,r,n,a,i,s){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!i(new Z(e),new Z(t)));case o:case l:case h:return Me(+e,+t);case u:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case d:var c=L;case g:var p=1&n;if(c||(c=N),e.size!=t.size&&!p)return!1;var f=s.get(e);if(f)return f==t;n|=2,s.set(e,t);var y=Te(c(e),c(t),n,a,i,s);return s.delete(e),y;case b:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,x,r,n,a,c);if(!(1&r)){var P=_&&q.call(e,"__wrapped__"),R=$&&q.call(t,"__wrapped__");if(P||R){var T=P?e.value():e,C=R?t.value():t;return c||(c=new we),a(T,C,r,n,c)}}if(!E)return!1;return c||(c=new we),function(e,t,r,n,a,i){var s=1&r,o=Ce(e),l=o.length,u=Ce(t),c=u.length;if(l!=c&&!s)return!1;var d=l;for(;d--;){var h=o[d];if(!(s?h in t:q.call(t,h)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var f=!0;i.set(e,t),i.set(t,e);var m=s;for(;++d<l;){var g=e[h=o[d]],v=t[h];if(n)var b=s?n(v,g,h,t,e,i):n(g,v,h,e,t,i);if(!(void 0===b?g===v||a(g,v,r,n,i):b)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var y=e.constructor,O=t.constructor;y==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof O&&O instanceof O||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,r,n,a,c)}(e,t,r,n,Ee,a))}function Pe(e){return!(!Be(e)||function(e){return!!U&&U in e}(e))&&(ze(e)?H:x).test(Ne(e))}function Re(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||F,t!==n)return ne(e);var t,r,n,a=[];for(var i in Object(e))q.call(e,i)&&"constructor"!=i&&a.push(i);return a}function Te(e,t,r,n,a,i){var s=1&r,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var c=-1,d=!0,h=2&r?new Oe:void 0;for(i.set(e,t),i.set(t,e);++c<o;){var p=e[c],f=t[c];if(n)var m=s?n(f,p,c,t,e,i):n(p,f,c,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!A(t,(function(e,t){if(s=t,!h.has(s)&&(p===e||a(p,e,r,n,i)))return h.push(t);var s}))){d=!1;break}}else if(p!==f&&!a(p,f,r,n,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function Ce(e){return function(e,t,r){var n=t(e);return Qe(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,Ue,Ie)}function ke(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function De(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}ve.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve.prototype.get=function(e){var t=this.__data__;if(ue){var r=t[e];return r===n?void 0:r}return q.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:q.call(t,e)},ve.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ue&&void 0===t?n:t,this},be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(e){var t=this.__data__,r=Se(t,e);return!(r<0)&&(r==t.length-1?t.pop():J.call(t,r,1),--this.size,!0)},be.prototype.get=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]},be.prototype.has=function(e){return Se(this.__data__,e)>-1},be.prototype.set=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(ie||be),string:new ve}},ye.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return ke(this,e).get(e)},ye.prototype.has=function(e){return ke(this,e).has(e)},ye.prototype.set=function(e,t){var r=ke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,n),this},Oe.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new be,this.size=0},we.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var r=this.__data__;if(r instanceof be){var n=r.__data__;if(!ie||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ye(n)}return r.set(e,t),this.size=r.size,this};var Ie=te?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}(te(e),(function(t){return K.call(e,t)})))}:function(){return[]},Ae=_e;function Le(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Me(e,t){return e===t||e!=e&&t!=t}(ae&&Ae(new ae(new ArrayBuffer(1)))!=w||ie&&Ae(new ie)!=d||se&&Ae(se.resolve())!=f||oe&&Ae(new oe)!=g||le&&Ae(new le)!=y)&&(Ae=function(e){var t=_e(e),r=t==p?e.constructor:void 0,n=r?Ne(r):"";if(n)switch(n){case ce:return w;case de:return d;case he:return f;case pe:return g;case fe:return y}return t});var je=$e(function(){return arguments}())?$e:function(e){return Xe(e)&&q.call(e,"callee")&&!K.call(e,"callee")},Qe=Array.isArray;var Ve=re||function(){return!1};function ze(e){if(!Be(e))return!1;var t=_e(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var qe=I?function(e){return function(t){return e(t)}}(I):function(e){return Xe(e)&&Fe(e.length)&&!!_[_e(e)]};function Ue(e){return null!=(t=e)&&Fe(t.length)&&!ze(t)?xe(e):Re(e);var t}e.exports=function(e,t){return Ee(e,t)}},6643:function(e){e.exports=function(){var e=[],t=[],r={},n={},a={};function i(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function s(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function o(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,r){return t[r]||""}))}function l(e,t){return e.replace(t[0],(function(r,n){var a=o(t[1],arguments);return s(""===r?e[n-1]:r,a)}))}function u(e,t,n){if(!e.length||r.hasOwnProperty(e))return t;for(var a=n.length;a--;){var i=n[a];if(i[0].test(t))return l(t,i)}return t}function c(e,t,r){return function(n){var a=n.toLowerCase();return t.hasOwnProperty(a)?s(n,a):e.hasOwnProperty(a)?s(n,e[a]):u(a,n,r)}}function d(e,t,r,n){return function(n){var a=n.toLowerCase();return!!t.hasOwnProperty(a)||!e.hasOwnProperty(a)&&u(a,a,r)===a}}function h(e,t,r){return(r?t+" ":"")+(1===t?h.singular(e):h.plural(e))}return h.plural=c(a,n,e),h.isPlural=d(a,n,e),h.singular=c(n,a,t),h.isSingular=d(n,a,t),h.addPluralRule=function(t,r){e.push([i(t),r])},h.addSingularRule=function(e,r){t.push([i(e),r])},h.addUncountableRule=function(e){"string"!=typeof e?(h.addPluralRule(e,"$0"),h.addSingularRule(e,"$0")):r[e.toLowerCase()]=!0},h.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),a[e]=t,n[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return h.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return h.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return h.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h}()},362:(e,t,r)=>{"use strict";var n=r(6441);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},2688:(e,t,r)=>{e.exports=r(362)()},6441:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=h(r(2688)),i=h(r(8398)),s=h(r(8262)),o=r(2837),l=r(402),u=r(6732),c=h(r(1060)),d=h(r(7988));function h(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends n.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:n}=t;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:{...r}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{(0,d.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const r=(0,l.createDraggableData)(this,t),n={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[a,i]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=a,n.y=i,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-this.state.x,r.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(n)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const r={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:i.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:r,defaultPosition:a,defaultClassName:i,defaultClassNameDragging:u,defaultClassNameDragged:d,position:h,positionOffset:p,scale:m,...g}=this.props;let v={},b=null;const y=!Boolean(h)||this.state.dragging,O=h||a,w={x:(0,l.canDragX)(this)&&y?this.state.x:O.x,y:(0,l.canDragY)(this)&&y?this.state.y:O.y};this.state.isElementSVG?b=(0,o.createSVGTransform)(w,p):v=(0,o.createCSSTransform)(w,p);const x=(0,s.default)(r.props.className||"",i,{[u]:this.state.dragging,[d]:this.state.dragged});return n.createElement(c.default,f({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:x,style:{...r.props.style,...v},transform:b}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...c.default.propTypes,axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),m(g,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},1060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=c(r(2688)),i=c(r(8398)),s=r(2837),o=r(402),l=r(6732),u=c(r(7988));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={start:"touchstart",move:"touchmove",stop:"touchend"},f={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=f;class g extends n.Component{constructor(){super(...arguments),h(this,"dragging",!1),h(this,"lastX",NaN),h(this,"lastY",NaN),h(this,"touchIdentifier",null),h(this,"mounted",!1),h(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const n=(0,s.getTouchIdentifier)(e);this.touchIdentifier=n;const a=(0,o.getControlPosition)(e,n,this);if(null==a)return;const{x:i,y:l}=a,c=(0,o.createCoreData)(this,i,l);(0,u.default)("DraggableCore: handleDragStart: %j",c),(0,u.default)("calling",this.props.onStart);!1!==this.props.onStart(e,c)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(r),this.dragging=!0,this.lastX=i,this.lastY=l,(0,s.addEvent)(r,m.move,this.handleDrag),(0,s.addEvent)(r,m.stop,this.handleDragStop))})),h(this,"handleDrag",(e=>{const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=n-this.lastY;if([e,t]=(0,o.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,n=this.lastY+t}const a=(0,o.createCoreData)(this,r,n);(0,u.default)("DraggableCore: handleDrag: %j",a);if(!1!==this.props.onDrag(e,a)&&!1!==this.mounted)this.lastX=r,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),h(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,o.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,n=this.lastY+t}const a=(0,o.createCoreData)(this,r,n);if(!1===this.props.onStop(e,a)||!1===this.mounted)return!1;const i=this.findDOMNode();i&&this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(i.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,i&&((0,u.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(i.ownerDocument,m.move,this.handleDrag),(0,s.removeEvent)(i.ownerDocument,m.stop,this.handleDragStop))})),h(this,"onMouseDown",(e=>(m=f,this.handleDragStart(e)))),h(this,"onMouseUp",(e=>(m=f,this.handleDragStop(e)))),h(this,"onTouchStart",(e=>(m=p,this.handleDragStart(e)))),h(this,"onTouchEnd",(e=>(m=p,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,s.addEvent)(e,p.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,s.removeEvent)(t,f.move,this.handleDrag),(0,s.removeEvent)(t,p.move,this.handleDrag),(0,s.removeEvent)(t,f.stop,this.handleDragStop),(0,s.removeEvent)(t,p.stop,this.handleDragStop),(0,s.removeEvent)(e,p.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:i.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,h(g,"displayName","DraggableCore"),h(g,"propTypes",{allowAnyClick:a.default.bool,children:a.default.node.isRequired,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:a.default.arrayOf(a.default.number),handle:a.default.string,cancel:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),h(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},8230:(e,t,r)=>{"use strict";const{default:n,DraggableCore:a}=r(9111);e.exports=n,e.exports.default=n,e.exports.DraggableCore=a},2837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=u,t.addEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&u(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const r=l(e,t,"px");return{[(0,a.browserPrefixToKey)("transform",a.default)]:r}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,n.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,n.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingTop),t-=(0,n.int)(r.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingLeft),t-=(0,n.int)(r.paddingRight),t},t.matchesSelector=o,t.matchesSelectorAndParentsTo=function(e,t,r){let n=e;do{if(o(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,r){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-n.left)/r,i=(e.clientY+t.scrollTop-n.top)/r;return{x:a,y:i}},t.outerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderTopWidth),t+=(0,n.int)(r.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderLeftWidth),t+=(0,n.int)(r.borderRightWidth),t},t.removeClassName=c,t.removeEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&c(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var n=r(6732),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,r&&r.set(e,n);return n}(r(7350));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}let s="";function o(e,t){return s||(s=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,n.isFunction)(e[t])}))),!!(0,n.isFunction)(e[s])&&e[s](t)}function l(e,t,r){let{x:n,y:a}=e,i="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+r),n="".concat("string"==typeof t.y?t.y:t.y+r);i="translate(".concat(e,", ").concat(n,")")+i}return i}function u(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},7350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=a,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=n;const r=["Moz","Webkit","O","ms"];function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n)return"";if(t in n)return"";for(let e=0;e<r.length;e++)if(a(t,r[e])in n)return r[e];return""}function a(e,t){return t?"".concat(t).concat(function(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}t.default=n()},7988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,r){const a=!(0,n.isNum)(e.lastX),s=i(e);return a?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:s,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}},t.createDraggableData=function(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:s}=e.props;s="string"==typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);const o=i(e);if("string"==typeof s){const{ownerDocument:e}=o,t=e.defaultView;let r;if(r="parent"===s?o.parentNode:e.querySelector(s),!(r instanceof t.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const i=r,l=t.getComputedStyle(o),u=t.getComputedStyle(i);s={left:-o.offsetLeft+(0,n.int)(u.paddingLeft)+(0,n.int)(l.marginLeft),top:-o.offsetTop+(0,n.int)(u.paddingTop)+(0,n.int)(l.marginTop),right:(0,a.innerWidth)(i)-(0,a.outerWidth)(o)-o.offsetLeft+(0,n.int)(u.paddingRight)-(0,n.int)(l.marginRight),bottom:(0,a.innerHeight)(i)-(0,a.outerHeight)(o)-o.offsetTop+(0,n.int)(u.paddingBottom)-(0,n.int)(l.marginBottom)}}(0,n.isNum)(s.right)&&(t=Math.min(t,s.right));(0,n.isNum)(s.bottom)&&(r=Math.min(r,s.bottom));(0,n.isNum)(s.left)&&(t=Math.max(t,s.left));(0,n.isNum)(s.top)&&(r=Math.max(r,s.top));return[t,r]},t.getControlPosition=function(e,t,r){const n="number"==typeof t?(0,a.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;const s=i(r),o=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,a.offsetXYFromParent)(n||e,o,r.props.scale)},t.snapToGrid=function(e,t,r){const n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]};var n=r(6732),a=r(2837);function i(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},6732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},8262:(e,t,r)=>{"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.r(t),r.d(t,{clsx:()=>a,default:()=>i});const i=a},8100:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=h(r(5959)),i=h(r(2688)),s=r(8230),o=r(936),l=r(414),u=r(906),c=r(7222),d=h(r(7256));function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,n,i=v(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(b(e=i.call.apply(i,[this].concat(r))),"state",{resizing:null,dragging:null,className:""}),O(b(e),"elementRef",a.default.createRef()),O(b(e),"onDragStart",(function(t,r){var n=r.node,a=e.props,i=a.onDragStart,s=a.transformScale;if(i){var o={top:0,left:0},l=n.offsetParent;if(l){var c=l.getBoundingClientRect(),d=n.getBoundingClientRect(),h=d.left/s,p=c.left/s,f=d.top/s,m=c.top/s;o.left=h-p+l.scrollLeft,o.top=f-m+l.scrollTop,e.setState({dragging:o});var g=(0,u.calcXY)(e.getPositionParams(),o.top,o.left,e.props.w,e.props.h),v=g.x,y=g.y;return i.call(b(e),e.props.i,v,y,{e:t,node:n,newPosition:o})}}})),O(b(e),"onDrag",(function(t,r){var n=r.node,a=r.deltaX,i=r.deltaY,s=e.props.onDrag;if(s){if(!e.state.dragging)throw new Error("onDrag called before onDragStart.");var o=e.state.dragging.top+i,l=e.state.dragging.left+a,c=e.props,d=c.isBounded,h=c.i,p=c.w,f=c.h,m=c.containerWidth,g=e.getPositionParams();if(d){var v=n.offsetParent;if(v){var y=e.props,O=y.margin,w=y.rowHeight,x=v.clientHeight-(0,u.calcGridItemWHPx)(f,w,O[1]);o=(0,u.clamp)(o,0,x);var S=(0,u.calcGridColWidth)(g),_=m-(0,u.calcGridItemWHPx)(p,S,O[0]);l=(0,u.clamp)(l,0,_)}}var $={top:o,left:l};e.setState({dragging:$});var E=(0,u.calcXY)(g,o,l,p,f),P=E.x,R=E.y;return s.call(b(e),h,P,R,{e:t,node:n,newPosition:$})}})),O(b(e),"onDragStop",(function(t,r){var n=r.node,a=e.props.onDragStop;if(a){if(!e.state.dragging)throw new Error("onDragEnd called before onDragStart.");var i=e.props,s=i.w,o=i.h,l=i.i,c=e.state.dragging,d=c.left,h=c.top,p={top:h,left:d};e.setState({dragging:null});var f=(0,u.calcXY)(e.getPositionParams(),h,d,s,o),m=f.x,g=f.y;return a.call(b(e),l,m,g,{e:t,node:n,newPosition:p})}})),O(b(e),"onResizeStop",(function(t,r){e.onResizeHandler(t,r,"onResizeStop")})),O(b(e),"onResizeStart",(function(t,r){e.onResizeHandler(t,r,"onResizeStart")})),O(b(e),"onResize",(function(t,r){e.onResizeHandler(t,r,"onResize")})),e}return t=c,r=[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;var r=(0,u.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),n=(0,u.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(r,n)||this.props.useCSSTransforms!==e.useCSSTransforms}},{key:"componentDidMount",value:function(){this.moveDroppingItem({})}},{key:"componentDidUpdate",value:function(e){this.moveDroppingItem(e)}},{key:"moveDroppingItem",value:function(e){var t=this.props.droppingPosition;if(t){var r=this.elementRef.current;if(r){var n=e.droppingPosition||{left:0,top:0},a=this.state.dragging,i=a&&t.left!==n.left||t.top!==n.top;if(a){if(i){var s=t.left-a.left,o=t.top-a.top;this.onDrag(t.e,{node:r,deltaX:s,deltaY:o})}}else this.onDragStart(t.e,{node:r,deltaX:t.left,deltaY:t.top})}}}},{key:"getPositionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}},{key:"createStyle",value:function(e){var t,r=this.props,n=r.usePercentages,a=r.containerWidth;return r.useCSSTransforms?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),n&&(t.left=(0,l.perc)(e.left/a),t.width=(0,l.perc)(e.width/a))),t}},{key:"mixinDraggable",value:function(e,t){return a.default.createElement(s.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}},{key:"mixinResizable",value:function(e,t,r){var n=this.props,i=n.cols,s=n.x,l=n.minW,c=n.minH,d=n.maxW,h=n.maxH,p=n.transformScale,f=n.resizeHandles,m=n.resizeHandle,g=this.getPositionParams(),v=(0,u.calcGridItemPosition)(g,0,0,i-s,0).width,b=(0,u.calcGridItemPosition)(g,0,0,l,c),y=(0,u.calcGridItemPosition)(g,0,0,d,h),O=[b.width,b.height],w=[Math.min(y.width,v),Math.min(y.height,1/0)];return a.default.createElement(o.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:O,maxConstraints:w,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,onResize:this.onResize,transformScale:p,resizeHandles:f,handle:m},e)}},{key:"onResizeHandler",value:function(e,t,r){var n=t.node,a=t.size,i=this.props[r];if(i){var s=this.props,o=s.cols,l=s.x,c=s.y,d=s.i,h=s.maxH,p=s.minH,f=this.props,m=f.minW,g=f.maxW,v=(0,u.calcWH)(this.getPositionParams(),a.width,a.height,l,c),b=v.w,y=v.h;m=Math.max(m,1),g=Math.min(g,o-l),b=(0,u.clamp)(b,m,g),y=(0,u.clamp)(y,p,h),this.setState({resizing:"onResizeStop"===r?null:a}),i.call(this,d,b,y,{e,node:n,size:a})}}},{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,n=e.w,i=e.h,s=e.isDraggable,o=e.isResizable,l=e.droppingPosition,c=e.useCSSTransforms,h=(0,u.calcGridItemPosition)(this.getPositionParams(),t,r,n,i,this.state),p=a.default.Children.only(this.props.children),m=a.default.cloneElement(p,{ref:this.elementRef,className:(0,d.default)("react-grid-item",p.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":s,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(l),cssTransforms:c}),style:f(f(f({},this.props.style),p.props.style),this.createStyle(h))});return m=this.mixinResizable(m,h,o),m=this.mixinDraggable(m,s)}}],r&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.default.Component);t.default=w,O(w,"propTypes",{children:i.default.element,cols:i.default.number.isRequired,containerWidth:i.default.number.isRequired,rowHeight:i.default.number.isRequired,margin:i.default.array.isRequired,maxRows:i.default.number.isRequired,containerPadding:i.default.array.isRequired,x:i.default.number.isRequired,y:i.default.number.isRequired,w:i.default.number.isRequired,h:i.default.number.isRequired,minW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minWidth not Number"):r>e.w||r>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxWidth not Number"):r<e.w||r<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minHeight not Number"):r>e.h||r>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxHeight not Number"):r<e.h||r<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:i.default.string.isRequired,resizeHandles:c.resizeHandleAxesType,resizeHandle:c.resizeHandleType,onDragStop:i.default.func,onDragStart:i.default.func,onDrag:i.default.func,onResizeStop:i.default.func,onResizeStart:i.default.func,onResize:i.default.func,isDraggable:i.default.bool.isRequired,isResizable:i.default.bool.isRequired,isBounded:i.default.bool.isRequired,static:i.default.bool,useCSSTransforms:i.default.bool.isRequired,transformScale:i.default.number,className:i.default.string,handle:i.default.string,cancel:i.default.string,droppingPosition:i.default.shape({e:i.default.object.isRequired,left:i.default.number.isRequired,top:i.default.number.isRequired})}),O(w,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},9482:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(5959)),i=d(r(7842)),s=d(r(7256)),o=r(414),l=r(906),u=d(r(8100)),c=d(r(7222));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,r)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $="react-grid-layout",E=!1;try{E=/firefox/i.test(navigator.userAgent)}catch(e){}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(d,e);var t,r,n,c=w(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(x(e=c.call.apply(c,[this].concat(r))),"state",{activeDrag:null,layout:(0,o.synchronizeLayoutWithChildren)(e.props.layout,e.props.children,e.props.cols,(0,o.compactType)(e.props),e.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,droppingDOMNode:null,children:[]}),_(x(e),"dragEnterCounter",0),_(x(e),"onDragStart",(function(t,r,n,a){var i=a.e,s=a.node,l=e.state.layout,u=(0,o.getLayoutItem)(l,t);if(u)return e.setState({oldDragItem:(0,o.cloneLayoutItem)(u),oldLayout:l}),e.props.onDragStart(l,u,u,null,i,s)})),_(x(e),"onDrag",(function(t,r,n,a){var i=a.e,s=a.node,l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,h=c.allowOverlap,p=c.preventCollision,f=(0,o.getLayoutItem)(u,t);if(f){var m={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:t};u=(0,o.moveElement)(u,f,r,n,!0,p,(0,o.compactType)(e.props),d,h),e.props.onDrag(u,l,f,m,i,s),e.setState({layout:h?u:(0,o.compact)(u,(0,o.compactType)(e.props),d),activeDrag:m})}})),_(x(e),"onDragStop",(function(t,r,n,a){var i=a.e,s=a.node;if(e.state.activeDrag){var l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,h=c.preventCollision,p=c.allowOverlap,f=(0,o.getLayoutItem)(u,t);if(f){u=(0,o.moveElement)(u,f,r,n,!0,h,(0,o.compactType)(e.props),d,p),e.props.onDragStop(u,l,f,null,i,s);var m=p?u:(0,o.compact)(u,(0,o.compactType)(e.props),d),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)}}})),_(x(e),"onResizeStart",(function(t,r,n,a){var i=a.e,s=a.node,l=e.state.layout,u=(0,o.getLayoutItem)(l,t);u&&(e.setState({oldResizeItem:(0,o.cloneLayoutItem)(u),oldLayout:e.state.layout}),e.props.onResizeStart(l,u,u,null,i,s))})),_(x(e),"onResize",(function(t,r,n,a){var i=a.e,s=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,h=d.cols,p=d.preventCollision,f=d.allowOverlap,v=(0,o.withLayoutItem)(u,t,(function(e){var t;if(p&&!f){var a=(0,o.getAllCollisions)(u,m(m({},e),{},{w:r,h:n})).filter((function(t){return t.i!==e.i}));if(t=a.length>0){var i=1/0,s=1/0;a.forEach((function(t){t.x>e.x&&(i=Math.min(i,t.x)),t.y>e.y&&(s=Math.min(s,t.y))})),Number.isFinite(i)&&(e.w=i-e.x),Number.isFinite(s)&&(e.h=s-e.y)}}return t||(e.w=r,e.h=n),e})),b=g(v,2),y=b[0],O=b[1];if(O){var w={w:O.w,h:O.h,x:O.x,y:O.y,static:!0,i:t};e.props.onResize(y,c,O,w,i,s),e.setState({layout:f?y:(0,o.compact)(y,(0,o.compactType)(e.props),h),activeDrag:w})}})),_(x(e),"onResizeStop",(function(t,r,n,a){var i=a.e,s=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,h=d.cols,p=d.allowOverlap,f=(0,o.getLayoutItem)(u,t);e.props.onResizeStop(u,c,f,null,i,s);var m=p?u:(0,o.compact)(u,(0,o.compactType)(e.props),h),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldResizeItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)})),_(x(e),"onDragOver",(function(t){var r;if(t.preventDefault(),t.stopPropagation(),E&&(null===(r=t.nativeEvent.target)||void 0===r||!r.classList.contains($)))return!1;var n=e.props,i=n.droppingItem,s=n.onDropDragOver,o=n.margin,u=n.cols,c=n.rowHeight,d=n.maxRows,h=n.width,f=n.containerPadding,g=n.transformScale,v=null==s?void 0:s(t);if(!1===v)return e.state.droppingDOMNode&&e.removeDroppingPlaceholder(),!1;var b=m(m({},i),v),y=e.state.layout,O=t.nativeEvent,w=O.layerX,x=O.layerY,S={left:w/g,top:x/g,e:t};if(e.state.droppingDOMNode){if(e.state.droppingPosition){var _=e.state.droppingPosition,P=_.left,R=_.top;(P!=w||R!=x)&&e.setState({droppingPosition:S})}}else{var T={cols:u,margin:o,maxRows:d,rowHeight:c,containerWidth:h,containerPadding:f||o},C=(0,l.calcXY)(T,x,w,b.w,b.h);e.setState({droppingDOMNode:a.createElement("div",{key:b.i}),droppingPosition:S,layout:[].concat(p(y),[m(m({},b),{},{x:C.x,y:C.y,static:!1,isDraggable:!0})])})}})),_(x(e),"removeDroppingPlaceholder",(function(){var t=e.props,r=t.droppingItem,n=t.cols,a=e.state.layout,i=(0,o.compact)(a.filter((function(e){return e.i!==r.i})),(0,o.compactType)(e.props),n);e.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})})),_(x(e),"onDragLeave",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter--,0===e.dragEnterCounter&&e.removeDroppingPlaceholder()})),_(x(e),"onDragEnter",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter++})),_(x(e),"onDrop",(function(t){t.preventDefault(),t.stopPropagation();var r=e.props.droppingItem,n=e.state.layout,a=n.find((function(e){return e.i===r.i}));e.dragEnterCounter=0,e.removeDroppingPlaceholder(),e.props.onDrop(n,a,t)})),e}return t=d,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r;return t.activeDrag?null:((0,i.default)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,o.childrenEqual)(e.children,t.children)||(r=t.layout):r=e.layout,r?{layout:(0,o.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,o.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}}],(r=[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children||!(0,o.fastRGLPropsEqual)(this.props,e,i.default)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.activeDrag){var r=this.state.layout,n=t.layout;this.onLayoutMaybeChanged(r,n)}}},{key:"containerHeight",value:function(){if(this.props.autoSize){var e=(0,o.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}}},{key:"onLayoutMaybeChanged",value:function(e,t){t||(t=this.state.layout),(0,i.default)(t,e)||this.props.onLayoutChange(e)}},{key:"placeholder",value:function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,r=t.width,n=t.cols,i=t.margin,s=t.containerPadding,o=t.rowHeight,l=t.maxRows,c=t.useCSSTransforms,d=t.transformScale;return a.createElement(u.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:r,cols:n,margin:i,containerPadding:s||i,maxRows:l,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:d},a.createElement("div",null))}},{key:"processGridItem",value:function(e,t){if(e&&e.key){var r=(0,o.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;var n=this.props,i=n.width,s=n.cols,l=n.margin,c=n.containerPadding,d=n.rowHeight,h=n.maxRows,p=n.isDraggable,f=n.isResizable,m=n.isBounded,g=n.useCSSTransforms,v=n.transformScale,b=n.draggableCancel,y=n.draggableHandle,O=n.resizeHandles,w=n.resizeHandle,x=this.state,S=x.mounted,_=x.droppingPosition,$="boolean"==typeof r.isDraggable?r.isDraggable:!r.static&&p,E="boolean"==typeof r.isResizable?r.isResizable:!r.static&&f,P=r.resizeHandles||O,R=$&&m&&!1!==r.isBounded;return a.createElement(u.default,{containerWidth:i,cols:s,margin:l,containerPadding:c||l,maxRows:h,rowHeight:d,cancel:b,handle:y,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:$,isResizable:E,isBounded:R,useCSSTransforms:g&&S,usePercentages:!S,transformScale:v,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:t?_:void 0,resizeHandles:P,resizeHandle:w},e)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.style,i=t.isDroppable,l=t.innerRef,u=(0,s.default)($,r),c=m({height:this.containerHeight()},n);return a.createElement("div",{ref:l,className:u,style:c,onDrop:i?this.onDrop:o.noop,onDragLeave:i?this.onDragLeave:o.noop,onDragEnter:i?this.onDragEnter:o.noop,onDragOver:i?this.onDragOver:o.noop},a.Children.map(this.props.children,(function(t){return e.processGridItem(t)})),i&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Component);t.default=P,_(P,"displayName","ReactGridLayout"),_(P,"propTypes",c.default),_(P,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:o.noop,onDragStart:o.noop,onDrag:o.noop,onDragStop:o.noop,onResizeStart:o.noop,onResize:o.noop,onResizeStop:o.noop,onDrop:o.noop,onDropDragOver:o.noop})},7222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var n=i(r(2688)),a=i(r(5959));function i(e){return e&&e.__esModule?e:{default:e}}var s=n.default.arrayOf(n.default.oneOf(["s","w","e","n","sw","nw","se","ne"]));t.resizeHandleAxesType=s;var o=n.default.oneOfType([n.default.node,n.default.func]);t.resizeHandleType=o;var l={className:n.default.string,style:n.default.object,width:n.default.number,autoSize:n.default.bool,cols:n.default.number,draggableCancel:n.default.string,draggableHandle:n.default.string,verticalCompact:function(e){e.verticalCompact,0},compactType:n.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&r(414).validateLayout(t,"layout")},margin:n.default.arrayOf(n.default.number),containerPadding:n.default.arrayOf(n.default.number),rowHeight:n.default.number,maxRows:n.default.number,isBounded:n.default.bool,isDraggable:n.default.bool,isResizable:n.default.bool,allowOverlap:n.default.bool,preventCollision:n.default.bool,useCSSTransforms:n.default.bool,transformScale:n.default.number,isDroppable:n.default.bool,resizeHandles:s,resizeHandle:o,onLayoutChange:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onDragStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,onResizeStop:n.default.func,onDrop:n.default.func,droppingItem:n.default.shape({i:n.default.string.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired}),children:function(e,t){var r=e[t],n={};a.default.Children.forEach(r,(function(e){if(null!=(null==e?void 0:e.key)){if(n[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');n[e.key]=!0}}))},innerRef:n.default.any};t.default=l},4636:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(5959)),i=d(r(2688)),s=d(r(7842)),o=r(414),l=r(544),u=d(r(9482)),c=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,r)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){return Object.prototype.toString.call(e)};function _(e,t){return null==e?null:Array.isArray(e)?e:e[t]}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(d,e);var t,r,n,i=y(d);function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(O(e=i.call.apply(i,[this].concat(r))),"state",e.generateInitialState()),x(O(e),"onLayoutChange",(function(t){e.props.onLayoutChange(t,g(g({},e.props.layouts),{},x({},e.state.breakpoint,t)))})),e}return t=d,n=[{key:"getDerivedStateFromProps",value:function(e,t){if(!(0,s.default)(e.layouts,t.layouts)){var r=t.breakpoint,n=t.cols;return{layout:(0,l.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,n,e.compactType),layouts:e.layouts}}return null}}],(r=[{key:"generateInitialState",value:function(){var e=this.props,t=e.width,r=e.breakpoints,n=e.layouts,a=e.cols,i=(0,l.getBreakpointFromWidth)(r,t),s=(0,l.getColsFromBreakpoint)(i,a),o=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,l.findOrGenerateResponsiveLayout)(n,r,i,i,s,o),breakpoint:i,cols:s}}},{key:"componentDidUpdate",value:function(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,s.default)(this.props.breakpoints,e.breakpoints)&&(0,s.default)(this.props.cols,e.cols)||this.onWidthChange(e)}},{key:"onWidthChange",value:function(e){var t=this.props,r=t.breakpoints,n=t.cols,a=t.layouts,i=t.compactType,s=this.props.breakpoint||(0,l.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),u=this.state.breakpoint,c=(0,l.getColsFromBreakpoint)(s,n),d=g({},a);if(u!==s||e.breakpoints!==r||e.cols!==n){u in d||(d[u]=(0,o.cloneLayout)(this.state.layout));var h=(0,l.findOrGenerateResponsiveLayout)(d,r,s,u,c,i);h=(0,o.synchronizeLayoutWithChildren)(h,this.props.children,c,i,this.props.allowOverlap),d[s]=h,this.props.onLayoutChange(h,d),this.props.onBreakpointChange(s,c),this.setState({breakpoint:s,layout:h,cols:c})}var p=_(this.props.margin,s),f=_(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,p,c,f)}},{key:"render",value:function(){var e=this.props,t=(e.breakpoint,e.breakpoints,e.cols,e.layouts,e.margin),r=e.containerPadding,n=(e.onBreakpointChange,e.onLayoutChange,e.onWidthChange,f(e,c));return a.createElement(u.default,p({},n,{margin:_(t,this.state.breakpoint),containerPadding:_(r,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}])&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Component);t.default=$,x($,"propTypes",{breakpoint:i.default.string,breakpoints:i.default.object,allowOverlap:i.default.bool,cols:i.default.object,margin:i.default.oneOfType([i.default.array,i.default.object]),containerPadding:i.default.oneOfType([i.default.array,i.default.object]),layouts:function(e,t){if("[object Object]"!==S(e[t]))throw new Error("Layout property must be an object. Received: "+S(e[t]));Object.keys(e[t]).forEach((function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,o.validateLayout)(e.layouts[t],"layouts."+t)}))},width:i.default.number.isRequired,onBreakpointChange:i.default.func,onLayoutChange:i.default.func,onWidthChange:i.default.func}),x($,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:o.noop,onLayoutChange:o.noop,onWidthChange:o.noop})},906:(e,t)=>{"use strict";function r(e){var t=e.margin,r=e.containerPadding,n=e.containerWidth,a=e.cols;return(n-t[0]*(a-1)-2*r[0])/a}function n(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function a(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=r,t.calcGridItemPosition=function(e,t,a,i,s,o){var l=e.margin,u=e.containerPadding,c=e.rowHeight,d=r(e),h={};o&&o.resizing?(h.width=Math.round(o.resizing.width),h.height=Math.round(o.resizing.height)):(h.width=n(i,d,l[0]),h.height=n(s,c,l[1]));o&&o.dragging?(h.top=Math.round(o.dragging.top),h.left=Math.round(o.dragging.left)):(h.top=Math.round((c+l[1])*a+u[1]),h.left=Math.round((d+l[0])*t+u[0]));return h},t.calcGridItemWHPx=n,t.calcWH=function(e,t,n,i,s){var o=e.margin,l=e.maxRows,u=e.cols,c=e.rowHeight,d=r(e),h=Math.round((t+o[0])/(d+o[0])),p=Math.round((n+o[1])/(c+o[1]));return h=a(h,0,u-i),p=a(p,0,l-s),{w:h,h:p}},t.calcXY=function(e,t,n,i,s){var o=e.margin,l=e.cols,u=e.rowHeight,c=e.maxRows,d=r(e),h=Math.round((n-o[0])/(d+o[0])),p=Math.round((t-o[1])/(u+o[1]));return h=a(h,0,l-i),p=a(p,0,c-s),{x:h,y:p}},t.clamp=a},6805:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,t);var r,i,l=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(i){var a=f(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(p(e=l.call.apply(l,[this].concat(r))),"state",{width:1280}),m(p(e),"elementRef",a.createRef()),m(p(e),"mounted",!1),m(p(e),"onWindowResize",(function(){if(e.mounted){var t=e.elementRef.current;t instanceof HTMLElement&&t.offsetWidth&&e.setState({width:t.offsetWidth})}})),e}return function(e,t,r){t&&d(e.prototype,t);r&&d(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(u,[{key:"componentDidMount",value:function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var t=this.props,r=t.measureBeforeMount,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,o);return r&&!this.mounted?a.createElement("div",{className:(0,s.default)(this.props.className,g),style:this.props.style,ref:this.elementRef}):a.createElement(e,c({innerRef:this.elementRef},n,this.state))}}]),u}(a.Component),m(t,"defaultProps",{measureBeforeMount:!1}),m(t,"propTypes",{measureBeforeMount:i.default.bool}),t};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(5959)),i=l(r(2688)),s=l(r(7256)),o=["measureBeforeMount"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g="react-grid-layout"},7434:e=>{e.exports=function(e,t,r){return e===t||e.className===t.className&&r(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&r(e.verticalCompact,t.verticalCompact)&&r(e.compactType,t.compactType)&&r(e.layout,t.layout)&&r(e.margin,t.margin)&&r(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&r(e.resizeHandles,t.resizeHandles)&&r(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&r(e.droppingItem,t.droppingItem)&&r(e.innerRef,t.innerRef)}},544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,r,i,s,o){if(e[r])return(0,n.cloneLayout)(e[r]);for(var l=e[i],u=a(t),c=u.slice(u.indexOf(r)),d=0,h=c.length;d<h;d++){var p=c[d];if(e[p]){l=e[p];break}}return l=(0,n.cloneLayout)(l||[]),(0,n.compact)((0,n.correctBounds)(l,{cols:s}),o,s)},t.getBreakpointFromWidth=function(e,t){for(var r=a(e),n=r[0],i=1,s=r.length;i<s;i++){var o=r[i];t>e[o]&&(n=o)}return n},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=a;var n=r(414);function a(e){return Object.keys(e).sort((function(t,r){return e[t]-e[r]}))}},414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=d,t.childrenEqual=function(e,t){return(0,n.default)(a.default.Children.map(e,(function(e){return null==e?void 0:e.key})),a.default.Children.map(t,(function(e){return null==e?void 0:e.key})))},t.cloneLayout=h,t.cloneLayoutItem=f,t.collides=g,t.compact=v,t.compactItem=O,t.compactType=function(e){var t=e||{},r=t.verticalCompact,n=t.compactType;return!1===r?null:n},t.correctBounds=w,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=_,t.getFirstCollision=S,t.getLayoutItem=x,t.getStatics=$,t.modifyLayout=p,t.moveElement=E,t.moveElementAwayFromCollision=P,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.setTopLeft=function(e){var t=e.top,r=e.left,n=e.width,a=e.height;return{top:"".concat(t,"px"),left:"".concat(r,"px"),width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.setTransform=function(e){var t=e.top,r=e.left,n=e.width,a=e.height,i="translate(".concat(r,"px,").concat(t,"px)");return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.sortLayoutItems=R,t.sortLayoutItemsByColRow=C,t.sortLayoutItemsByRowCol=T,t.synchronizeLayoutWithChildren=function(e,t,r,n,i){e=e||[];var s=[];a.default.Children.forEach(t,(function(t){if(null!=(null==t?void 0:t.key)){var r=x(e,String(t.key));if(r)s.push(f(r));else{!u&&t.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var n=t.props["data-grid"]||t.props._grid;n?(u||k([n],"ReactGridLayout.children"),s.push(f(o(o({},n),{},{i:t.key})))):s.push(f({w:1,h:1,x:0,y:d(s),i:String(t.key)}))}}}));var l=w(s,{cols:r});return i?l:v(l,n,r)},t.validateLayout=k,t.withLayoutItem=function(e,t,r){var n=x(e,t);return n?(n=r(f(n)),[e=p(e,n),n]):[e,null]};var n=i(r(7842)),a=i(r(5959));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=!0,c=!1;function d(e){for(var t,r=0,n=0,a=e.length;n<a;n++)(t=e[n].y+e[n].h)>r&&(r=t);return r}function h(e){for(var t=Array(e.length),r=0,n=e.length;r<n;r++)t[r]=f(e[r]);return t}function p(e,t){for(var r=Array(e.length),n=0,a=e.length;n<a;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function f(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var m=r(7434);function g(e,t){return e.i!==t.i&&(!(e.x+e.w<=t.x)&&(!(e.x>=t.x+t.w)&&(!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h))))}function v(e,t,r){for(var n=$(e),a=R(e,t),i=Array(e.length),s=0,o=a.length;s<o;s++){var l=f(a[s]);l.static||(l=O(n,l,t,r,a),n.push(l)),i[e.indexOf(a[s])]=l,l.moved=!1}return i}t.fastRGLPropsEqual=m;var b={x:"w",y:"h"};function y(e,t,r,n){var a=b[n];t[n]+=1;for(var i=e.map((function(e){return e.i})).indexOf(t.i)+1;i<e.length;i++){var s=e[i];if(!s.static){if(s.y>t.y+t.h)break;g(t,s)&&y(e,s,r+t[a],n)}}t[n]=r}function O(e,t,r,n,a){var i,s="horizontal"===r;if("vertical"===r)for(t.y=Math.min(d(e),t.y);t.y>0&&!S(e,t);)t.y--;else if(s)for(;t.x>0&&!S(e,t);)t.x--;for(;i=S(e,t);)s?y(a,t,i.x+i.w,"x"):y(a,t,i.y+i.h,"y"),s&&t.x+t.w>n&&(t.x=n-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function w(e,t){for(var r=$(e),n=0,a=e.length;n<a;n++){var i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),i.static)for(;S(r,i);)i.y++;else r.push(i)}return e}function x(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function S(e,t){for(var r=0,n=e.length;r<n;r++)if(g(e[r],t))return e[r]}function _(e,t){return e.filter((function(e){return g(e,t)}))}function $(e){return e.filter((function(e){return e.static}))}function E(e,t,r,n,a,i,s,o,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===n&&t.x===r)return e;D("Moving element ".concat(t.i," to [").concat(String(r),",").concat(String(n),"] from [").concat(t.x,",").concat(t.y,"]"));var u=t.x,c=t.y;"number"==typeof r&&(t.x=r),"number"==typeof n&&(t.y=n),t.moved=!0;var d=R(e,s);("vertical"===s&&"number"==typeof n?c>=n:"horizontal"===s&&"number"==typeof r&&u>=r)&&(d=d.reverse());var p=_(d,t),f=p.length>0;if(f&&l)return h(e);if(f&&i)return D("Collision prevented on ".concat(t.i,", reverting.")),t.x=u,t.y=c,t.moved=!1,e;for(var m=0,g=p.length;m<g;m++){var v=p[m];D("Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(v.i," at [").concat(v.x,",").concat(v.y,"]")),v.moved||(e=v.static?P(e,v,t,a,s,o):P(e,t,v,a,s,o))}return e}function P(e,t,r,n,a,i){var s="horizontal"===a,o="horizontal"!==a,l=t.static;if(n){n=!1;var u={x:s?Math.max(t.x-r.w,0):r.x,y:o?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"};if(!S(e,u))return D("Doing reverse collision on ".concat(r.i," up to [").concat(u.x,",").concat(u.y,"].")),E(e,r,s?u.x:void 0,o?u.y:void 0,n,l,a,i)}return E(e,r,s?r.x+1:void 0,o?r.y+1:void 0,n,l,a,i)}function R(e,t){return"horizontal"===t?C(e):"vertical"===t?T(e):e}function T(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function C(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var n=0,a=e.length;n<a;n++)for(var i=e[n],s=0;s<r.length;s++)if("number"!=typeof i[r[s]])throw new Error("ReactGridLayout: "+t+"["+n+"]."+r[s]+" must be a number!")}function D(){var e;c&&(e=console).log.apply(e,arguments)}t.noop=function(){}},2548:(e,t,r)=>{e.exports=r(9482).default,e.exports.utils=r(414),e.exports.Responsive=r(4636).default,e.exports.Responsive.utils=r(544),e.exports.WidthProvider=r(6805).default},7256:(e,t,r)=>{"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.r(t),r.d(t,{clsx:()=>a,default:()=>i});const i=a},2341:(e,t,r)=>{e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(2),i=(n=a)&&n.__esModule?n:{default:n};t.default=i.default,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.activeClassName,r=void 0===t?"":t,a=e.activeIndex,o=void 0===a?-1:a,u=e.activeStyle,c=e.autoEscape,d=e.caseSensitive,h=void 0!==d&&d,p=e.className,f=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,v=e.highlightStyle,b=void 0===v?{}:v,y=e.highlightTag,O=void 0===y?"mark":y,w=e.sanitize,x=e.searchWords,S=e.textToHighlight,_=e.unhighlightTag,$=void 0===_?"span":_,E=e.unhighlightClassName,P=void 0===E?"":E,R=e.unhighlightStyle,T=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),C=(0,i.findAll)({autoEscape:c,caseSensitive:h,findChunks:f,sanitize:w,searchWords:x,textToHighlight:S}),k=O,D=-1,I="",A=void 0,L=(0,l.default)((function(e){var t={};for(var r in e)t[r.toLowerCase()]=e[r];return t}));return(0,s.createElement)("span",n({className:p},T,{children:C.map((function(e,t){var n=S.substr(e.start,e.end-e.start);if(e.highlight){D++;var a=void 0;a="object"==typeof g?h?g[n]:(g=L(g))[n.toLowerCase()]:g;var i=D===+o;I=a+" "+(i?r:""),A=!0===i&&null!=u?Object.assign({},b,u):b;var l={children:n,className:I,key:t,style:A};return"string"!=typeof k&&(l.highlightIndex=D),(0,s.createElement)(k,l)}return(0,s.createElement)($,{children:n,className:P,key:t,style:R})}))}))};var a,i=r(3),s=r(4),o=r(5),l=(a=o)&&a.__esModule?a:{default:a};e.exports=t.default},function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return n.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return n.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return n.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return n.findChunks}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.findAll=function(e){var t=e.autoEscape,i=e.caseSensitive,s=void 0!==i&&i,o=e.findChunks,l=void 0===o?n:o,u=e.sanitize,c=e.searchWords,d=e.textToHighlight;return a({chunksToHighlight:r({chunks:l({autoEscape:t,caseSensitive:s,sanitize:u,searchWords:c,textToHighlight:d})}),totalLength:d?d.length:0})};var r=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var r=e.pop();if(t.start<=r.end){var n=Math.max(r.end,t.end);e.push({start:r.start,end:n})}else e.push(r,t);return e}),[])},n=function(e){var t=e.autoEscape,r=e.caseSensitive,n=e.sanitize,a=void 0===n?i:n,s=e.searchWords,o=e.textToHighlight;return o=a(o),s.filter((function(e){return e})).reduce((function(e,n){n=a(n),t&&(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var i=new RegExp(n,r?"g":"gi"),s=void 0;s=i.exec(o);){var l=s.index,u=i.lastIndex;u>l&&e.push({start:l,end:u}),s.index==i.lastIndex&&i.lastIndex++}return e}),[])};t.findChunks=n;var a=t.fillInChunks=function(e){var t=e.chunksToHighlight,r=e.totalLength,n=[],a=function(e,t,r){t-e>0&&n.push({start:e,end:t,highlight:r})};if(0===t.length)a(0,r,!1);else{var i=0;t.forEach((function(e){a(i,e.start,!1),a(e.start,e.end,!0),i=e.end})),a(i,r,!1)}return n};function i(e){return e}}])},function(e,t){e.exports=r(5959)},function(e,t){"use strict";var r=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=void 0,a=[],i=void 0,s=!1,o=function(e,r){return t(e,a[r])};return function(){for(var t=arguments.length,r=Array(t),l=0;l<t;l++)r[l]=arguments[l];return s&&n===this&&r.length===a.length&&r.every(o)?i:(s=!0,n=this,a=r,i=e.apply(this,r))}}}])},1794:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=r(8230),i=r(9954),s=r(6333),o=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){var t,r;function s(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}r=e,(t=s).prototype=Object.create(r.prototype),t.prototype.constructor=t,p(t,r);var l=s.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var r=this.props,n=r.minConstraints,a=r.maxConstraints,i=r.lockAspectRatio;if(!n&&!a&&!i)return[e,t];if(i){var s=this.props.width/this.props.height,o=e-this.props.width,l=t-this.props.height;Math.abs(o)>Math.abs(l*s)?t=e/s:e=t*s}var u=e,c=t,d=this.slack||[0,0],h=d[0],p=d[1];return e+=h,t+=p,n&&(e=Math.max(n[0],e),t=Math.max(n[1],t)),a&&(e=Math.min(a[0],e),t=Math.min(a[1],t)),this.slack=[h+(u-e),p+(c-t)],[e,t]},l.resizeHandler=function(e,t){var r=this;return function(n,a){var i=a.node,s=a.deltaX,o=a.deltaY;"onResizeStart"===e&&r.resetData();var l=("both"===r.props.axis||"x"===r.props.axis)&&"n"!==t&&"s"!==t,u=("both"===r.props.axis||"y"===r.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var c=t[0],d=t[t.length-1],h=i.getBoundingClientRect();if(null!=r.lastHandleRect){if("w"===d)s+=h.left-r.lastHandleRect.left;if("n"===c)o+=h.top-r.lastHandleRect.top}r.lastHandleRect=h,"w"===d&&(s=-s),"n"===c&&(o=-o);var p=r.props.width+(l?s/r.props.transformScale:0),f=r.props.height+(u?o/r.props.transformScale:0),m=r.runConstraints(p,f);p=m[0],f=m[1];var g=p!==r.props.width||f!==r.props.height,v="function"==typeof r.props[e]?r.props[e]:null;v&&!("onResize"===e&&!g)&&(null==n.persist||n.persist(),v(n,{node:i,size:{width:p,height:f},handle:t})),"onResizeStop"===e&&r.resetData()}}},l.renderResizeHandle=function(e,t){var r=this.props.handle;if(!r)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof r)return r(e,t);var a=d({ref:t},"string"==typeof r.type?{}:{handleAxis:e});return n.cloneElement(r,a)},l.render=function(){var e=this,t=this.props,r=t.children,s=t.className,l=t.draggableOpts,c=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),h=(t.transformScale,function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(t,o));return(0,i.cloneElement)(r,d(d({},h),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(r.props.children,c.map((function(t){var r,i=null!=(r=e.handleRefs[t])?r:e.handleRefs[t]=n.createRef();return n.createElement(a.DraggableCore,u({},l,{nodeRef:i,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,i))})))}))},s}(n.Component);t.default=f,f.propTypes=s.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},6609:(e,t,r)=>{"use strict";t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(5959)),a=l(r(2688)),i=l(r(1794)),s=r(6333),o=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var m=function(e){var t,r;function a(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,r){var n=r.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(n,(function(){return t.props.onResize&&t.props.onResize(e,r)}))):t.setState(n)},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r),a.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},a.prototype.render=function(){var e=this.props,t=e.handle,r=e.handleSize,a=(e.onResize,e.onResizeStart),s=e.onResizeStop,l=e.draggableOpts,u=e.minConstraints,d=e.maxConstraints,p=e.lockAspectRatio,f=e.axis,m=(e.width,e.height,e.resizeHandles),g=e.style,v=e.transformScale,b=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,o);return n.createElement(i.default,{axis:f,draggableOpts:l,handle:t,handleSize:r,height:this.state.height,lockAspectRatio:p,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:s,resizeHandles:m,transformScale:v,width:this.state.width},n.createElement("div",c({},b,{style:h(h({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},a}(n.Component);t.default=m,m.propTypes=h(h({},s.resizableProps),{},{children:a.default.element})},6333:(e,t,r)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var n,a=(n=r(2688))&&n.__esModule?n:{default:n};r(8230);var i={axis:a.default.oneOf(["both","x","y","none"]),className:a.default.string,children:a.default.element.isRequired,draggableOpts:a.default.shape({allowAnyClick:a.default.bool,cancel:a.default.string,children:a.default.node,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:a.default.node,grid:a.default.arrayOf(a.default.number),handle:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=t[0];return"both"===i.axis||"y"===i.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)},handle:a.default.oneOfType([a.default.node,a.default.func]),handleSize:a.default.arrayOf(a.default.number),lockAspectRatio:a.default.bool,maxConstraints:a.default.arrayOf(a.default.number),minConstraints:a.default.arrayOf(a.default.number),onResizeStop:a.default.func,onResizeStart:a.default.func,onResize:a.default.func,resizeHandles:a.default.arrayOf(a.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:a.default.number,width:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=t[0];return"both"===i.axis||"x"===i.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)}};t.resizableProps=i},9954:(e,t,r)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){t.style&&e.props.style&&(t.style=s(s({},e.props.style),t.style));t.className&&e.props.className&&(t.className=e.props.className+" "+t.className);return a.default.cloneElement(e,t)};var n,a=(n=r(5959))&&n.__esModule?n:{default:n};function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},936:(e,t,r)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=r(1794).default,e.exports.ResizableBox=r(6609).default},2192:(e,t,r)=>{"use strict";var n=r(5959),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:o.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},2540:(e,t,r)=>{"use strict";e.exports=r(2192)},8353:(e,t,r)=>{"use strict";r.d(t,{Ms:()=>v,vU:()=>p});var n=r(4629),a=r(1693),i=r(3449),s=r(2236),o=r(6712);function l(){}var u=c("C",void 0,void 0);function c(e,t,r){return{kind:e,value:t,error:r}}var d=r(2332),h=r(3004),p=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,(0,i.Uv)(t)&&t.add(r)):r.destination=O,r}return(0,n.C6)(t,e),t.create=function(e,t,r){return new v(e,t,r)},t.prototype.next=function(e){this.isStopped?y(function(e){return c("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?y(c("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?y(u,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(i.yU),f=Function.prototype.bind;function m(e,t){return f.call(e,t)}var g=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){b(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){b(e)}else b(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){b(e)}},e}(),v=function(e){function t(t,r,n){var i,o,l=e.call(this)||this;(0,a.T)(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:l&&s.$.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return l.unsubscribe()},i={next:t.next&&m(t.next,o),error:t.error&&m(t.error,o),complete:t.complete&&m(t.complete,o)}):i=t;return l.destination=new g(i),l}return(0,n.C6)(t,e),t}(p);function b(e){s.$.useDeprecatedSynchronousErrorHandling?(0,h.l)(e):(0,o.m)(e)}function y(e,t){var r=s.$.onStoppedNotification;r&&d.f.setTimeout((function(){return r(e,t)}))}var O={closed:!0,next:l,error:function(e){throw e},complete:l}},3449:(e,t,r)=>{"use strict";r.d(t,{yU:()=>l,Uv:()=>u});var n=r(4629),a=r(1693);var i,s=((i=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),i.prototype.constructor=i,i);function o(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var l=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,i,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var u=(0,n.Ju)(l),d=u.next();!d.done;d=u.next()){d.value.remove(this)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else l.remove(this);var h=this.initialTeardown;if((0,a.T)(h))try{h()}catch(e){o=e instanceof s?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var f=(0,n.Ju)(p),m=f.next();!m.done;m=f.next()){var g=m.value;try{c(g)}catch(e){o=null!=o?o:[],e instanceof s?o=(0,n.fX)((0,n.fX)([],(0,n.zs)(o)),(0,n.zs)(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new s(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&o(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&o(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();l.EMPTY;function u(e){return e instanceof l||e&&"closed"in e&&(0,a.T)(e.remove)&&(0,a.T)(e.add)&&(0,a.T)(e.unsubscribe)}function c(e){(0,a.T)(e)?e():e.unsubscribe()}},2236:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4370:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var n=r(4629);function a(e,t,r,n,a){return new i(e,t,r,n,a)}var i=function(e){function t(t,r,n,a,i,s){var o=e.call(this,t)||this;return o.onFinalize=i,o.shouldUnsubscribe=s,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return(0,n.C6)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(r(8353).vU)},7708:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var n=r(5096),a=r(4370);function i(e,t){return(0,n.N)((function(r,n){var i=0;r.subscribe((0,a._)(n,(function(r){n.next(e.call(t,r,i++))})))}))}},2332:(e,t,r)=>{"use strict";r.d(t,{f:()=>a});var n=r(4629),a={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=a.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,n.fX)([e,t],(0,n.zs)(r))):setTimeout.apply(void 0,(0,n.fX)([e,t],(0,n.zs)(r)))},clearTimeout:function(e){var t=a.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},3004:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i,l:()=>s});var n=r(2236),a=null;function i(e){if(n.$.useDeprecatedSynchronousErrorHandling){var t=!a;if(t&&(a={errorThrown:!1,error:null}),e(),t){var r=a,i=r.errorThrown,s=r.error;if(a=null,i)throw s}}else e()}function s(e){n.$.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=e)}},3887:(e,t,r)=>{"use strict";function n(e){return e}r.d(t,{D:()=>n})},1693:(e,t,r)=>{"use strict";function n(e){return"function"==typeof e}r.d(t,{T:()=>n})},5096:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(1693);function a(e){return function(t){if(function(e){return(0,n.T)(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},6712:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(2236),a=r(2332);function i(e){a.f.setTimeout((function(){var t=n.$.onUnhandledError;if(!t)throw e;t(e)}))}},9524:(e,t,r)=>{const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(7095),{safeRe:s,t:o}=r(6850),l=r(3811),u=r(9796),c=r(7944),d=r(8395)},8395:(e,t,r)=>{const n=/\s+/g;class a{constructor(e,t){if(t=s(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,C(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],h),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],p),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>O(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options)));n&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,b=s.map((e=>new o(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(k(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(1158)),s=r(7095),o=r(9524),l=r(9796),u=r(7944),{safeRe:c,t:d,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=r(6850),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=r(9630),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},O=(e,t)=>(l("comp",e,t),e=_(e,t),l("caret",e),e=x(e,t),l("tildes",e),e=E(e,t),l("xrange",e),e=R(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let s;return l("tilde",e,t,r,n,a,i),w(r)?s="":w(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:w(a)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),s=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",s),s}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,s)=>{let o;return l("caret",e,t,r,a,i,s),w(r)?o="":w(a)?o=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(i)?o="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===r?"0"===a?`>=${r}.${a}.${i}-${s} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${s} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${s} <${+r+1}.0.0-0`):(l("no pr"),o="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",o),o}))},E=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>P(e,t))).join(" ")),P=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,s,o)=>{l("xRange",e,r,n,a,i,s,o);const u=w(a),c=u||w(i),d=c||w(s),h=d;return"="===n&&h&&(n=""),o=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(c&&(i=0),s=0,">"===n?(n=">=",c?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(o="-0"),r=`${n+a}.${i}.${s}${o}`):c?r=`>=${a}.0.0${o} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${o} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},R=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),T=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),C=e=>(t,r,n,a,i,s,o,l,u,c,d,h)=>`${r=w(n)?"":w(a)?`>=${n}.0.0${e?"-0":""}`:w(i)?`>=${n}.${a}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=w(u)?"":w(c)?`<${+u+1}.0.0-0`:w(d)?`<${u}.${+c+1}.0-0`:h?`<=${u}.${c}.${d}-${h}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),k=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},7944:(e,t,r)=>{const n=r(9796),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(9630),{safeRe:s,safeSrc:o,t:l}=r(6850),u=r(7095),{compareIdentifiers:c}=r(4031);class d{constructor(e,t){if(t=u(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?o[l.PRERELEASELOOSE]:o[l.PRERELEASE]}$`),r=`-${t}`.match(e);if(!r||r[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},7994:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},3811:(e,t,r)=>{const n=r(6909),a=r(7659),i=r(144),s=r(2077),o=r(599),l=r(7092);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return s(e,r,u);case"<":return o(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},5334:(e,t,r)=>{const n=r(7944),a=r(5860),{safeRe:i,t:s}=r(6850);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===r)return null;const o=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${o}.${l}.${u}${c}${d}`,t)}},2801:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},7023:(e,t,r)=>{const n=r(5380);e.exports=(e,t)=>n(e,t,!0)},5380:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},660:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const s=i>0,o=s?r:a,l=s?a:r,u=!!o.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},6909:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0===n(e,t,r)},144:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>0},2077:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>=0},5955:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},599:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<0},7092:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<=0},2966:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).major},5986:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).minor},7659:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0!==n(e,t,r)},5860:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},1617:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).patch},9613:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},2862:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(t,e,r)},6033:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},1722:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},603:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},7645:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},8449:(e,t,r)=>{const n=r(6850),a=r(9630),i=r(7944),s=r(4031),o=r(5860),l=r(7645),u=r(7994),c=r(5955),d=r(660),h=r(2966),p=r(5986),f=r(1617),m=r(9613),g=r(5380),v=r(2862),b=r(7023),y=r(2801),O=r(603),w=r(6033),x=r(144),S=r(599),_=r(6909),$=r(7659),E=r(2077),P=r(7092),R=r(3811),T=r(5334),C=r(9524),k=r(8395),D=r(1722),I=r(651),A=r(7840),L=r(7930),N=r(3489),M=r(7494),j=r(5463),Q=r(7871),V=r(4266),z=r(1112),F=r(1465),B=r(9252);e.exports={parse:o,valid:l,clean:u,inc:c,diff:d,major:h,minor:p,patch:f,prerelease:m,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:O,rsort:w,gt:x,lt:S,eq:_,neq:$,gte:E,lte:P,cmp:R,coerce:T,Comparator:C,Range:k,satisfies:D,toComparators:I,maxSatisfying:A,minSatisfying:L,minVersion:N,validRange:M,outside:j,gtr:Q,ltr:V,intersects:z,simplifyRange:F,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},9630:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9796:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},4031:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},1158:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},7095:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},6850:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(9630),s=r(9796),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[p,a]],m=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=h++;s(e,a,t),d[e]=a,u[a]=t,c[a]=n,o[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),m("FULL",`^${u[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),m("LOOSE",`^${u[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),m("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[d.COERCE],!0),m("COERCERTLFULL",u[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7871:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,">",r)},1112:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},4266:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,"<",r)},7840:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},7930:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},3489:(e,t,r)=>{const n=r(7944),a=r(8395),i=r(144);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let s=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!i(r,s)||(r=s)}return r&&e.test(r)?r:null}},5463:(e,t,r)=>{const n=r(7944),a=r(9524),{ANY:i}=a,s=r(8395),o=r(1722),l=r(144),u=r(599),c=r(7092),d=r(2077);e.exports=(e,t,r,h)=>{let p,f,m,g,v;switch(e=new n(e,h),t=new s(t,h),r){case">":p=l,f=c,m=u,g=">",v=">=";break;case"<":p=u,f=d,m=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,o=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,h)?s=e:m(e.semver,o.semver,h)&&(o=e)})),s.operator===g||s.operator===v)return!1;if((!o.operator||o.operator===g)&&f(e,o.semver))return!1;if(o.operator===v&&m(e,o.semver))return!1}return!0}},1465:(e,t,r)=>{const n=r(1722),a=r(5380);e.exports=(e,t,r)=>{const i=[];let s=null,o=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(o=e,s||(s=e)):(o&&i.push([s,o]),o=null,s=null)}s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},9252:(e,t,r)=>{const n=r(8395),a=r(9524),{ANY:i}=a,s=r(1722),o=r(5380),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,p,f,m,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=h(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(p=o(a.semver,c.semver,r),p>0)return null;if(0===p&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!s(e,String(a),r))return null;if(c&&!s(e,String(c),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!s(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=h(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==p)return!1}return!(a&&g&&!c&&0!==p)&&(!(c&&v&&!a&&0!==p)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},651:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},7494:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},8162:(e,t,r)=>{"use strict";r.d(t,{r4:()=>a,md:()=>i,GH:()=>n});const n={x_over_time:(e,t,r="$__range",n="")=>`${e}_over_time((${t})[${r}:${n}])`,avg_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("avg",e,t,r),count_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("count",e,t,r),last_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("last",e,t,r),max_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("max",e,t,r),min_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("min",e,t,r),present_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("present",e,t,r),stddev_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stddev",e,t,r),stdvar_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stdvar",e,t,r),sum_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("sum",e,t,r),quantile_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("quantile",e,t,r),offset:({units:e})=>(e=>{let t="";for(const[r,n]of Object.entries(e))n>0&&(t+=`${n}${r}`);return t.length?`offset ${t}`:""})(e),by:e=>e?` by (${e.join(", ")}) `:"",without:e=>e?` without (${e.join(", ")}) `:"",byOrWithout:({by:e,without:t})=>e?n.by(e):n.without(t),sum:({expr:e,by:t,without:r})=>`sum${n.byOrWithout({by:t,without:r})}(${e})`,min:({expr:e,by:t,without:r})=>`min${n.byOrWithout({by:t,without:r})}(${e})`,max:({expr:e,by:t,without:r})=>`max${n.byOrWithout({by:t,without:r})}(${e})`,avg:({expr:e,by:t,without:r})=>`avg${n.byOrWithout({by:t,without:r})}(${e})`,group:({expr:e,by:t,without:r})=>`group${n.byOrWithout({by:t,without:r})}(${e})`,count:({expr:e,by:t,without:r})=>`count${n.byOrWithout({by:t,without:r})}(${e})`,stddev:({expr:e,by:t,without:r})=>`stddev${n.byOrWithout({by:t,without:r})}(${e})`,stdvar:({expr:e,by:t,without:r})=>`stdvar${n.byOrWithout({by:t,without:r})}(${e})`,count_values:({expr:e,by:t,without:r,parameter:a})=>`count_values${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,bottomk:({expr:e,by:t,without:r,parameter:a})=>`bottomk${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,topk:({expr:e,by:t,without:r,parameter:a})=>`topk${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,quantile:({expr:e,by:t,without:r,parameter:a})=>`quantile${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,and:({left:e,right:t})=>`${e} and ${t}`,or:({left:e,right:t})=>`${e} or ${t}`,unless:({left:e,right:t})=>`${e} unless ${t}`,rate:({expr:e,interval:t="$__rate_interval"})=>`rate(${e}[${t}])`,increase:({expr:e,interval:t="$__range"})=>`increase(${e}[${t}])`,label_replace:({expr:e,newLabel:t,existingLabel:r,replacement:n="$1",regex:a="(.*)"})=>`label_replace(${e}, "${t}", "${n}", "${r}", "${a}")`,label_join:({expr:e,newLabel:t,separator:r=",",labels:n})=>`label_join(${e}, "${t}", "${r}", ${n.map((e=>`"${e}"`)).join(", ")})`};class a{metric;selectors=new Map;constructor(e){this.metric=e.metric,e.defaultSelectors?.forEach((e=>this.setSelector(e)));for(const[t,r]of Object.entries(e.values))void 0!==r&&this.selectors.set(t,{operator:e.defaultOperator,label:t,value:r})}setSelector(e){return this.selectors.set(e.label,e),this}toString(){const e=Array.from(this.selectors).map((([e,t])=>`${e}${t.operator}"${t.value}"`)).join(", ");return`${this.metric}{${e}}`}}var i;!function(e){e.equal="=",e.notEqual="!=",e.regexMatch="=~",e.notRegexMatch="!~"}(i||(i={}))},6365:(e,t,r)=>{"use strict";r.d(t,{AL:()=>u,K3:()=>o,MD:()=>l,Yw:()=>c});var n=r(782);const a={json:1,logfmt:2,unpack:3,pattern:4,regexp:5,label_format:7,line_format:8,label_replace:9,vector:10,offset:11,bool:12,on:13,ignoring:14,group_left:15,group_right:16,unwrap:6,decolorize:17,drop:18,keep:19},i={by:20,without:21,and:22,or:23,unless:24,sum:25,avg:26,count:27,max:28,min:29,stddev:30,stdvar:31,bottomk:32,topk:33,sort:34,sort_desc:35},s={__proto__:null,ip:295,count_over_time:301,rate:303,rate_counter:305,bytes_over_time:307,bytes_rate:309,avg_over_time:311,sum_over_time:313,min_over_time:315,max_over_time:317,stddev_over_time:319,stdvar_over_time:321,quantile_over_time:323,first_over_time:325,last_over_time:327,absent_over_time:329,bytes:335,duration:337,duration_seconds:339},o=n.U1.deserialize({version:14,states:"EtOYQPOOO#cQPO'#DUOOQO'#ER'#ERO#hQPO'#ERO$}QPO'#DTOYQPO'#DTOOQO'#Ed'#EdO%[QPO'#EcOOQO'#FP'#FPO%aQPO'#FOQ%lQPOOO&mQPO'#F]O&rQPO'#F^OOQO'#Eb'#EbOOQO'#DS'#DSOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsO&wQPO'#DWOOQO'#DV'#DVO'VQPO,59pOOQO,5:m,5:mOOQO'#Dc'#DcO'_QPO'#DbO'gQPO'#DaO)lQPO'#D`O*{QPO'#D`OOQO'#D_'#D_O+sQPO,59oO-}QPO,59oO.UQPO,5:|O.]QPO,5:}O.hQPO'#E|O0sQPO,5;jO0zQPO,5;jO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lOYQPO,5;wO3cQPO,5;xO3hQPO,59rO#cQPO,59qOOQO1G/[1G/[OOQO'#Dh'#DhO3mQPO,59|O5^QPO,59|OOQO'#Di'#DiO5cQPO,59{OOQO,59{,59{O5kQPO'#DWO6YQPO'#DlO8PQPO'#DoO9sQPO'#DoOOQO'#Do'#DoOOQO'#Dv'#DvOOQO'#Dt'#DtO+kQPO'#DtO9xQPO,59zO;iQPO'#EVO;nQPO'#EWOOQO'#EZ'#EZO;sQPO'#E[O;xQPO'#E_OOQO,59z,59zOOQO,59y,59yOOQO1G/Z1G/ZOOQO1G0h1G0hO;}QPO'#EtO.`QPO'#EtO<XQPO1G0iO<^QPO1G0iO<cQPO,5;hO=oQPO1G1UO=vQPO1G1UO=}QPO1G1UO>UQPO'#FSO@dQPO'#FRO@nQPO'#FROYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO@xQPO1G1cOAPQPO1G1dOOQO1G/^1G/^OOQO1G/]1G/]O5cQPO1G/hOAUQPO1G/hOAZQPO'#DjOBzQPO'#DjOOQO1G/g1G/gOCbQPO,59rOCPQPO,5:cOOQO'#Dm'#DmOClQPO,5:WOEcQPO'#DrOOQO'#Dq'#DqOGVQPO,5:_OHvQPO,5:[OOQO,5:Z,5:ZOJgQPO,5:`O+kQPO,5:`O+kQPO,5:`OOQO,5:q,5:qOJuQPO'#EYOOQO'#EX'#EXOJzQPO,5:rOLkQPO'#E^OOQO'#E^'#E^OOQO'#E]'#E]ONbQPO,5:vO!!RQPO'#EaOOQO'#Ea'#EaOOQO'#E`'#E`O!#xQPO,5:yO!%iQPO'#D`O;}QPO,5;`O!%pQPO'#EuO!%uQPO,5;`O!%}QPO,5;`O!&[QPO,5;`O!&iQPO,5;`O!&nQPO7+&TO.`QPO7+&TOOQO'#E}'#E}O!(OQPO1G1SOOQO1G1S1G1SOYQPO7+&pO!(WQPO7+&pO!)hQPO7+&pO!)oQPO7+&pO!)vQQO'#FTOOQO,5;n,5;nO!,UQPO,5;mO!,]QPO,5;mO!-nQPO7+&rO!-uQPO7+&rOOQO7+&r7+&rO!.SQPO7+&rO!.ZQPO7+&rO!/`QPO7+&rO!/pQPO7+&}OOQO7+'O7+'OOOQO7+%S7+%SO!/uQPO7+%SO5cQPO,5:UO!/zQPO,5:UO!0PQPO1G/{OOQO1G/}1G/}OOQO1G0U1G0UOOQO1G0W1G0WOOQO,5:X,5:XO!0UQPO1G/yO!1uQPO,5:^O!1zQPO,5:]OOQO1G/z1G/zO!2PQPO1G/zO!3pQPO,5:tO;nQPO,5:sO;sQPO,5:wO;xQPO,5:zO!3xQPO,5;cO!%uQPO1G0zO!4WQPO1G0zO!4`QPO,5;aO+kQPO,5;cO!4eQPO1G0zO!4oQPO'#EvO!4tQPO1G0zO!4eQPO1G0zO!4|QPO1G0zO!5ZQPO1G0zO!%xQPO1G0zOOQO1G0z1G0zOOQO<<Io<<IoO!5fQPO<<IoO!5kQPO,5;iOOQO7+&n7+&nO!5pQPO<<J[OOQO<<J[<<J[OYQPO<<J[OOQO'#FV'#FVO!5wQPO,5;oOOQO'#FU'#FUOOQO,5;o,5;oOOQO1G1X1G1XO!6PQPO1G1XO!8YQPO<<JiOOQO<<Hn<<HnOOQO1G/p1G/pO!8_QPO1G/pO!8dQPO7+%gOOQO1G/x1G/xOOQO1G/w1G/wOOQO1G0`1G0`OOQO1G0_1G0_OOQO1G0c1G0cOOQO1G0f1G0fOOQO'#Ex'#ExOOQO1G0}1G0}O!8iQPO1G0}OOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO7+&f7+&fOOQO1G0{1G0{O!8nQPO1G0}O!9SQPO7+&fOOQO,5;b,5;bO!9[QPO7+&fO!%xQPO7+&fO!9fQPO7+&fO!9qQPOAN?ZOOQO1G1T1G1TO!;RQPOAN?vO!<cQPOAN?vO!<jQQO1G1ZOOQO1G1Z1G1ZOOQO7+&s7+&sO!<rQPOAN@TOOQO7+%[7+%[O!<wQPO<<IRO!<|QPO7+&iO!=RQPO<<JQO!=ZQPO<<JQO!=cQPO'#EwO!=hQPO<<JQOOQOG24uG24uOOQOG25bG25bOOQO1G1[1G1[OOQO7+&u7+&uO!=pQPOG25oOOQOAN>mAN>mO!=uQPO<<JTOOQOAN?lAN?lO!=zQPOAN?lO!>SQPOLD+ZOOQOAN?oAN?oOOQO,5:r,5:rO!>XQPO!$'NuO!>^QPO!)9DaO!>cQPO!.K9{OOQO!4//g!4//gO;nQPO'#EWO!>hQPO'#D`O!?`QPO,59oO!@fQPO'#DTOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO!AqQPO7+&rO!AxQPO7+&rO!BVQPO7+&rO!C_QPO7+&rO!CfQPO7+&rO!B^QPO'#FQ",stateData:"!Cs~O$TOStOS~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!vQO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O{nO~O!vqO~O!OrO!QrO!WrO!XrO!YrO!ZrOfwXgwXhwX!lwX!nwX!owX!pwX!qwX!wwX!xwX#{wX#|wX#}wX$OwX~O!_vO$RwX$ZwX~P#mO$Y{O~Od|Oe|O$Y}O~Of!QOg!POh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{!SO#|!SO#}!SO$O!TO~O$Y!VO~O$Y!WO~O|!XO!O!XO!P!XO!Q!XO~O$V!YO$W!ZO~O}!]O$X!_O~Og!`Of!TXh!TX!O!TX!Q!TX!W!TX!X!TX!Y!TX!Z!TX!_!TX!l!TX!n!TX!o!TX!p!TX!q!TX!w!TX!x!TX#{!TX#|!TX#}!TX$O!TX$R!TX$Z!TX$k!TX$V!TX~O!OrO!QrO!WrO!XrO!YrO!ZrO~Of!SXg!SXh!SX!_!SX!l!SX!n!SX!o!SX!p!SX!q!SX!w!SX!x!SX#{!SX#|!SX#}!SX$O!SX$R!SX$Z!SX$k!SX$V!SX~P)WOP!dOQ!cOR!fOS!eOT!eOV!lOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_vOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Rwa$Zwa~P)WOfvXgvXhvX!OvX!lvX!nvX!ovX!pvX!qvX!wvX!xvX#{vX#|vX#}vX$OvX~O$Z!rO~P,|O$Z!sO~P,|O!v!wO$UPO$Y!uO~O$Y!xO~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O!v!yO~P.mO$Y!{O~O[#OO]!|O^!|OX#uPY#uPi#uPj#uPk#uPl#uPm#uPn#uPo#uPp#uPq#uPr#uPs#uP!v#uP!w#uP!x#uP$U#uP$Y#uP$[#uP$]#uP$^#uP$_#uP$`#uP$a#uP$b#uP$c#uP$d#uP$e#uP$f#uP$g#uP$h#uP$i#uP$j#uP~O!v#WO~O}#XO~Og#ZOf!Uah!Ua!O!Ua!Q!Ua!W!Ua!X!Ua!Y!Ua!Z!Ua!_!Ua!l!Ua!n!Ua!o!Ua!p!Ua!q!Ua!w!Ua!x!Ua#{!Ua#|!Ua#}!Ua$O!Ua$R!Ua$Z!Ua$k!Ua$V!Ua~O$Y#[O~O}#]O$X!_O~O|#`O!O#`O!P!XO!Q!XO!l#aO!n#aO!o#aO!p#aO!q#aO~O{#dO!b#bOf!`Xg!`Xh!`X!O!`X!Q!`X!W!`X!X!`X!Y!`X!Z!`X!_!`X!l!`X!n!`X!o!`X!p!`X!q!`X!w!`X!x!`X#{!`X#|!`X#}!`X$O!`X$R!`X$Z!`X$k!`X$V!`X~O{#dOf!cXg!cXh!cX!O!cX!Q!cX!W!cX!X!cX!Y!cX!Z!cX!_!cX!l!cX!n!cX!o!cX!p!cX!q!cX!w!cX!x!cX#{!cX#|!cX#}!cX$O!cX$R!cX$Z!cX$k!cX$V!cX~O}#hO~Of#jOg#kO$V#jOh!Sa!O!Sa!Q!Sa!W!Sa!X!Sa!Y!Sa!Z!Sa!_!Sa!l!Sa!n!Sa!o!Sa!p!Sa!q!Sa!w!Sa!x!Sa#{!Sa#|!Sa#}!Sa$O!Sa$R!Sa$Z!Sa$k!Sa~O}#lO~O{#mO~O{#pO~O{#tO~O!_#xO$k#zO~P)WO$Z$PO~O$V$QO~O{$RO$Z$TO~Of!uXg!uXh!uX!O!uX!l!uX!n!uX!o!uX!p!uX!q!uX!w!uX!x!uX#{!uX#|!uX#}!uX$O!uX$Z!uX~O$V$UO~P<kO$Z$VO~P,|O!v$WO~P.mO$Y$YO~OX#uXY#uXi#uXj#uXk#uXl#uXm#uXn#uXo#uXp#uXq#uXr#uXs#uX!v#uX!w#uX!x#uX$U#uX$Y#uX$[#uX$]#uX$^#uX$_#uX$`#uX$a#uX$b#uX$c#uX$d#uX$e#uX$f#uX$g#uX$h#uX$i#uX$j#uX~O_$[O`$[O~P>ZO]!|O^!|O~P>ZO$V$dO~P,|O$Z$eO~O}$gO~Og$hOf!^Xh!^X!O!^X!Q!^X!W!^X!X!^X!Y!^X!Z!^X!_!^X!l!^X!n!^X!o!^X!p!^X!q!^X!w!^X!x!^X#{!^X#|!^X#}!^X$O!^X$R!^X$Z!^X$k!^X$V!^X~O$Y$iO~O!m$kO!s$lO!vQO!wRO!xRO~O}#XO$X!_O~PCPO{#dO!b$nOf!`ag!`ah!`a!O!`a!Q!`a!W!`a!X!`a!Y!`a!Z!`a!_!`a!l!`a!n!`a!o!`a!p!`a!q!`a!w!`a!x!`a#{!`a#|!`a#}!`a$O!`a$R!`a$Z!`a$k!`a$V!`a~O|$pOf!fXg!fXh!fX!O!fX!Q!fX!W!fX!X!fX!Y!fX!Z!fX!_!fX!l!fX!n!fX!o!fX!p!fX!q!fX!w!fX!x!fX#{!fX#|!fX#}!fX$O!fX$R!fX$V!fX$Z!fX$k!fX~O$V$qOf!gag!gah!ga!O!ga!Q!ga!W!ga!X!ga!Y!ga!Z!ga!_!ga!l!ga!n!ga!o!ga!p!ga!q!ga!w!ga!x!ga#{!ga#|!ga#}!ga$O!ga$R!ga$Z!ga$k!ga~O$V$qOf!dag!dah!da!O!da!Q!da!W!da!X!da!Y!da!Z!da!_!da!l!da!n!da!o!da!p!da!q!da!w!da!x!da#{!da#|!da#}!da$O!da$R!da$Z!da$k!da~Of#jOg#kO$V#jO$Z$rO~O|$tO~O$V$uOf!zag!zah!za!O!za!Q!za!W!za!X!za!Y!za!Z!za!_!za!l!za!n!za!o!za!p!za!q!za!w!za!x!za#{!za#|!za#}!za$O!za$R!za$Z!za$k!za~O|!XO!O!XO!P!XO!Q!XOf#QXg#QXh#QX!W#QX!X#QX!Y#QX!Z#QX!_#QX!l#QX!n#QX!o#QX!p#QX!q#QX!w#QX!x#QX#{#QX#|#QX#}#QX$O#QX$R#QX$V#QX$Z#QX$k#QX~O$V$vOf#Oag#Oah#Oa!O#Oa!Q#Oa!W#Oa!X#Oa!Y#Oa!Z#Oa!_#Oa!l#Oa!n#Oa!o#Oa!p#Oa!q#Oa!w#Oa!x#Oa#{#Oa#|#Oa#}#Oa$O#Oa$R#Oa$Z#Oa$k#Oa~O|!XO!O!XO!P!XO!Q!XOf#TXg#TXh#TX!W#TX!X#TX!Y#TX!Z#TX!_#TX!l#TX!n#TX!o#TX!p#TX!q#TX!w#TX!x#TX#{#TX#|#TX#}#TX$O#TX$R#TX$V#TX$Z#TX$k#TX~O$V$wOf#Rag#Rah#Ra!O#Ra!Q#Ra!W#Ra!X#Ra!Y#Ra!Z#Ra!_#Ra!l#Ra!n#Ra!o#Ra!p#Ra!q#Ra!w#Ra!x#Ra#{#Ra#|#Ra#}#Ra$O#Ra$R#Ra$Z#Ra$k#Ra~OU$xO~P*{O!m${O~O!_$|O$k#zO~OZ%OO!_#xO$Z#ha~P)WO!_#xO$Z%TO$k#zO~P)WO$Z%UO~Od|Oe|Of#Vqg#Vqh#Vq!O#Vq!l#Vq!n#Vq!o#Vq!p#Vq!q#Vq!w#Vq!x#Vq#{#Vq#|#Vq#}#Vq$O#Vq$R#Vq$Z#Vq$V#Vq~O$V%XO$Z%YO~Od|Oe|Of#rqg#rqh#rq!O#rq!l#rq!n#rq!o#rq!p#rq!q#rq!w#rq!x#rq#{#rq#|#rq#}#rq$O#rq$R#rq$Z#rq$V#rq~O$V%]O~P<kO$Z%[O~P,|O#z%^O$Z%aO~OX#uaY#uai#uaj#uak#ual#uam#uan#uao#uap#uaq#uar#uas#ua!v#ua!w#ua!x#ua$U#ua$[#ua$]#ua$^#ua$_#ua$`#ua$a#ua$b#ua$c#ua$d#ua$e#ua$f#ua$g#ua$h#ua$i#ua$j#ua~O$Y$YO~P!*OO_%cO`%cO$Y#ua~P!*OOf!QOh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{#tq#|#tq#}#tq$O#tq$R#tq$Z#tq~Og#tq~P!,jOf#tqg#tqh#tq~P!,pOg!PO~P!,jO$R#tq$Z#tq~P%lOf#tqg#tqh#tq!O#tq!l#tq!n#tq!o#tq!p#tq!q#tq#{#tq#|#tq#}#tq$O#tq~O!w!RO!x!RO$R#tq$Z#tq~P!.eO}%dO~O$Z%eO~O}%gO~O$Y%hO~O$V$qOf!gig!gih!gi!O!gi!Q!gi!W!gi!X!gi!Y!gi!Z!gi!_!gi!l!gi!n!gi!o!gi!p!gi!q!gi!w!gi!x!gi#{!gi#|!gi#}!gi$O!gi$R!gi$Z!gi$k!gi~O}%iO~O{#dO~Of#jO$V#jOg!hih!hi!O!hi!Q!hi!W!hi!X!hi!Y!hi!Z!hi!_!hi!l!hi!n!hi!o!hi!p!hi!q!hi!w!hi!x!hi#{!hi#|!hi#}!hi$O!hi$R!hi$Z!hi$k!hi~O{%kO}%kO~O{%pO$m%rO$n%sO$o%tO~OZ%OO$Z#hi~O$l%vO~O!_#xO$Z#hi~P)WO!m%yO~O!_$|O$Z#hi~O!_#xO$Z%{O$k#zO~P)WO!_$|O$Z%{O$k#zO~O$Z%}O~O{&OO~O$Z&PO~P,|O$V&RO$Z&SO~O$Y$YOX#uiY#uii#uij#uik#uil#uim#uin#uio#uip#uiq#uir#uis#ui!v#ui!w#ui!x#ui$U#ui$[#ui$]#ui$^#ui$_#ui$`#ui$a#ui$b#ui$c#ui$d#ui$e#ui$f#ui$g#ui$h#ui$i#ui$j#ui~O$V&UO~O$Z&VO~O}&WO~O$Y&XO~Of#jOg#kO$V#jO!_#ki$k#ki$Z#ki~O!_$|O$Z#hq~O!_#xO$Z#hq~P)WOZ%OO!_&[O$Z#hq~Od|Oe|Of#V!Rg#V!Rh#V!R!O#V!R!l#V!R!n#V!R!o#V!R!p#V!R!q#V!R!w#V!R!x#V!R#{#V!R#|#V!R#}#V!R$O#V!R$R#V!R$Z#V!R$V#V!R~Od|Oe|Of#r!Rg#r!Rh#r!R!O#r!R!l#r!R!n#r!R!o#r!R!p#r!R!q#r!R!w#r!R!x#r!R#{#r!R#|#r!R#}#r!R$O#r!R$R#r!R$Z#r!R$V#r!R~O$Z&_O~P,|O#z%^O$Z&aO~O}&bO~O$Z&cO~O{&dO~O!_$|O$Z#hy~OZ%OO$Z#hy~OU$xO~O!_&[O$Z#hy~O$V&gO~O$Z&hO~O!_$|O$Z#h!R~O}&jO~O$V&kO~O}&lO~O$Z&mO~OP!dOQ!cOR!fOS!eOT!eOV&nOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_&oOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Vwa~P)WO!_&oO$VwX~P#mOf&yOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{#tq#|#tq#}#tq$O#tq$V#tq~Og#tq~P!@pOf#tqg#tqh#tq~P!@vOg&xO~P!@pOf&yOg&xOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{&{O#|&{O#}&{O$O&|O~O$V#tq~P!B^O!w&zO!x&zO$V#tq~P!.eO",goto:"1l$RPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$S%R%j&Y&]PPPPPP&t'W'h'v(XPPPP(h(p(yP)S)XP)S)S)[)e)S)m*O*O*XPPPPPP*XP*O*bPPP)S)S*{+R)S)S+Y+])S+c+f+l,_,t-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-p-y.^.j/S/V/V/V/Y/i,_/l,_0R0w1Y1c1fPPPPP,_,_[YOT}!{$U%]Q$^#PQ$_#QS$`#R&tQ$a#SQ$b#TQ$c#UQ'O&rQ'P&sQ'Q&uQ'R&vQ'S&wR'T!Vt^O}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wRyTjSOT}!V!{#P#Q#R#S#T#U$U%]S!t{$QQ#}!u]&q&r&s&t&u&v&wRpPQoP^!hv!i#j#k#x$|&oQ#Y!YS#q!n$vT#u!o$wQxSQ#y!tQ$}#|Q%R#}Q%z%QR&p&q[wS!t#|#}%Q&q]!qx#y$}%R%z&piuSx!t#y#|#}$}%Q%R%z&p&qhtSx!t#y#|#}$}%Q%R%z&p&qR!auksSux!t#y#|#}$}%Q%R%z&p&qQ!^sV#^!`#Z$hW![s!`#Z$hR$j#`Q#_!`Q$f#ZR%f$hV!pv#x&oR#c!cQ#f!cQ#g!dR$o#cU#e!c!d#cR%j$qU!jv#x&oQ#i!iQ$r#jQ$s#kR%w$|_!hv!i#j#k#x$|&o_!gv!i#j#k#x$|&ov]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wT$m#`#aQ#o!lR&i&nS#n!l&nR%l$uR#s!nQ#r!nR%m$vR#w!oQ#v!oR%n$wj^O#P#Q#R#S#T#U&r&s&t&u&v&wQzTQ!z}Q#V!VQ$X!{Q%Z$UR&Q%]w]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwVOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwUOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ!v{Q$O!uR%W$QS#|!t#}W$z#y#{%R%SQ%u$yQ%|%TR&Z%{Q%Q#|Q%u$zQ&]%|R&e&ZQ#{!tS$y#y%RQ%P#|Q%S#}S%x$}%QS&Y%z%|R&f&]R%q$xR%o$xQ!OXQ%V$PQ%[$VQ&^%}R&_&PR$S!xwXOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ#U!UQ&r&xQ&s&yQ&t&zQ&u&{Q&v&|R&w&}h!}!P!Q!R!S!T!U&x&y&z&{&|&}R$]#OQ$Z!|Q%b$[R&T%cR%_$YQ%`$YR&`&R",nodeNames:"⚠ Json Logfmt Unpack Pattern Regexp Unwrap LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch PipePattern Npa FilterOp Ip OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter LiteralExpr Number Add Sub LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Mul Div Mod Pow LabelReplaceExpr VectorExpr",maxTerm:169,skippedNodes:[0,36],repeatNodeCount:0,tokenData:"<n~RvX^#ipq#iqr$^rs$yst%kuv%vxy%{yz&Qz{&V{|&[|}&a}!O&f!O!P2v!P!Q3v!Q!R3{!R![7^![!]9]!^!_9q!_!`:O!`!a:e!c!}:r!}#O;Y#P#Q;_#Q#R;d#R#S:r#S#T;i#T#o:r#o#p;u#p#q;z#q#r<i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$T~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aR!_!`$j!`!a$o#r#s$t~$oO!O~~$tO!Z~~$yO!Q~~$|UOY$yZr$yrs%`s#O$y#O#P%e#P~$y~%eO}~~%hPO~$y~%pQt~OY%kZ~%k~%{O#}~~&QO$Y~~&VO$Z~~&[O#{~~&aO!w~~&fO$V~~&kQ!x~}!O&q!Q![(w~&tQ#_#`&z#g#h(X~&}P#X#Y'Q~'TP#X#Y'W~'ZP#d#e'^~'aP}!O'd~'gP#X#Y'j~'mP#a#b'p~'sP#d#e'v~'yP#h#i'|~(PP#m#n(S~(XO!b~~([P#h#i(_~(bP#f#g(e~(hP#]#^(k~(nP#V#W(q~(tP#h#i(S~(zZ!O!P)m!Q![(w#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~)pP!Q![)s~)vV!Q![)s#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~*bP!m~!Q![*e~*hV!O!P*}!Q![*e#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+QP!Q![+T~+WU!Q![+T#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+oQ!m~!Q![+u#g#h-Q~+xV!O!P,_!Q![+u#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,bP!Q![,e~,hU!Q![,e#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,}P#g#h-Q~-VP!m~!Q![-Y~-]T!O!P-l!Q![-Y#b#c.R#i#j.^${$|.^~-oP!Q![-r~-uS!Q![-r#b#c.R#i#j.^${$|.^~.UP#g#h.X~.^O!m~~.aP#g#h.d~.iP!m~!Q![.l~.oR!O!P.x!Q![.l#b#c.R~.{P!Q![/O~/RQ!Q![/O#b#c.R~/^P!m~!Q![/a~/dU!O!P/v!Q![/a#a#b,z#b#c.R#i#j.^${$|.^~/yP!Q![/|~0PT!Q![/|#a#b,z#b#c.R#i#j.^${$|.^~0eP!m~!Q![0h~0kW!O!P)m!Q![0h#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~1YP!m~!Q![1]~1`X!O!P)m!Q![1]#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~2QP!m~!Q![2T~2WY!O!P)m!Q![2T#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T${$|.^~2yP!Q![2|~3RR!v~!Q![2|!g!h3[#X#Y3[~3_R{|3h}!O3h!Q![3n~3kP!Q![3n~3sP!v~!Q![3n~3{O#|~~4Qe!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#l#m8q#m#n1{${$|.^~5hR!v~!Q![5q!g!h3[#X#Y3[~5v`!v~!Q![5q!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~6}O!s~~7QQ!d!e6x#]#^7W~7ZP!d!e6x~7cd!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~8tR!Q![8}!c!i8}#T#Z8}~9SR!v~!Q![8}!c!i8}#T#Z8}P9bT{P!Q![9]![!]9]!c!}9]#R#S9]#T#o9]~9vP!o~!_!`9y~:OO!p~~:TQ|~!_!`:Z#r#s:`~:`O!q~~:eO!P~~:jP!l~!_!`:m~:rO!n~R:yT{P#zQ!Q![:r![!]9]!c!}:r#R#S:r#T#o:r~;_O$k~~;dO$l~~;iO$O~~;lRO#S;i#S#T%`#T~;i~;zO$U~~<PR!_~!_!`<Y!`!a<_#r#s<d~<_O!W~~<dO!Y~~<iO!X~~<nO$W~",tokenizers:[0,1],topRules:{LogQL:[0,37]},specialized:[{term:43,get:(e,t)=>(e=>a[e.toLowerCase()]||-1)(e)<<1},{term:43,get:(e,t)=>(e=>i[e.toLowerCase()]||-1)(e)<<1|1},{term:43,get:e=>s[e]||-1}],tokenPrec:0}),l=40,u=49,c=98},1625:(e,t,r)=>{"use strict";r.d(t,{$N:()=>a,$m:()=>o,ob:()=>s,vp:()=>l,xB:()=>i,yL:()=>n});var n=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(n||{});var a=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(a||{}),i=(e=>(e.Ascending="asc",e.Descending="desc",e.None="none",e))(i||{});var s=(e=>(e.Actions="actions",e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.Custom="custom",e.DataLinks="data-links",e.Gauge="gauge",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge",e.Sparkline="sparkline",e))(s||{});var o=(e=>(e.CSV="csv",e.Date="date",e.Distributed="distributed",e.DoubleQuote="doublequote",e.Glob="glob",e.HTML="html",e.JSON="json",e.Lucene="lucene",e.PercentEncode="percentencode",e.Pipe="pipe",e.QueryParam="queryparam",e.Raw="raw",e.Regex="regex",e.SQLString="sqlstring",e.SingleQuote="singlequote",e.Text="text",e.UriEncode="uriencode",e))(o||{});const l="browser"},6145:(e,t,r)=>{"use strict";r.d(t,{CO:()=>a,Ol:()=>i,dM:()=>s,rw:()=>n,yV:()=>o});const n={allowCustomValue:!0,includeAll:!1,multi:!1,options:[],skipUrlSync:!1};var a=(e=>(e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged",e))(a||{});var i=(e=>(e.Absolute="absolute",e.Percentage="percentage",e))(i||{});var s=(e=>(e.RangeToText="range",e.RegexToText="regex",e.SpecialValue="special",e.ValueToText="value",e))(s||{});var o=(e=>(e[e.Crosshair=1]="Crosshair",e[e.Off=0]="Off",e[e.Tooltip=2]="Tooltip",e))(o||{})},2245:(e,t,r)=>{"use strict";r.d(t,{zL:()=>a});var n=r(6145),a=(e=>(e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable",e))(a||{});n.rw},7993:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});const n=(e,t)=>e>t?1:e<t?-1:0,a=1/0,i=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s="eexxaacctt",o=/\p{P}/gu,l=["en",{numeric:!0,sensitivity:"base"}],u=(e,t,r)=>e.replace("A-Z",t).replace("a-z",r),c={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",interBound:"[^A-Za-z\\d]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:a,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,a],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,r)=>!0,toUpper:e=>e.toLocaleUpperCase(),toLower:e=>e.toLocaleLowerCase(),compare:null,sort:(e,t,r,a=n)=>{let{idx:i,chars:s,terms:o,interLft2:l,interLft1:u,start:c,intraIns:d,interIns:h,cases:p}=e;return i.map(((e,t)=>t)).sort(((e,r)=>s[r]-s[e]||d[e]-d[r]||o[r]+l[r]+.5*u[r]-(o[e]+l[e]+.5*u[e])||h[e]-h[r]||c[e]-c[r]||p[r]-p[e]||a(t[i[e]],t[i[r]])))}},d=(e,t)=>0==t?"":1==t?e+"??":t==a?e+"*?":e+`{0,${t}}?`,h="(?:\\b|_)";function p(e){e=Object.assign({},c,e);let{unicode:t,interLft:r,interRgt:a,intraMode:p,intraSlice:f,intraIns:g,intraSub:v,intraTrn:b,intraDel:y,intraContr:O,intraSplit:w,interSplit:x,intraBound:S,interBound:_,intraChars:$,toUpper:E,toLower:P,compare:R}=e;g??=p,v??=p,b??=p,y??=p,R??="undefined"==typeof Intl?n:new Intl.Collator(...l).compare;let T=e.letters??e.alpha;if(null!=T){let e=E(T),t=P(T);x=u(x,e,t),w=u(w,e,t),_=u(_,e,t),S=u(S,e,t),$=u($,e,t),O=u(O,e,t)}let C=t?"u":"";const k='".+?"',D=new RegExp(k,"gi"+C),I=new RegExp(`(?:\\s+|^)-(?:${$}+|${k})`,"gi"+C);let{intraRules:A}=e;null==A&&(A=e=>{let t=c.intraSlice,r=0,n=0,a=0,i=0;if(/[^\d]/.test(e)){let s=e.length;s<=4?s>=3&&(a=Math.min(b,1),4==s&&(r=Math.min(g,1))):(t=f,r=g,n=v,a=b,i=y)}return{intraSlice:t,intraIns:r,intraSub:n,intraTrn:a,intraDel:i}});let L=!!w,N=new RegExp(w,"g"+C),M=new RegExp(x,"g"+C),j=new RegExp("^"+x+"|"+x+"$","g"+C),Q=new RegExp(O,"gi"+C);const V=(e,t=!1)=>{let r=[];e=(e=e.replace(D,(e=>(r.push(e),s)))).replace(j,""),t||(e=P(e)),L&&(e=e.replace(N,(e=>e[0]+" "+e[1])));let n=0;return e.split(M).filter((e=>""!=e)).map((e=>e===s?r[n++]:e))},z=/[^\d]+|\d+/g,F=(t,n=0,s=!1)=>{let o=V(t);if(0==o.length)return[];let l,u=Array(o.length).fill("");if(o=o.map(((e,t)=>e.replace(Q,(e=>(u[t]=e,""))))),1==p)l=o.map(((e,t)=>{if('"'===e[0])return i(e.slice(1,-1));let r="";for(let n of e.matchAll(z)){let e=n[0],{intraSlice:a,intraIns:i,intraSub:s,intraTrn:o,intraDel:l}=A(e);if(i+s+o+l==0)r+=e+u[t];else{let[n,c]=a,h=e.slice(0,n),p=e.slice(c),f=e.slice(n,c);1==i&&1==h.length&&h!=f[0]&&(h+="(?!"+h+")");let m=f.length,g=[e];if(s)for(let e=0;e<m;e++)g.push(h+f.slice(0,e)+$+f.slice(e+1)+p);if(o)for(let e=0;e<m-1;e++)f[e]!=f[e+1]&&g.push(h+f.slice(0,e)+f[e+1]+f[e]+f.slice(e+2)+p);if(l)for(let e=0;e<m;e++)g.push(h+f.slice(0,e+1)+"?"+f.slice(e+1)+p);if(i){let e=d($,1);for(let t=0;t<m;t++)g.push(h+f.slice(0,t)+e+f.slice(t)+p)}r+="(?:"+g.join("|")+")"+u[t]}}return r}));else{let e=d($,g);2==n&&g>0&&(e=")("+e+")("),l=o.map(((t,r)=>'"'===t[0]?i(t.slice(1,-1)):t.split("").map(((e,t,r)=>(1==g&&0==t&&r.length>1&&e!=r[t+1]&&(e+="(?!"+e+")"),e))).join(e)+u[r]))}let c=2==r?h:"",f=2==a?h:"",m=f+d(e.interChars,e.interIns)+c;return n>0?s?l=c+"("+l.join(")"+f+"|"+c+"(")+")"+f:(l="("+l.join(")("+m+")(")+")",l="(.??"+c+")"+l+"("+f+".*)"):(l=l.join(m),l=c+l+f),[new RegExp(l,"i"+C),o,u]},B=(e,t,r)=>{let[n]=F(t);if(null==n)return null;let a=[];if(null!=r)for(let t=0;t<r.length;t++){let i=r[t];n.test(e[i])&&a.push(i)}else for(let t=0;t<e.length;t++)n.test(e[t])&&a.push(t);return a};let X=!!S,q=new RegExp(_,C),U=new RegExp(S,C);const W=(t,n,i)=>{let[s,o,l]=F(i,1),u=V(i,!0),[c]=F(i,2),d=o.length,h=Array(d),p=Array(d);for(let e=0;e<d;e++){let t=o[e],r=u[e],n='"'==t[0]?t.slice(1,-1):t+l[e],a='"'==r[0]?r.slice(1,-1):r+l[e];h[e]=n,p[e]=a}let f=t.length,m=Array(f).fill(0),g={idx:Array(f),start:m.slice(),chars:m.slice(),cases:m.slice(),terms:m.slice(),interIns:m.slice(),intraIns:m.slice(),interLft2:m.slice(),interRgt2:m.slice(),interLft1:m.slice(),interRgt1:m.slice(),ranges:Array(f)},v=1==r||1==a,b=0;for(let i=0;i<t.length;i++){let o=n[t[i]],l=o.match(s),u=l.index+l[1].length,f=u,m=!1,y=0,O=0,w=0,x=0,S=0,_=0,$=0,E=0,R=0,T=[];for(let t=0,n=2;t<d;t++,n+=2){let i=P(l[n]),s=h[t],c=p[t],g=s.length,b=i.length,k=i==s;if(l[n]==c&&$++,!k&&l[n+1].length>=g){let e=P(l[n+1]).indexOf(s);e>-1&&(T.push(f,b,e,g),f+=H(l,n,e,g),i=s,b=g,k=!0,0==t&&(u=f))}if(v||k){let e=f-1,c=f+b,d=!1,h=!1;if(-1==e||q.test(o[e]))k&&y++,d=!0;else{if(2==r){m=!0;break}if(X&&U.test(o[e]+o[e+1]))k&&O++,d=!0;else if(1==r){let e=l[n+1],r=f+b;if(e.length>=g){let a,c=0,h=!1,p=new RegExp(s,"ig"+C);for(;a=p.exec(e);){c=a.index;let e=r+c,t=e-1;if(-1==t||q.test(o[t])){y++,h=!0;break}if(U.test(o[t]+o[e])){O++,h=!0;break}}h&&(d=!0,T.push(f,b,c,g),f+=H(l,n,c,g),i=s,b=g,k=!0,0==t&&(u=f))}if(!d){m=!0;break}}}if(c==o.length||q.test(o[c]))k&&w++,h=!0;else{if(2==a){m=!0;break}if(X&&U.test(o[c-1]+o[c]))k&&x++,h=!0;else if(1==a){m=!0;break}}k&&(S+=g,d&&h&&_++)}if(b>g&&(R+=b-g),t>0&&(E+=l[n-1].length),!e.intraFilt(s,i,f)){m=!0;break}t<d-1&&(f+=b+l[n+1].length)}if(!m){g.idx[b]=t[i],g.interLft2[b]=y,g.interLft1[b]=O,g.interRgt2[b]=w,g.interRgt1[b]=x,g.chars[b]=S,g.terms[b]=_,g.cases[b]=$,g.interIns[b]=E,g.intraIns[b]=R,g.start[b]=u;let e=o.match(c),r=e.index+e[1].length,n=T.length,a=n>0?0:1/0,s=n-4;for(let t=2;t<e.length;){let n=e[t].length;if(a<=s&&T[a]==r){let n=T[a+1],i=T[a+2],s=T[a+3],o=t,l="";for(let t=0;t<n;o++)l+=e[o],t+=e[o].length;e.splice(t,o-t,l),r+=H(e,t,i,s),a+=4}else r+=n,t++}r=e.index+e[1].length;let l=g.ranges[b]=[],d=r,h=r;for(let t=2;t<e.length;t++){let n=e[t].length;r+=n,t%2==0?h=r:n>0&&(l.push(d,h),d=h=r)}h>d&&l.push(d,h),b++}}if(b<t.length)for(let e in g)g[e]=g[e].slice(0,b);return g},H=(e,t,r,n)=>{let a=e[t]+e[t+1].slice(0,r);return e[t-1]+=a,e[t]=e[t+1].slice(r,r+n),e[t+1]=e[t+1].slice(r+n),a.length};return{search:(...t)=>((t,r,n,a=1e3,s)=>{n=n?!0===n?5:n:0;let l=null,u=null,c=[];r=r.replace(I,(e=>{let t=e.trim().slice(1);return t='"'===t[0]?i(t.slice(1,-1)):t.replace(o,""),""!=t&&c.push(t),""}));let d,h=V(r);if(c.length>0){if(d=new RegExp(c.join("|"),"i"+C),0==h.length){let e=[];for(let r=0;r<t.length;r++)d.test(t[r])||e.push(r);return[e,null,null]}}else if(0==h.length)return[null,null,null];if(n>0){let e=V(r);if(e.length>1){let r=e.slice().sort(((e,t)=>t.length-e.length));for(let e=0;e<r.length;e++){if(0==s?.length)return[[],null,null];s=B(t,r[e],s)}if(e.length>n)return[s,null,null];l=m(e).map((e=>e.join(" "))),u=[];let a=new Set;for(let e=0;e<l.length;e++)if(a.size<s.length){let r=s.filter((e=>!a.has(e))),n=B(t,l[e],r);for(let e=0;e<n.length;e++)a.add(n[e]);u.push(n)}else u.push([])}}null==l&&(l=[r],u=[s?.length>0?s:B(t,r)]);let p=null,f=null;if(c.length>0&&(u=u.map((e=>e.filter((e=>!d.test(t[e])))))),u.reduce(((e,t)=>e+t.length),0)<=a){p={},f=[];for(let r=0;r<u.length;r++){let n=u[r];if(null==n||0==n.length)continue;let a=l[r],i=W(n,t,a),s=e.sort(i,t,a,R);if(r>0)for(let e=0;e<s.length;e++)s[e]+=f.length;for(let e in i)p[e]=(p[e]??[]).concat(i[e]);f=f.concat(s)}}return[[].concat(...u),p,f]})(...t),split:V,filter:B,info:W,sort:e.sort}}const f=(()=>{let e={A:"ÁÀÃÂÄĄ",a:"áàãâäą",E:"ÉÈÊËĖ",e:"éèêëę",I:"ÍÌÎÏĮ",i:"íìîïį",O:"ÓÒÔÕÖ",o:"óòôõö",U:"ÚÙÛÜŪŲ",u:"úùûüūų",C:"ÇČĆ",c:"çčć",L:"Ł",l:"ł",N:"ÑŃ",n:"ñń",S:"ŠŚ",s:"šś",Z:"ŻŹ",z:"żź"},t=new Map,r="";for(let n in e)e[n].split("").forEach((e=>{r+=e,t.set(e,n)}));let n=new RegExp(`[${r}]`,"g"),a=e=>t.get(e);return e=>{if("string"==typeof e)return e.replace(n,a);let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r].replace(n,a);return t}})();function m(e){let t,r,n=(e=e.slice()).length,a=[e.slice()],i=new Array(n).fill(0),s=1;for(;s<n;)i[s]<s?(t=s%2&&i[s],r=e[s],e[s]=e[t],e[t]=r,++i[s],s=1,a.push(e.slice())):(i[s]=0,++s);return a}const g=(e,t)=>t?`<mark>${e}</mark>`:e,v=(e,t)=>e+t;p.latinize=f,p.permute=e=>m([...Array(e.length).keys()]).sort(((e,t)=>{for(let r=0;r<e.length;r++)if(e[r]!=t[r])return e[r]-t[r];return 0})).map((t=>t.map((t=>e[t])))),p.highlight=function(e,t,r=g,n="",a=v){n=a(n,r(e.substring(0,t[0]),!1))??n;for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];n=a(n,r(e.substring(s,o),!0))??n,i<t.length-3&&(n=a(n,r(e.substring(t[i+1],t[i+2]),!1))??n)}return n=a(n,r(e.substring(t[t.length-1]),!1))??n}},7203:(e,t,r)=>{"use strict";r.d(t,{PH:()=>f,Qj:()=>p,Z6:()=>u,cF:()=>n,fI:()=>c,iX:()=>D,uY:()=>s});const n=1024;let a=0;class i{constructor(e,t){this.from=e,this.to=t}}class s{constructor(e={}){this.id=a++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=u.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}s.closedBy=new s({deserialize:e=>e.split(" ")}),s.openedBy=new s({deserialize:e=>e.split(" ")}),s.group=new s({deserialize:e=>e.split(" ")}),s.isolate=new s({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),s.contextHash=new s({perNode:!0}),s.lookAhead=new s({perNode:!0}),s.mounted=new s({perNode:!0});class o{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[s.mounted.id]}}const l=Object.create(null);class u{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):l,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new u(e.name||"",t,e.id,r);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(s.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return e=>{for(let r=e.prop(s.group),n=-1;n<(r?r.length:0);n++){let a=t[n<0?e.name:r[n]];if(a)return a}}}}u.none=new u("",Object.create(null),0,8);class c{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let n=null;for(let t of e){let e=t(r);e&&(n||(n=Object.assign({},r.props)),n[e[0].id]=e[1])}t.push(n?new u(r.name,n,r.id,r.flags):r)}return new c(t)}}const d=new WeakMap,h=new WeakMap;var p;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(p||(p={}));class f{constructor(e,t,r,n,a){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,a&&a.length){this.props=Object.create(null);for(let[e,t]of a)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=o.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let r=e.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new P(this.topNode,e)}cursorAt(e,t=0,r=0){let n=d.get(this)||this.topNode,a=new P(n);return a.moveTo(e,t),d.set(this,a._tree),a}get topNode(){return new O(this,0,0,null)}resolve(e,t=0){let r=b(d.get(this)||this.topNode,e,t,!1);return d.set(this,r),r}resolveInner(e,t=0){let r=b(h.get(this)||this.topNode,e,t,!0);return h.set(this,r),r}resolveStack(e,t=0){return function(e,t,r){let n=e.resolveInner(t,r),a=null;for(let e=n instanceof O?n:n.context.parent;e;e=e.parent)if(e.index<0){let i=e.parent;(a||(a=[n])).push(i.resolve(t,r)),e=i}else{let i=o.get(e.tree);if(i&&i.overlay&&i.overlay[0].from<=t&&i.overlay[i.overlay.length-1].to>=t){let s=new O(i.tree,i.overlay[0].from+e.from,-1,e);(a||(a=[n])).push(b(s,t,r,!1))}}return a?$(a):n}(this,e,t)}iterate(e){let{enter:t,leave:r,from:n=0,to:a=this.length}=e,i=e.mode||0,s=(i&p.IncludeAnonymous)>0;for(let e=this.cursor(i|p.IncludeAnonymous);;){let i=!1;if(e.from<=a&&e.to>=n&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;i=!0}for(;i&&r&&(s||!e.type.isAnonymous)&&r(e),!e.nextSibling();){if(!e.parent())return;i=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:k(u.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,r)=>new f(this.type,e,t,r,this.propValues)),e.makeTree||((e,t,r)=>new f(u.none,e,t,r)))}static build(e){return function(e){var t;let{buffer:r,nodeSet:a,maxBufferLength:i=n,reused:o=[],minRepeatType:l=a.types.length}=e,u=Array.isArray(r)?new m(r,r.length):r,c=a.types,d=0,h=0;function p(e,t,r,n,s,f){let{id:m,start:S,end:_,size:$}=u,E=h,P=d;for(;$<0;){if(u.next(),-1==$){let t=o[m];return r.push(t),void n.push(S-e)}if(-3==$)return void(d=m);if(-4==$)return void(h=m);throw new RangeError(`Unrecognized record size: ${$}`)}let R,T,C=c[m],D=S-e;if(_-S<=i&&(T=w(u.pos-t,s))){let t=new Uint16Array(T.size-T.skip),r=u.pos-T.size,n=t.length;for(;u.pos>r;)n=x(T.start,t,n);R=new g(t,_-T.start,a),D=T.start-e}else{let e=u.pos-$;u.next();let t=[],r=[],n=m>=l?m:-1,a=0,s=_;for(;u.pos>e;)n>=0&&u.id==n&&u.size>=0?(u.end<=s-i&&(y(t,r,S,a,u.end,s,n,E,P),a=t.length,s=u.end),u.next()):f>2500?v(S,e,t,r):p(S,e,t,r,n,f+1);if(n>=0&&a>0&&a<t.length&&y(t,r,S,a,S,s,n,E,P),t.reverse(),r.reverse(),n>-1&&a>0){let e=b(C,P);R=k(C,t,r,0,t.length,0,_-S,e,e)}else R=O(C,t,r,_-S,E-_,P)}r.push(R),n.push(D)}function v(e,t,r,n){let s=[],o=0,l=-1;for(;u.pos>t;){let{id:e,start:t,end:r,size:n}=u;if(n>4)u.next();else{if(l>-1&&t<l)break;l<0&&(l=r-i),s.push(e,t,r),o++,u.next()}}if(o){let t=new Uint16Array(4*o),i=s[s.length-2];for(let e=s.length-3,r=0;e>=0;e-=3)t[r++]=s[e],t[r++]=s[e+1]-i,t[r++]=s[e+2]-i,t[r++]=r;r.push(new g(t,s[2]-i,a)),n.push(i-e)}}function b(e,t){return(r,n,a)=>{let i,o,l=0,u=r.length-1;if(u>=0&&(i=r[u])instanceof f){if(!u&&i.type==e&&i.length==a)return i;(o=i.prop(s.lookAhead))&&(l=n[u]+i.length+o)}return O(e,r,n,a,l,t)}}function y(e,t,r,n,i,s,o,l,u){let c=[],d=[];for(;e.length>n;)c.push(e.pop()),d.push(t.pop()+r-i);e.push(O(a.types[o],c,d,s-i,l-s,u)),t.push(i-r)}function O(e,t,r,n,a,i,o){if(i){let e=[s.contextHash,i];o=o?[e].concat(o):[e]}if(a>25){let e=[s.lookAhead,a];o=o?[e].concat(o):[e]}return new f(e,t,r,n,o)}function w(e,t){let r=u.fork(),n=0,a=0,s=0,o=r.end-i,c={size:0,start:0,skip:0};e:for(let i=r.pos-e;r.pos>i;){let e=r.size;if(r.id==t&&e>=0){c.size=n,c.start=a,c.skip=s,s+=4,n+=4,r.next();continue}let u=r.pos-e;if(e<0||u<i||r.start<o)break;let d=r.id>=l?4:0,h=r.start;for(r.next();r.pos>u;){if(r.size<0){if(-3!=r.size)break e;d+=4}else r.id>=l&&(d+=4);r.next()}a=h,n+=e,s+=d}return(t<0||n==e)&&(c.size=n,c.start=a,c.skip=s),c.size>4?c:void 0}function x(e,t,r){let{id:n,start:a,end:i,size:s}=u;if(u.next(),s>=0&&n<l){let o=r;if(s>4){let n=u.pos-(s-4);for(;u.pos>n;)r=x(e,t,r)}t[--r]=o,t[--r]=i-e,t[--r]=a-e,t[--r]=n}else-3==s?d=n:-4==s&&(h=n);return r}let S=[],_=[];for(;u.pos>0;)p(e.start||0,e.bufferStart||0,S,_,-1,0);let $=null!==(t=e.length)&&void 0!==t?t:S.length?_[0]+S[0].length:0;return new f(c[e.topID],S.reverse(),_.reverse(),$)}(e)}}f.empty=new f(u.none,[],[],0);class m{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new m(this.buffer,this.index)}}class g{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return u.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],a=n.name;if(/\W/.test(a)&&!n.isError&&(a=JSON.stringify(a)),r==(e+=4))return a;let i=[];for(;e<r;)i.push(this.childString(e)),e=this.buffer[e+3];return a+"("+i.join(",")+")"}findChild(e,t,r,n,a){let{buffer:i}=this,s=-1;for(let o=e;o!=t&&!(v(a,n,i[o+1],i[o+2])&&(s=o,r>0));o=i[o+3]);return s}slice(e,t,r){let n=this.buffer,a=new Uint16Array(t-e),i=0;for(let s=e,o=0;s<t;){a[o++]=n[s++],a[o++]=n[s++]-r;let t=a[o++]=n[s++]-r;a[o++]=n[s++]-e,i=Math.max(i,t)}return new g(a,i,this.set)}}function v(e,t,r,n){switch(e){case-2:return r<t;case-1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function b(e,t,r,n){for(var a;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!n&&e instanceof O&&e.index<0?null:e.parent;if(!t)return e;e=t}let i=n?0:p.IgnoreOverlays;if(n)for(let n=e,s=n.parent;s;n=s,s=n.parent)n instanceof O&&n.index<0&&(null===(a=s.enter(t,r,i))||void 0===a?void 0:a.from)!=n.from&&(e=s);for(;;){let n=e.enter(t,r,i);if(!n)return e;e=n}}class y{cursor(e=0){return new P(this,e)}getChild(e,t=null,r=null){let n=w(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return w(this,e,t,r)}resolve(e,t=0){return b(this,e,t,!1)}resolveInner(e,t=0){return b(this,e,t,!0)}matchContext(e){return x(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(r=t,t=e.prevSibling):t=e}return r}get node(){return this}get next(){return this.parent}}class O extends y{constructor(e,t,r,n){super(),this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,a=0){for(let i=this;;){for(let{children:s,positions:l}=i._tree,u=t>0?s.length:-1;e!=u;e+=t){let u=s[e],c=l[e]+i.from;if(v(n,r,c,c+u.length))if(u instanceof g){if(a&p.ExcludeBuffers)continue;let s=u.findChild(0,u.buffer.length,t,r-c,n);if(s>-1)return new _(new S(i,u,e,c),null,s)}else if(a&p.IncludeAnonymous||!u.type.isAnonymous||R(u)){let s;if(!(a&p.IgnoreMounts)&&(s=o.get(u))&&!s.overlay)return new O(s.tree,c,e,i);let l=new O(u,c,e,i);return a&p.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(t<0?u.children.length-1:0,t,r,n)}}if(a&p.IncludeAnonymous||!i.type.isAnonymous)return null;if(e=i.index>=0?i.index+t:t<0?-1:i._parent._tree.children.length,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let n;if(!(r&p.IgnoreOverlays)&&(n=o.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:e,to:a}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?a>=r:a>r))return new O(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function w(e,t,r,n){let a=e.cursor(),i=[];if(!a.firstChild())return i;if(null!=r)for(let e=!1;!e;)if(e=a.type.is(r),!a.nextSibling())return i;for(;;){if(null!=n&&a.type.is(n))return i;if(a.type.is(t)&&i.push(a.node),!a.nextSibling())return null==n?i:[]}}function x(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}class S{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}}class _ extends y{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:n}=this.context,a=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return a<0?null:new _(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&p.ExcludeBuffers)return null;let{buffer:n}=this.context,a=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new _(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new _(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new _(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,a=r.buffer[this.index+3];if(a>n){let i=r.buffer[this.index+1];e.push(r.slice(n,a,i)),t.push(0)}return new f(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function $(e){if(!e.length)return null;let t=0,r=e[0];for(let n=1;n<e.length;n++){let a=e[n];(a.from>r.from||a.to<r.to)&&(r=a,t=n)}let n=r instanceof O&&r.index<0?null:r.parent,a=e.slice();return n?a[t]=n:a.splice(t,1),new E(a,r)}class E{constructor(e,t){this.heads=e,this.node=t}get next(){return $(this.heads)}}class P{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof O)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof O?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,a=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return!(a<0)&&(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&p.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&p.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&p.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let n=t+e,a=e<0?-1:r._tree.children.length;n!=a;n+=e){let e=r._tree.children[n];if(this.mode&p.IncludeAnonymous||e instanceof g||!e.type.isAnonymous||R(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,a=this.stack.length;a>=0;){for(let i=e;i;i=i._parent)if(i.index==n){if(n==this.index)return i;t=i,r=a+1;break e}n=this.stack[--a]}for(let e=r;e<this.stack.length;e++)t=new _(this.buffer,t,this.stack[e]);return this.bufferNode=new _(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return x(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,a=this.stack.length-1;n>=0;a--){if(a<0)return x(this._tree,e,n);let i=r[t.buffer[this.stack[a]]];if(!i.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}}function R(e){return e.children.some((e=>e instanceof g||!e.type.isAnonymous||R(e)))}const T=new WeakMap;function C(e,t){if(!e.isAnonymous||t instanceof g||t.type!=e)return 1;let r=T.get(t);if(null==r){r=1;for(let n of t.children){if(n.type!=e||!(n instanceof f)){r=1;break}r+=C(e,n)}T.set(t,r)}return r}function k(e,t,r,n,a,i,s,o,l){let u=0;for(let r=n;r<a;r++)u+=C(e,t[r]);let c=Math.ceil(1.5*u/8),d=[],h=[];return function t(r,n,a,s,o){for(let u=a;u<s;){let a=u,p=n[u],f=C(e,r[u]);for(u++;u<s;u++){let t=C(e,r[u]);if(f+t>=c)break;f+=t}if(u==a+1){if(f>c){let e=r[a];t(e.children,e.positions,0,e.children.length,n[a]+o);continue}d.push(r[a])}else{let t=n[u-1]+r[u-1].length-p;d.push(k(e,r,n,a,u,p,t,null,l))}h.push(p+o-i)}}(t,r,n,a,0),(o||l)(d,h,s)}class D{startParse(e,t,r){return"string"==typeof e&&(e=new I(e)),r=r?r.length?r.map((e=>new i(e.from,e.to))):[new i(0,0)]:[new i(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let e=n.advance();if(e)return e}}}class I{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new s({perNode:!0})},782:(e,t,r)=>{"use strict";r.d(t,{U1:()=>_});var n=r(7203);class a{constructor(e,t,r,n,a,i,s,o,l,u=0,c){this.p=e,this.stack=t,this.state=r,this.reducePos=n,this.pos=a,this.score=i,this.buffer=s,this.bufferBase=o,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let n=e.parser.context;return new a(e,[],t,r,r,0,[],0,n?new i(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,n=65535&e,{parser:a}=this.p,i=this.reducePos<this.pos-25;i&&this.setLookAhead(this.pos);let s=a.dynamicPrecedence(n);if(s&&(this.score+=s),0==r)return this.pushState(a.getGoto(this.state,n,!0),this.reducePos),n<a.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,i?8:4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(r-1)-(262144&e?6:0),l=o?this.stack[o-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(null===(t=this.p.parser.nodeSet.types[n])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=o?this.stack[o-1]:0,d=this.bufferBase+this.buffer.length-c;if(n<a.minRepeatTerm||131072&e){let e=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,e,d+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=a.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,l)}storeNode(e,t,r,n=4,a=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==r)return;if(e.buffer[n-2]>=t)return void(e.buffer[n-2]=r)}}if(a&&this.pos!=r){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4]){let e=!1;for(let t=a;t>0&&this.buffer[t-2]>r;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,n>4&&(n-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=n}else this.buffer.push(e,t,r,n)}shift(e,t,r,n){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4);else{let a=e,{parser:i}=this.p;(n>this.pos||t<=i.maxNode)&&(this.pos=n,i.stateFlag(a,1)||(this.reducePos=n)),this.pushState(a,r),this.shiftContext(t,r),t<=i.maxNode&&this.buffer.push(t,r,n,4)}}apply(e,t,r,n){65536&e?this.reduce(e):this.shift(e,t,r,n)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new a(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new s(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n,a=0;a<t.length;a+=2)(n=t[a+1])!=this.state&&this.p.parser.hasAction(n,e)&&r.push(t[a],n);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let n=t[e+1];r.some(((e,t)=>1&t&&e==n))||r.push(t[e],n)}t=r}let r=[];for(let e=0;e<t.length&&r.length<4;e+=2){let n=t[e+1];if(n==this.state)continue;let a=this.split();a.pushState(n,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[e],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,n=65535&t,a=this.stack.length-3*r;if(a<0||e.getGoto(this.stack[a],n,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(n,a)=>{if(!t.includes(n))return t.push(n),e.allActions(n,(t=>{if(393216&t);else if(65536&t){let r=(t>>19)-a;if(r>1){let n=65535&t,a=this.stack.length-3*r;if(a>=0&&e.getGoto(this.stack[a],n,!1)>=0)return r<<19|65536|n}}else{let e=r(t,a+1);if(null!=e)return e}}))};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new i(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class i{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class s{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class o{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new o(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new o(this.stack,this.pos,this.index)}}function l(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let n=0,a=0;n<e.length;){let i=0;for(;;){let t=e.charCodeAt(n++),r=!1;if(126==t){i=65535;break}t>=92&&t--,t>=34&&t--;let a=t-32;if(a>=46&&(a-=46,r=!0),i+=a,r)break;i*=46}r?r[a++]=i:r=new t(i)}return r}class u{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const c=new u;class d{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=c,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,n=this.rangeIndex,a=this.pos+e;for(;a<r.from;){if(!n)return null;let e=this.ranges[--n];a-=r.from-e.to,r=e}for(;t<0?a>r.to:a>=r.to;){if(n==this.ranges.length-1)return null;let e=this.ranges[++n];a+=e.from-r.to,r=e}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,r,n=this.chunkOff+e;if(n>=0&&n<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(n);else{let n=this.resolveOffset(e,1);if(null==n)return-1;if(t=n,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,n=this.range;for(;n.to<=t;)n=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=c,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(r+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return r}}class h{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;p(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}h.prototype.contextual=h.prototype.fallback=h.prototype.extend=!1;h.prototype.fallback=h.prototype.extend=!1;function p(e,t,r,n,a,i){let s=0,o=1<<n,{dialect:l}=r.p.parser;e:for(;o&e[s];){let r=e[s+1];for(let n=s+3;n<r;n+=2)if((e[n+1]&o)>0){let r=e[n];if(l.allows(r)&&(-1==t.token.value||t.token.value==r||m(r,t.token.value,a,i))){t.acceptToken(r);break}}let n=t.next,u=0,c=e[s+2];if(!(t.next<0&&c>u&&65535==e[r+3*c-3])){for(;u<c;){let a=u+c>>1,i=r+a+(a<<1),o=e[i],l=e[i+1]||65536;if(n<o)c=a;else{if(!(n>=l)){s=e[i+2],t.advance();continue e}u=a+1}}break}s=e[r+3*c-1]}}function f(e,t,r){for(let n,a=t;65535!=(n=e[a]);a++)if(n==r)return a-t;return-1}function m(e,t,r,n){let a=f(r,n,t);return a<0||f(r,n,e)<a}const g="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let v=null;function b(e,t,r){let a=e.cursor(n.Qj.IncludeAnonymous);for(a.moveTo(t);;)if(!(r<0?a.childBefore(t):a.childAfter(t)))for(;;){if((r<0?a.to<t:a.from>t)&&!a.type.isError)return r<0?Math.max(0,Math.min(a.to-1,t-25)):Math.min(e.length,Math.max(a.from+1,t+25));if(r<0?a.prevSibling():a.nextSibling())break;if(!a.parent())return r<0?0:e.length}}class y{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?b(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?b(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],a=this.index[t];if(a==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=r.children[a],s=this.start[t]+r.positions[a];if(s>e)return this.nextStart=s,null;if(i instanceof n.PH){if(s==e){if(s<this.safeFrom)return null;let e=s+i.length;if(e<=this.safeTo){let t=i.prop(n.uY.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,s+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+i.length}}}class O{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new u))}getActions(e){let t=0,r=null,{parser:n}=e.p,{tokenizers:a}=n,i=n.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,o=0;for(let n=0;n<a.length;n++){if(!(1<<n&i))continue;let l=a[n],u=this.tokens[n];if((!r||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=i||u.context!=s)&&(this.updateCachedToken(u,l,e),u.mask=i,u.context=s),u.lookAhead>u.end+25&&(o=Math.max(u.lookAhead,o)),0!=u.value)){let n=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(r=u,t>n))break}}for(;this.actions.length>t;)this.actions.pop();return o&&e.setLookAhead(o),r||e.pos!=this.stream.end||(r=new u,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new u,{pos:r,p:n}=e;return t.start=r,t.end=Math.min(r+1,n.stream.end),t.value=r==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,r){let n=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(n,e),r),e.value>-1){let{parser:t}=r.p;for(let n=0;n<t.specialized.length;n++)if(t.specialized[n]==e.value){let a=t.specializers[n](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){1&a?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,r,n){for(let t=0;t<n;t+=3)if(this.actions[t]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=r,n}addActions(e,t,r,n){let{state:a}=e,{parser:i}=e.p,{data:s}=i;for(let e=0;e<2;e++)for(let o=i.stateSlot(a,e?2:1);;o+=3){if(65535==s[o]){if(1!=s[o+1]){0==n&&2==s[o+1]&&(n=this.putAction($(s,o+2),t,r,n));break}o=$(s,o+2)}s[o]==t&&(n=this.putAction($(s,o+1),t,r,n))}return n}}class w{constructor(e,t,r,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new d(t,n),this.tokens=new O(e,this.stream),this.topTerm=e.top[1];let{from:i}=n[0];this.stacks=[a.start(this,e.top[0],i)],this.fragments=r.length&&this.stream.end-i>4*e.bufferLength?new y(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,n=this.minStackPos,a=this.stacks=[];if(this.bigReductionCount>300&&1==r.length){let[e]=r;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<r.length;i++){let s=r[i];for(;;){if(this.tokens.mainToken=null,s.pos>n)a.push(s);else{if(this.advanceStack(s,a,r))continue;{e||(e=[],t=[]),e.push(s);let r=this.tokens.getMainToken(s);t.push(r.value,r.end)}}break}}if(!a.length){let t=e&&function(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,a);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(a.length>e)for(a.sort(((e,t)=>t.score-e.score));a.length>e;)a.pop();a.some((e=>e.reducePos>n))&&this.recovering--}else if(a.length>1){e:for(let e=0;e<a.length-1;e++){let t=a[e];for(let r=e+1;r<a.length;r++){let n=a[r];if(t.sameState(n)||t.buffer.length>500&&n.buffer.length>500){if(!((t.score-n.score||t.buffer.length-n.buffer.length)>0)){a.splice(e--,1);continue e}a.splice(r--,1)}}}a.length>12&&a.splice(12,a.length-12)}this.minStackPos=a[0].pos;for(let e=1;e<a.length;e++)a[e].pos<this.minStackPos&&(this.minStackPos=a[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let a=e.pos,{parser:i}=this;g&&this.stackID(e);if(null!=this.stoppedAt&&a>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(a);s;){let a=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(a>-1&&s.length&&(!t||(s.prop(n.uY.contextHash)||0)==r))return e.useNode(s,a),!0;if(!(s instanceof n.PH)||0==s.children.length||s.positions[0]>0)break;let o=s.children[0];if(!(o instanceof n.PH&&0==s.positions[0]))break;s=o}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let o=this.tokens.getActions(e);for(let n=0;n<o.length;){let i=o[n++],s=o[n++],l=o[n++],u=n==o.length||!r,c=u?e:e.split(),d=this.tokens.mainToken;if(c.apply(i,s,d?d.start:c.pos,l),u)return!0;c.pos>a?t.push(c):r.push(c)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return x(e,t),!0}}runRecovery(e,t,r){let n=null,a=!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i<<1],l=t[1+(i<<1)],u=g?this.stackID(s)+" -> ":"";if(s.deadEnd){if(a)continue;if(a=!0,s.restart(),this.advanceFully(s,r))continue}let c=s.split(),d=u;for(let e=0;c.forceReduce()&&e<10;e++){if(this.advanceFully(c,r))break;g&&(d=this.stackID(c)+" -> ")}for(let e of s.recoverByInsert(o))this.advanceFully(e,r);this.stream.end>s.pos?(l==s.pos&&(l++,o=0),s.recoverByDelete(o,l),x(s,r)):(!n||n.score<s.score)&&(n=s)}return n}stackToTree(e){return e.close(),n.PH.build({buffer:o.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(v||(v=new WeakMap)).get(e);return t||v.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function x(e,t){for(let r=0;r<t.length;r++){let n=t[r];if(n.pos==e.pos&&n.sameState(e))return void(t[r].score<e.score&&(t[r]=e))}t.push(e)}class S{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class _ extends n.iX{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let r=0;r<e.repeatNodeCount;r++)t.push("");let r=Object.keys(e.topRules).map((t=>e.topRules[t][1])),a=[];for(let e=0;e<t.length;e++)a.push([]);function i(e,t,r){a[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=n.uY[e]);for(let r=1;r<t.length;){let n=t[r++];if(n>=0)i(n,e,t[r++]);else{let a=t[r+-n];for(let s=-n;s>0;s--)i(t[r++],e,a);r++}}}this.nodeSet=new n.fI(t.map(((t,i)=>n.Z6.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:a[i],top:r.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=n.cF;let s=l(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(E),this.states=l(e.states,Uint32Array),this.data=l(e.stateData),this.goto=l(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new h(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let n=new w(this,e,t,r);for(let a of this.wrappers)n=a(n,e,t,r);return n}getGoto(e,t,r=!1){let n=this.goto;if(t>=n[0])return-1;for(let a=n[t+1];;){let t=n[a++],i=1&t,s=n[a++];if(i&&r)return s;for(let r=a+(t>>1);a<r;a++)if(n[a]==e)return s;if(i)return-1}}hasAction(e,t){let r=this.data;for(let n=0;n<2;n++)for(let a,i=this.stateSlot(e,n?2:1);;i+=3){if(65535==(a=r[i])){if(1!=r[i+1]){if(2==r[i+1])return $(r,i+2);break}a=r[i=$(r,i+2)]}if(a==t||0==a)return $(r,i+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let r=this.stateSlot(e,4),n=r?t(r):void 0;for(let r=this.stateSlot(e,1);null==n;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=$(this.data,r+2)}n=t($(this.data,r+1))}return n}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=$(this.data,r+2)}if(!(1&this.data[r+2])){let e=this.data[r+1];t.some(((t,r)=>1&r&&t==e))||t.push(this.data[r],e)}}return t}configure(e){let t=Object.assign(Object.create(_.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let r=e.tokenizers.find((e=>e.from==t));return r?r.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((r,n)=>{let a=e.specializers.find((e=>e.from==r.external));if(!a)return r;let i=Object.assign(Object.assign({},r),{external:a.to});return t.specializers[n]=E(i),i}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map((()=>!1));if(e)for(let n of e.split(" ")){let e=t.indexOf(n);e>=0&&(r[e]=!0)}let n=null;for(let e=0;e<t.length;e++)if(!r[e])for(let r,a=this.dialects[t[e]];65535!=(r=this.data[a++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[r]=1;return new S(e,r,n)}static deserialize(e){return new _(e)}}function $(e,t){return e[t]|e[t+1]<<16}function E(e){if(e.external){let t=e.extend?1:0;return(r,n)=>e.external(r,n)<<1|t}return e.get}},9851:(e,t,r)=>{"use strict";r.d(t,{Fn:()=>M,hI:()=>Q,xb:()=>j,df:()=>q,eM:()=>U,Ed:()=>oe,Hl:()=>se,R6:()=>G,Dh:()=>X,m3:()=>Y,x$:()=>V,gw:()=>Z,ww:()=>ne,IC:()=>z,Lf:()=>ie,Ue:()=>W,l4:()=>K,l3:()=>H,$i:()=>le,j_:()=>ee,TG:()=>J,On:()=>A,ek:()=>te,ab:()=>N,d2:()=>ue,c6:()=>F,LW:()=>B,Yq:()=>ae,Fb:()=>re,xB:()=>L,K3:()=>I});var n=r(782),a=r(7203);let i=0;class s{constructor(e,t,r,n){this.name=e,this.set=t,this.base=r,this.modified=n,this.id=i++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r="string"==typeof e?e:"?";if(e instanceof s&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let n=new s(r,[],null,[]);if(n.set.push(n),t)for(let e of t.set)n.set.push(e);return n}static defineModifier(e){let t=new l(e);return e=>e.modified.indexOf(t)>-1?e:l.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let o=0;class l{constructor(e){this.name=e,this.instances=[],this.id=o++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find((r=>{return r.base==e&&(n=t,a=r.modified,n.length==a.length&&n.every(((e,t)=>e==a[t])));var n,a}));if(r)return r;let n=[],a=new s(e.name,n,e,t);for(let e of t)e.instances.push(a);let i=function(e){let t=[[]];for(let r=0;r<e.length;r++)for(let n=0,a=t.length;n<a;n++)t.push(t[n].concat(e[r]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of i)n.push(l.get(t,e));return a}}const u=new a.uY;class c{constructor(e,t,r,n){this.tags=e,this.mode=t,this.context=r,this.next=n}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}c.empty=new c([],2,null);const d=s.define,h=d(),p=d(),f=d(p),m=d(p),g=d(),v=d(g),b=d(g),y=d(),O=d(y),w=d(),x=d(),S=d(),_=d(S),$=d(),E={comment:h,lineComment:d(h),blockComment:d(h),docComment:d(h),name:p,variableName:d(p),typeName:f,tagName:d(f),propertyName:m,attributeName:d(m),className:d(p),labelName:d(p),namespace:d(p),macroName:d(p),literal:g,string:v,docString:d(v),character:d(v),attributeValue:d(v),number:b,integer:d(b),float:d(b),bool:d(g),regexp:d(g),escape:d(g),color:d(g),url:d(g),keyword:w,self:d(w),null:d(w),atom:d(w),unit:d(w),modifier:d(w),operatorKeyword:d(w),controlKeyword:d(w),definitionKeyword:d(w),moduleKeyword:d(w),operator:x,derefOperator:d(x),arithmeticOperator:d(x),logicOperator:d(x),bitwiseOperator:d(x),compareOperator:d(x),updateOperator:d(x),definitionOperator:d(x),typeOperator:d(x),controlOperator:d(x),punctuation:S,separator:d(S),bracket:_,angleBracket:d(_),squareBracket:d(_),paren:d(_),brace:d(_),content:y,heading:O,heading1:d(O),heading2:d(O),heading3:d(O),heading4:d(O),heading5:d(O),heading6:d(O),contentSeparator:d(y),list:d(y),quote:d(y),emphasis:d(y),strong:d(y),link:d(y),monospace:d(y),strikethrough:d(y),inserted:d(),deleted:d(),changed:d(),invalid:d(),meta:$,documentMeta:d($),annotation:d($),processingInstruction:d($),definition:s.defineModifier("definition"),constant:s.defineModifier("constant"),function:s.defineModifier("function"),standard:s.defineModifier("standard"),local:s.defineModifier("local"),special:s.defineModifier("special")};for(let e in E){let t=E[e];t instanceof s&&(t.name=e)}!function(e,t){let r=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)r[e.id]=t.class;else r[t.tag.id]=t.class;let{scope:n,all:a=null}=t||{}}([{tag:E.link,class:"tok-link"},{tag:E.heading,class:"tok-heading"},{tag:E.emphasis,class:"tok-emphasis"},{tag:E.strong,class:"tok-strong"},{tag:E.keyword,class:"tok-keyword"},{tag:E.atom,class:"tok-atom"},{tag:E.bool,class:"tok-bool"},{tag:E.url,class:"tok-url"},{tag:E.labelName,class:"tok-labelName"},{tag:E.inserted,class:"tok-inserted"},{tag:E.deleted,class:"tok-deleted"},{tag:E.literal,class:"tok-literal"},{tag:E.string,class:"tok-string"},{tag:E.number,class:"tok-number"},{tag:[E.regexp,E.escape,E.special(E.string)],class:"tok-string2"},{tag:E.variableName,class:"tok-variableName"},{tag:E.local(E.variableName),class:"tok-variableName tok-local"},{tag:E.definition(E.variableName),class:"tok-variableName tok-definition"},{tag:E.special(E.variableName),class:"tok-variableName2"},{tag:E.definition(E.propertyName),class:"tok-propertyName tok-definition"},{tag:E.typeName,class:"tok-typeName"},{tag:E.namespace,class:"tok-namespace"},{tag:E.className,class:"tok-className"},{tag:E.macroName,class:"tok-macroName"},{tag:E.propertyName,class:"tok-propertyName"},{tag:E.operator,class:"tok-operator"},{tag:E.comment,class:"tok-comment"},{tag:E.meta,class:"tok-meta"},{tag:E.invalid,class:"tok-invalid"},{tag:E.punctuation,class:"tok-punctuation"}]);const P={inf:158,nan:159,bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6},R=(e,t)=>P[e.toLowerCase()]||-1,T={avg:8,atan2:7,bottomk:9,count:10,count_values:11,group:12,max:13,min:14,quantile:15,limitk:16,limit_ratio:17,stddev:18,stdvar:19,sum:20,topk:21,by:22,without:23,and:24,or:25,unless:26,start:27,end:28},C=(e,t)=>T[e.toLowerCase()]||-1,k=function(e){let t=Object.create(null);for(let r in e){let n=e[r];Array.isArray(n)||(n=[n]);for(let e of r.split(" "))if(e){let r=[],a=2,i=e;for(let t=0;;){if("..."==i&&t>0&&t+3==e.length){a=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(i);if(!n)throw new RangeError("Invalid path: "+e);if(r.push("*"==n[0]?"":'"'==n[0][0]?JSON.parse(n[0]):n[0]),t+=n[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){a=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);i=e.slice(t)}let s=r.length-1,o=r[s];if(!o)throw new RangeError("Invalid path: "+e);let l=new c(n,a,s>0?r.slice(0,s):null);t[o]=l.sort(t[o])}}return u.add(t)}({LineComment:E.comment,LabelName:E.labelName,StringLiteral:E.string,NumberDurationLiteral:E.number,NumberDurationLiteralInDurationContext:E.number,Identifier:E.variableName,"Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramAvg HistogramCount HistogramFraction HistogramQuantile HistogramSum DoubleExponentialSmoothing Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc SortByLabel SortByLabelDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year":E.function(E.variableName),"Avg Bottomk Count Count_values Group LimitK LimitRatio Max Min Quantile Stddev Stdvar Sum Topk":E.operatorKeyword,"By Without Bool On Ignoring GroupLeft GroupRight Offset Start End":E.modifier,"And Unless Or":E.logicOperator,"Sub Add Mul Mod Div Atan2 Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At":E.operator,UnaryOp:E.arithmeticOperator,"( )":E.paren,"[ ]":E.squareBracket,"{ }":E.brace,"⚠":E.invalid}),D={__proto__:null,absent_over_time:335,absent:337,abs:339,acos:341,acosh:343,asin:345,asinh:347,atan:349,atanh:351,avg_over_time:353,ceil:355,changes:357,clamp:359,clamp_max:361,clamp_min:363,cos:365,cosh:367,count_over_time:369,days_in_month:371,day_of_month:373,day_of_week:375,day_of_year:377,deg:379,delta:381,deriv:383,exp:385,floor:387,histogram_count:389,histogram_fraction:391,histogram_quantile:393,histogram_stddev:395,histogram_stdvar:397,histogram_sum:399,histogram_avg:401,double_exponential_smoothing:403,hour:405,idelta:407,increase:409,info:411,irate:413,label_replace:415,label_join:417,last_over_time:419,ln:421,log10:423,log2:425,mad_over_time:427,max_over_time:429,min_over_time:431,minute:433,month:435,pi:437,predict_linear:439,present_over_time:441,quantile_over_time:443,rad:445,rate:447,resets:449,round:451,scalar:453,sgn:455,sin:457,sinh:459,sort:461,sort_desc:463,sort_by_label:465,sort_by_label_desc:467,sqrt:469,stddev_over_time:471,stdvar_over_time:473,sum_over_time:475,tan:477,tanh:479,timestamp:481,time:483,vector:485,year:487},I=n.U1.deserialize({version:14,states:"9bOYQPOOO'tQPOOOOQO'#C|'#C|O'yQPO'#C{Q(UQQOOOOQO'#De'#DeO(PQPO'#DdOOQO'#FY'#FYO)cQPO'#F_OYQPO'#F[OYQPO'#F^O0WQSO'#FaO0cQQO'#F`OOQO'#F`'#F`OOQO'#Ft'#FtOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO'#E|'#E|OOQO'#E}'#E}OOQO'#FO'#FOOOQO'#FP'#FPOOQO'#FQ'#FQOOQO'#FR'#FROOQO'#FS'#FSOOQO'#FT'#FTOOQO'#FU'#FUOOQO'#FV'#FVQOQPOOO1|QPO'#C}O2RQPO'#DSO(PQPO,59gO2YQQO,59gO3vQPO,59oO3vQPO,59oO3vQPO,59oO3vQPO,59oO3vQPO,59oO:kQPO,5;rO:kQPO,5;uO:|QPO,5<SOOQO,5:O,5:OOOQO,5;t,5;tO;eQQO,5;vO;lQQO,5;xOOQO'#DQ'#DQO=SQPO'#FbO=bQPO,5;{OOQO,5;{,5;{O=nQPO,5;{OOQO,5;z,5;zO=vQSO'#DOOOQO,59i,59iOOQO,59n,59nO>RQQO,59nOOQO1G/R1G/ROOQO'#DV'#DVO1|QPO'#DWOOQO'#Fx'#FxO>]QPO'#FxOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOOQO'#FX'#FXOD}QPO'#FXOEYQSO1G1^OOQO1G1a1G1aOEbQPO'#FYOOQO'#Fj'#FjOOQO1G1n1G1nOEmQPO1G1nOOQO1G1b1G1bOOQO'#Fc'#FcOErQPO,5;|OEwQPO,5<ROE|QSO1G1gOFXQPO1G1gOOQO1G1g1G1gOOQO,59j,59jOFaQPO,59jOYQPO'#FmOFiQPO1G/YOOQO1G/Y1G/YOFqQPO,59rOOQO,5<d,5<dONmQQO7+$uON}QQO7+$uO!!cQQO7+$uO!!yQQO7+$uO!$bQQO7+$uOOQO,5;s,5;sOOQO7+&x7+&xO!${QPO7+&}O!%SQPO7+'YOOQO1G1h1G1hOOQO1G1m1G1mO!%XQPO,5<YOOQO,5<Y,5<YOOQO7+'R7+'RO!%mQSO7+'ROOQO-E9l-E9lO!%xQSO1G/UO!&TQPO1G/UOOQO1G/U1G/UO!&]QQO,5<XOOQO-E9k-E9kOOQO7+$t7+$tO!&gQPO1G/^OOQO<<Ji<<JiO!-RQPO<<JiOOQO<<Jt<<JtOOQO<<Jm<<JmP!-WQSO'#FnOOQO,5<W,5<WOOQO7+$p7+$pO!-`QSO7+$pOOQO-E9j-E9jOOQO7+$x7+$xOOQOAN@TAN@TOOQO<<H[<<H[P!-kQSO'#Fl",stateData:"!-s~O$gOSmOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQOdQOeQOu^O!Z[O$dVO$eVO$iXO$m_O$n`O$oaO$pbO$qcO$rdO$seO$tfO$ugO$vhO$wiO$xjO$ykO$zlO${mO$|nO$}oO%OpO%PqO%QrO%RsO%StO%TuO%UvO%VwO%WxO%XyO%YzO%Z{O%[|O%]}O%^!OO%_!PO%`!QO%a!RO%b!SO%c!TO%d!UO%e!VO%f!WO%g!XO%h!YO%i!ZO%j![O%k!]O%l!^O%m!_O%n!`O%o!aO%p!bO%q!cO%r!dO%s!eO%t!fO%u!gO%v!hO%w!iO%x!jO%y!kO%z!lO%{!mO%|!nO%}!oO&O!pO&P!qO&Q!rO&R!sO&S!tO&T!uO&U!vO&V!wO&W!xO&X!yO&Y!zO&Z!{O&[!|O&]!}O&_WO&`WO&aVO&dZO~O!Z#OO~Of#POg#PO$i#QO~OU#ZOV#TOh#WOi#XOj#WOx#TO{#TO|#TO}#TO!O#UO!P#UO!Q#VO!R#VO!S#VO!T#VO!U#VO!V#VO$]#[O&^#YO~O$d#^O$e#^O&a#^OW$RXX$RXY$RXZ$RX[$RX]$RX^$RX_$RX`$RXa$RXb$RXc$RXd$RXe$RXu$RX!Z$RX$d$RX$e$RX$i$RX$m$RX$n$RX$o$RX$p$RX$q$RX$r$RX$s$RX$t$RX$u$RX$v$RX$w$RX$x$RX$y$RX$z$RX${$RX$|$RX$}$RX%O$RX%P$RX%Q$RX%R$RX%S$RX%T$RX%U$RX%V$RX%W$RX%X$RX%Y$RX%Z$RX%[$RX%]$RX%^$RX%_$RX%`$RX%a$RX%b$RX%c$RX%d$RX%e$RX%f$RX%g$RX%h$RX%i$RX%j$RX%k$RX%l$RX%m$RX%n$RX%o$RX%p$RX%q$RX%r$RX%s$RX%t$RX%u$RX%v$RX%w$RX%x$RX%y$RX%z$RX%{$RX%|$RX%}$RX&O$RX&P$RX&Q$RX&R$RX&S$RX&T$RX&U$RX&V$RX&W$RX&X$RX&Y$RX&Z$RX&[$RX&]$RX&_$RX&`$RX&a$RX&d$RX~Os#bOu#aO&e#dO~O&dZOU$SXV$SXh$SXi$SXj$SXx$SX{$SX|$SX}$SX!O$SX!P$SX!Q$SX!R$SX!S$SX!T$SX!U$SX!V$SX$]$SX$c$SX&^$SX$k$SX$j$SX~O$i#gO~O$k#iO~PYOf#POg#POUoaVoahoaioajoaxoa{oa|oa}oa!Ooa!Poa!Qoa!Roa!Soa!Toa!Uoa!Voa$]oa$coa&^oa$koa$joa~OP#lOQ#mOR#mOW$lPX$lPY$lPZ$lP[$lP]$lP^$lP_$lP`$lPa$lPb$lPc$lPd$lPe$lPu$lP!Z$lP$d$lP$e$lP$i$lP$m$lP$n$lP$o$lP$p$lP$q$lP$r$lP$s$lP$t$lP$u$lP$v$lP$w$lP$x$lP$y$lP$z$lP${$lP$|$lP$}$lP%O$lP%P$lP%Q$lP%R$lP%S$lP%T$lP%U$lP%V$lP%W$lP%X$lP%Y$lP%Z$lP%[$lP%]$lP%^$lP%_$lP%`$lP%a$lP%b$lP%c$lP%d$lP%e$lP%f$lP%g$lP%h$lP%i$lP%j$lP%k$lP%l$lP%m$lP%n$lP%o$lP%p$lP%q$lP%r$lP%s$lP%t$lP%u$lP%v$lP%w$lP%x$lP%y$lP%z$lP%{$lP%|$lP%}$lP&O$lP&P$lP&Q$lP&R$lP&S$lP&T$lP&U$lP&V$lP&W$lP&X$lP&Y$lP&Z$lP&[$lP&]$lP&_$lP&`$lP&a$lP&d$lP~O$d#uO$e#uO&_#vO&`#vO&a#uO~Ok#zOl#zO$dVO$eVO&_#yO&`#yO&aVO~O$k#}O~P(UOx#TOU$QaV$Qah$Qai$Qaj$Qa{$Qa|$Qa}$Qa!O$Qa!P$Qa!Q$Qa!R$Qa!S$Qa!T$Qa!U$Qa!V$Qa$]$Qa$c$Qa&^$Qa$k$Qa$j$Qa~O!V$OO$W$OO$X$OO$Y$OO~O!V$OO$W$OO$X$OO$Y$OO$j$RO&e$TO~Os$VOu#aO$k$UO~O$j$WO$k$YO~P(UOQ#mOR#mOW$lXX$lXY$lXZ$lX[$lX]$lX^$lX_$lX`$lXa$lXb$lXc$lXd$lXe$lXu$lX!Z$lX$d$lX$e$lX$i$lX$m$lX$n$lX$o$lX$p$lX$q$lX$r$lX$s$lX$t$lX$u$lX$v$lX$w$lX$x$lX$y$lX$z$lX${$lX$|$lX$}$lX%O$lX%P$lX%Q$lX%R$lX%S$lX%T$lX%U$lX%V$lX%W$lX%X$lX%Y$lX%Z$lX%[$lX%]$lX%^$lX%_$lX%`$lX%a$lX%b$lX%c$lX%d$lX%e$lX%f$lX%g$lX%h$lX%i$lX%j$lX%k$lX%l$lX%m$lX%n$lX%o$lX%p$lX%q$lX%r$lX%s$lX%t$lX%u$lX%v$lX%w$lX%x$lX%y$lX%z$lX%{$lX%|$lX%}$lX&O$lX&P$lX&Q$lX&R$lX&S$lX&T$lX&U$lX&V$lX&W$lX&X$lX&Y$lX&Z$lX&[$lX&]$lX&_$lX&`$lX&a$lX&d$lX~O$d$bO$e$bO&a$bO~O&b$cO&c$dO~O$d#^O$e#^O&a#^O~O$i$eO~Ou$fO~Ou$gO~Os#bOu#aO&e$jO~O$j$kO&e$jO~O$j$mO$k$oO~O$j$WO$k$rO~OS$sOT$sOWzaXzaYzaZza[za]za^za_za`zaazabzaczadzaezauza!Zza$dza$eza$iza$mza$nza$oza$pza$qza$rza$sza$tza$uza$vza$wza$xza$yza$zza${za$|za$}za%Oza%Pza%Qza%Rza%Sza%Tza%Uza%Vza%Wza%Xza%Yza%Zza%[za%]za%^za%_za%`za%aza%bza%cza%dza%eza%fza%gza%hza%iza%jza%kza%lza%mza%nza%oza%pza%qza%rza%sza%tza%uza%vza%wza%xza%yza%zza%{za%|za%}za&Oza&Pza&Qza&Rza&Sza&Tza&Uza&Vza&Wza&Xza&Yza&Zza&[za&]za&_za&`za&aza&dza~Ox#TOUwqhwqiwqjwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq$]wq$cwq&^wq$kwq$jwq~OVwq{wq|wq}wq~PMcOV#TO{#TO|#TO}#TO~PMcOV#TOx#TO{#TO|#TO}#TO!O#UO!P#UOUwqhwqiwqjwq$]wq$cwq&^wq$kwq$jwq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~P! _O!Q#VO!R#VO!S#VO!T#VO!U#VO!V#VO~P! _OV#TOh#WOj#WOx#TO{#TO|#TO}#TO!O#UO!P#UO!Q#VO!R#VO!S#VO!T#VO!U#VO!V#VO~OUwqiwq$]wq$cwq&^wq$kwq$jwq~P!#aO&b$tO~P:kO$k$vO~O!V$OO$W$OO$X$OO$Y$OO$j$ba&e$ba~Os#bOu#aO&e$wO~Os$yOu#aO$k$zO~O$j${O$k$zO~O$j$aa$k$aa~P(UO$i#gOWziXziYziZzi[zi]zi^zi_zi`ziazibziczidzieziuzi!Zzi$dzi$ezi$mzi$nzi$ozi$pzi$qzi$rzi$szi$tzi$uzi$vzi$wzi$xzi$yzi$zzi${zi$|zi$}zi%Ozi%Pzi%Qzi%Rzi%Szi%Tzi%Uzi%Vzi%Wzi%Xzi%Yzi%Zzi%[zi%]zi%^zi%_zi%`zi%azi%bzi%czi%dzi%ezi%fzi%gzi%hzi%izi%jzi%kzi%lzi%mzi%nzi%ozi%pzi%qzi%rzi%szi%tzi%uzi%vzi%wzi%xzi%yzi%zzi%{zi%|zi%}zi&Ozi&Pzi&Qzi&Rzi&Szi&Tzi&Uzi&Vzi&Wzi&Xzi&Yzi&Zzi&[zi&]zi&_zi&`zi&azi&dzi~O&b%OO~Os#bOu#aO~Os$yOu#aO$k%PO~Os$yOu#aO~O",goto:")v$mPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$n$z%W%^P%gP%w$nP&Q&XPPPPPPPPPPP$n&c&oP&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o&o$n&{'U$n$n$n$n'e$n'q(Q(YPPP(Q$nP(aP(d(j(pPPPPP(wPPP)ge^OXY#Q#p#q#r#s#t$WeROXY#Q#p#q#r#s#t$WQ#RRR#k#SQ#h#PQ$Z#mR$}$sQ#cZQ$V#gU$h$R$k$xV$y$m${%QQ#SRQ#]UR#k#RZ#o#T#U#V#W#XY#n#T#U#V#W#XR$[#oeUOXY#Q#p#q#r#s#t$WeTOXY#Q#p#q#r#s#t$WQ#w#YQ#x#ZR$u$dd^OXY#Q#p#q#r#s#t$WR#{#[eYOXY#Q#p#q#r#s#t$Wd]OXY#Q#p#q#r#s#t$WR#f[Q#eZV$i$R$k$xQ$P#bT$Q#c$hR#|#[Q$n$VR$|$nQ$X#jR$q$XS$S#c#eR$l$SQSOQ#_XQ#`YQ#j#QQ$]#pQ$^#qQ$_#rQ$`#sQ$a#tR$p$WQ#p#TQ#q#UQ#r#VQ#s#WR#t#X",nodeNames:"⚠ Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile LimitK LimitRatio Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL AggregateExpr AggregateOp AggregateModifier GroupingLabels LabelName QuotedLabelName StringLiteral FunctionCallBody BinaryExpr Pow BoolModifier MatchingModifierClause Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramCount HistogramFraction HistogramQuantile HistogramStdDev HistogramStdVar HistogramSum HistogramAvg DoubleExponentialSmoothing Hour Idelta Increase Info Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MadOverTime MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc SortByLabel SortByLabelDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector NumberDurationLiteralInDurationContext NumberDurationLiteral OffsetExpr ParenExpr SubqueryExpr UnaryExpr UnaryOp VectorSelector LabelMatchers UnquotedLabelMatcher MatchOp EqlSingle EqlRegex NeqRegex QuotedLabelMatcher StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:251,nodeProps:[["group",-12,31,37,39,54,134,136,137,138,139,140,142,150,"Expr"]],propSources:[k],skippedNodes:[0,29],repeatNodeCount:3,tokenData:"4k~RwX^#lpq#lqr$ars$tst&luv'Twx'Yxy({yz)Qz{)V{|)[|})c}!O)h!O!P)o!P!Q*u!Q!R*z!R![+u![!]1O!^!_1z!_!`2X!`!a2n!b!c2{!c!}3Q!}#O3h#P#Q3m#Q#R3r#R#S3Q#S#T3w#T#o3Q#o#p4a#q#r4f#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$g~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!V~~$tO$Y~~$yWu~OY$tZr$trs%cs#O$t#O#P%h#P;'S$t;'S;=`&f<%lO$t~%hOu~~%kRO;'S$t;'S;=`%t;=`O$t~%yXu~OY$tZr$trs%cs#O$t#O#P%h#P;'S$t;'S;=`&f;=`<%l$t<%lO$t~&iP;=`<%l$t~&qSm~OY&lZ;'S&l;'S;=`&}<%lO&l~'QP;=`<%l&l~'YO}~~'_Wu~OY'YZw'Ywx%cx#O'Y#O#P'w#P;'S'Y;'S;=`(u<%lO'Y~'zRO;'S'Y;'S;=`(T;=`O'Y~(YXu~OY'YZw'Ywx%cx#O'Y#O#P'w#P;'S'Y;'S;=`(u;=`<%l'Y<%lO'Y~(xP;=`<%l'Y~)QO$i~~)VO$k~~)[O{~R)cO&`P!OQ~)hO$j~R)oO&_P!PQ~)rP!Q![)u~)zS&a~!Q![)u!g!h*W#R#S)o#X#Y*W~*ZR{|*d}!O*d!Q![*j~*gP!Q![*j~*oQ&a~!Q![*j#R#S*d~*zO|~~+P[&a~!O!P)o!Q![+u!g!h*W#R#S,m#W#X-X#X#Y*W#[#]-p#a#b.U#g#h.x#k#l/Z#l#m0d#m#n/u~+zZ&a~!O!P)o!Q![+u!g!h*W#R#S,m#W#X-X#X#Y*W#[#]-p#a#b.U#g#h.x#k#l/Z#m#n/u~,pP!Q![,s~,xT&a~!O!P)o!Q![,s!g!h*W#R#S,m#X#Y*W~-^P&a~!Q![-a~-dS!Q![-a#[#]-p#a#b.U#g#h.x~-uP&a~!Q![-x~-{R!Q![-x#a#b.U#g#h.x~.ZQ&a~!Q![.a#g#h.s~.dR!Q![.a#a#b.m#g#h.x~.pP#g#h.s~.xO&a~~.}P&a~!Q![/Q~/TQ!Q![/Q#a#b.m~/`P&a~!Q![/c~/fT!Q![/c#W#X-X#[#]-p#a#b.U#g#h.x~/zP&a~!Q![/}~0QU!Q![/}#W#X-X#[#]-p#a#b.U#g#h.x#k#l/Z~0gR!Q![0p!c!i0p#T#Z0p~0uR&a~!Q![0p!c!i0p#T#Z0pV1VT&cS!ZR!Q![1f![!]1f!c!}1f#R#S1f#T#o1fR1kT!ZR!Q![1f![!]1f!c!}1f#R#S1f#T#o1f~2PP!U~!_!`2S~2XO!T~~2^Q$WP!_!`2d#r#s2iQ2iO!QQ~2nO$X~~2sP!S~!_!`2v~2{O!R~~3QO$]~V3XT!ZRsS!Q![3Q![!]1f!c!}3Q#R#S3Q#T#o3Q~3mO&^~~3rO&b~~3wOx~~3zTO#S3w#S#T%c#T;'S3w;'S;=`4Z<%lO3w~4^P;=`<%l3w~4fO&d~~4kO&e~",tokenizers:[0,1,2],topRules:{PromQL:[0,30],MetricName:[1,153]},specialized:[{term:57,get:(e,t)=>R(e)<<1,external:R},{term:57,get:(e,t)=>C(e)<<1|1,external:C,extend:!0},{term:57,get:e=>D[e]||-1}],tokenPrec:0}),A=3,L=23,N=30,M=31,j=32,Q=33,V=34,z=35,F=36,B=37,X=38,q=39,U=41,W=42,H=53,G=54,Y=55,Z=57,K=134,J=135,ee=136,te=138,re=142,ne=143,ae=144,ie=145,se=146,oe=147,le=148,ue=149},7348:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});class n{value;next;constructor(e){this.value=e}}class a{#e;#t;#r;constructor(){this.clear()}enqueue(e){const t=new n(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#r++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#r--,e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#r=0}get size(){return this.#r}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}*drain(){for(;this.#e;)yield this.dequeue()}}function i(e){o(e);const t=new a;let r=0;const n=()=>{r<e&&t.size>0&&(t.dequeue()(),r++)},i=async(e,t,a)=>{const i=(async()=>e(...a))();t(i);try{await i}catch{}r--,n()},s=(a,...s)=>new Promise((o=>{((a,s,o)=>{new Promise((e=>{t.enqueue(e)})).then(i.bind(void 0,a,s,o)),(async()=>{await Promise.resolve(),r<e&&n()})()})(a,o,s)}));return Object.defineProperties(s,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(a){o(a),e=a,queueMicrotask((()=>{for(;r<e&&t.size>0;)n()}))}}}),s}function s(e,t){const{concurrency:r}=t,n=i(r);return(...t)=>n((()=>e(...t)))}function o(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}},4629:(e,t,r)=>{"use strict";r.d(t,{AQ:()=>h,C6:()=>a,Cl:()=>i,Ju:()=>l,N3:()=>d,YH:()=>o,fX:()=>c,sH:()=>s,xN:()=>p,zs:()=>u});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function s(e,t,r,n){return new(r||(r=Promise))((function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function c(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function h(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),i=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){a[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||o(e,t)}))},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=a[e](t)).value instanceof d?Promise.resolve(r.value.v).then(l,u):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function p(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=l(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,a){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,a,(t=e[r](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=256.js.map?_cache=91a505d2def3511566fa